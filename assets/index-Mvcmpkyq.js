(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function zc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},yr=[],yn=()=>{},Ap=()=>!1,xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wc=t=>t.startsWith("onUpdate:"),Nt=Object.assign,Qc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},tv=Object.prototype.hasOwnProperty,Le=(t,e)=>tv.call(t,e),me=Array.isArray,vr=t=>oo(t)==="[object Map]",La=t=>oo(t)==="[object Set]",tf=t=>oo(t)==="[object Date]",Te=t=>typeof t=="function",it=t=>typeof t=="string",ln=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",wp=t=>(je(t)||Te(t))&&Te(t.then)&&Te(t.catch),Rp=Object.prototype.toString,oo=t=>Rp.call(t),nv=t=>oo(t).slice(8,-1),Sp=t=>oo(t)==="[object Object]",Yc=t=>it(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ri=zc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ma=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},sv=/-\w/g,Xt=Ma(t=>t.replace(sv,e=>e.slice(1).toUpperCase())),rv=/\B([A-Z])/g,tr=Ma(t=>t.replace(rv,"-$1").toLowerCase()),Fa=Ma(t=>t.charAt(0).toUpperCase()+t.slice(1)),Cl=Ma(t=>t?`on${Fa(t)}`:""),ms=(t,e)=>!Object.is(t,e),qo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},bp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Xc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let nf;const Ua=()=>nf||(nf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ba(t){if(me(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=it(s)?lv(s):Ba(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(it(t)||je(t))return t}const iv=/;(?![^(]*\))/g,ov=/:([^]+)/,av=/\/\*[^]*?\*\//g;function lv(t){const e={};return t.replace(av,"").split(iv).forEach(n=>{if(n){const s=n.split(ov);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function br(t){let e="";if(it(t))e=t;else if(me(t))for(let n=0;n<t.length;n++){const s=br(t[n]);s&&(e+=s+" ")}else if(je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const cv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uv=zc(cv);function Cp(t){return!!t||t===""}function hv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Cr(t[s],e[s]);return n}function Cr(t,e){if(t===e)return!0;let n=tf(t),s=tf(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ln(t),s=ln(e),n||s)return t===e;if(n=me(t),s=me(e),n||s)return n&&s?hv(t,e):!1;if(n=je(t),s=je(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Cr(t[o],e[o]))return!1}}return String(t)===String(e)}function Pp(t,e){return t.findIndex(n=>Cr(n,e))}const kp=t=>!!(t&&t.__v_isRef===!0),ce=t=>it(t)?t:t==null?"":me(t)||je(t)&&(t.toString===Rp||!Te(t.toString))?kp(t)?ce(t.value):JSON.stringify(t,Np,2):String(t),Np=(t,e)=>kp(e)?Np(t,e.value):vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Pl(s,i)+" =>"]=r,n),{})}:La(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Pl(n))}:ln(e)?Pl(e):je(e)&&!me(e)&&!Sp(e)?String(e):e,Pl=(t,e="")=>{var n;return ln(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ut;class fv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ut,!e&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ut;try{return Ut=this,e()}finally{Ut=n}}}on(){++this._on===1&&(this.prevScope=Ut,Ut=this)}off(){this._on>0&&--this._on===0&&(Ut=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function dv(){return Ut}let qe;const kl=new WeakSet;class Dp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ut&&Ut.active&&Ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,kl.has(this)&&(kl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Op(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,sf(this),xp(this);const e=qe,n=on;qe=this,on=!0;try{return this.fn()}finally{Lp(this),qe=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)eu(e);this.deps=this.depsTail=void 0,sf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?kl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){nc(this)&&this.run()}get dirty(){return nc(this)}}let Vp=0,Si,bi;function Op(t,e=!1){if(t.flags|=8,e){t.next=bi,bi=t;return}t.next=Si,Si=t}function Jc(){Vp++}function Zc(){if(--Vp>0)return;if(bi){let e=bi;for(bi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Si;){let e=Si;for(Si=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function xp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),eu(s),pv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function nc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Mp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Mp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ui)||(t.globalVersion=Ui,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!nc(t))))return;t.flags|=2;const e=t.dep,n=qe,s=on;qe=t,on=!0;try{xp(t);const r=t.fn(t._value);(e.version===0||ms(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{qe=n,on=s,Lp(t),t.flags&=-3}}function eu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)eu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function pv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const Fp=[];function Bn(){Fp.push(on),on=!1}function $n(){const t=Fp.pop();on=t===void 0?!0:t}function sf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=qe;qe=void 0;try{e()}finally{qe=n}}}let Ui=0;class mv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!qe||!on||qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==qe)n=this.activeLink=new mv(qe,this),qe.deps?(n.prevDep=qe.depsTail,qe.depsTail.nextDep=n,qe.depsTail=n):qe.deps=qe.depsTail=n,Up(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=qe.depsTail,n.nextDep=void 0,qe.depsTail.nextDep=n,qe.depsTail=n,qe.deps===n&&(qe.deps=s)}return n}trigger(e){this.version++,Ui++,this.notify(e)}notify(e){Jc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zc()}}}function Up(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Up(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const sc=new WeakMap,js=Symbol(""),rc=Symbol(""),Bi=Symbol("");function bt(t,e,n){if(on&&qe){let s=sc.get(t);s||sc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new tu),r.map=s,r.key=n),r.track()}}function Dn(t,e,n,s,r,i){const o=sc.get(t);if(!o){Ui++;return}const l=c=>{c&&c.trigger()};if(Jc(),e==="clear")o.forEach(l);else{const c=me(t),h=c&&Yc(n);if(c&&n==="length"){const f=Number(s);o.forEach((p,m)=>{(m==="length"||m===Bi||!ln(m)&&m>=f)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Bi)),e){case"add":c?h&&l(o.get("length")):(l(o.get(js)),vr(t)&&l(o.get(rc)));break;case"delete":c||(l(o.get(js)),vr(t)&&l(o.get(rc)));break;case"set":vr(t)&&l(o.get(js));break}}Zc()}function hr(t){const e=xe(t);return e===t?e:(bt(e,"iterate",Bi),Yt(t)?e:e.map(cn))}function $a(t){return bt(t=xe(t),"iterate",Bi),t}function os(t,e){return jn(t)?qs(t)?Pr(cn(e)):Pr(e):cn(e)}const gv={__proto__:null,[Symbol.iterator](){return Nl(this,Symbol.iterator,t=>os(this,t))},concat(...t){return hr(this).concat(...t.map(e=>me(e)?hr(e):e))},entries(){return Nl(this,"entries",t=>(t[1]=os(this,t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(s=>os(this,s)),arguments)},find(t,e){return Pn(this,"find",t,e,n=>os(this,n),arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,n=>os(this,n),arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Dl(this,"includes",t)},indexOf(...t){return Dl(this,"indexOf",t)},join(t){return hr(this).join(t)},lastIndexOf(...t){return Dl(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return pi(this,"pop")},push(...t){return pi(this,"push",t)},reduce(t,...e){return rf(this,"reduce",t,e)},reduceRight(t,...e){return rf(this,"reduceRight",t,e)},shift(){return pi(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return pi(this,"splice",t)},toReversed(){return hr(this).toReversed()},toSorted(t){return hr(this).toSorted(t)},toSpliced(...t){return hr(this).toSpliced(...t)},unshift(...t){return pi(this,"unshift",t)},values(){return Nl(this,"values",t=>os(this,t))}};function Nl(t,e,n){const s=$a(t),r=s[e]();return s!==t&&!Yt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const _v=Array.prototype;function Pn(t,e,n,s,r,i){const o=$a(t),l=o!==t&&!Yt(t),c=o[e];if(c!==_v[e]){const p=c.apply(t,i);return l?cn(p):p}let h=n;o!==t&&(l?h=function(p,m){return n.call(this,os(t,p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const f=c.call(o,h,s);return l&&r?r(f):f}function rf(t,e,n,s){const r=$a(t);let i=n;return r!==t&&(Yt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,os(t,l),c,t)}),r[e](i,...s)}function Dl(t,e,n){const s=xe(t);bt(s,"iterate",Bi);const r=s[e](...n);return(r===-1||r===!1)&&ru(n[0])?(n[0]=xe(n[0]),s[e](...n)):r}function pi(t,e,n=[]){Bn(),Jc();const s=xe(t)[e].apply(t,n);return Zc(),$n(),s}const yv=zc("__proto__,__v_isRef,__isVue"),Bp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ln));function vv(t){ln(t)||(t=String(t));const e=xe(this);return bt(e,"has",t),e.hasOwnProperty(t)}class $p{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Pv:Kp:i?Hp:qp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=me(e);if(!r){let c;if(o&&(c=gv[n]))return c;if(n==="hasOwnProperty")return vv}const l=Reflect.get(e,n,kt(e)?e:s);if((ln(n)?Bp.has(n):yv(n))||(r||bt(e,"get",n),i))return l;if(kt(l)){const c=o&&Yc(n)?l:l.value;return r&&je(c)?oc(c):c}return je(l)?r?oc(l):ja(l):l}}class jp extends $p{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=me(e)&&Yc(n);if(!this._isShallow){const h=jn(i);if(!Yt(s)&&!jn(s)&&(i=xe(i),s=xe(s)),!o&&kt(i)&&!kt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Le(e,n),c=Reflect.set(e,n,s,kt(e)?e:r);return e===xe(r)&&(l?ms(s,i)&&Dn(e,"set",n,s):Dn(e,"add",n,s)),c}deleteProperty(e,n){const s=Le(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Dn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!ln(n)||!Bp.has(n))&&bt(e,"has",n),s}ownKeys(e){return bt(e,"iterate",me(e)?"length":js),Reflect.ownKeys(e)}}class Ev extends $p{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Tv=new jp,Iv=new Ev,Av=new jp(!0);const ic=t=>t,Do=t=>Reflect.getPrototypeOf(t);function wv(t,e,n){return function(...s){const r=this.__v_raw,i=xe(r),o=vr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),f=n?ic:e?Pr:cn;return!e&&bt(i,"iterate",c?rc:js),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Vo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Rv(t,e){const n={get(r){const i=this.__v_raw,o=xe(i),l=xe(r);t||(ms(r,l)&&bt(o,"get",r),bt(o,"get",l));const{has:c}=Do(o),h=e?ic:t?Pr:cn;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&bt(xe(r),"iterate",js),r.size},has(r){const i=this.__v_raw,o=xe(i),l=xe(r);return t||(ms(r,l)&&bt(o,"has",r),bt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=xe(l),h=e?ic:t?Pr:cn;return!t&&bt(c,"iterate",js),l.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return Nt(n,t?{add:Vo("add"),set:Vo("set"),delete:Vo("delete"),clear:Vo("clear")}:{add(r){!e&&!Yt(r)&&!jn(r)&&(r=xe(r));const i=xe(this);return Do(i).has.call(i,r)||(i.add(r),Dn(i,"add",r,r)),this},set(r,i){!e&&!Yt(i)&&!jn(i)&&(i=xe(i));const o=xe(this),{has:l,get:c}=Do(o);let h=l.call(o,r);h||(r=xe(r),h=l.call(o,r));const f=c.call(o,r);return o.set(r,i),h?ms(i,f)&&Dn(o,"set",r,i):Dn(o,"add",r,i),this},delete(r){const i=xe(this),{has:o,get:l}=Do(i);let c=o.call(i,r);c||(r=xe(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&Dn(i,"delete",r,void 0),h},clear(){const r=xe(this),i=r.size!==0,o=r.clear();return i&&Dn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=wv(r,t,e)}),n}function nu(t,e){const n=Rv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Le(n,r)&&r in s?n:s,r,i)}const Sv={get:nu(!1,!1)},bv={get:nu(!1,!0)},Cv={get:nu(!0,!1)};const qp=new WeakMap,Hp=new WeakMap,Kp=new WeakMap,Pv=new WeakMap;function kv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nv(t){return t.__v_skip||!Object.isExtensible(t)?0:kv(nv(t))}function ja(t){return jn(t)?t:su(t,!1,Tv,Sv,qp)}function Gp(t){return su(t,!1,Av,bv,Hp)}function oc(t){return su(t,!0,Iv,Cv,Kp)}function su(t,e,n,s,r){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Nv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function qs(t){return jn(t)?qs(t.__v_raw):!!(t&&t.__v_isReactive)}function jn(t){return!!(t&&t.__v_isReadonly)}function Yt(t){return!!(t&&t.__v_isShallow)}function ru(t){return t?!!t.__v_raw:!1}function xe(t){const e=t&&t.__v_raw;return e?xe(e):t}function Dv(t){return!Le(t,"__v_skip")&&Object.isExtensible(t)&&bp(t,"__v_skip",!0),t}const cn=t=>je(t)?ja(t):t,Pr=t=>je(t)?oc(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function Ae(t){return zp(t,!1)}function Vv(t){return zp(t,!0)}function zp(t,e){return kt(t)?t:new Ov(t,e)}class Ov{constructor(e,n){this.dep=new tu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:xe(e),this._value=n?e:cn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Yt(e)||jn(e);e=s?e:xe(e),ms(e,n)&&(this._rawValue=e,this._value=s?e:cn(e),this.dep.trigger())}}function et(t){return kt(t)?t.value:t}const xv={get:(t,e,n)=>e==="__v_raw"?t:et(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Wp(t){return qs(t)?t:new Proxy(t,xv)}class Lv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new tu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ui-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return Op(this,!0),!0}get value(){const e=this.dep.track();return Mp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Mv(t,e,n=!1){let s,r;return Te(t)?s=t:(s=t.get,r=t.set),new Lv(s,r,n)}const Oo={},ra=new WeakMap;let Ls;function Fv(t,e=!1,n=Ls){if(n){let s=ra.get(n);s||ra.set(n,s=[]),s.push(t)}}function Uv(t,e,n=Be){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=G=>r?G:Yt(G)||r===!1||r===0?Vn(G,1):Vn(G);let f,p,m,_,k=!1,D=!1;if(kt(t)?(p=()=>t.value,k=Yt(t)):qs(t)?(p=()=>h(t),k=!0):me(t)?(D=!0,k=t.some(G=>qs(G)||Yt(G)),p=()=>t.map(G=>{if(kt(G))return G.value;if(qs(G))return h(G);if(Te(G))return c?c(G,2):G()})):Te(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){Bn();try{m()}finally{$n()}}const G=Ls;Ls=f;try{return c?c(t,3,[_]):t(_)}finally{Ls=G}}:p=yn,e&&r){const G=p,de=r===!0?1/0:r;p=()=>Vn(G(),de)}const V=dv(),U=()=>{f.stop(),V&&V.active&&Qc(V.effects,f)};if(i&&e){const G=e;e=(...de)=>{G(...de),U()}}let B=D?new Array(t.length).fill(Oo):Oo;const Q=G=>{if(!(!(f.flags&1)||!f.dirty&&!G))if(e){const de=f.run();if(r||k||(D?de.some((Ee,w)=>ms(Ee,B[w])):ms(de,B))){m&&m();const Ee=Ls;Ls=f;try{const w=[de,B===Oo?void 0:D&&B[0]===Oo?[]:B,_];B=de,c?c(e,3,w):e(...w)}finally{Ls=Ee}}}else f.run()};return l&&l(Q),f=new Dp(p),f.scheduler=o?()=>o(Q,!1):Q,_=G=>Fv(G,!1,f),m=f.onStop=()=>{const G=ra.get(f);if(G){if(c)c(G,4);else for(const de of G)de();ra.delete(f)}},e?s?Q(!0):B=f.run():o?o(Q.bind(null,!0),!0):f.run(),U.pause=f.pause.bind(f),U.resume=f.resume.bind(f),U.stop=U,U}function Vn(t,e=1/0,n){if(e<=0||!je(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,kt(t))Vn(t.value,e,n);else if(me(t))for(let s=0;s<t.length;s++)Vn(t[s],e,n);else if(La(t)||vr(t))t.forEach(s=>{Vn(s,e,n)});else if(Sp(t)){for(const s in t)Vn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Vn(t[s],e,n)}return t}function ao(t,e,n,s){try{return s?t(...s):t()}catch(r){qa(r,e,n)}}function Rn(t,e,n,s){if(Te(t)){const r=ao(t,e,n,s);return r&&wp(r)&&r.catch(i=>{qa(i,e,n)}),r}if(me(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Rn(t[i],e,n,s));return r}}function qa(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,c,h)===!1)return}l=l.parent}if(i){Bn(),ao(i,null,10,[t,c,h]),$n();return}}Bv(t,n,r,s,o)}function Bv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Mt=[];let pn=-1;const Er=[];let as=null,fr=0;const Qp=Promise.resolve();let ia=null;function Yp(t){const e=ia||Qp;return t?e.then(this?t.bind(this):t):e}function $v(t){let e=pn+1,n=Mt.length;for(;e<n;){const s=e+n>>>1,r=Mt[s],i=$i(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function iu(t){if(!(t.flags&1)){const e=$i(t),n=Mt[Mt.length-1];!n||!(t.flags&2)&&e>=$i(n)?Mt.push(t):Mt.splice($v(e),0,t),t.flags|=1,Xp()}}function Xp(){ia||(ia=Qp.then(Zp))}function jv(t){me(t)?Er.push(...t):as&&t.id===-1?as.splice(fr+1,0,t):t.flags&1||(Er.push(t),t.flags|=1),Xp()}function of(t,e,n=pn+1){for(;n<Mt.length;n++){const s=Mt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Mt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Jp(t){if(Er.length){const e=[...new Set(Er)].sort((n,s)=>$i(n)-$i(s));if(Er.length=0,as){as.push(...e);return}for(as=e,fr=0;fr<as.length;fr++){const n=as[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}as=null,fr=0}}const $i=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zp(t){try{for(pn=0;pn<Mt.length;pn++){const e=Mt[pn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ao(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;pn<Mt.length;pn++){const e=Mt[pn];e&&(e.flags&=-2)}pn=-1,Mt.length=0,Jp(),ia=null,(Mt.length||Er.length)&&Zp()}}let vt=null,em=null;function oa(t){const e=vt;return vt=t,em=t&&t.type.__scopeId||null,e}function gn(t,e=vt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ca(-1);const i=oa(e);let o;try{o=t(...r)}finally{oa(i),s._d&&ca(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function mi(t,e){if(vt===null)return t;const n=za(vt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Be]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Vn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Os(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Bn(),Rn(c,n,8,[t.el,l,t,e]),$n())}}function Ho(t,e){if(Pt){let n=Pt.provides;const s=Pt.parent&&Pt.parent.provides;s===n&&(n=Pt.provides=Object.create(s)),n[t]=e}}function Mn(t,e,n=!1){const s=qE();if(s||Ir){let r=Ir?Ir._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Te(e)?e.call(s&&s.proxy):e}}const qv=Symbol.for("v-scx"),Hv=()=>Mn(qv);function Kv(t,e){return ou(t,null,e)}function Hs(t,e,n){return ou(t,e,n)}function ou(t,e,n=Be){const{immediate:s,deep:r,flush:i,once:o}=n,l=Nt({},n),c=e&&s||!e&&i!=="post";let h;if(Ki){if(i==="sync"){const _=Hv();h=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=yn,_.resume=yn,_.pause=yn,_}}const f=Pt;l.call=(_,k,D)=>Rn(_,f,k,D);let p=!1;i==="post"?l.scheduler=_=>{Ht(_,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(_,k)=>{k?_():iu(_)}),l.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=Uv(t,e,l);return Ki&&(h?h.push(m):c&&m()),m}function Gv(t,e,n){const s=this.proxy,r=it(t)?t.includes(".")?tm(s,t):()=>s[t]:t.bind(s,s);let i;Te(e)?i=e:(i=e.handler,n=e);const o=lo(this),l=ou(r,i.bind(s),n);return o(),l}function tm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const zv=Symbol("_vte"),Wv=t=>t.__isTeleport,Qv=Symbol("_leaveCb");function au(t,e){t.shapeFlag&6&&t.component?(t.transition=e,au(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nm(t,e){return Te(t)?Nt({name:t.name},e,{setup:t}):t}function sm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const aa=new WeakMap;function Ci(t,e,n,s,r=!1){if(me(t)){t.forEach((k,D)=>Ci(k,e&&(me(e)?e[D]:e),n,s,r));return}if(Tr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ci(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?za(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,f=l.refs===Be?l.refs={}:l.refs,p=l.setupState,m=xe(p),_=p===Be?Ap:k=>Le(m,k);if(h!=null&&h!==c){if(af(e),it(h))f[h]=null,_(h)&&(p[h]=null);else if(kt(h)){h.value=null;const k=e;k.k&&(f[k.k]=null)}}if(Te(c))ao(c,l,12,[o,f]);else{const k=it(c),D=kt(c);if(k||D){const V=()=>{if(t.f){const U=k?_(c)?p[c]:f[c]:c.value;if(r)me(U)&&Qc(U,i);else if(me(U))U.includes(i)||U.push(i);else if(k)f[c]=[i],_(c)&&(p[c]=f[c]);else{const B=[i];c.value=B,t.k&&(f[t.k]=B)}}else k?(f[c]=o,_(c)&&(p[c]=o)):D&&(c.value=o,t.k&&(f[t.k]=o))};if(o){const U=()=>{V(),aa.delete(t)};U.id=-1,aa.set(t,U),Ht(U,n)}else af(t),V()}}}function af(t){const e=aa.get(t);e&&(e.flags|=8,aa.delete(t))}Ua().requestIdleCallback;Ua().cancelIdleCallback;const Tr=t=>!!t.type.__asyncLoader,rm=t=>t.type.__isKeepAlive;function Yv(t,e){im(t,"a",e)}function Xv(t,e){im(t,"da",e)}function im(t,e,n=Pt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ha(e,s,n),n){let r=n.parent;for(;r&&r.parent;)rm(r.parent.vnode)&&Jv(s,e,n,r),r=r.parent}}function Jv(t,e,n,s){const r=Ha(e,t,s,!0);am(()=>{Qc(s[e],r)},n)}function Ha(t,e,n=Pt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Bn();const l=lo(n),c=Rn(e,n,t,o);return l(),$n(),c});return s?r.unshift(i):r.push(i),i}}const Qn=t=>(e,n=Pt)=>{(!Ki||t==="sp")&&Ha(t,(...s)=>e(...s),n)},Zv=Qn("bm"),om=Qn("m"),eE=Qn("bu"),tE=Qn("u"),nE=Qn("bum"),am=Qn("um"),sE=Qn("sp"),rE=Qn("rtg"),iE=Qn("rtc");function oE(t,e=Pt){Ha("ec",t,e)}const aE="components";function ji(t,e){return cE(aE,t,!0,e)||t}const lE=Symbol.for("v-ndc");function cE(t,e,n=!0,s=!1){const r=vt||Pt;if(r){const i=r.type;{const l=WE(i,!1);if(l&&(l===e||l===Xt(e)||l===Fa(Xt(e))))return i}const o=lf(r[t]||i[t],e)||lf(r.appContext[t],e);return!o&&s?i:o}}function lf(t,e){return t&&(t[e]||t[Xt(e)]||t[Fa(Xt(e))])}function is(t,e,n,s){let r;const i=n,o=me(t);if(o||it(t)){const l=o&&qs(t);let c=!1,h=!1;l&&(c=!Yt(t),h=jn(t),t=$a(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(c?h?Pr(cn(t[f])):cn(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(je(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];r[c]=e(t[f],f,c,i)}}else r=[];return r}function cf(t,e,n={},s,r){if(vt.ce||vt.parent&&Tr(vt.parent)&&vt.parent.ce){const h=Object.keys(n).length>0;return e!=="default"&&(n.name=e),z(),kr(Ze,null,[$e("slot",n,s)],h?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),z();const o=i&&lm(i(n)),l=n.key||o&&o.key,c=kr(Ze,{key:(l&&!ln(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function lm(t){return t.some(e=>Hi(e)?!(e.type===qn||e.type===Ze&&!lm(e.children)):!0)?t:null}const ac=t=>t?bm(t)?za(t):ac(t.parent):null,Pi=Nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ac(t.parent),$root:t=>ac(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>um(t),$forceUpdate:t=>t.f||(t.f=()=>{iu(t.update)}),$nextTick:t=>t.n||(t.n=Yp.bind(t.proxy)),$watch:t=>Gv.bind(t)}),Vl=(t,e)=>t!==Be&&!t.__isScriptSetup&&Le(t,e),uE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Vl(s,e))return o[e]=1,s[e];if(r!==Be&&Le(r,e))return o[e]=2,r[e];if(Le(i,e))return o[e]=3,i[e];if(n!==Be&&Le(n,e))return o[e]=4,n[e];lc&&(o[e]=0)}}const h=Pi[e];let f,p;if(h)return e==="$attrs"&&bt(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==Be&&Le(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Le(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Vl(r,e)?(r[e]=n,!0):s!==Be&&Le(s,e)?(s[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Be&&l[0]!=="$"&&Le(t,l)||Vl(e,l)||Le(i,l)||Le(s,l)||Le(Pi,l)||Le(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function uf(t){return me(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let lc=!0;function hE(t){const e=um(t),n=t.proxy,s=t.ctx;lc=!1,e.beforeCreate&&hf(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:_,updated:k,activated:D,deactivated:V,beforeDestroy:U,beforeUnmount:B,destroyed:Q,unmounted:G,render:de,renderTracked:Ee,renderTriggered:w,errorCaptured:y,serverPrefetch:I,expose:S,inheritAttrs:R,components:b,directives:E,filters:ie}=e;if(h&&fE(h,s,null),o)for(const Ve in o){const we=o[Ve];Te(we)&&(s[Ve]=we.bind(n))}if(r){const Ve=r.call(n,n);je(Ve)&&(t.data=ja(Ve))}if(lc=!0,i)for(const Ve in i){const we=i[Ve],Tt=Te(we)?we.bind(n,n):Te(we.get)?we.get.bind(n,n):yn,zt=!Te(we)&&Te(we.set)?we.set.bind(n):yn,Vt=ge({get:Tt,set:zt});Object.defineProperty(s,Ve,{enumerable:!0,configurable:!0,get:()=>Vt.value,set:q=>Vt.value=q})}if(l)for(const Ve in l)cm(l[Ve],s,n,Ve);if(c){const Ve=Te(c)?c.call(n):c;Reflect.ownKeys(Ve).forEach(we=>{Ho(we,Ve[we])})}f&&hf(f,t,"c");function Ne(Ve,we){me(we)?we.forEach(Tt=>Ve(Tt.bind(n))):we&&Ve(we.bind(n))}if(Ne(Zv,p),Ne(om,m),Ne(eE,_),Ne(tE,k),Ne(Yv,D),Ne(Xv,V),Ne(oE,y),Ne(iE,Ee),Ne(rE,w),Ne(nE,B),Ne(am,G),Ne(sE,I),me(S))if(S.length){const Ve=t.exposed||(t.exposed={});S.forEach(we=>{Object.defineProperty(Ve,we,{get:()=>n[we],set:Tt=>n[we]=Tt,enumerable:!0})})}else t.exposed||(t.exposed={});de&&t.render===yn&&(t.render=de),R!=null&&(t.inheritAttrs=R),b&&(t.components=b),E&&(t.directives=E),I&&sm(t)}function fE(t,e,n=yn){me(t)&&(t=cc(t));for(const s in t){const r=t[s];let i;je(r)?"default"in r?i=Mn(r.from||s,r.default,!0):i=Mn(r.from||s):i=Mn(r),kt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function hf(t,e,n){Rn(me(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function cm(t,e,n,s){let r=s.includes(".")?tm(n,s):()=>n[s];if(it(t)){const i=e[t];Te(i)&&Hs(r,i)}else if(Te(t))Hs(r,t.bind(n));else if(je(t))if(me(t))t.forEach(i=>cm(i,e,n,s));else{const i=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(i)&&Hs(r,i,t)}}function um(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>la(c,h,o,!0)),la(c,e,o)),je(e)&&i.set(e,c),c}function la(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&la(t,i,n,!0),r&&r.forEach(o=>la(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=dE[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const dE={data:ff,props:df,emits:df,methods:Ei,computed:Ei,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Ei,directives:Ei,watch:mE,provide:ff,inject:pE};function ff(t,e){return e?t?function(){return Nt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function pE(t,e){return Ei(cc(t),cc(e))}function cc(t){if(me(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ei(t,e){return t?Nt(Object.create(null),t,e):e}function df(t,e){return t?me(t)&&me(e)?[...new Set([...t,...e])]:Nt(Object.create(null),uf(t),uf(e??{})):e}function mE(t,e){if(!t)return e;if(!e)return t;const n=Nt(Object.create(null),t);for(const s in e)n[s]=xt(t[s],e[s]);return n}function hm(){return{app:null,config:{isNativeTag:Ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gE=0;function _E(t,e){return function(s,r=null){Te(s)||(s=Nt({},s)),r!=null&&!je(r)&&(r=null);const i=hm(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:gE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:YE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&Te(f.install)?(o.add(f),f.install(h,...p)):Te(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!c){const _=h._ceVNode||$e(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),c=!0,h._container=f,f.__vue_app__=h,za(_.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Rn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Ir;Ir=h;try{return f()}finally{Ir=p}}};return h}}let Ir=null;const yE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xt(e)}Modifiers`]||t[`${tr(e)}Modifiers`];function vE(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Be;let r=n;const i=e.startsWith("update:"),o=i&&yE(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>it(f)?f.trim():f)),o.number&&(r=n.map(Xc)));let l,c=s[l=Cl(e)]||s[l=Cl(Xt(e))];!c&&i&&(c=s[l=Cl(tr(e))]),c&&Rn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Rn(h,t,6,r)}}const EE=new WeakMap;function fm(t,e,n=!1){const s=n?EE:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Te(t)){const c=h=>{const f=fm(h,e,!0);f&&(l=!0,Nt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(je(t)&&s.set(t,null),null):(me(i)?i.forEach(c=>o[c]=null):Nt(o,i),je(t)&&s.set(t,o),o)}function Ka(t,e){return!t||!xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,tr(e))||Le(t,e))}function pf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:m,setupState:_,ctx:k,inheritAttrs:D}=t,V=oa(t);let U,B;try{if(n.shapeFlag&4){const G=r||s,de=G;U=_n(h.call(de,G,f,p,_,m,k)),B=l}else{const G=e;U=_n(G.length>1?G(p,{attrs:l,slots:o,emit:c}):G(p,null)),B=e.props?l:TE(l)}}catch(G){ki.length=0,qa(G,t,1),U=$e(qn)}let Q=U;if(B&&D!==!1){const G=Object.keys(B),{shapeFlag:de}=Q;G.length&&de&7&&(i&&G.some(Wc)&&(B=IE(B,i)),Q=Nr(Q,B,!1,!0))}return n.dirs&&(Q=Nr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&au(Q,n.transition),U=Q,oa(V),U}const TE=t=>{let e;for(const n in t)(n==="class"||n==="style"||xa(n))&&((e||(e={}))[n]=t[n]);return e},IE=(t,e)=>{const n={};for(const s in t)(!Wc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function AE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?mf(s,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==s[m]&&!Ka(h,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?mf(s,o,h):!0:!!o;return!1}function mf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Ka(n,i))return!0}return!1}function wE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const dm={},pm=()=>Object.create(dm),mm=t=>Object.getPrototypeOf(t)===dm;function RE(t,e,n,s=!1){const r={},i=pm();t.propsDefaults=Object.create(null),gm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Gp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function SE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=xe(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Ka(t.emitsOptions,m))continue;const _=e[m];if(c)if(Le(i,m))_!==i[m]&&(i[m]=_,h=!0);else{const k=Xt(m);r[k]=uc(c,l,k,_,t,!1)}else _!==i[m]&&(i[m]=_,h=!0)}}}else{gm(t,e,r,i)&&(h=!0);let f;for(const p in l)(!e||!Le(e,p)&&((f=tr(p))===p||!Le(e,f)))&&(c?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=uc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Le(e,p))&&(delete i[p],h=!0)}h&&Dn(t.attrs,"set","")}function gm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ri(c))continue;const h=e[c];let f;r&&Le(r,f=Xt(c))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:Ka(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=xe(n),h=l||Be;for(let f=0;f<i.length;f++){const p=i[f];n[p]=uc(r,c,p,h[p],t,!Le(h,p))}}return o}function uc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Le(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Te(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=lo(r);s=h[n]=c.call(null,e),f()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===tr(n))&&(s=!0))}return s}const bE=new WeakMap;function _m(t,e,n=!1){const s=n?bE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Te(t)){const f=p=>{c=!0;const[m,_]=_m(p,e,!0);Nt(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return je(t)&&s.set(t,yr),yr;if(me(i))for(let f=0;f<i.length;f++){const p=Xt(i[f]);gf(p)&&(o[p]=Be)}else if(i)for(const f in i){const p=Xt(f);if(gf(p)){const m=i[f],_=o[p]=me(m)||Te(m)?{type:m}:Nt({},m),k=_.type;let D=!1,V=!0;if(me(k))for(let U=0;U<k.length;++U){const B=k[U],Q=Te(B)&&B.name;if(Q==="Boolean"){D=!0;break}else Q==="String"&&(V=!1)}else D=Te(k)&&k.name==="Boolean";_[0]=D,_[1]=V,(D||Le(_,"default"))&&l.push(p)}}const h=[o,l];return je(t)&&s.set(t,h),h}function gf(t){return t[0]!=="$"&&!Ri(t)}const lu=t=>t==="_"||t==="_ctx"||t==="$stable",cu=t=>me(t)?t.map(_n):[_n(t)],CE=(t,e,n)=>{if(e._n)return e;const s=gn((...r)=>cu(e(...r)),n);return s._c=!1,s},ym=(t,e,n)=>{const s=t._ctx;for(const r in t){if(lu(r))continue;const i=t[r];if(Te(i))e[r]=CE(r,i,s);else if(i!=null){const o=cu(i);e[r]=()=>o}}},vm=(t,e)=>{const n=cu(e);t.slots.default=()=>n},Em=(t,e,n)=>{for(const s in e)(n||!lu(s))&&(t[s]=e[s])},PE=(t,e,n)=>{const s=t.slots=pm();if(t.vnode.shapeFlag&32){const r=e._;r?(Em(s,e,n),n&&bp(s,"_",r,!0)):ym(e,s)}else e&&vm(t,e)},kE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Be;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Em(r,e,n):(i=!e.$stable,ym(e,r)),o=e}else e&&(vm(t,e),o={default:1});if(i)for(const l in r)!lu(l)&&o[l]==null&&delete r[l]},Ht=xE;function NE(t){return DE(t)}function DE(t,e){const n=Ua();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:_=yn,insertStaticContent:k}=t,D=(v,A,C,O=null,F=null,x=null,Z=void 0,K=null,H=!!A.dynamicChildren)=>{if(v===A)return;v&&!gi(v,A)&&(O=L(v),q(v,F,x,!0),v=null),A.patchFlag===-2&&(H=!1,A.dynamicChildren=null);const{type:$,ref:ue,shapeFlag:ne}=A;switch($){case Ga:V(v,A,C,O);break;case qn:U(v,A,C,O);break;case xl:v==null&&B(A,C,O,Z);break;case Ze:b(v,A,C,O,F,x,Z,K,H);break;default:ne&1?de(v,A,C,O,F,x,Z,K,H):ne&6?E(v,A,C,O,F,x,Z,K,H):(ne&64||ne&128)&&$.process(v,A,C,O,F,x,Z,K,H,ae)}ue!=null&&F?Ci(ue,v&&v.ref,x,A||v,!A):ue==null&&v&&v.ref!=null&&Ci(v.ref,null,x,v,!0)},V=(v,A,C,O)=>{if(v==null)s(A.el=l(A.children),C,O);else{const F=A.el=v.el;A.children!==v.children&&h(F,A.children)}},U=(v,A,C,O)=>{v==null?s(A.el=c(A.children||""),C,O):A.el=v.el},B=(v,A,C,O)=>{[v.el,v.anchor]=k(v.children,A,C,O,v.el,v.anchor)},Q=({el:v,anchor:A},C,O)=>{let F;for(;v&&v!==A;)F=m(v),s(v,C,O),v=F;s(A,C,O)},G=({el:v,anchor:A})=>{let C;for(;v&&v!==A;)C=m(v),r(v),v=C;r(A)},de=(v,A,C,O,F,x,Z,K,H)=>{if(A.type==="svg"?Z="svg":A.type==="math"&&(Z="mathml"),v==null)Ee(A,C,O,F,x,Z,K,H);else{const $=v.el&&v.el._isVueCE?v.el:null;try{$&&$._beginPatch(),I(v,A,F,x,Z,K,H)}finally{$&&$._endPatch()}}},Ee=(v,A,C,O,F,x,Z,K)=>{let H,$;const{props:ue,shapeFlag:ne,transition:le,dirs:fe}=v;if(H=v.el=o(v.type,x,ue&&ue.is,ue),ne&8?f(H,v.children):ne&16&&y(v.children,H,null,O,F,Ol(v,x),Z,K),fe&&Os(v,null,O,"created"),w(H,v,v.scopeId,Z,O),ue){for(const Fe in ue)Fe!=="value"&&!Ri(Fe)&&i(H,Fe,null,ue[Fe],x,O);"value"in ue&&i(H,"value",null,ue.value,x),($=ue.onVnodeBeforeMount)&&dn($,O,v)}fe&&Os(v,null,O,"beforeMount");const Re=VE(F,le);Re&&le.beforeEnter(H),s(H,A,C),(($=ue&&ue.onVnodeMounted)||Re||fe)&&Ht(()=>{$&&dn($,O,v),Re&&le.enter(H),fe&&Os(v,null,O,"mounted")},F)},w=(v,A,C,O,F)=>{if(C&&_(v,C),O)for(let x=0;x<O.length;x++)_(v,O[x]);if(F){let x=F.subTree;if(A===x||wm(x.type)&&(x.ssContent===A||x.ssFallback===A)){const Z=F.vnode;w(v,Z,Z.scopeId,Z.slotScopeIds,F.parent)}}},y=(v,A,C,O,F,x,Z,K,H=0)=>{for(let $=H;$<v.length;$++){const ue=v[$]=K?ls(v[$]):_n(v[$]);D(null,ue,A,C,O,F,x,Z,K)}},I=(v,A,C,O,F,x,Z)=>{const K=A.el=v.el;let{patchFlag:H,dynamicChildren:$,dirs:ue}=A;H|=v.patchFlag&16;const ne=v.props||Be,le=A.props||Be;let fe;if(C&&xs(C,!1),(fe=le.onVnodeBeforeUpdate)&&dn(fe,C,A,v),ue&&Os(A,v,C,"beforeUpdate"),C&&xs(C,!0),(ne.innerHTML&&le.innerHTML==null||ne.textContent&&le.textContent==null)&&f(K,""),$?S(v.dynamicChildren,$,K,C,O,Ol(A,F),x):Z||we(v,A,K,null,C,O,Ol(A,F),x,!1),H>0){if(H&16)R(K,ne,le,C,F);else if(H&2&&ne.class!==le.class&&i(K,"class",null,le.class,F),H&4&&i(K,"style",ne.style,le.style,F),H&8){const Re=A.dynamicProps;for(let Fe=0;Fe<Re.length;Fe++){const De=Re[Fe],At=ne[De],wt=le[De];(wt!==At||De==="value")&&i(K,De,At,wt,F,C)}}H&1&&v.children!==A.children&&f(K,A.children)}else!Z&&$==null&&R(K,ne,le,C,F);((fe=le.onVnodeUpdated)||ue)&&Ht(()=>{fe&&dn(fe,C,A,v),ue&&Os(A,v,C,"updated")},O)},S=(v,A,C,O,F,x,Z)=>{for(let K=0;K<A.length;K++){const H=v[K],$=A[K],ue=H.el&&(H.type===Ze||!gi(H,$)||H.shapeFlag&198)?p(H.el):C;D(H,$,ue,null,O,F,x,Z,!0)}},R=(v,A,C,O,F)=>{if(A!==C){if(A!==Be)for(const x in A)!Ri(x)&&!(x in C)&&i(v,x,A[x],null,F,O);for(const x in C){if(Ri(x))continue;const Z=C[x],K=A[x];Z!==K&&x!=="value"&&i(v,x,K,Z,F,O)}"value"in C&&i(v,"value",A.value,C.value,F)}},b=(v,A,C,O,F,x,Z,K,H)=>{const $=A.el=v?v.el:l(""),ue=A.anchor=v?v.anchor:l("");let{patchFlag:ne,dynamicChildren:le,slotScopeIds:fe}=A;fe&&(K=K?K.concat(fe):fe),v==null?(s($,C,O),s(ue,C,O),y(A.children||[],C,ue,F,x,Z,K,H)):ne>0&&ne&64&&le&&v.dynamicChildren&&v.dynamicChildren.length===le.length?(S(v.dynamicChildren,le,C,F,x,Z,K),(A.key!=null||F&&A===F.subTree)&&Tm(v,A,!0)):we(v,A,C,ue,F,x,Z,K,H)},E=(v,A,C,O,F,x,Z,K,H)=>{A.slotScopeIds=K,v==null?A.shapeFlag&512?F.ctx.activate(A,C,O,Z,H):ie(A,C,O,F,x,Z,H):te(v,A,H)},ie=(v,A,C,O,F,x,Z)=>{const K=v.component=jE(v,O,F);if(rm(v)&&(K.ctx.renderer=ae),HE(K,!1,Z),K.asyncDep){if(F&&F.registerDep(K,Ne,Z),!v.el){const H=K.subTree=$e(qn);U(null,H,A,C),v.placeholder=H.el}}else Ne(K,v,A,C,F,x,Z)},te=(v,A,C)=>{const O=A.component=v.component;if(AE(v,A,C))if(O.asyncDep&&!O.asyncResolved){Ve(O,A,C);return}else O.next=A,O.update();else A.el=v.el,O.vnode=A},Ne=(v,A,C,O,F,x,Z)=>{const K=()=>{if(v.isMounted){let{next:ne,bu:le,u:fe,parent:Re,vnode:Fe}=v;{const jt=Im(v);if(jt){ne&&(ne.el=Fe.el,Ve(v,ne,Z)),jt.asyncDep.then(()=>{v.isUnmounted||K()});return}}let De=ne,At;xs(v,!1),ne?(ne.el=Fe.el,Ve(v,ne,Z)):ne=Fe,le&&qo(le),(At=ne.props&&ne.props.onVnodeBeforeUpdate)&&dn(At,Re,ne,Fe),xs(v,!0);const wt=pf(v),$t=v.subTree;v.subTree=wt,D($t,wt,p($t.el),L($t),v,F,x),ne.el=wt.el,De===null&&wE(v,wt.el),fe&&Ht(fe,F),(At=ne.props&&ne.props.onVnodeUpdated)&&Ht(()=>dn(At,Re,ne,Fe),F)}else{let ne;const{el:le,props:fe}=A,{bm:Re,m:Fe,parent:De,root:At,type:wt}=v,$t=Tr(A);xs(v,!1),Re&&qo(Re),!$t&&(ne=fe&&fe.onVnodeBeforeMount)&&dn(ne,De,A),xs(v,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(wt);const jt=v.subTree=pf(v);D(null,jt,C,O,v,F,x),A.el=jt.el}if(Fe&&Ht(Fe,F),!$t&&(ne=fe&&fe.onVnodeMounted)){const jt=A;Ht(()=>dn(ne,De,jt),F)}(A.shapeFlag&256||De&&Tr(De.vnode)&&De.vnode.shapeFlag&256)&&v.a&&Ht(v.a,F),v.isMounted=!0,A=C=O=null}};v.scope.on();const H=v.effect=new Dp(K);v.scope.off();const $=v.update=H.run.bind(H),ue=v.job=H.runIfDirty.bind(H);ue.i=v,ue.id=v.uid,H.scheduler=()=>iu(ue),xs(v,!0),$()},Ve=(v,A,C)=>{A.component=v;const O=v.vnode.props;v.vnode=A,v.next=null,SE(v,A.props,O,C),kE(v,A.children,C),Bn(),of(v),$n()},we=(v,A,C,O,F,x,Z,K,H=!1)=>{const $=v&&v.children,ue=v?v.shapeFlag:0,ne=A.children,{patchFlag:le,shapeFlag:fe}=A;if(le>0){if(le&128){zt($,ne,C,O,F,x,Z,K,H);return}else if(le&256){Tt($,ne,C,O,F,x,Z,K,H);return}}fe&8?(ue&16&&It($,F,x),ne!==$&&f(C,ne)):ue&16?fe&16?zt($,ne,C,O,F,x,Z,K,H):It($,F,x,!0):(ue&8&&f(C,""),fe&16&&y(ne,C,O,F,x,Z,K,H))},Tt=(v,A,C,O,F,x,Z,K,H)=>{v=v||yr,A=A||yr;const $=v.length,ue=A.length,ne=Math.min($,ue);let le;for(le=0;le<ne;le++){const fe=A[le]=H?ls(A[le]):_n(A[le]);D(v[le],fe,C,null,F,x,Z,K,H)}$>ue?It(v,F,x,!0,!1,ne):y(A,C,O,F,x,Z,K,H,ne)},zt=(v,A,C,O,F,x,Z,K,H)=>{let $=0;const ue=A.length;let ne=v.length-1,le=ue-1;for(;$<=ne&&$<=le;){const fe=v[$],Re=A[$]=H?ls(A[$]):_n(A[$]);if(gi(fe,Re))D(fe,Re,C,null,F,x,Z,K,H);else break;$++}for(;$<=ne&&$<=le;){const fe=v[ne],Re=A[le]=H?ls(A[le]):_n(A[le]);if(gi(fe,Re))D(fe,Re,C,null,F,x,Z,K,H);else break;ne--,le--}if($>ne){if($<=le){const fe=le+1,Re=fe<ue?A[fe].el:O;for(;$<=le;)D(null,A[$]=H?ls(A[$]):_n(A[$]),C,Re,F,x,Z,K,H),$++}}else if($>le)for(;$<=ne;)q(v[$],F,x,!0),$++;else{const fe=$,Re=$,Fe=new Map;for($=Re;$<=le;$++){const gt=A[$]=H?ls(A[$]):_n(A[$]);gt.key!=null&&Fe.set(gt.key,$)}let De,At=0;const wt=le-Re+1;let $t=!1,jt=0;const en=new Array(wt);for($=0;$<wt;$++)en[$]=0;for($=fe;$<=ne;$++){const gt=v[$];if(At>=wt){q(gt,F,x,!0);continue}let ht;if(gt.key!=null)ht=Fe.get(gt.key);else for(De=Re;De<=le;De++)if(en[De-Re]===0&&gi(gt,A[De])){ht=De;break}ht===void 0?q(gt,F,x,!0):(en[ht-Re]=$+1,ht>=jt?jt=ht:$t=!0,D(gt,A[ht],C,null,F,x,Z,K,H),At++)}const ar=$t?OE(en):yr;for(De=ar.length-1,$=wt-1;$>=0;$--){const gt=Re+$,ht=A[gt],Zr=A[gt+1],Ps=gt+1<ue?Zr.el||Am(Zr):O;en[$]===0?D(null,ht,C,Ps,F,x,Z,K,H):$t&&(De<0||$!==ar[De]?Vt(ht,C,Ps,2):De--)}}},Vt=(v,A,C,O,F=null)=>{const{el:x,type:Z,transition:K,children:H,shapeFlag:$}=v;if($&6){Vt(v.component.subTree,A,C,O);return}if($&128){v.suspense.move(A,C,O);return}if($&64){Z.move(v,A,C,ae);return}if(Z===Ze){s(x,A,C);for(let ne=0;ne<H.length;ne++)Vt(H[ne],A,C,O);s(v.anchor,A,C);return}if(Z===xl){Q(v,A,C);return}if(O!==2&&$&1&&K)if(O===0)K.beforeEnter(x),s(x,A,C),Ht(()=>K.enter(x),F);else{const{leave:ne,delayLeave:le,afterLeave:fe}=K,Re=()=>{v.ctx.isUnmounted?r(x):s(x,A,C)},Fe=()=>{x._isLeaving&&x[Qv](!0),ne(x,()=>{Re(),fe&&fe()})};le?le(x,Re,Fe):Fe()}else s(x,A,C)},q=(v,A,C,O=!1,F=!1)=>{const{type:x,props:Z,ref:K,children:H,dynamicChildren:$,shapeFlag:ue,patchFlag:ne,dirs:le,cacheIndex:fe}=v;if(ne===-2&&(F=!1),K!=null&&(Bn(),Ci(K,null,C,v,!0),$n()),fe!=null&&(A.renderCache[fe]=void 0),ue&256){A.ctx.deactivate(v);return}const Re=ue&1&&le,Fe=!Tr(v);let De;if(Fe&&(De=Z&&Z.onVnodeBeforeUnmount)&&dn(De,A,v),ue&6)ut(v.component,C,O);else{if(ue&128){v.suspense.unmount(C,O);return}Re&&Os(v,null,A,"beforeUnmount"),ue&64?v.type.remove(v,A,C,ae,O):$&&!$.hasOnce&&(x!==Ze||ne>0&&ne&64)?It($,A,C,!1,!0):(x===Ze&&ne&384||!F&&ue&16)&&It(H,A,C),O&&X(v)}(Fe&&(De=Z&&Z.onVnodeUnmounted)||Re)&&Ht(()=>{De&&dn(De,A,v),Re&&Os(v,null,A,"unmounted")},C)},X=v=>{const{type:A,el:C,anchor:O,transition:F}=v;if(A===Ze){W(C,O);return}if(A===xl){G(v);return}const x=()=>{r(C),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(v.shapeFlag&1&&F&&!F.persisted){const{leave:Z,delayLeave:K}=F,H=()=>Z(C,x);K?K(v.el,x,H):H()}else x()},W=(v,A)=>{let C;for(;v!==A;)C=m(v),r(v),v=C;r(A)},ut=(v,A,C)=>{const{bum:O,scope:F,job:x,subTree:Z,um:K,m:H,a:$}=v;_f(H),_f($),O&&qo(O),F.stop(),x&&(x.flags|=8,q(Z,v,A,C)),K&&Ht(K,A),Ht(()=>{v.isUnmounted=!0},A)},It=(v,A,C,O=!1,F=!1,x=0)=>{for(let Z=x;Z<v.length;Z++)q(v[Z],A,C,O,F)},L=v=>{if(v.shapeFlag&6)return L(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const A=m(v.anchor||v.el),C=A&&A[zv];return C?m(C):A};let se=!1;const ee=(v,A,C)=>{let O;v==null?A._vnode&&(q(A._vnode,null,null,!0),O=A._vnode.component):D(A._vnode||null,v,A,null,null,null,C),A._vnode=v,se||(se=!0,of(O),Jp(),se=!1)},ae={p:D,um:q,m:Vt,r:X,mt:ie,mc:y,pc:we,pbc:S,n:L,o:t};return{render:ee,hydrate:void 0,createApp:_E(ee)}}function Ol({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function xs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function VE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Tm(t,e,n=!1){const s=t.children,r=e.children;if(me(s)&&me(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=ls(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Tm(o,l)),l.type===Ga&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=i+(t.type===Ze?1:0)),l.type===qn&&!l.el&&(l.el=o.el)}}function OE(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Im(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Im(e)}function _f(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Am(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Am(e.subTree):null}const wm=t=>t.__isSuspense;function xE(t,e){e&&e.pendingBranch?me(t)?e.effects.push(...t):e.effects.push(t):jv(t)}const Ze=Symbol.for("v-fgt"),Ga=Symbol.for("v-txt"),qn=Symbol.for("v-cmt"),xl=Symbol.for("v-stc"),ki=[];let Kt=null;function z(t=!1){ki.push(Kt=t?null:[])}function LE(){ki.pop(),Kt=ki[ki.length-1]||null}let qi=1;function ca(t,e=!1){qi+=t,t<0&&Kt&&e&&(Kt.hasOnce=!0)}function Rm(t){return t.dynamicChildren=qi>0?Kt||yr:null,LE(),qi>0&&Kt&&Kt.push(t),t}function Y(t,e,n,s,r,i){return Rm(T(t,e,n,s,r,i,!0))}function kr(t,e,n,s,r){return Rm($e(t,e,n,s,r,!0))}function Hi(t){return t?t.__v_isVNode===!0:!1}function gi(t,e){return t.type===e.type&&t.key===e.key}const Sm=({key:t})=>t??null,Ko=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?it(t)||kt(t)||Te(t)?{i:vt,r:t,k:e,f:!!n}:t:null);function T(t,e=null,n=null,s=0,r=null,i=t===Ze?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Sm(e),ref:e&&Ko(e),scopeId:em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vt};return l?(uu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),qi>0&&!o&&Kt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Kt.push(c),c}const $e=ME;function ME(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===lE)&&(t=qn),Hi(t)){const l=Nr(t,e,!0);return n&&uu(l,n),qi>0&&!i&&Kt&&(l.shapeFlag&6?Kt[Kt.indexOf(t)]=l:Kt.push(l)),l.patchFlag=-2,l}if(QE(t)&&(t=t.__vccOpts),e){e=FE(e);let{class:l,style:c}=e;l&&!it(l)&&(e.class=br(l)),je(c)&&(ru(c)&&!me(c)&&(c=Nt({},c)),e.style=Ba(c))}const o=it(t)?1:wm(t)?128:Wv(t)?64:je(t)?4:Te(t)?2:0;return T(t,e,n,s,r,o,i,!0)}function FE(t){return t?ru(t)||mm(t)?Nt({},t):t:null}function Nr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?UE(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Sm(h),ref:e&&e.ref?n&&i?me(i)?i.concat(Ko(e)):[i,Ko(e)]:Ko(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nr(t.ssContent),ssFallback:t.ssFallback&&Nr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&au(f,c.clone(f)),f}function st(t=" ",e=0){return $e(Ga,null,t,e)}function dt(t="",e=!1){return e?(z(),kr(qn,null,t)):$e(qn,null,t)}function _n(t){return t==null||typeof t=="boolean"?$e(qn):me(t)?$e(Ze,null,t.slice()):Hi(t)?ls(t):$e(Ga,null,String(t))}function ls(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nr(t)}function uu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(me(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),uu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!mm(e)?e._ctx=vt:r===3&&vt&&(vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:vt},n=32):(e=String(e),s&64?(n=16,e=[st(e)]):n=8);t.children=e,t.shapeFlag|=n}function UE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=br([e.class,s.class]));else if(r==="style")e.style=Ba([e.style,s.style]);else if(xa(r)){const i=e[r],o=s[r];o&&i!==o&&!(me(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function dn(t,e,n,s=null){Rn(t,e,7,[n,s])}const BE=hm();let $E=0;function jE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||BE,i={uid:$E++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_m(s,r),emitsOptions:fm(s,r),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:s.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=vE.bind(null,i),t.ce&&t.ce(i),i}let Pt=null;const qE=()=>Pt||vt;let ua,hc;{const t=Ua(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ua=e("__VUE_INSTANCE_SETTERS__",n=>Pt=n),hc=e("__VUE_SSR_SETTERS__",n=>Ki=n)}const lo=t=>{const e=Pt;return ua(t),t.scope.on(),()=>{t.scope.off(),ua(e)}},yf=()=>{Pt&&Pt.scope.off(),ua(null)};function bm(t){return t.vnode.shapeFlag&4}let Ki=!1;function HE(t,e=!1,n=!1){e&&hc(e);const{props:s,children:r}=t.vnode,i=bm(t);RE(t,s,i,e),PE(t,r,n||e);const o=i?KE(t,e):void 0;return e&&hc(!1),o}function KE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,uE);const{setup:s}=n;if(s){Bn();const r=t.setupContext=s.length>1?zE(t):null,i=lo(t),o=ao(s,t,0,[t.props,r]),l=wp(o);if($n(),i(),(l||t.sp)&&!Tr(t)&&sm(t),l){if(o.then(yf,yf),e)return o.then(c=>{vf(t,c)}).catch(c=>{qa(c,t,0)});t.asyncDep=o}else vf(t,o)}else Cm(t)}function vf(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=Wp(e)),Cm(t)}function Cm(t,e,n){const s=t.type;t.render||(t.render=s.render||yn);{const r=lo(t);Bn();try{hE(t)}finally{$n(),r()}}}const GE={get(t,e){return bt(t,"get",""),t[e]}};function zE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,GE),slots:t.slots,emit:t.emit,expose:e}}function za(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Wp(Dv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pi)return Pi[n](t)},has(e,n){return n in e||n in Pi}})):t.proxy}function WE(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function QE(t){return Te(t)&&"__vccOpts"in t}const ge=(t,e)=>Mv(t,e,Ki);function Pm(t,e,n){try{ca(-1);const s=arguments.length;return s===2?je(e)&&!me(e)?Hi(e)?$e(t,null,[e]):$e(t,e):$e(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Hi(n)&&(n=[n]),$e(t,e,n))}finally{ca(1)}}const YE="3.5.26";let fc;const Ef=typeof window<"u"&&window.trustedTypes;if(Ef)try{fc=Ef.createPolicy("vue",{createHTML:t=>t})}catch{}const km=fc?t=>fc.createHTML(t):t=>t,XE="http://www.w3.org/2000/svg",JE="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,Tf=Nn&&Nn.createElement("template"),ZE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Nn.createElementNS(XE,t):e==="mathml"?Nn.createElementNS(JE,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Tf.innerHTML=km(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Tf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},eT=Symbol("_vtc");function tT(t,e,n){const s=t[eT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const If=Symbol("_vod"),nT=Symbol("_vsh"),sT=Symbol(""),rT=/(?:^|;)\s*display\s*:/;function iT(t,e,n){const s=t.style,r=it(n);let i=!1;if(n&&!r){if(e)if(it(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Go(s,l,"")}else for(const o in e)n[o]==null&&Go(s,o,"");for(const o in n)o==="display"&&(i=!0),Go(s,o,n[o])}else if(r){if(e!==n){const o=s[sT];o&&(n+=";"+o),s.cssText=n,i=rT.test(n)}}else e&&t.removeAttribute("style");If in t&&(t[If]=i?s.display:"",t[nT]&&(s.display="none"))}const Af=/\s*!important$/;function Go(t,e,n){if(me(n))n.forEach(s=>Go(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=oT(t,e);Af.test(n)?t.setProperty(tr(s),n.replace(Af,""),"important"):t[s]=n}}const wf=["Webkit","Moz","ms"],Ll={};function oT(t,e){const n=Ll[e];if(n)return n;let s=Xt(e);if(s!=="filter"&&s in t)return Ll[e]=s;s=Fa(s);for(let r=0;r<wf.length;r++){const i=wf[r]+s;if(i in t)return Ll[e]=i}return e}const Rf="http://www.w3.org/1999/xlink";function Sf(t,e,n,s,r,i=uv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Rf,e.slice(6,e.length)):t.setAttributeNS(Rf,e,n):n==null||i&&!Cp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ln(n)?String(n):n)}function bf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?km(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Cp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function us(t,e,n,s){t.addEventListener(e,n,s)}function aT(t,e,n,s){t.removeEventListener(e,n,s)}const Cf=Symbol("_vei");function lT(t,e,n,s,r=null){const i=t[Cf]||(t[Cf]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=cT(e);if(s){const h=i[e]=fT(s,r);us(t,l,h,c)}else o&&(aT(t,l,o,c),i[e]=void 0)}}const Pf=/(?:Once|Passive|Capture)$/;function cT(t){let e;if(Pf.test(t)){e={};let s;for(;s=t.match(Pf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):tr(t.slice(2)),e]}let Ml=0;const uT=Promise.resolve(),hT=()=>Ml||(uT.then(()=>Ml=0),Ml=Date.now());function fT(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Rn(dT(s,n.value),e,5,[s])};return n.value=t,n.attached=hT(),n}function dT(t,e){if(me(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const kf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,pT=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?tT(t,s,o):e==="style"?iT(t,n,s):xa(e)?Wc(e)||lT(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mT(t,e,s,o))?(bf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!it(s))?bf(t,Xt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Sf(t,e,s,o))};function mT(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&kf(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return kf(e)&&it(n)?!1:e in t}const Dr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return me(e)?n=>qo(e,n):e};function gT(t){t.target.composing=!0}function Nf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fn=Symbol("_assign");function Df(t,e,n){return e&&(t=t.trim()),n&&(t=Xc(t)),t}const _T={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Fn]=Dr(r);const i=s||r.props&&r.props.type==="number";us(t,e?"change":"input",o=>{o.target.composing||t[Fn](Df(t.value,n,i))}),(n||i)&&us(t,"change",()=>{t.value=Df(t.value,n,i)}),e||(us(t,"compositionstart",gT),us(t,"compositionend",Nf),us(t,"change",Nf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Fn]=Dr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Xc(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},yT={deep:!0,created(t,e,n){t[Fn]=Dr(n),us(t,"change",()=>{const s=t._modelValue,r=Nm(t),i=t.checked,o=t[Fn];if(me(s)){const l=Pp(s,r),c=l!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const h=[...s];h.splice(l,1),o(h)}}else if(La(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Dm(t,i))})},mounted:Vf,beforeUpdate(t,e,n){t[Fn]=Dr(n),Vf(t,e,n)}};function Vf(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(me(e))r=Pp(e,s.props.value)>-1;else if(La(e))r=e.has(s.props.value);else{if(e===n)return;r=Cr(e,Dm(t,!0))}t.checked!==r&&(t.checked=r)}const Fl={created(t,{value:e},n){t.checked=Cr(e,n.props.value),t[Fn]=Dr(n),us(t,"change",()=>{t[Fn](Nm(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Fn]=Dr(s),e!==n&&(t.checked=Cr(e,s.props.value))}};function Nm(t){return"_value"in t?t._value:t.value}function Dm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const vT=["ctrl","shift","alt","meta"],ET={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vT.some(n=>t[`${n}Key`]&&!e.includes(n))},TT=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=ET[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},IT=Nt({patchProp:pT},ZE);let Of;function AT(){return Of||(Of=NE(IT))}const wT=((...t)=>{const e=AT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=ST(s);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,RT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function RT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ST(t){return it(t)?document.querySelector(t):t}const dc=Ae(null),Vm=Ae(""),pc=Ae(!1);let xf=null;const xo=t=>String(t).padStart(2,"0"),bT=()=>{const t=new Date,e=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(e+540*60*1e3)},CT=t=>{if(!(t instanceof Date))return"...";const e=t.getFullYear(),n=xo(t.getMonth()+1),s=xo(t.getDate()),r=xo(t.getHours()),i=xo(t.getMinutes());return`${e}. ${n}. ${s}. ${r}:${i}`};function PT(){if(xf)return;const t=()=>{dc.value=bT(),Vm.value=CT(dc.value),pc.value||(pc.value=!0)};t(),xf=setInterval(t,1e3)}function Om(){return{kstDate:dc,kstString:Vm,isKstTimeReady:pc}}const kT={__name:"App",setup(t){return om(()=>{PT()}),(e,n)=>{const s=ji("router-view");return z(),kr(s)}}};const dr=typeof document<"u";function xm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function NT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&xm(t.default)}const Oe=Object.assign;function Ul(t,e){const n={};for(const s in e){const r=e[s];n[s]=un(r)?r.map(t):t(r)}return n}const Ni=()=>{},un=Array.isArray;function Lf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Lm=/#/g,DT=/&/g,VT=/\//g,OT=/=/g,xT=/\?/g,Mm=/\+/g,LT=/%5B/g,MT=/%5D/g,Fm=/%5E/g,FT=/%60/g,Um=/%7B/g,UT=/%7C/g,Bm=/%7D/g,BT=/%20/g;function hu(t){return t==null?"":encodeURI(""+t).replace(UT,"|").replace(LT,"[").replace(MT,"]")}function $T(t){return hu(t).replace(Um,"{").replace(Bm,"}").replace(Fm,"^")}function mc(t){return hu(t).replace(Mm,"%2B").replace(BT,"+").replace(Lm,"%23").replace(DT,"%26").replace(FT,"`").replace(Um,"{").replace(Bm,"}").replace(Fm,"^")}function jT(t){return mc(t).replace(OT,"%3D")}function qT(t){return hu(t).replace(Lm,"%23").replace(xT,"%3F")}function HT(t){return qT(t).replace(VT,"%2F")}function Gi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const KT=/\/$/,GT=t=>t.replace(KT,"");function Bl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=YT(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Gi(o)}}function zT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Mf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Vr(e.matched[s],n.matched[r])&&$m(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Vr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function $m(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!QT(t[n],e[n]))return!1;return!0}function QT(t,e){return un(t)?Ff(t,e):un(e)?Ff(e,t):t?.valueOf()===e?.valueOf()}function Ff(t,e){return un(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function YT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let gc=(function(t){return t.pop="pop",t.push="push",t})({}),$l=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function XT(t){if(!t)if(dr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),GT(t)}const JT=/^[^#]+#/;function ZT(t,e){return t.replace(JT,"#")+e}function eI(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Wa=()=>({left:window.scrollX,top:window.scrollY});function tI(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=eI(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Uf(t,e){return(history.state?history.state.position-e:-1)+t}const _c=new Map;function nI(t,e){_c.set(t,e)}function sI(t){const e=_c.get(t);return _c.delete(t),e}function rI(t){return typeof t=="string"||t&&typeof t=="object"}function jm(t){return typeof t=="string"||typeof t=="symbol"}let Xe=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const qm=Symbol("");Xe.MATCHER_NOT_FOUND+"",Xe.NAVIGATION_GUARD_REDIRECT+"",Xe.NAVIGATION_ABORTED+"",Xe.NAVIGATION_CANCELLED+"",Xe.NAVIGATION_DUPLICATED+"";function Or(t,e){return Oe(new Error,{type:t,[qm]:!0},e)}function kn(t,e){return t instanceof Error&&qm in t&&(e==null||!!(t.type&e))}const iI=["params","query","hash"];function oI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of iI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function aI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Mm," "),i=r.indexOf("="),o=Gi(i<0?r:r.slice(0,i)),l=i<0?null:Gi(r.slice(i+1));if(o in e){let c=e[o];un(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Bf(t){let e="";for(let n in t){const s=t[n];if(n=jT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(s)?s.map(r=>r&&mc(r)):[s&&mc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function lI(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=un(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const cI=Symbol(""),$f=Symbol(""),fu=Symbol(""),Hm=Symbol(""),yc=Symbol("");function _i(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function cs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=m=>{m===!1?c(Or(Xe.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):rI(m)?c(Or(Xe.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(m=>c(m))})}function jl(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(xm(c)){const h=(c.__vccOpts||c)[e];h&&i.push(cs(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=NT(f)?f.default:f;o.mods[l]=f,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&cs(m,n,s,o,l,r)()}))}}return i}function uI(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Vr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Vr(h,c))||r.push(c))}return[n,s,r]}let hI=()=>location.protocol+"//"+location.host;function Km(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Mf(l,"")}return Mf(n,t)+s+r}function fI(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const _=Km(t,location),k=n.value,D=e.value;let V=0;if(m){if(n.value=_,e.value=m,o&&o===k){o=null;return}V=D?m.position-D.position:0}else s(_);r.forEach(U=>{U(n.value,k,{delta:V,type:gc.pop,direction:V?V>0?$l.forward:$l.back:$l.unknown})})};function c(){o=n.value}function h(m){r.push(m);const _=()=>{const k=r.indexOf(m);k>-1&&r.splice(k,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Oe({},m.state,{scroll:Wa()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:p}}function jf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Wa():null}}function dI(t){const{history:e,location:n}=window,s={value:Km(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:hI()+t+c;try{e[f?"replaceState":"pushState"](h,"",m),r.value=h}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(c,h){i(c,Oe({},e.state,jf(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const f=Oe({},r.value,e.state,{forward:c,scroll:Wa()});i(f.current,f,!0),i(c,Oe({},jf(s.value,c,null),{position:f.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function pI(t){t=XT(t);const e=dI(t),n=fI(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Oe({location:"",base:t,go:s,createHref:ZT.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Fs=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var at=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(at||{});const mI={type:Fs.Static,value:""},gI=/[a-zA-Z0-9_]/;function _I(t){if(!t)return[[]];if(t==="/")return[[mI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${h}": ${_}`)}let n=at.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(n===at.Static?i.push({type:Fs.Static,value:h}):n===at.Param||n===at.ParamRegExp||n===at.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Fs.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==at.ParamRegExp){s=n,n=at.EscapeNext;continue}switch(n){case at.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=at.Param):m();break;case at.EscapeNext:m(),n=s;break;case at.Param:c==="("?n=at.ParamRegExp:gI.test(c)?m():(p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case at.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=at.ParamRegExpEnd:f+=c;break;case at.ParamRegExpEnd:p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:e("Unknown state");break}}return n===at.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const qf="[^/]+?",yI={sensitive:!1,strict:!1,start:!0,end:!0};var Lt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Lt||{});const vI=/[.+*?^${}()[\]/\\]/g;function EI(t,e){const n=Oe({},yI,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[Lt.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const m=h[p];let _=Lt.Segment+(n.sensitive?Lt.BonusCaseSensitive:0);if(m.type===Fs.Static)p||(r+="/"),r+=m.value.replace(vI,"\\$&"),_+=Lt.Static;else if(m.type===Fs.Param){const{value:k,repeatable:D,optional:V,regexp:U}=m;i.push({name:k,repeatable:D,optional:V});const B=U||qf;if(B!==qf){_+=Lt.BonusCustomRegExp;try{`${B}`}catch(G){throw new Error(`Invalid custom RegExp for param "${k}" (${B}): `+G.message)}}let Q=D?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(Q=V&&h.length<2?`(?:/${Q})`:"/"+Q),V&&(Q+="?"),r+=Q,_+=Lt.Dynamic,V&&(_+=Lt.BonusOptional),D&&(_+=Lt.BonusRepeatable),B===".*"&&(_+=Lt.BonusWildcard)}f.push(_)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Lt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",k=i[m-1];p[k.name]=_&&k.repeatable?_.split("/"):_}return p}function c(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of m)if(_.type===Fs.Static)f+=_.value;else if(_.type===Fs.Param){const{value:k,repeatable:D,optional:V}=_,U=k in h?h[k]:"";if(un(U)&&!D)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const B=un(U)?U.join("/"):U;if(!B)if(V)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${k}"`);f+=B}}return f||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function TI(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Lt.Static+Lt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Lt.Static+Lt.Segment?1:-1:0}function Gm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=TI(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Hf(s))return 1;if(Hf(r))return-1}return r.length-s.length}function Hf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const II={strict:!1,end:!0,sensitive:!1};function AI(t,e,n){const s=EI(_I(t.path),n),r=Oe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function wI(t,e){const n=[],s=new Map;e=Lf(II,e);function r(p){return s.get(p)}function i(p,m,_){const k=!_,D=Gf(p);D.aliasOf=_&&_.record;const V=Lf(e,p),U=[D];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const de of G)U.push(Gf(Oe({},D,{components:_?_.record.components:D.components,path:de,aliasOf:_?_.record:D})))}let B,Q;for(const G of U){const{path:de}=G;if(m&&de[0]!=="/"){const Ee=m.record.path,w=Ee[Ee.length-1]==="/"?"":"/";G.path=m.record.path+(de&&w+de)}if(B=AI(G,m,V),_?_.alias.push(B):(Q=Q||B,Q!==B&&Q.alias.push(B),k&&p.name&&!zf(B)&&o(p.name)),zm(B)&&c(B),D.children){const Ee=D.children;for(let w=0;w<Ee.length;w++)i(Ee[w],B,_&&_.children[w])}_=_||B}return Q?()=>{o(Q)}:Ni}function o(p){if(jm(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=bI(p,n);n.splice(m,0,p),p.record.name&&!zf(p)&&s.set(p.record.name,p)}function h(p,m){let _,k={},D,V;if("name"in p&&p.name){if(_=s.get(p.name),!_)throw Or(Xe.MATCHER_NOT_FOUND,{location:p});V=_.record.name,k=Oe(Kf(m.params,_.keys.filter(Q=>!Q.optional).concat(_.parent?_.parent.keys.filter(Q=>Q.optional):[]).map(Q=>Q.name)),p.params&&Kf(p.params,_.keys.map(Q=>Q.name))),D=_.stringify(k)}else if(p.path!=null)D=p.path,_=n.find(Q=>Q.re.test(D)),_&&(k=_.parse(D),V=_.record.name);else{if(_=m.name?s.get(m.name):n.find(Q=>Q.re.test(m.path)),!_)throw Or(Xe.MATCHER_NOT_FOUND,{location:p,currentLocation:m});V=_.record.name,k=Oe({},m.params,p.params),D=_.stringify(k)}const U=[];let B=_;for(;B;)U.unshift(B.record),B=B.parent;return{name:V,path:D,params:k,matched:U,meta:SI(U)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:l,getRecordMatcher:r}}function Kf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Gf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function zf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function SI(t){return t.reduce((e,n)=>Oe(e,n.meta),{})}function bI(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Gm(t,e[i])<0?s=i:n=i+1}const r=CI(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function CI(t){let e=t;for(;e=e.parent;)if(zm(e)&&Gm(t,e)===0)return e}function zm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Wf(t){const e=Mn(fu),n=Mn(Hm),s=ge(()=>{const c=et(t.to);return e.resolve(c)}),r=ge(()=>{const{matched:c}=s.value,{length:h}=c,f=c[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Vr.bind(null,f));if(m>-1)return m;const _=Qf(c[h-2]);return h>1&&Qf(f)===_&&p[p.length-1].path!==_?p.findIndex(Vr.bind(null,c[h-2])):m}),i=ge(()=>r.value>-1&&VI(n.params,s.value.params)),o=ge(()=>r.value>-1&&r.value===n.matched.length-1&&$m(n.params,s.value.params));function l(c={}){if(DI(c)){const h=e[et(t.replace)?"replace":"push"](et(t.to)).catch(Ni);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:ge(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function PI(t){return t.length===1?t[0]:t}const kI=nm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Wf,setup(t,{slots:e}){const n=ja(Wf(t)),{options:s}=Mn(fu),r=ge(()=>({[Yf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Yf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&PI(e.default(n));return t.custom?i:Pm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),NI=kI;function DI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function VI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!un(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function Qf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Yf=(t,e,n)=>t??e??n,OI=nm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Mn(yc),r=ge(()=>t.route||s.value),i=Mn($f,0),o=ge(()=>{let h=et(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=ge(()=>r.value.matched[o.value]);Ho($f,ge(()=>o.value+1)),Ho(cI,l),Ho(yc,r);const c=Ae();return Hs(()=>[c.value,l.value,t.name],([h,f,p],[m,_,k])=>{f&&(f.instances[p]=h,_&&_!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),h&&f&&(!_||!Vr(f,_)||!m)&&(f.enterCallbacks[p]||[]).forEach(D=>D(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=l.value,m=p&&p.components[f];if(!m)return Xf(n.default,{Component:m,route:h});const _=p.props[f],k=_?_===!0?h.params:typeof _=="function"?_(h):_:null,V=Pm(m,Oe({},k,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return Xf(n.default,{Component:V,route:h})||V}}});function Xf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const xI=OI;function LI(t){const e=wI(t.routes,t),n=t.parseQuery||aI,s=t.stringifyQuery||Bf,r=t.history,i=_i(),o=_i(),l=_i(),c=Vv(ss);let h=ss;dr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ul.bind(null,L=>""+L),p=Ul.bind(null,HT),m=Ul.bind(null,Gi);function _(L,se){let ee,ae;return jm(L)?(ee=e.getRecordMatcher(L),ae=se):ae=L,e.addRoute(ae,ee)}function k(L){const se=e.getRecordMatcher(L);se&&e.removeRoute(se)}function D(){return e.getRoutes().map(L=>L.record)}function V(L){return!!e.getRecordMatcher(L)}function U(L,se){if(se=Oe({},se||c.value),typeof L=="string"){const C=Bl(n,L,se.path),O=e.resolve({path:C.path},se),F=r.createHref(C.fullPath);return Oe(C,O,{params:m(O.params),hash:Gi(C.hash),redirectedFrom:void 0,href:F})}let ee;if(L.path!=null)ee=Oe({},L,{path:Bl(n,L.path,se.path).path});else{const C=Oe({},L.params);for(const O in C)C[O]==null&&delete C[O];ee=Oe({},L,{params:p(C)}),se.params=p(se.params)}const ae=e.resolve(ee,se),Se=L.hash||"";ae.params=f(m(ae.params));const v=zT(s,Oe({},L,{hash:$T(Se),path:ae.path})),A=r.createHref(v);return Oe({fullPath:v,hash:Se,query:s===Bf?lI(L.query):L.query||{}},ae,{redirectedFrom:void 0,href:A})}function B(L){return typeof L=="string"?Bl(n,L,c.value.path):Oe({},L)}function Q(L,se){if(h!==L)return Or(Xe.NAVIGATION_CANCELLED,{from:se,to:L})}function G(L){return w(L)}function de(L){return G(Oe(B(L),{replace:!0}))}function Ee(L,se){const ee=L.matched[L.matched.length-1];if(ee&&ee.redirect){const{redirect:ae}=ee;let Se=typeof ae=="function"?ae(L,se):ae;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=B(Se):{path:Se},Se.params={}),Oe({query:L.query,hash:L.hash,params:Se.path!=null?{}:L.params},Se)}}function w(L,se){const ee=h=U(L),ae=c.value,Se=L.state,v=L.force,A=L.replace===!0,C=Ee(ee,ae);if(C)return w(Oe(B(C),{state:typeof C=="object"?Oe({},Se,C.state):Se,force:v,replace:A}),se||ee);const O=ee;O.redirectedFrom=se;let F;return!v&&WT(s,ae,ee)&&(F=Or(Xe.NAVIGATION_DUPLICATED,{to:O,from:ae}),Vt(ae,ae,!0,!1)),(F?Promise.resolve(F):S(O,ae)).catch(x=>kn(x)?kn(x,Xe.NAVIGATION_GUARD_REDIRECT)?x:zt(x):we(x,O,ae)).then(x=>{if(x){if(kn(x,Xe.NAVIGATION_GUARD_REDIRECT))return w(Oe({replace:A},B(x.to),{state:typeof x.to=="object"?Oe({},Se,x.to.state):Se,force:v}),se||O)}else x=b(O,ae,!0,A,Se);return R(O,ae,x),x})}function y(L,se){const ee=Q(L,se);return ee?Promise.reject(ee):Promise.resolve()}function I(L){const se=W.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(L):L()}function S(L,se){let ee;const[ae,Se,v]=uI(L,se);ee=jl(ae.reverse(),"beforeRouteLeave",L,se);for(const C of ae)C.leaveGuards.forEach(O=>{ee.push(cs(O,L,se))});const A=y.bind(null,L,se);return ee.push(A),It(ee).then(()=>{ee=[];for(const C of i.list())ee.push(cs(C,L,se));return ee.push(A),It(ee)}).then(()=>{ee=jl(Se,"beforeRouteUpdate",L,se);for(const C of Se)C.updateGuards.forEach(O=>{ee.push(cs(O,L,se))});return ee.push(A),It(ee)}).then(()=>{ee=[];for(const C of v)if(C.beforeEnter)if(un(C.beforeEnter))for(const O of C.beforeEnter)ee.push(cs(O,L,se));else ee.push(cs(C.beforeEnter,L,se));return ee.push(A),It(ee)}).then(()=>(L.matched.forEach(C=>C.enterCallbacks={}),ee=jl(v,"beforeRouteEnter",L,se,I),ee.push(A),It(ee))).then(()=>{ee=[];for(const C of o.list())ee.push(cs(C,L,se));return ee.push(A),It(ee)}).catch(C=>kn(C,Xe.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function R(L,se,ee){l.list().forEach(ae=>I(()=>ae(L,se,ee)))}function b(L,se,ee,ae,Se){const v=Q(L,se);if(v)return v;const A=se===ss,C=dr?history.state:{};ee&&(ae||A?r.replace(L.fullPath,Oe({scroll:A&&C&&C.scroll},Se)):r.push(L.fullPath,Se)),c.value=L,Vt(L,se,ee,A),zt()}let E;function ie(){E||(E=r.listen((L,se,ee)=>{if(!ut.listening)return;const ae=U(L),Se=Ee(ae,ut.currentRoute.value);if(Se){w(Oe(Se,{replace:!0,force:!0}),ae).catch(Ni);return}h=ae;const v=c.value;dr&&nI(Uf(v.fullPath,ee.delta),Wa()),S(ae,v).catch(A=>kn(A,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_CANCELLED)?A:kn(A,Xe.NAVIGATION_GUARD_REDIRECT)?(w(Oe(B(A.to),{force:!0}),ae).then(C=>{kn(C,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===gc.pop&&r.go(-1,!1)}).catch(Ni),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),we(A,ae,v))).then(A=>{A=A||b(ae,v,!1),A&&(ee.delta&&!kn(A,Xe.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===gc.pop&&kn(A,Xe.NAVIGATION_ABORTED|Xe.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),R(ae,v,A)}).catch(Ni)}))}let te=_i(),Ne=_i(),Ve;function we(L,se,ee){zt(L);const ae=Ne.list();return ae.length?ae.forEach(Se=>Se(L,se,ee)):console.error(L),Promise.reject(L)}function Tt(){return Ve&&c.value!==ss?Promise.resolve():new Promise((L,se)=>{te.add([L,se])})}function zt(L){return Ve||(Ve=!L,ie(),te.list().forEach(([se,ee])=>L?ee(L):se()),te.reset()),L}function Vt(L,se,ee,ae){const{scrollBehavior:Se}=t;if(!dr||!Se)return Promise.resolve();const v=!ee&&sI(Uf(L.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Yp().then(()=>Se(L,se,v)).then(A=>A&&tI(A)).catch(A=>we(A,L,se))}const q=L=>r.go(L);let X;const W=new Set,ut={currentRoute:c,listening:!0,addRoute:_,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:D,resolve:U,options:t,push:G,replace:de,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ne.add,isReady:Tt,install(L){L.component("RouterLink",NI),L.component("RouterView",xI),L.config.globalProperties.$router=ut,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>et(c)}),dr&&!X&&c.value===ss&&(X=!0,G(r.location).catch(ae=>{}));const se={};for(const ae in ss)Object.defineProperty(se,ae,{get:()=>c.value[ae],enumerable:!0});L.provide(fu,ut),L.provide(Hm,Gp(se)),L.provide(yc,c);const ee=L.unmount;W.add(L),L.unmount=function(){W.delete(L),W.size<1&&(h=ss,E&&E(),E=null,c.value=ss,X=!1,Ve=!1),ee()}}};function It(L){return L.reduce((se,ee)=>se.then(()=>I(ee)),Promise.resolve())}return ut}const MI=()=>{};var Jf={};const Wm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;c||(_=64,o||(m=64)),s.push(n[f],n[p],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new UI;const m=i<<2|l>>4;if(s.push(m),h!==64){const _=l<<4&240|h>>2;if(s.push(_),p!==64){const k=h<<6&192|p;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BI=function(t){const e=Wm(t);return Qm.encodeByteArray(e,!0)},ha=function(t){return BI(t).replace(/\./g,"")},Ym=function(t){try{return Qm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jI=()=>$I().__FIREBASE_DEFAULTS__,qI=()=>{if(typeof process>"u"||typeof Jf>"u")return;const t=Jf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ym(t[1]);return e&&JSON.parse(e)},Qa=()=>{try{return MI()||jI()||qI()||HI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xm=t=>Qa()?.emulatorHosts?.[t],KI=t=>{const e=Xm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Jm=()=>Qa()?.config,Zm=t=>Qa()?.[`_${t}`];class GI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(t){return(await fetch(t,{credentials:"include"})).ok}function zI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ha(JSON.stringify(n)),ha(JSON.stringify(o)),""].join(".")}const Di={};function WI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Di))Di[e]?t.emulator.push(e):t.prod.push(e);return t}function QI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zf=!1;function tg(t,e){if(typeof window>"u"||typeof document>"u"||!Hr(window.location.host)||Di[t]===e||Di[t]||Zf)return;Di[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=WI().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Zf=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=QI(s),_=n("text"),k=document.getElementById(_)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),U=n("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const Q=m.element;l(Q),f(V,D);const G=h();c(B,U),Q.append(B,k,V,G),document.body.appendChild(Q)}i?(k.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function XI(){const t=Qa()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tA(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nA(){return!XI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){try{return typeof indexedDB=="object"}catch{return!1}}function rA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const iA="FirebaseError";class Yn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=iA,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,co.prototype.create)}}class co{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?oA(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Yn(r,l,s)}}function oA(t,e){return t.replace(aA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const aA=/\{\$([^}]+)}/g;function lA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(ed(i)&&ed(o)){if(!Qs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function ed(t){return t!==null&&typeof t=="object"}function uo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function cA(t,e){const n=new uA(t,e);return n.subscribe.bind(n)}class uA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=ql),r.error===void 0&&(r.error=ql),r.complete===void 0&&(r.complete=ql);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ql(){}function Jt(t){return t&&t._delegate?t._delegate:t}class Ys{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ms="[DEFAULT]";class fA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new GI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pA(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dA(t){return t===Ms?void 0:t}function pA(t){return t.instantiationMode==="EAGER"}class mA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const gA={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},_A=be.INFO,yA={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},vA=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=yA[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class du{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const EA=(t,e)=>e.some(n=>t instanceof n);let td,nd;function TA(){return td||(td=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IA(){return nd||(nd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ng=new WeakMap,vc=new WeakMap,sg=new WeakMap,Hl=new WeakMap,pu=new WeakMap;function AA(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ng.set(n,t)}).catch(()=>{}),pu.set(e,t),e}function wA(t){if(vc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vc.set(t,e)}let Ec={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RA(t){Ec=t(Ec)}function SA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Kl(this),e,...n);return sg.set(s,e.sort?e.sort():[e]),gs(s)}:IA().includes(t)?function(...e){return t.apply(Kl(this),e),gs(ng.get(this))}:function(...e){return gs(t.apply(Kl(this),e))}}function bA(t){return typeof t=="function"?SA(t):(t instanceof IDBTransaction&&wA(t),EA(t,TA())?new Proxy(t,Ec):t)}function gs(t){if(t instanceof IDBRequest)return AA(t);if(Hl.has(t))return Hl.get(t);const e=bA(t);return e!==t&&(Hl.set(t,e),pu.set(e,t)),e}const Kl=t=>pu.get(t);function CA(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=gs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(gs(o.result),c.oldVersion,c.newVersion,gs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const PA=["get","getKey","getAll","getAllKeys","count"],kA=["put","add","delete","clear"],Gl=new Map;function sd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gl.get(e))return Gl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=kA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||PA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Gl.set(e,i),i}RA(t=>({...t,get:(e,n,s)=>sd(e,n)||t.get(e,n,s),has:(e,n)=>!!sd(e,n)||t.has(e,n)}));class NA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function DA(t){return t.getComponent()?.type==="VERSION"}const Tc="@firebase/app",rd="0.14.6";const Hn=new du("@firebase/app"),VA="@firebase/app-compat",OA="@firebase/analytics-compat",xA="@firebase/analytics",LA="@firebase/app-check-compat",MA="@firebase/app-check",FA="@firebase/auth",UA="@firebase/auth-compat",BA="@firebase/database",$A="@firebase/data-connect",jA="@firebase/database-compat",qA="@firebase/functions",HA="@firebase/functions-compat",KA="@firebase/installations",GA="@firebase/installations-compat",zA="@firebase/messaging",WA="@firebase/messaging-compat",QA="@firebase/performance",YA="@firebase/performance-compat",XA="@firebase/remote-config",JA="@firebase/remote-config-compat",ZA="@firebase/storage",ew="@firebase/storage-compat",tw="@firebase/firestore",nw="@firebase/ai",sw="@firebase/firestore-compat",rw="firebase",iw="12.6.0";const Ic="[DEFAULT]",ow={[Tc]:"fire-core",[VA]:"fire-core-compat",[xA]:"fire-analytics",[OA]:"fire-analytics-compat",[MA]:"fire-app-check",[LA]:"fire-app-check-compat",[FA]:"fire-auth",[UA]:"fire-auth-compat",[BA]:"fire-rtdb",[$A]:"fire-data-connect",[jA]:"fire-rtdb-compat",[qA]:"fire-fn",[HA]:"fire-fn-compat",[KA]:"fire-iid",[GA]:"fire-iid-compat",[zA]:"fire-fcm",[WA]:"fire-fcm-compat",[QA]:"fire-perf",[YA]:"fire-perf-compat",[XA]:"fire-rc",[JA]:"fire-rc-compat",[ZA]:"fire-gcs",[ew]:"fire-gcs-compat",[tw]:"fire-fst",[sw]:"fire-fst-compat",[nw]:"fire-vertex","fire-js":"fire-js",[rw]:"fire-js-all"};const fa=new Map,aw=new Map,Ac=new Map;function id(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(Ac.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;Ac.set(e,t);for(const n of fa.values())id(n,t);for(const n of aw.values())id(n,t);return!0}function mu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}const lw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new co("app","Firebase",lw);class cw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}const Kr=iw;function rg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Ic,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw _s.create("bad-app-name",{appName:String(r)});if(n||(n=Jm()),!n)throw _s.create("no-options");const i=fa.get(r);if(i){if(Qs(n,i.options)&&Qs(s,i.config))return i;throw _s.create("duplicate-app",{appName:r})}const o=new mA(r);for(const c of Ac.values())o.addComponent(c);const l=new cw(n,s,o);return fa.set(r,l),l}function ig(t=Ic){const e=fa.get(t);if(!e&&t===Ic&&Jm())return rg();if(!e)throw _s.create("no-app",{appName:t});return e}function ys(t,e,n){let s=ow[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}xr(new Ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const uw="firebase-heartbeat-database",hw=1,zi="firebase-heartbeat-store";let zl=null;function og(){return zl||(zl=CA(uw,hw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),zl}async function fw(t){try{const n=(await og()).transaction(zi),s=await n.objectStore(zi).get(ag(t));return await n.done,s}catch(e){if(e instanceof Yn)Hn.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}}async function od(t,e){try{const s=(await og()).transaction(zi,"readwrite");await s.objectStore(zi).put(e,ag(t)),await s.done}catch(n){if(n instanceof Yn)Hn.warn(n.message);else{const s=_s.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(s.message)}}}function ag(t){return`${t.name}!${t.options.appId}`}const dw=1024,pw=30;class mw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _w(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ad();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>pw){const r=yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ad(),{heartbeatsToSend:n,unsentEntries:s}=gw(this._heartbeatsCache.heartbeats),r=ha(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Hn.warn(e),""}}}function ad(){return new Date().toISOString().substring(0,10)}function gw(t,e=dw){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ld(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ld(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _w{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sA()?rA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return od(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return od(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ld(t){return ha(JSON.stringify({version:2,heartbeats:t})).length}function yw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function vw(t){xr(new Ys("platform-logger",e=>new NA(e),"PRIVATE")),xr(new Ys("heartbeat",e=>new mw(e),"PRIVATE")),ys(Tc,rd,t),ys(Tc,rd,"esm2020"),ys("fire-js","")}vw("");function lg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ew=lg,cg=new co("auth","Firebase",lg());const da=new du("@firebase/auth");function Tw(t,...e){da.logLevel<=be.WARN&&da.warn(`Auth (${Kr}): ${t}`,...e)}function zo(t,...e){da.logLevel<=be.ERROR&&da.error(`Auth (${Kr}): ${t}`,...e)}function Sn(t,...e){throw _u(t,...e)}function an(t,...e){return _u(t,...e)}function gu(t,e,n){const s={...Ew(),[e]:n};return new co("auth","Firebase",s).create(e,{appName:t.name})}function Ks(t){return gu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iw(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Sn(t,"argument-error"),gu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _u(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return cg.create(t,...e)}function _e(t,e,...n){if(!t)throw _u(e,...n)}function xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zo(e),new Error(e)}function Kn(t,e){t||xn(e)}function wc(){return typeof self<"u"&&self.location?.href||""}function Aw(){return cd()==="http:"||cd()==="https:"}function cd(){return typeof self<"u"&&self.location?.protocol||null}function ww(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Aw()||ZI()||"connection"in navigator)?navigator.onLine:!0}function Rw(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=YI()||eA()}get(){return ww()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yu(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ug{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cw=new ho(3e4,6e4);function vu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gr(t,e,n,s,r={}){return hg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=uo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return JI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(h.credentials="include"),ug.fetch()(await fg(t,t.config.apiHost,n,l),h)})}async function hg(t,e,n){t._canInitEmulator=!1;const s={...Sw,...e};try{const r=new kw(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Lo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Lo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Lo(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gu(t,f,h);Sn(t,f)}}catch(r){if(r instanceof Yn)throw r;Sn(t,"network-request-failed",{message:String(r)})}}async function Pw(t,e,n,s,r={}){const i=await Gr(t,e,n,s,r);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?yu(t.config,r):`${t.config.apiScheme}://${r}`;return bw.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class kw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(an(this.auth,"network-request-failed")),Cw.get())})}}function Lo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=an(t,e,s);return r.customData._tokenResponse=n,r}async function Nw(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function pa(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}function Vi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dw(t,e=!1){const n=Jt(t),s=await n.getIdToken(e),r=Eu(s);_e(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Vi(Wl(r.auth_time)),issuedAtTime:Vi(Wl(r.iat)),expirationTime:Vi(Wl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Wl(t){return Number(t)*1e3}function Eu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return zo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ym(n);return r?JSON.parse(r):(zo("Failed to decode base64 JWT payload"),null)}catch(r){return zo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ud(t){const e=Eu(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Yn&&Vw(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Vw({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Ow{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vi(this.lastLoginAt),this.creationTime=Vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ma(t){const e=t.auth,n=await t.getIdToken(),s=await Wi(t,pa(e,{idToken:n}));_e(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?dg(r.providerUserInfo):[],o=Lw(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Rc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function xw(t){const e=Jt(t);await ma(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lw(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function dg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Mw(t,e){const n=await hg(t,{},async()=>{const s=uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await fg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(c.credentials="include"),ug.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fw(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",vu(t,e))}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ud(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=ud(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Mw(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Ar;return s&&(_e(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(_e(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(_e(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return xn("not implemented")}}function rs(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Ow(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Rc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Wi(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Dw(this,e)}reload(){return xw(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ma(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await Wi(this,Nw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:k,stsTokenManager:D}=n;_e(p&&D,e,"internal-error");const V=Ar.fromJSON(this.name,D);_e(typeof p=="string",e,"internal-error"),rs(s,e.name),rs(r,e.name),_e(typeof m=="boolean",e,"internal-error"),_e(typeof _=="boolean",e,"internal-error"),rs(i,e.name),rs(o,e.name),rs(l,e.name),rs(c,e.name),rs(h,e.name),rs(f,e.name);const U=new sn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:f});return k&&Array.isArray(k)&&(U.providerData=k.map(B=>({...B}))),c&&(U._redirectEventId=c),U}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ar;r.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ma(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];_e(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?dg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Ar;l.updateFromIdToken(s);const c=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Rc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const hd=new Map;function Ln(t){Kn(t instanceof Function,"Expected a class definition");let e=hd.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hd.set(t,e),e)}class pg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pg.type="NONE";const fd=pg;function Wo(t,e,n){return`firebase:${t}:${e}:${n}`}class wr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Wo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pa(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new wr(Ln(fd),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Ln(fd);const o=Wo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const m=await pa(e,{idToken:f}).catch(()=>{});if(!m)break;p=await sn._fromGetAccountInfoResponse(e,m,f)}else p=sn._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new wr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new wr(i,e,s))}}function dd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Eg(e))return"Blackberry";if(Tg(e))return"Webos";if(gg(e))return"Safari";if((e.includes("chrome/")||_g(e))&&!e.includes("edge/"))return"Chrome";if(vg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function mg(t=Dt()){return/firefox\//i.test(t)}function gg(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _g(t=Dt()){return/crios\//i.test(t)}function yg(t=Dt()){return/iemobile/i.test(t)}function vg(t=Dt()){return/android/i.test(t)}function Eg(t=Dt()){return/blackberry/i.test(t)}function Tg(t=Dt()){return/webos/i.test(t)}function Tu(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Uw(t=Dt()){return Tu(t)&&!!window.navigator?.standalone}function Bw(){return tA()&&document.documentMode===10}function Ig(t=Dt()){return Tu(t)||vg(t)||Tg(t)||Eg(t)||/windows phone/i.test(t)||yg(t)}function Ag(t,e=[]){let n;switch(t){case"Browser":n=dd(Dt());break;case"Worker":n=`${dd(Dt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kr}/${s}`}class $w{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function jw(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",vu(t,e))}const qw=6;class Hw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Kw{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pd(this),this.idTokenSubscription=new pd(this),this.beforeStateQueue=new $w(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pa(this,{idToken:e}),s=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ma(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Ks(this));const n=e?Jt(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jw(this),n=new Hw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new co("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Fw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await wr.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Tw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ya(t){return Jt(t)}class pd{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gw(t){Iu=t}function zw(t){return Iu.loadJS(t)}function Ww(){return Iu.gapiScript}function Qw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Yw(t,e){const n=mu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Qs(i,e??{}))return r;Sn(r,"already-initialized")}return n.initialize({options:e})}function Xw(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function Jw(t,e,n){const s=Ya(t);_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=wg(e),{host:o,port:l}=Zw(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){_e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_e(Qs(h,s.config.emulator)&&Qs(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Hr(o)?(eg(`${i}//${o}${c}`),tg("Auth",!0)):eR()}function wg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Zw(t){const e=wg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:md(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:md(o)}}}function md(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xn("not implemented")}_getIdTokenResponse(e){return xn("not implemented")}_linkToIdToken(e,n){return xn("not implemented")}_getReauthenticationResolver(e){return xn("not implemented")}}async function Rr(t,e){return Pw(t,"POST","/v1/accounts:signInWithIdp",vu(t,e))}const tR="http://localhost";class Xs extends Rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Xs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rr(e,n)}buildRequest(){const e={requestUri:tR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uo(n)}return e}}class Au{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fo extends Au{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hs extends fo{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";class On extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return On.credential(n,s)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class fs extends fo{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";class ds extends fo{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ds.credential(n,s)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";class Lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await sn._fromIdTokenResponse(e,s,r),o=gd(s);return new Lr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=gd(s);return new Lr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function gd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ga extends Yn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ga(e,n,s,r)}}function Sg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ga._fromErrorAndOperation(t,i,e,s):i})}async function nR(t,e,n=!1){const s=await Wi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lr._forOperation(t,"link",s)}async function sR(t,e,n=!1){const{auth:s}=t;if(tn(s.app))return Promise.reject(Ks(s));const r="reauthenticate";try{const i=await Wi(t,Sg(s,r,e,t),n);_e(i.idToken,s,"internal-error");const o=Eu(i.idToken);_e(o,s,"internal-error");const{sub:l}=o;return _e(t.uid===l,s,"user-mismatch"),Lr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Sn(s,"user-mismatch"),i}}async function rR(t,e,n=!1){if(tn(t.app))return Promise.reject(Ks(t));const s="signIn",r=await Sg(t,s,e),i=await Lr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function iR(t,e,n,s){return Jt(t).onIdTokenChanged(e,n,s)}function oR(t,e,n){return Jt(t).beforeAuthStateChanged(e,n)}function aR(t,e,n,s){return Jt(t).onAuthStateChanged(e,n,s)}function lR(t){return Jt(t).signOut()}const _a="__sak";class bg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cR=1e3,uR=10;class Cg extends bg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ig(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Bw()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,uR):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},cR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cg.type="LOCAL";const hR=Cg;class Pg extends bg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Pg.type="SESSION";const kg=Pg;function fR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Xa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Xa(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await fR(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xa.receivers=[];function wu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class dR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=wu("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function vn(){return window}function pR(t){vn().location.href=t}function Ng(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function mR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gR(){return navigator?.serviceWorker?.controller||null}function _R(){return Ng()?self:null}const Dg="firebaseLocalStorageDb",yR=1,ya="firebaseLocalStorage",Vg="fbase_key";class po{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ja(t,e){return t.transaction([ya],e?"readwrite":"readonly").objectStore(ya)}function vR(){const t=indexedDB.deleteDatabase(Dg);return new po(t).toPromise()}function Sc(){const t=indexedDB.open(Dg,yR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ya,{keyPath:Vg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ya)?e(s):(s.close(),await vR(),e(await Sc()))})})}async function _d(t,e,n){const s=Ja(t,!0).put({[Vg]:e,value:n});return new po(s).toPromise()}async function ER(t,e){const n=Ja(t,!1).get(e),s=await new po(n).toPromise();return s===void 0?null:s.value}function yd(t,e){const n=Ja(t,!0).delete(e);return new po(n).toPromise()}const TR=800,IR=3;class Og{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>IR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ng()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xa._getInstance(_R()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mR(),!this.activeServiceWorker)return;this.sender=new dR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sc();return await _d(e,_a,"1"),await yd(e,_a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_d(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ER(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Ja(r,!1).getAll();return new po(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Og.type="LOCAL";const AR=Og;new ho(3e4,6e4);function xg(t,e){return e?Ln(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ru extends Rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wR(t){return rR(t.auth,new Ru(t),t.bypassAuthState)}function RR(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),sR(n,new Ru(t),t.bypassAuthState)}async function SR(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),nR(n,new Ru(t),t.bypassAuthState)}class Lg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wR;case"linkViaPopup":case"linkViaRedirect":return SR;case"reauthViaPopup":case"reauthViaRedirect":return RR;default:Sn(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bR=new ho(2e3,1e4);async function CR(t,e,n){if(tn(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const s=Ya(t);Iw(t,e,Au);const r=xg(s,n);return new Us(s,"signInViaPopup",e,r).executeNotNull()}class Us extends Lg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=wu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bR.get())};e()}}Us.currentPopupAction=null;const PR="pendingRedirect",Qo=new Map;class kR extends Lg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Qo.get(this.auth._key());if(!e){try{const s=await NR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Qo.set(this.auth._key(),e)}return this.bypassAuthState||Qo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NR(t,e){const n=OR(e),s=VR(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function DR(t,e){Qo.set(t._key(),e)}function VR(t){return Ln(t._redirectPersistence)}function OR(t){return Wo(PR,t.config.apiKey,t.name)}async function xR(t,e,n=!1){if(tn(t.app))return Promise.reject(Ks(t));const s=Ya(t),r=xg(s,e),o=await new kR(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const LR=600*1e3;class MR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Mg(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(an(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LR&&this.cachedEventUids.clear(),this.cachedEventUids.has(vd(e))}saveEventToCache(e){this.cachedEventUids.add(vd(e)),this.lastProcessedEventTime=Date.now()}}function vd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function FR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mg(t);default:return!1}}async function UR(t,e={}){return Gr(t,"GET","/v1/projects",e)}const BR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$R=/^https?/;async function jR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UR(t);for(const n of e)try{if(qR(n))return}catch{}Sn(t,"unauthorized-domain")}function qR(t){const e=wc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!$R.test(n))return!1;if(BR.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const HR=new ho(3e4,6e4);function Ed(){const t=vn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KR(t){return new Promise((e,n)=>{function s(){Ed(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ed(),n(an(t,"network-request-failed"))},timeout:HR.get()})}if(vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vn().gapi?.load)s();else{const r=Qw("iframefcb");return vn()[r]=()=>{gapi.load?s():n(an(t,"network-request-failed"))},zw(`${Ww()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Yo=null,e})}let Yo=null;function GR(t){return Yo=Yo||KR(t),Yo}const zR=new ho(5e3,15e3),WR="__/auth/iframe",QR="emulator/auth/iframe",YR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JR(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yu(e,QR):`https://${t.config.authDomain}/${WR}`,s={apiKey:e.apiKey,appName:t.name,v:Kr},r=XR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${uo(s).slice(1)}`}async function ZR(t){const e=await GR(t),n=vn().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:JR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},zR.get());function c(){vn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const eS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tS=500,nS=600,sS="_blank",rS="http://localhost";class Td{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iS(t,e,n,s=tS,r=nS){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...eS,width:s.toString(),height:r.toString(),top:i,left:o},h=Dt().toLowerCase();n&&(l=_g(h)?sS:n),mg(h)&&(e=e||rS,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[_,k])=>`${m}${_}=${k},`,"");if(Uw(h)&&l!=="_self")return oS(e||"",l),new Td(null);const p=window.open(e||"",l,f);_e(p,t,"popup-blocked");try{p.focus()}catch{}return new Td(p)}function oS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const aS="__/auth/handler",lS="emulator/auth/handler",cS=encodeURIComponent("fac");async function Id(t,e,n,s,r,i){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Kr,eventId:r};if(e instanceof Au){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof fo){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${cS}=${encodeURIComponent(c)}`:"";return`${uS(t)}?${uo(l).slice(1)}${h}`}function uS({config:t}){return t.emulator?yu(t,lS):`https://${t.authDomain}/${aS}`}const Ql="webStorageSupport";class hS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kg,this._completeRedirectFn=xR,this._overrideRedirectResult=DR}async _openPopup(e,n,s,r){Kn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Id(e,n,s,wc(),r);return iS(e,i,wu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Id(e,n,s,wc(),r);return pR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Kn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await ZR(e),s=new MR(e);return n.register("authEvent",r=>(_e(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ql,{type:Ql},r=>{const i=r?.[0]?.[Ql];i!==void 0&&n(!!i),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ig()||gg()||Tu()}}const fS=hS;var Ad="@firebase/auth",wd="1.12.0";class dS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mS(t){xr(new Ys("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(t)},h=new Kw(s,r,i,c);return Xw(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),xr(new Ys("auth-internal",e=>{const n=Ya(e.getProvider("auth").getImmediate());return(s=>new dS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(Ad,wd,pS(t)),ys(Ad,wd,"esm2020")}const gS=300,_S=Zm("authIdTokenMaxAge")||gS;let Rd=null;const yS=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>_S)return;const r=n?.token;Rd!==r&&(Rd=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function vS(t=ig()){const e=mu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Yw(t,{popupRedirectResolver:fS,persistence:[AR,hR,kg]}),s=Zm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=yS(i.toString());oR(n,o,()=>o(n.currentUser)),iR(n,l=>o(l))}}const r=Xm("auth");return r&&Jw(n,`http://${r}`),n}function ES(){return document.getElementsByTagName("head")?.[0]??document}Gw({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=an("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",ES().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mS("Browser");var TS="firebase",IS="12.7.0";ys(TS,IS,"app");var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vs,Fg;(function(){var t;function e(w,y){function I(){}I.prototype=y.prototype,w.F=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(S,R,b){for(var E=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)E[ie-2]=arguments[ie];return y.prototype[R].apply(S,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,I){I||(I=0);const S=Array(16);if(typeof y=="string")for(var R=0;R<16;++R)S[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;R<16;++R)S[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],R=w.g[2];let b=w.g[3],E;E=y+(b^I&(R^b))+S[0]+3614090360&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[1]+3905402710&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[2]+606105819&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[3]+3250441966&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[5]+1200080426&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[6]+2821735955&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[7]+4249261313&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[9]+2336552879&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[10]+4294925233&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[11]+2304563134&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[13]+4254626195&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[14]+2792965006&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[15]+1236535329&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(R^b&(I^R))+S[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[6]+3225465664&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[11]+643717713&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[0]+3921069994&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[10]+38016083&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[15]+3634488961&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[4]+3889429448&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[14]+3275163606&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[3]+4107603335&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[8]+1163531501&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[2]+4243563512&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[7]+1735328473&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[12]+2368359562&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(I^R^b)+S[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[8]+2272392833&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[11]+1839030562&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[14]+4259657740&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[4]+1272893353&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[7]+4139469664&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[10]+3200236656&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[0]+3936430074&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[3]+3572445317&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[6]+76029189&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[12]+3873151461&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[15]+530742520&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[2]+3299628645&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(R^(I|~b))+S[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[7]+1126891415&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[14]+2878612391&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[5]+4237533241&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[3]+2399980690&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[10]+4293915773&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[1]+2240044497&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[15]+4264355552&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[6]+2734768916&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[13]+1309151649&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[11]+3174756917&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[2]+718787259&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+b&4294967295}s.prototype.v=function(w,y){y===void 0&&(y=w.length);const I=y-this.blockSize,S=this.C;let R=this.h,b=0;for(;b<y;){if(R==0)for(;b<=I;)r(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<y;)if(S[R++]=w.charCodeAt(b++),R==this.blockSize){r(this,S),R=0;break}}else for(;b<y;)if(S[R++]=w[b++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=y},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)w[y++]=this.g[I]>>>S&255;return w};function i(w,y){var I=l;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function o(w,y){this.h=y;const I=[];let S=!0;for(let R=w.length-1;R>=0;R--){const b=w[R]|0;S&&b==y||(I[R]=b,S=!1)}this.g=I}var l={};function c(w){return-128<=w&&w<128?i(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return V(h(-w));const y=[];let I=1;for(let S=0;w>=I;S++)y[S]=w/I|0,I*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return V(f(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(y,8));let S=p;for(let b=0;b<w.length;b+=8){var R=Math.min(8,w.length-b);const E=parseInt(w.substring(b,b+R),y);R<8?(R=h(Math.pow(y,R)),S=S.j(R).add(h(E))):(S=S.j(I),S=S.add(h(E)))}return S}var p=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-V(this).m();let w=0,y=1;for(let I=0;I<this.g.length;I++){const S=this.i(I);w+=(S>=0?S:4294967296+S)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(D(this))return"-"+V(this).toString(w);const y=h(Math.pow(w,6));var I=this;let S="";for(;;){const R=G(I,y).g;I=U(I,R.j(y));let b=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=R,k(I))return b+S;for(;b.length<6;)b="0"+b;S=b+S}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=U(this,w),D(w)?-1:k(w)?0:1};function V(w){const y=w.g.length,I=[];for(let S=0;S<y;S++)I[S]=~w.g[S];return new o(I,~w.h).add(m)}t.abs=function(){return D(this)?V(this):this},t.add=function(w){const y=Math.max(this.g.length,w.g.length),I=[];let S=0;for(let R=0;R<=y;R++){let b=S+(this.i(R)&65535)+(w.i(R)&65535),E=(b>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);S=E>>>16,b&=65535,E&=65535,I[R]=E<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function U(w,y){return w.add(V(y))}t.j=function(w){if(k(this)||k(w))return p;if(D(this))return D(w)?V(this).j(V(w)):V(V(this).j(w));if(D(w))return V(this.j(V(w)));if(this.l(_)<0&&w.l(_)<0)return h(this.m()*w.m());const y=this.g.length+w.g.length,I=[];for(var S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<w.g.length;R++){const b=this.i(S)>>>16,E=this.i(S)&65535,ie=w.i(R)>>>16,te=w.i(R)&65535;I[2*S+2*R]+=E*te,B(I,2*S+2*R),I[2*S+2*R+1]+=b*te,B(I,2*S+2*R+1),I[2*S+2*R+1]+=E*ie,B(I,2*S+2*R+1),I[2*S+2*R+2]+=b*ie,B(I,2*S+2*R+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new o(I,0)};function B(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Q(w,y){this.g=w,this.h=y}function G(w,y){if(k(y))throw Error("division by zero");if(k(w))return new Q(p,p);if(D(w))return y=G(V(w),y),new Q(V(y.g),V(y.h));if(D(y))return y=G(w,V(y)),new Q(V(y.g),y.h);if(w.g.length>30){if(D(w)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=y;S.l(w)<=0;)I=de(I),S=de(S);var R=Ee(I,1),b=Ee(S,1);for(S=Ee(S,2),I=Ee(I,2);!k(S);){var E=b.add(S);E.l(w)<=0&&(R=R.add(I),b=E),S=Ee(S,1),I=Ee(I,1)}return y=U(w,R.j(y)),new Q(R,y)}for(R=p;w.l(y)>=0;){for(I=Math.max(1,Math.floor(w.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),b=h(I),E=b.j(y);D(E)||E.l(w)>0;)I-=S,b=h(I),E=b.j(y);k(b)&&(b=m),R=R.add(b),w=U(w,E)}return new Q(R,w)}t.B=function(w){return G(this,w).h},t.and=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)&w.i(S);return new o(I,this.h&w.h)},t.or=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)|w.i(S);return new o(I,this.h|w.h)},t.xor=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)^w.i(S);return new o(I,this.h^w.h)};function de(w){const y=w.g.length+1,I=[];for(let S=0;S<y;S++)I[S]=w.i(S)<<1|w.i(S-1)>>>31;return new o(I,w.h)}function Ee(w,y){const I=y>>5;y%=32;const S=w.g.length-I,R=[];for(let b=0;b<S;b++)R[b]=y>0?w.i(b+I)>>>y|w.i(b+I+1)<<32-y:w.i(b+I);return new o(R,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Fg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,vs=o}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ug,Ti,Bg,Xo,bc,$g,jg,qg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mo=="object"&&Mo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in d))break e;d=d[P]}a=a[a.length-1],g=d[a],u=u(g),u!=g&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],g;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.push([g,u[g]]);return d}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,P,N){for(var J=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)J[Ie-2]=arguments[Ie];return u.prototype[P].apply(g,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const u=a.length;if(u>0){const d=Array(u);for(let g=0;g<u;g++)d[g]=a[g];return d}return[]}function k(a,u){for(let g=1;g<arguments.length;g++){const P=arguments[g];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const N=P.length||0;a.length=d+N;for(let J=0;J<N;J++)a[d+J]=P[J]}else a.push(P)}}class D{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function V(a){o.setTimeout(()=>{throw a},0)}function U(){var a=w;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class B{constructor(){this.h=this.g=null}add(u,d){const g=Q.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Q=new D(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ee=!1,w=new B,y=()=>{const a=Promise.resolve(void 0);de=()=>{a.then(I)}};function I(){for(var a;a=U();){try{a.h.call(a.g)}catch(d){V(d)}var u=Q;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}Ee=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a})();function E(a){return/^[\s\xa0]*$/.test(a)}function ie(a,u){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ie,R),ie.prototype.init=function(a,u){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Ve(a,u,d,g,P){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=P,this.key=++Ne,this.da=this.fa=!1}function we(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Tt(a,u,d){for(const g in a)u.call(d,a[g],g,a)}function zt(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function Vt(a){const u={};for(const d in a)u[d]=a[d];return u}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,u){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)a[d]=g[d];for(let N=0;N<q.length;N++)d=q[N],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function W(a){this.src=a,this.g={},this.h=0}W.prototype.add=function(a,u,d,g,P){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const J=It(a,u,g,P);return J>-1?(u=a[J],d||(u.fa=!1)):(u=new Ve(u,this.src,N,!!g,P),u.fa=d,a.push(u)),u};function ut(a,u){const d=u.type;if(d in a.g){var g=a.g[d],P=Array.prototype.indexOf.call(g,u,void 0),N;(N=P>=0)&&Array.prototype.splice.call(g,P,1),N&&(we(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function It(a,u,d,g){for(let P=0;P<a.length;++P){const N=a[P];if(!N.da&&N.listener==u&&N.capture==!!d&&N.ha==g)return P}return-1}var L="closure_lm_"+(Math.random()*1e6|0),se={};function ee(a,u,d,g,P){if(Array.isArray(u)){for(let N=0;N<u.length;N++)ee(a,u[N],d,g,P);return null}return d=Z(d),a&&a[te]?a.J(u,d,l(g)?!!g.capture:!1,P):ae(a,u,d,!1,g,P)}function ae(a,u,d,g,P,N){if(!u)throw Error("Invalid event type");const J=l(P)?!!P.capture:!!P;let Ie=F(a);if(Ie||(a[L]=Ie=new W(a)),d=Ie.add(u,d,g,J,N),d.proxy)return d;if(g=Se(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)b||(P=J),P===void 0&&(P=!1),a.addEventListener(u.toString(),g,P);else if(a.attachEvent)a.attachEvent(C(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Se(){function a(d){return u.call(a.src,a.listener,d)}const u=O;return a}function v(a,u,d,g,P){if(Array.isArray(u))for(var N=0;N<u.length;N++)v(a,u[N],d,g,P);else g=l(g)?!!g.capture:!!g,d=Z(d),a&&a[te]?(a=a.i,N=String(u).toString(),N in a.g&&(u=a.g[N],d=It(u,d,g,P),d>-1&&(we(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[N],a.h--)))):a&&(a=F(a))&&(u=a.g[u.toString()],a=-1,u&&(a=It(u,d,g,P)),(d=a>-1?u[a]:null)&&A(d))}function A(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[te])ut(u.i,a);else{var d=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(d,g,a.capture):u.detachEvent?u.detachEvent(C(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=F(u))?(ut(d,a),d.h==0&&(d.src=null,u[L]=null)):we(a)}}}function C(a){return a in se?se[a]:se[a]="on"+a}function O(a,u){if(a.da)a=!0;else{u=new ie(u,this);const d=a.listener,g=a.ha||a.src;a.fa&&A(a),a=d.call(g,u)}return a}function F(a){return a=a[L],a instanceof W?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(a){return typeof a=="function"?a:(a[x]||(a[x]=function(u){return a.handleEvent(u)}),a[x])}function K(){S.call(this),this.i=new W(this),this.M=this,this.G=null}p(K,S),K.prototype[te]=!0,K.prototype.removeEventListener=function(a,u,d,g){v(this,a,u,d,g)};function H(a,u){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new R(u,a);else if(u instanceof R)u.target=u.target||a;else{var P=u;u=new R(g,a),X(u,P)}P=!0;let N,J;if(d)for(J=d.length-1;J>=0;J--)N=u.g=d[J],P=$(N,g,!0,u)&&P;if(N=u.g=a,P=$(N,g,!0,u)&&P,P=$(N,g,!1,u)&&P,d)for(J=0;J<d.length;J++)N=u.g=d[J],P=$(N,g,!1,u)&&P}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let g=0;g<d.length;g++)we(d[g]);delete a.g[u],a.h--}}this.G=null},K.prototype.J=function(a,u,d,g){return this.i.add(String(a),u,!1,d,g)},K.prototype.K=function(a,u,d,g){return this.i.add(String(a),u,!0,d,g)};function $(a,u,d,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let N=0;N<u.length;++N){const J=u[N];if(J&&!J.da&&J.capture==d){const Ie=J.listener,ot=J.ha||J.src;J.fa&&ut(a.i,J),P=Ie.call(ot,g)!==!1&&P}}return P&&!g.defaultPrevented}function ue(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function ne(a){a.g=ue(()=>{a.g=null,a.i&&(a.i=!1,ne(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class le extends S{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(a){S.call(this),this.h=a,this.g={}}p(fe,S);var Re=[];function Fe(a){Tt(a.g,function(u,d){this.g.hasOwnProperty(d)&&A(u)},a),a.g={}}fe.prototype.N=function(){fe.Z.N.call(this),Fe(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=o.JSON.stringify,At=o.JSON.parse,wt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function $t(){}function jt(){}var en={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ar(){R.call(this,"d")}p(ar,R);function gt(){R.call(this,"c")}p(gt,R);var ht={},Zr=null;function Ps(){return Zr=Zr||new K}ht.Ia="serverreachability";function dh(a){R.call(this,ht.Ia,a)}p(dh,R);function ei(a){const u=Ps();H(u,new dh(u))}ht.STAT_EVENT="statevent";function ph(a,u){R.call(this,ht.STAT_EVENT,a),this.stat=u}p(ph,R);function Ot(a){const u=Ps();H(u,new ph(u,a))}ht.Ja="timingevent";function mh(a,u){R.call(this,ht.Ja,a),this.size=u}p(mh,R);function ti(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Vy(a,u,d,g,P,N){a.info(function(){if(a.g)if(N){var J="",Ie=N.split("&");for(let Ue=0;Ue<Ie.length;Ue++){var ot=Ie[Ue].split("=");if(ot.length>1){const ft=ot[0];ot=ot[1];const fn=ft.split("_");J=fn.length>=2&&fn[1]=="type"?J+(ft+"="+ot+"&"):J+(ft+"=redacted&")}}}else J=null;else J=N;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+u+`
`+d+`
`+J})}function Oy(a,u,d,g,P,N,J){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+u+`
`+d+`
`+N+" "+J})}function lr(a,u,d,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Ly(a,d)+(g?" "+g:"")})}function xy(a,u){a.info(function(){return"TIMEOUT: "+u})}ni.prototype.info=function(){};function Ly(a,u){if(!a.g)return u;if(!u)return null;try{const N=JSON.parse(u);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let J=1;J<g.length;J++)g[J]=""}}}}return De(N)}catch{return u}}var Io={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_h;function pl(){}p(pl,$t),pl.prototype.g=function(){return new XMLHttpRequest},_h=new pl;function si(a){return encodeURIComponent(String(a))}function My(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Xn(a,u,d,g){this.j=a,this.i=u,this.l=d,this.S=g||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yh}function yh(){this.i=null,this.g="",this.h=!1}var vh={},ml={};function gl(a,u,d){a.M=1,a.A=wo(hn(u)),a.u=d,a.R=!0,Eh(a,null)}function Eh(a,u){a.F=Date.now(),Ao(a),a.B=hn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Vh(d.i,"t",g),a.C=0,d=a.j.L,a.h=new yh,a.g=Xh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new le(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(Re[0]=P.toString()),P=Re);for(let N=0;N<P.length;N++){const J=ee(d,P[N],g||u.handleEvent,!1,u.h||u);if(!J)break;u.g[J.key]=J}u=a.J?Vt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),ei(),Vy(a.i,a.v,a.B,a.l,a.S,a.u)}Xn.prototype.ba=function(a){a=a.target;const u=this.O;u&&es(a)==3?u.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{const Ie=es(this.g),ot=this.g.ya(),Ue=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Bh(this.g)))){this.K||Ie!=4||ot==7||(ot==8||Ue<=0?ei(3):ei(2)),_l(this);var u=this.g.ca();this.X=u;var d=Fy(this);if(this.o=u==200,Oy(this.i,this.v,this.B,this.l,this.S,Ie,u),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var N=g;break t}}N=null}if(a=N)lr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yl(this,a);else{this.o=!1,this.m=3,Ot(12),ks(this),ri(this);break e}}if(this.R){a=!0;let ft;for(;!this.K&&this.C<d.length;)if(ft=Uy(this,d),ft==ml){Ie==4&&(this.m=4,Ot(14),a=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==vh){this.m=4,Ot(15),lr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else lr(this.i,this.l,ft,null),yl(this,ft);if(Th(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||d.length!=0||this.h.h||(this.m=1,Ot(16),a=!1),this.o=this.o&&a,!a)lr(this.i,this.l,d,"[Invalid Chunked Response]"),ks(this),ri(this);else if(d.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Sl(J),J.P=!0,Ot(11))}}else lr(this.i,this.l,d,null),yl(this,d);Ie==4&&ks(this),this.o&&!this.K&&(Ie==4?zh(this.j,this):(this.o=!1,Ao(this)))}else Zy(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),ks(this),ri(this)}}}catch{}};function Fy(a){if(!Th(a))return a.g.la();const u=Bh(a.g);if(u==="")return"";let d="";const g=u.length,P=es(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ks(a),ri(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<g;N++)a.h.h=!0,d+=a.h.i.decode(u[N],{stream:!(P&&N==g-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function Th(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Uy(a,u){var d=a.C,g=u.indexOf(`
`,d);return g==-1?ml:(d=Number(u.substring(d,g)),isNaN(d)?vh:(g+=1,g+d>u.length?ml:(u=u.slice(g,g+d),a.C=g+d,u)))}Xn.prototype.cancel=function(){this.K=!0,ks(this)};function Ao(a){a.T=Date.now()+a.H,Ih(a,a.H)}function Ih(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ti(h(a.aa,a),u)}function _l(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Xn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(xy(this.i,this.B),this.M!=2&&(ei(),Ot(17)),ks(this),this.m=2,ri(this)):Ih(this,this.T-a)};function ri(a){a.j.I==0||a.K||zh(a.j,a)}function ks(a){_l(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Fe(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function yl(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||vl(d.h,a))){if(!a.L&&vl(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Po(d),bo(d);else break e;Rl(d),Ot(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=ti(h(d.Va,d),6e3));Rh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Ds(d,11)}else if((a.L||d.g==a)&&Po(d),!E(u))for(P=d.Ba.g.parse(u),u=0;u<P.length;u++){let Ue=P[u];const ft=Ue[0];if(!(ft<=d.K))if(d.K=ft,Ue=Ue[1],d.I==2)if(Ue[0]=="c"){d.M=Ue[1],d.ba=Ue[2];const fn=Ue[3];fn!=null&&(d.ka=fn,d.j.info("VER="+d.ka));const Vs=Ue[4];Vs!=null&&(d.za=Vs,d.j.info("SVER="+d.za));const ts=Ue[5];ts!=null&&typeof ts=="number"&&ts>0&&(g=1.5*ts,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const ns=a.g;if(ns){const No=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var N=g.h;N.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(El(N,N.h),N.h=null))}if(g.G){const bl=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(g.wa=bl,He(g.J,g.G,bl))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var J=a;if(g.na=Yh(g,g.L?g.ba:null,g.W),J.L){Sh(g.h,J);var Ie=J,ot=g.O;ot&&(Ie.H=ot),Ie.D&&(_l(Ie),Ao(Ie)),g.g=J}else Kh(g);d.i.length>0&&Co(d)}else Ue[0]!="stop"&&Ue[0]!="close"||Ds(d,7);else d.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ds(d,7):wl(d):Ue[0]!="noop"&&d.l&&d.l.qa(Ue),d.A=0)}}ei(4)}catch{}}var By=class{constructor(a,u){this.g=a,this.map=u}};function Ah(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rh(a){return a.h?1:a.g?a.g.size:0}function vl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function El(a,u){a.g?a.g.add(u):a.h=u}function Sh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Ah.prototype.cancel=function(){if(this.i=bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function bh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return _(a.i)}var Ch=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $y(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let P,N=null;g>=0?(P=a[d].substring(0,g),N=a[d].substring(g+1)):P=a[d],u(P,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Jn?(this.l=a.l,ii(this,a.j),this.o=a.o,this.g=a.g,oi(this,a.u),this.h=a.h,Tl(this,Oh(a.i)),this.m=a.m):a&&(u=String(a).match(Ch))?(this.l=!1,ii(this,u[1]||"",!0),this.o=ai(u[2]||""),this.g=ai(u[3]||"",!0),oi(this,u[4]),this.h=ai(u[5]||"",!0),Tl(this,u[6]||"",!0),this.m=ai(u[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}Jn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(li(u,Ph,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(li(u,Ph,!0),"@"),a.push(si(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(li(d,d.charAt(0)=="/"?Hy:qy,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",li(d,Gy)),a.join("")},Jn.prototype.resolve=function(a){const u=hn(this);let d=!!a.j;d?ii(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var g=a.h;if(d)oi(u,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=u.h.lastIndexOf("/");P!=-1&&(g=u.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const N=[];for(let J=0;J<P.length;){const Ie=P[J++];Ie=="."?g&&J==P.length&&N.push(""):Ie==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&J==P.length&&N.push("")):(N.push(Ie),g=!0)}g=N.join("/")}else g=P}return d?u.h=g:d=a.i.toString()!=="",d?Tl(u,Oh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function hn(a){return new Jn(a)}function ii(a,u,d){a.j=d?ai(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function oi(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Tl(a,u,d){u instanceof ci?(a.i=u,zy(a.i,a.l)):(d||(u=li(u,Ky)),a.i=new ci(u,a.l))}function He(a,u,d){a.i.set(u,d)}function wo(a){return He(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ai(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function li(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,jy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function jy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ph=/[#\/\?@]/g,qy=/[#\?:]/g,Hy=/[#\?]/g,Ky=/[#\?@]/g,Gy=/#/g;function ci(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Ns(a){a.g||(a.g=new Map,a.h=0,a.i&&$y(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ci.prototype,t.add=function(a,u){Ns(this),this.i=null,a=cr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function kh(a,u){Ns(a),u=cr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Nh(a,u){return Ns(a),u=cr(a,u),a.g.has(u)}t.forEach=function(a,u){Ns(this),this.g.forEach(function(d,g){d.forEach(function(P){a.call(u,P,g,this)},this)},this)};function Dh(a,u){Ns(a);let d=[];if(typeof u=="string")Nh(a,u)&&(d=d.concat(a.g.get(cr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return Ns(this),this.i=null,a=cr(this,a),Nh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Dh(this,a),a.length>0?String(a[0]):u):u};function Vh(a,u,d){kh(a,u),d.length>0&&(a.i=null,a.g.set(cr(a,u),_(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let g=0;g<u.length;g++){var d=u[g];const P=si(d);d=Dh(this,d);for(let N=0;N<d.length;N++){let J=P;d[N]!==""&&(J+="="+si(d[N])),a.push(J)}}return this.i=a.join("&")};function Oh(a){const u=new ci;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function cr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function zy(a,u){u&&!a.j&&(Ns(a),a.i=null,a.g.forEach(function(d,g){const P=g.toLowerCase();g!=P&&(kh(this,g),Vh(this,P,d))},a)),a.j=u}function Wy(a,u){const d=new ni;if(o.Image){const g=new Image;g.onload=f(Zn,d,"TestLoadImage: loaded",!0,u,g),g.onerror=f(Zn,d,"TestLoadImage: error",!1,u,g),g.onabort=f(Zn,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=f(Zn,d,"TestLoadImage: timeout",!1,u,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function Qy(a,u){const d=new ni,g=new AbortController,P=setTimeout(()=>{g.abort(),Zn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(P),N.ok?Zn(d,"TestPingServer: ok",!0,u):Zn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Zn(d,"TestPingServer: error",!1,u)})}function Zn(a,u,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Yy(){this.g=new wt}function Il(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Il,$t),Il.prototype.g=function(){return new Ro(this.i,this.h)};function Ro(a,u){K.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ro,K),t=Ro.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,hi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function xh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ui(this):hi(this),this.readyState==3&&xh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ui(this))},t.Na=function(a){this.g&&(this.response=a,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.B=null,hi(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function hi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Lh(a){let u="";return Tt(a,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function Al(a,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Lh(d),typeof a=="string"?d!=null&&si(d):He(a,u,d))}function Ye(a){K.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ye,K);var Xy=/^https?$/i,Jy=["POST","PUT"];t=Ye.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_h.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(N){Mh(this,N);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Jy,u,void 0)>=0)||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,J]of d)this.g.setRequestHeader(N,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){Mh(this,N)}};function Mh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Fh(a),So(a)}function Fh(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Ye.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Uh(this):this.Xa())},t.Xa=function(){Uh(this)};function Uh(a){if(a.h&&typeof i<"u"){if(a.v&&es(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),es(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=N===0){let J=String(a.D).match(Ch)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),g=!Xy.test(J?J.toLowerCase():"")}d=g}if(d)H(a,"complete"),H(a,"success");else{a.o=6;try{var P=es(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Fh(a)}}finally{So(a)}}}}function So(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||H(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(a){return a.g?a.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),At(u)}};function Bh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Zy(a){const u={};a=(a.g&&es(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var d=My(a[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=u[P]||[];u[P]=N,N.push(d)}zt(u,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function $h(a){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,a),this.Za=fi("retryDelaySeedMs",1e4,a),this.Ta=fi("forwardChannelMaxRetries",2,a),this.va=fi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ah(a&&a.concurrentRequestLimit),this.Ba=new Yy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$h.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,g){Ot(0),this.W=a,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Yh(this,null,this.W),Co(this)};function wl(a){if(jh(a),a.I==3){var u=a.V++,d=hn(a.J);if(He(d,"SID",a.M),He(d,"RID",u),He(d,"TYPE","terminate"),di(a,d),u=new Xn(a,a.j,u),u.M=2,u.A=wo(hn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=Xh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Ao(u)}Qh(a)}function bo(a){a.g&&(Sl(a),a.g.cancel(),a.g=null)}function jh(a){bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Po(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Co(a){if(!wh(a.h)&&!a.m){a.m=!0;var u=a.Ea;de||y(),Ee||(de(),Ee=!0),w.add(u,a),a.D=0}}function ev(a,u){return Rh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ti(h(a.Ea,a,u),Wh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Xn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Vt(N),X(N,this.U)):N=this.U),this.u!==null||this.R||(P.J=N,N=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Hh(this,P,u),d=hn(this.J),He(d,"RID",a),He(d,"CVER",22),this.G&&He(d,"X-HTTP-Session-Id",this.G),di(this,d),N&&(this.R?u="headers="+si(Lh(N))+"&"+u:this.u&&Al(d,this.u,N)),El(this.h,P),this.Ra&&He(d,"TYPE","init"),this.S?(He(d,"$req",u),He(d,"SID","null"),P.U=!0,gl(P,d,null)):gl(P,d,u),this.I=2}}else this.I==3&&(a?qh(this,a):this.i.length==0||wh(this.h)||qh(this))};function qh(a,u){var d;u?d=u.l:d=a.V++;const g=hn(a.J);He(g,"SID",a.M),He(g,"RID",d),He(g,"AID",a.K),di(a,g),a.u&&a.o&&Al(g,a.u,a.o),d=new Xn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Hh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),El(a.h,d),gl(d,g,u)}function di(a,u){a.H&&Tt(a.H,function(d,g){He(u,g,d)}),a.l&&Tt({},function(d,g){He(u,g,d)})}function Hh(a,u,d){d=Math.min(a.i.length,d);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ie=-1;for(;;){const ot=["count="+d];Ie==-1?d>0?(Ie=P[0].g,ot.push("ofs="+Ie)):Ie=0:ot.push("ofs="+Ie);let Ue=!0;for(let ft=0;ft<d;ft++){var N=P[ft].g;const fn=P[ft].map;if(N-=Ie,N<0)Ie=Math.max(0,P[ft].g-100),Ue=!1;else try{N="req"+N+"_"||"";try{var J=fn instanceof Map?fn:Object.entries(fn);for(const[Vs,ts]of J){let ns=ts;l(ts)&&(ns=De(ts)),ot.push(N+Vs+"="+encodeURIComponent(ns))}}catch(Vs){throw ot.push(N+"type="+encodeURIComponent("_badmap")),Vs}}catch{g&&g(fn)}}if(Ue){J=ot.join("&");break e}}J=void 0}return a=a.i.splice(0,d),u.G=a,J}function Kh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;de||y(),Ee||(de(),Ee=!0),w.add(u,a),a.A=0}}function Rl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ti(h(a.Da,a),Wh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Gh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ti(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),bo(this),Gh(this))};function Sl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Gh(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=hn(a.na);He(u,"RID","rpc"),He(u,"SID",a.M),He(u,"AID",a.K),He(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&He(u,"TO",a.ia),He(u,"TYPE","xmlhttp"),di(a,u),a.u&&a.o&&Al(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=wo(hn(u)),d.u=null,d.R=!0,Eh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),Rl(this),Ot(19))};function Po(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zh(a,u){var d=null;if(a.g==u){Po(a),Sl(a),a.g=null;var g=2}else if(vl(a.h,u))d=u.G,Sh(a.h,u),g=1;else return;if(a.I!=0){if(u.o)if(g==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var P=a.D;g=Ps(),H(g,new mh(g,d)),Co(a)}else Kh(a);else if(P=u.m,P==3||P==0&&u.X>0||!(g==1&&ev(a,u)||g==2&&Rl(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),P){case 1:Ds(a,5);break;case 4:Ds(a,10);break;case 3:Ds(a,6);break;default:Ds(a,2)}}}function Wh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function Ds(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),g=a.Ua;const P=!g;g=new Jn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ii(g,"https"),wo(g),P?Wy(g.toString(),d):Qy(g.toString(),d)}else Ot(2);a.I=0,a.l&&a.l.pa(u),Qh(a),jh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Qh(a){if(a.I=0,a.ja=[],a.l){const u=bh(a.h);(u.length!=0||a.i.length!=0)&&(k(a.ja,u),k(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Yh(a,u,d){var g=d instanceof Jn?hn(d):new Jn(d);if(g.g!="")u&&(g.g=u+"."+g.g),oi(g,g.u);else{var P=o.location;g=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const N=new Jn(null);g&&ii(N,g),u&&(N.g=u),P&&oi(N,P),d&&(N.h=d),g=N}return d=a.G,u=a.wa,d&&u&&He(g,d,u),He(g,"VER",a.ka),di(a,g),g}function Xh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Ye(new Il({ab:d})):new Ye(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jh(){}t=Jh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ko(){}ko.prototype.g=function(a,u){return new qt(a,u)};function qt(a,u){K.call(this),this.g=new $h(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new ur(this)}p(qt,K),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){wl(this.g)},qt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=De(a),a=d);u.i.push(new By(u.Ya++,a)),u.I==3&&Co(u)},qt.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,qt.Z.N.call(this)};function Zh(a){ar.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(Zh,ar);function ef(){gt.call(this),this.status=1}p(ef,gt);function ur(a){this.g=a}p(ur,Jh),ur.prototype.ra=function(){H(this.g,"a")},ur.prototype.qa=function(a){H(this.g,new Zh(a))},ur.prototype.pa=function(a){H(this.g,new ef)},ur.prototype.oa=function(){H(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,qg=function(){return new ko},jg=function(){return Ps()},$g=ht,bc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,Xo=Io,gh.COMPLETE="complete",Bg=gh,jt.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",K.prototype.listen=K.prototype.J,Ti=jt,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Ug=Ye}).apply(typeof Mo<"u"?Mo:typeof self<"u"?self:typeof window<"u"?window:{});const bd="@firebase/firestore",Cd="4.9.3";class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");let zr="12.7.0";const Js=new du("@firebase/firestore");function pr(){return Js.logLevel}function re(t,...e){if(Js.logLevel<=be.DEBUG){const n=e.map(Su);Js.debug(`Firestore (${zr}): ${t}`,...n)}}function Gn(t,...e){if(Js.logLevel<=be.ERROR){const n=e.map(Su);Js.error(`Firestore (${zr}): ${t}`,...n)}}function Mr(t,...e){if(Js.logLevel<=be.WARN){const n=e.map(Su);Js.warn(`Firestore (${zr}): ${t}`,...n)}}function Su(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Hg(t,s,n)}function Hg(t,e,n){let s=`FIRESTORE (${zr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Gn(s),new Error(s)}function Me(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Hg(e,r,s)}function ve(t,e){return t}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Es{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Kg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(St.UNAUTHENTICATED)))}shutdown(){}}class wS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RS{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Es,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Es)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string",31837,{l:s}),new Kg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class SS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new SS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(St.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Pd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const s=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Pd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pd(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class bu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=PS(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Cc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Yl(r)===Yl(i)?Ce(r,i):Yl(r)?1:-1}return Ce(t.length,e.length)}const kS=55296,NS=57343;function Yl(t){const e=t.charCodeAt(0);return e>=kS&&e<=NS}function Fr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const kd="__name__";class mn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=mn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=mn.isNumericId(e),r=mn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?mn.extractNumericId(e).compare(mn.extractNumericId(n)):Cc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class We extends mn{construct(e,n,s){return new We(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new We(n)}static emptyPath(){return new We([])}}const DS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends mn{construct(e,n,s){return new yt(e,n,s)}static isValidIdentifier(e){return DS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kd}static keyField(){return new yt([kd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new oe(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new oe(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(We.fromString(e))}static fromName(e){return new he(We.fromString(e).popFirst(5))}static empty(){return new he(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new We(e.slice()))}}function VS(t,e,n){if(!n)throw new oe(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OS(t,e,n,s){if(e===!0&&s===!0)throw new oe(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nd(t){if(!he.isDocumentKey(t))throw new oe(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new oe(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function mo(t,e){if(!Gg(t))throw new oe(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new oe(j.INVALID_ARGUMENT,n);return!0}const Dd=-62135596800,Vd=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Vd);return new Ge(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dd)throw new oe(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vd}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mo(e,Ge._jsonSchema))return new Ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ge._jsonSchemaVersion="firestore/timestamp/1.0",Ge._jsonSchema={type:rt("string",Ge._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ge(0,0))}static max(){return new ye(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qi=-1;function xS(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(s===1e9?new Ge(n+1,0):new Ge(n,s));return new Ts(r,he.empty(),e)}function LS(t){return new Ts(t.readTime,t.key,Qi)}class Ts{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ts(ye.min(),he.empty(),Qi)}static max(){return new Ts(ye.max(),he.empty(),Qi)}}function MS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}const FS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class US{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wr(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==FS)throw t;re("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,s)=>{n(e)}))}static reject(e){return new M(((n,s)=>{s(e)}))}static waitFor(e){return new M(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=M.resolve(!1);for(const s of e)n=n.next((r=>r?M.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new M(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next((f=>{o[h]=f,++l,l===i&&s(o)}),(f=>r(f)))}}))}static doWhile(e,n){return new M(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function BS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qr(t){return t.name==="IndexedDbTransactionError"}class Za{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Za.ce=-1;const Pu=-1;function el(t){return t==null}function va(t){return t===0&&1/t==-1/0}function $S(t){return typeof t=="number"&&Number.isInteger(t)&&!va(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const zg="";function jS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Od(e)),e=qS(t.get(n),e);return Od(e)}function qS(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case zg:n+="";break;default:n+=i}}return n}function Od(t){return t+zg+""}function xd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Qe{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}}class Fo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??_t.RED,this.left=r??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new _t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return _t.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ct{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ld(this.data.getIterator())}getIteratorFrom(e){return new Ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Ld{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new ct(yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Qg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qg("Invalid base64 string: "+i):i}})(e);return new Et(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const HS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=HS.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}const Yg="server_timestamp",Xg="__type__",Jg="__previous_value__",Zg="__local_write_time__";function ku(t){return(t?.mapValue?.fields||{})[Xg]?.stringValue===Yg}function tl(t){const e=t.mapValue.fields[Jg];return ku(e)?tl(e):e}function Yi(t){const e=Is(t.mapValue.fields[Zg].timestampValue);return new Ge(e.seconds,e.nanos)}class KS{constructor(e,n,s,r,i,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const Ea="(default)";class Xi{constructor(e,n){this.projectId=e,this.database=n||Ea}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===Ea}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}const e_="__type__",GS="__max__",Uo={mapValue:{}},t_="__vector__",Ta="value";function ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ku(t)?4:WS(t)?9007199254740991:zS(t)?10:11:pe(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=ws(t);if(n!==ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yi(t).isEqual(Yi(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Is(r.timestampValue),l=Is(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return As(r.bytesValue).isEqual(As(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return Je(r.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(r.geoPointValue.longitude)===Je(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return Je(r.integerValue)===Je(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Je(r.doubleValue),l=Je(i.doubleValue);return o===l?va(o)===va(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(xd(o)!==xd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0})(t,e);default:return pe(52216,{left:t})}}function Ji(t,e){return(t.values||[]).find((n=>bn(n,e)))!==void 0}function Br(t,e){if(t===e)return 0;const n=ws(t),s=ws(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Je(i.integerValue||i.doubleValue),c=Je(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return Md(t.timestampValue,e.timestampValue);case 4:return Md(Yi(t),Yi(e));case 5:return Cc(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=As(i),c=As(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Ce(l[h],c[h]);if(f!==0)return f}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(Je(i.latitude),Je(o.latitude));return l!==0?l:Ce(Je(i.longitude),Je(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Fd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},h=l[Ta]?.arrayValue,f=c[Ta]?.arrayValue,p=Ce(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Fd(h,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Uo.mapValue&&o===Uo.mapValue)return 0;if(i===Uo.mapValue)return 1;if(o===Uo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=Cc(c[p],f[p]);if(m!==0)return m;const _=Br(l[c[p]],h[f[p]]);if(_!==0)return _}return Ce(c.length,f.length)})(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function Md(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Is(t),s=Is(e),r=Ce(n.seconds,s.seconds);return r!==0?r:Ce(n.nanos,s.nanos)}function Fd(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Br(n[r],s[r]);if(i)return i}return Ce(n.length,s.length)}function $r(t){return Pc(t)}function Pc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Is(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return As(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return he.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Pc(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Pc(n.fields[o])}`;return r+"}"})(t.mapValue):pe(61005,{value:t})}function Jo(t){switch(ws(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tl(t);return e?16+Jo(e):16;case 5:return 2*t.stringValue.length;case 6:return As(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Jo(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return nr(s.fields,((i,o)=>{r+=i.length+Jo(o)})),r})(t.mapValue);default:throw pe(13486,{value:t})}}function kc(t){return!!t&&"integerValue"in t}function Nu(t){return!!t&&"arrayValue"in t}function Ud(t){return!!t&&"nullValue"in t}function Bd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zo(t){return!!t&&"mapValue"in t}function zS(t){return(t?.mapValue?.fields||{})[e_]?.stringValue===t_}function Oi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return nr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Oi(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oi(t.arrayValue.values[n]);return e}return{...t}}function WS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GS}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Zo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oi(n)}setAll(e){let n=yt.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Oi(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Zo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){nr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Wt(Oi(this.value))}}function n_(t){const e=[];return nr(t.fields,((n,s)=>{const r=new yt([n]);if(Zo(s)){const i=n_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new rn(e)}class Ct{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ct(e,0,ye.min(),ye.min(),ye.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ct(e,1,n,ye.min(),s,r,0)}static newNoDocument(e,n){return new Ct(e,2,n,ye.min(),ye.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,ye.min(),ye.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,n){this.position=e,this.inclusive=n}}function $d(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=Br(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function jd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}class Aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function QS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class s_{}class lt extends s_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new XS(e,n,s):n==="array-contains"?new eb(e,s):n==="in"?new tb(e,s):n==="not-in"?new nb(e,s):n==="array-contains-any"?new sb(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new JS(e,s):new ZS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Br(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(Br(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends s_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cn(e,n)}matches(e){return r_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r_(t){return t.op==="and"}function i_(t){return YS(t)&&r_(t)}function YS(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Nc(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+$r(t.value);if(i_(t))return t.filters.map((e=>Nc(e))).join(",");{const e=t.filters.map((n=>Nc(n))).join(",");return`${t.op}(${e})`}}function o_(t,e){return t instanceof lt?(function(s,r){return r instanceof lt&&s.op===r.op&&s.field.isEqual(r.field)&&bn(s.value,r.value)})(t,e):t instanceof Cn?(function(s,r){return r instanceof Cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&o_(o,r.filters[l])),!0):!1})(t,e):void pe(19439)}function a_(t){return t instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${$r(n.value)}`})(t):t instanceof Cn?(function(n){return n.op.toString()+" {"+n.getFilters().map(a_).join(" ,")+"}"})(t):"Filter"}class XS extends lt{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class JS extends lt{constructor(e,n){super(e,"in",n),this.keys=l_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ZS extends lt{constructor(e,n){super(e,"not-in",n),this.keys=l_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function l_(t,e){return(e.arrayValue?.values||[]).map((n=>he.fromName(n.referenceValue)))}class eb extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nu(n)&&Ji(n.arrayValue,this.value)}}class tb extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ji(this.value.arrayValue,n)}}class nb extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ji(this.value.arrayValue,n)}}class sb extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ji(this.value.arrayValue,s)))}}class rb{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function qd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new rb(t,e,n,s,r,i,o)}function Du(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Nc(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),el(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$r(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$r(s))).join(",")),e.Te=n}return e.Te}function Vu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jd(t.startAt,e.startAt)&&jd(t.endAt,e.endAt)}function Dc(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class nl{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ib(t,e,n,s,r,i,o,l){return new nl(t,e,n,s,r,i,o,l)}function Ou(t){return new nl(t)}function Hd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ob(t){return t.collectionGroup!==null}function xi(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(yt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Aa(i,s))})),n.has(yt.keyField().canonicalString())||e.Ie.push(new Aa(yt.keyField(),s))}return e.Ie}function En(t){const e=ve(t);return e.Ee||(e.Ee=ab(e,xi(t))),e.Ee}function ab(t,e){if(t.limitType==="F")return qd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Aa(r.field,i)}));const n=t.endAt?new Ia(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ia(t.startAt.position,t.startAt.inclusive):null;return qd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Vc(t,e,n){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sl(t,e){return Vu(En(t),En(e))&&t.limitType===e.limitType}function c_(t){return`${Du(En(t))}|lt:${t.limitType}`}function mr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>a_(r))).join(", ")}]`),el(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>$r(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>$r(r))).join(",")),`Target(${s})`})(En(t))}; limitType=${t.limitType})`}function rl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of xi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const h=$d(o,l,c);return o.inclusive?h<=0:h<0})(s.startAt,xi(s),r)||s.endAt&&!(function(o,l,c){const h=$d(o,l,c);return o.inclusive?h>=0:h>0})(s.endAt,xi(s),r))})(t,e)}function lb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u_(t){return(e,n)=>{let s=!1;for(const r of xi(t)){const i=cb(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function cb(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Br(c,h):pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:t.dir})}}class sr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return Wg(this.inner)}size(){return this.innerSize}}const ub=new Qe(he.comparator);function zn(){return ub}const h_=new Qe(he.comparator);function Ii(...t){let e=h_;for(const n of t)e=e.insert(n.key,n);return e}function f_(t){let e=h_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Bs(){return Li()}function d_(){return Li()}function Li(){return new sr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const hb=new Qe(he.comparator),fb=new ct(he.comparator);function Pe(...t){let e=fb;for(const n of t)e=e.add(n);return e}const db=new ct(Ce);function pb(){return db}function xu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:va(e)?"-0":e}}function p_(t){return{integerValue:""+t}}function mb(t,e){return $S(e)?p_(e):xu(t,e)}class il{constructor(){this._=void 0}}function gb(t,e,n){return t instanceof Zi?(function(r,i){const o={fields:{[Xg]:{stringValue:Yg},[Zg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&ku(i)&&(i=tl(i)),i&&(o.fields[Jg]=i),{mapValue:o}})(n,e):t instanceof eo?g_(t,e):t instanceof to?__(t,e):(function(r,i){const o=m_(r,i),l=Kd(o)+Kd(r.Ae);return kc(o)&&kc(r.Ae)?p_(l):xu(r.serializer,l)})(t,e)}function _b(t,e,n){return t instanceof eo?g_(t,e):t instanceof to?__(t,e):n}function m_(t,e){return t instanceof wa?(function(s){return kc(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Zi extends il{}class eo extends il{constructor(e){super(),this.elements=e}}function g_(t,e){const n=y_(e);for(const s of t.elements)n.some((r=>bn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class to extends il{constructor(e){super(),this.elements=e}}function __(t,e){let n=y_(e);for(const s of t.elements)n=n.filter((r=>!bn(r,s)));return{arrayValue:{values:n}}}class wa extends il{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Kd(t){return Je(t.integerValue||t.doubleValue)}function y_(t){return Nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class yb{constructor(e,n){this.field=e,this.transform=n}}function vb(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof eo&&r instanceof eo||s instanceof to&&r instanceof to?Fr(s.elements,r.elements,bn):s instanceof wa&&r instanceof wa?bn(s.Ae,r.Ae):s instanceof Zi&&r instanceof Zi})(t.transform,e.transform)}class Eb{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ea(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ol{}function v_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lu(t.key,Tn.none()):new go(t.key,t.data,Tn.none());{const n=t.data,s=Wt.empty();let r=new ct(yt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new rr(t.key,s,new rn(r.toArray()),Tn.none())}}function Tb(t,e,n){t instanceof go?(function(r,i,o){const l=r.value.clone(),c=zd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof rr?(function(r,i,o){if(!ea(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(E_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Mi(t,e,n,s){return t instanceof go?(function(i,o,l,c){if(!ea(i.precondition,o))return l;const h=i.value.clone(),f=Wd(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof rr?(function(i,o,l,c){if(!ea(i.precondition,o))return l;const h=Wd(i.fieldTransforms,c,o),f=o.data;return f.setAll(E_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,l){return ea(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function Ib(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=m_(s.transform,r||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,i))}return n||null}function Gd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Fr(s,r,((i,o)=>vb(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class go extends ol{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rr extends ol{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function E_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function zd(t,e,n){const s=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,_b(o,l,n[r]))}return s}function Wd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,gb(i,o,e))}return s}class Lu extends ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ab extends ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wb{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Tb(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Mi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Mi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=d_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=v_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,((n,s)=>Gd(n,s)))&&Fr(this.baseMutations,e.baseMutations,((n,s)=>Gd(n,s)))}}class Mu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Me(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return hb})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Mu(e,n,s,r)}}class Rb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Sb{constructor(e,n){this.count=e,this.unchangedNames=n}}var nt,ke;function bb(t){switch(t){case j.OK:return pe(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function T_(t){if(t===void 0)return Gn("GRPC error has no .code"),j.UNKNOWN;switch(t){case nt.OK:return j.OK;case nt.CANCELLED:return j.CANCELLED;case nt.UNKNOWN:return j.UNKNOWN;case nt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case nt.INTERNAL:return j.INTERNAL;case nt.UNAVAILABLE:return j.UNAVAILABLE;case nt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case nt.NOT_FOUND:return j.NOT_FOUND;case nt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case nt.ABORTED:return j.ABORTED;case nt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case nt.DATA_LOSS:return j.DATA_LOSS;default:return pe(39323,{code:t})}}(ke=nt||(nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function Cb(){return new TextEncoder}const Pb=new vs([4294967295,4294967295],0);function Qd(t){const e=Cb().encode(t),n=new Fg;return n.update(e),new Uint8Array(n.digest())}function Yd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([n,s],0),new vs([r,i],0)]}class Fu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ai(`Invalid padding: ${n}`);if(s<0)throw new Ai(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ai(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ai(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(vs.fromNumber(s)));return r.compare(Pb)===1&&(r=new vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fu(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ai extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class al{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new al(ye.min(),r,new Qe(Ce),zn(),Pe())}}class _o{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _o(s,n,Pe(),Pe(),Pe())}}class ta{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class I_{constructor(e,n){this.targetId=e,this.Ce=n}}class A_{constructor(e,n,s=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Xd{constructor(){this.ve=0,this.Fe=Jd(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pe(38017,{changeType:i})}})),new _o(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Jd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kb{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=Bo(),this.He=Bo(),this.Ye=new Qe(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Dc(i))if(s===0){const o=new he(i.path);this.et(n,o,Ct.newNoDocument(o,ye.min()))}else Me(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=As(s).toUint8Array()}catch(c){if(c instanceof Qg)return Mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Fu(o,r,i)}catch(c){return Mr(c instanceof Ai?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Dc(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ct.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Pe();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new al(e,n,this.Ye,this.je,s);return this.je=zn(),this.Je=Bo(),this.He=Bo(),this.Ye=new Qe(Ce),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Xd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ct(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ct(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bo(){return new Qe(he.comparator)}function Jd(){return new Qe(he.comparator)}const Nb={asc:"ASCENDING",desc:"DESCENDING"},Db={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vb={and:"AND",or:"OR"};class Ob{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oc(t,e){return t.useProto3Json||el(e)?e:{value:e}}function Ra(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xb(t,e){return Ra(t,e.toTimestamp())}function In(t){return Me(!!t,49232),ye.fromTimestamp((function(n){const s=Is(n);return new Ge(s.seconds,s.nanos)})(t))}function Uu(t,e){return xc(t,e).canonicalString()}function xc(t,e){const n=(function(r){return new We(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function R_(t){const e=We.fromString(t);return Me(k_(e),10190,{key:e.toString()}),e}function Lc(t,e){return Uu(t.databaseId,e.path)}function Xl(t,e){const n=R_(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(b_(n))}function S_(t,e){return Uu(t.databaseId,e)}function Lb(t){const e=R_(t);return e.length===4?We.emptyPath():b_(e)}function Mc(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function b_(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zd(t,e,n){return{name:Lc(t,e),fields:n.value.mapValue.fields}}function Mb(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Me(f===void 0||typeof f=="string",58123),Et.fromBase64String(f||"")):(Me(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Et.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(h){const f=h.code===void 0?j.UNKNOWN:T_(h.code);return new oe(f,h.message||"")})(o);n=new A_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Xl(t,s.document.name),i=In(s.document.updateTime),o=s.document.createTime?In(s.document.createTime):ye.min(),l=new Wt({mapValue:{fields:s.document.fields}}),c=Ct.newFoundDocument(r,i,o,l),h=s.targetIds||[],f=s.removedTargetIds||[];n=new ta(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Xl(t,s.document),i=s.readTime?In(s.readTime):ye.min(),o=Ct.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ta([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Xl(t,s.document),i=s.removedTargetIds||[];n=new ta([],i,r,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new Sb(r,i),l=s.targetId;n=new I_(l,o)}}return n}function Fb(t,e){let n;if(e instanceof go)n={update:Zd(t,e.key,e.value)};else if(e instanceof Lu)n={delete:Lc(t,e.key)};else if(e instanceof rr)n={update:Zd(t,e.key,e.data),updateMask:zb(e.fieldMask)};else{if(!(e instanceof Ab))return pe(16599,{Vt:e.type});n={verify:Lc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof Zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof eo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof to)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wa)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw pe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:xb(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe(27497)})(t,e.precondition)),n}function Ub(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?In(r.updateTime):In(i);return o.isEqual(ye.min())&&(o=In(i)),new Eb(o,r.transformResults||[])})(n,e)))):[]}function Bb(t,e){return{documents:[S_(t,e.path)]}}function $b(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=S_(t,r);const i=(function(h){if(h.length!==0)return P_(Cn.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(m){return{field:gr(m.field),direction:Hb(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Oc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function jb(t){let e=Lb(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Me(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=C_(p);return m instanceof Cn&&i_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(k){return new Aa(_r(k.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let m;return m=typeof p=="object"?p.value:p,el(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(p){const m=!!p.before,_=p.values||[];return new Ia(_,m)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const m=!p.before,_=p.values||[];return new Ia(_,m)})(n.endAt)),ib(e,r,o,i,l,"F",c,h)}function qb(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=_r(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=_r(n.unaryFilter.field);return lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return lt.create(_r(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Cn.create(n.compositeFilter.filters.map((s=>C_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(n.compositeFilter.op))})(t):pe(30097,{filter:t})}function Hb(t){return Nb[t]}function Kb(t){return Db[t]}function Gb(t){return Vb[t]}function gr(t){return{fieldPath:t.canonicalString()}}function _r(t){return yt.fromServerFormat(t.fieldPath)}function P_(t){return t instanceof lt?(function(n){if(n.op==="=="){if(Bd(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(Ud(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bd(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(Ud(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:Kb(n.op),value:n.value}}})(t):t instanceof Cn?(function(n){const s=n.getFilters().map((r=>P_(r)));return s.length===1?s[0]:{compositeFilter:{op:Gb(n.op),filters:s}}})(t):pe(54877,{filter:t})}function zb(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function k_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ps{constructor(e,n,s,r,i=ye.min(),o=ye.min(),l=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wb{constructor(e){this.yt=e}}function Qb(t){const e=jb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vc(e,e.limit,"L"):e}class Yb{constructor(){this.Cn=new Xb}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Ts.min())}updateCollectionGroup(e,n,s){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Xb{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ct(We.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ct(We.comparator)).toArray()}}const ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N_=41943040;class Bt{static withCacheSize(e){return new Bt(e,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(N_,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);class jr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jr(0)}static cr(){return new jr(-1)}}const tp="LruGarbageCollector",Jb=1048576;function np([t,e],[n,s]){const r=Ce(t,n);return r===0?Ce(e,s):r}class Zb{constructor(e){this.Ir=e,this.buffer=new ct(np),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();np(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e0{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(tp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qr(n)?re(tp,"Ignoring IndexedDB error during garbage collection: ",n):await Wr(n)}await this.Vr(3e5)}))}}class t0{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Za.ce);const s=new Zb(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(ep)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ep):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,l=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),pr()<=be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function n0(t,e){return new t0(t,e)}class s0{constructor(){this.changes=new sr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?M.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class i0{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Mi(s.mutation,r,rn.empty(),Ge.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const r=Bs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Ii();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=zn();const o=Li(),l=(function(){return Li()})();return n.forEach(((c,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof rr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Mi(f.mutation,h,f.mutation.getFieldMask(),Ge.now())):o.set(h.key,rn.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((h,f)=>o.set(h,f))),n.forEach(((h,f)=>l.set(h,new r0(f,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=Li();let r=new Qe(((o,l)=>o-l)),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let f=s.get(c)||rn.empty();f=l.applyToLocalView(h,f),s.set(c,f);const p=(r.get(l.batchId)||Pe()).add(c);r=r.insert(l.batchId,p)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=d_();f.forEach((m=>{if(!i.has(m)){const _=v_(n.get(m),s.get(m));_!==null&&p.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ob(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):M.resolve(Bs());let l=Qi,c=i;return o.next((h=>M.forEach(h,((f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{c=c.insert(f,m)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,c,h,Pe()))).next((f=>({batchId:l,changes:f_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next((s=>{let r=Ii();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ii();return this.indexManager.getCollectionParents(e,i).next((l=>M.forEach(l,(c=>{const h=(function(p,m){return new nl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Ct.newInvalidDocument(f)))}));let l=Ii();return o.forEach(((c,h)=>{const f=i.get(c);f!==void 0&&Mi(f.mutation,h,rn.empty(),Ge.now()),rl(n,h)&&(l=l.insert(c,h))})),l}))}}class o0{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:In(r.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:Qb(r.bundledQuery),readTime:In(r.readTime)}})(n)),M.resolve()}}class a0{constructor(){this.overlays=new Qe(he.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return M.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),M.resolve()}getOverlaysForCollection(e,n,s){const r=Bs(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Qe(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=Bs(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Bs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,f)=>l.set(h,f))),!(l.size()>=r)););return M.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Rb(n,s));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class l0{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class Bu{constructor(){this.Qr=new ct(pt.$r),this.Ur=new ct(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new pt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new he(new We([])),s=new pt(n,e),r=new pt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new We([])),s=new pt(n,e),r=new pt(n,e+1);let i=Pe();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new pt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}class c0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ct(pt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wb(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Pu:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pt(n,0),r=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ct(Ce);return n.forEach((r=>{const i=new pt(r,0),o=new pt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),M.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new pt(new he(i),0);let l=new ct(Ce);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)}),o),M.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return M.forEach(n.mutations,(r=>{const i=new pt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new pt(n,0),r=this.Zr.firstAfterOrEqual(s);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class u0{constructor(e){this.ri=e,this.docs=(function(){return new Qe(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return M.resolve(s?s.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let s=zn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ct.newInvalidDocument(r))})),M.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=zn();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||MS(LS(f),s)<=0||(r.has(f.key)||rl(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,s,r){pe(9500)}ii(e,n){return M.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new h0(this)}getSize(e){return M.resolve(this.size)}}class h0 extends s0{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class f0{constructor(e){this.persistence=e,this.si=new sr((n=>Du(n)),Vu),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Bu,this.targetCount=0,this.ai=jr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),M.waitFor(i).next((()=>r))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return M.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),M.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return M.resolve(s)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}class D_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Za(0),this.li=!1,this.li=!0,this.hi=new l0,this.referenceDelegate=e(this),this.Pi=new f0(this),this.indexManager=new Yb,this.remoteDocumentCache=(function(r){return new u0(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Wb(n),this.Ii=new o0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new c0(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const r=new d0(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return M.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class d0 extends US{constructor(e){super(),this.currentSequenceNumber=e}}class $u{constructor(e){this.persistence=e,this.Ri=new Bu,this.Vi=null}static mi(e){return new $u(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),M.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(s=>{const r=he.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sa{constructor(e,n){this.persistence=e,this.pi=new sr((s=>jS(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=n0(this,n)}static mi(e,n){return new Sa(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return M.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?M.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jo(e.data.value)),n}br(e,n,s){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ju{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ju(e,n.fromCache,s,r)}}class p0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class m0{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nA()?8:BS(Dt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new p0;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(pr()<=be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(pr()<=be.DEBUG&&re("QueryEngine","Query:",mr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(pr()<=be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):M.resolve())}ys(e,n){if(Hd(n))return M.resolve(null);let s=En(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Vc(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Pe(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Vc(n,null,"F")):this.vs(e,h,n,c)}))))})))))}ws(e,n,s,r){return Hd(n)||r.isEqual(ye.min())?M.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?M.resolve(null):(pr()<=be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mr(n)),this.vs(e,o,n,xS(r,Qi)).next((l=>l)))}))}Ds(e,n){let s=new ct(u_(e));return n.forEach(((r,i)=>{rl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return pr()<=be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",mr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const qu="LocalStore",g0=3e8;class _0{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Qe(Ce),this.xs=new sr((i=>Du(i)),Vu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i0(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function y0(t,e,n,s){return new _0(t,e,n,s)}async function V_(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=Pe();for(const h of r){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function v0(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,f){const p=h.batch,m=p.keys();let _=M.resolve();return m.forEach((k=>{_=_.next((()=>f.getEntry(c,k))).next((D=>{const V=h.docVersions.get(k);Me(V!==null,48541),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=Pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function O_(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function E0(t,e){const n=ve(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((f,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Et.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,s)),r=r.insert(p,_),(function(D,V,U){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=g0?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(m,_,f)&&l.push(n.Pi.updateTargetData(i,_))}));let c=zn(),h=Pe();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),l.push(T0(i,o,e.documentUpdates).next((f=>{c=f.ks,h=f.qs}))),!s.isEqual(ye.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(f)}return M.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function T0(t,e,n){let s=Pe(),r=Pe();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=zn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(qu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function I0(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function A0(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,M.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new ps(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Fc(t,e,n){const s=ve(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Qr(o))throw o;re(qu,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function sp(t,e,n){const s=ve(t);let r=ye.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,f){const p=ve(c),m=p.xs.get(f);return m!==void 0?M.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)})(s,o,En(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ye.min(),n?i:Pe()))).next((l=>(w0(s,lb(e),l),{documents:l,Qs:i})))))}function w0(t,e,n){let s=t.Os.get(e)||ye.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class rp{constructor(){this.activeTargetIds=pb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R0{constructor(){this.Mo=new rp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class S0{Oo(e){}shutdown(){}}const ip="ConnectivityMonitor";class op{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(ip,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(ip,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $o=null;function Uc(){return $o===null?$o=(function(){return 268435456+Math.round(2147483648*Math.random())})():$o++,"0x"+$o.toString(16)}const Jl="RestConnection",b0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C0{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ea?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Uc(),l=this.zo(e,n.toUriEncodedString());re(Jl,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),f=Hr(h);return this.Jo(e,l,c,s,f).then((p=>(re(Jl,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Mr(Jl,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=b0[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class P0{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Rt="WebChannelConnection";class k0 extends C0{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Uc();return new Promise(((l,c)=>{const h=new Ug;h.setWithCredentials(!0),h.listenOnce(Bg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Xo.NO_ERROR:const p=h.getResponseJson();re(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Xo.TIMEOUT:re(Rt,`RPC '${e}' ${o} timed out`),c(new oe(j.DEADLINE_EXCEEDED,"Request time out"));break;case Xo.HTTP_ERROR:const m=h.getStatus();if(re(Rt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const k=_?.error;if(k&&k.status&&k.message){const D=(function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(B)>=0?B:j.UNKNOWN})(k.status);c(new oe(D,k.message))}else c(new oe(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new oe(j.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{re(Rt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);re(Rt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=Uc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qg(),l=jg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");re(Rt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let m=!1,_=!1;const k=new P0({Yo:V=>{_?re(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(m||(re(Rt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),re(Rt,`RPC '${e}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),D=(V,U,B)=>{V.listen(U,(Q=>{try{B(Q)}catch(G){setTimeout((()=>{throw G}),0)}}))};return D(p,Ti.EventType.OPEN,(()=>{_||(re(Rt,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),D(p,Ti.EventType.CLOSE,(()=>{_||(_=!0,re(Rt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(p))})),D(p,Ti.EventType.ERROR,(V=>{_||(_=!0,Mr(Rt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),k.a_(new oe(j.UNAVAILABLE,"The operation could not be completed")))})),D(p,Ti.EventType.MESSAGE,(V=>{if(!_){const U=V.data[0];Me(!!U,16349);const B=U,Q=B?.error||B[0]?.error;if(Q){re(Rt,`RPC '${e}' stream ${r} received error:`,Q);const G=Q.status;let de=(function(y){const I=nt[y];if(I!==void 0)return T_(I)})(G),Ee=Q.message;de===void 0&&(de=j.INTERNAL,Ee="Unknown error status: "+G+" with message "+Q.message),_=!0,k.a_(new oe(de,Ee)),p.close()}else re(Rt,`RPC '${e}' stream ${r} received:`,U),k.u_(U)}})),D(l,$g.STAT_EVENT,(V=>{V.stat===bc.PROXY?re(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===bc.NOPROXY&&re(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Zl(){return typeof document<"u"?document:null}function ll(t){return new Ob(t,!0)}class x_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ap="PersistentStream";class L_{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new oe(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(ap,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(ap,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class N0 extends L_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Mb(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?In(o.readTime):ye.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Mc(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=Dc(c)?{documents:Bb(i,c)}:{query:$b(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=w_(i,o.resumeToken);const h=Oc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=Ra(i,o.snapshotVersion.toTimestamp());const h=Oc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const s=qb(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Mc(this.serializer),n.removeTarget=e,this.q_(n)}}class D0 extends L_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ub(e.writeResults,e.commitTime),s=In(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Mc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Fb(this.serializer,s)))};this.q_(n)}}class V0{}class O0 extends V0{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oe(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,xc(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(j.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,xc(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(j.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class x0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zs="RemoteStore";class L0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{ir(this)&&(re(Zs,"Restarting streams for network reachability change."),await(async function(c){const h=ve(c);h.Ea.add(4),await yo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await cl(h)})(this))}))})),this.Ra=new x0(s,r)}}async function cl(t){if(ir(t))for(const e of t.da)await e(!0)}async function yo(t){for(const e of t.da)await e(!1)}function M_(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zu(n)?Gu(n):Yr(n).O_()&&Ku(n,e))}function Hu(t,e){const n=ve(t),s=Yr(n);n.Ia.delete(e),s.O_()&&F_(n,e),n.Ia.size===0&&(s.O_()?s.L_():ir(n)&&n.Ra.set("Unknown"))}function Ku(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yr(t).Y_(e)}function F_(t,e){t.Va.Ue(e),Yr(t).Z_(e)}function Gu(t){t.Va=new kb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yr(t).start(),t.Ra.ua()}function zu(t){return ir(t)&&!Yr(t).x_()&&t.Ia.size>0}function ir(t){return ve(t).Ea.size===0}function U_(t){t.Va=void 0}async function M0(t){t.Ra.set("Online")}async function F0(t){t.Ia.forEach(((e,n)=>{Ku(t,e)}))}async function U0(t,e){U_(t),zu(t)?(t.Ra.ha(e),Gu(t)):t.Ra.set("Unknown")}async function B0(t,e,n){if(t.Ra.set("Online"),e instanceof A_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){re(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ba(t,s)}else if(e instanceof ta?t.Va.Ze(e):e instanceof I_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const s=await O_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(Et.EMPTY_BYTE_STRING,f.snapshotVersion)),F_(i,c);const p=new ps(f.target,c,h,f.sequenceNumber);Ku(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){re(Zs,"Failed to raise snapshot:",s),await ba(t,s)}}async function ba(t,e,n){if(!Qr(e))throw e;t.Ea.add(1),await yo(t),t.Ra.set("Offline"),n||(n=()=>O_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{re(Zs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cl(t)}))}function B_(t,e){return e().catch((n=>ba(t,n,e)))}async function ul(t){const e=ve(t),n=Rs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pu;for(;$0(e);)try{const r=await I0(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,j0(e,r)}catch(r){await ba(e,r)}$_(e)&&j_(e)}function $0(t){return ir(t)&&t.Ta.length<10}function j0(t,e){t.Ta.push(e);const n=Rs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $_(t){return ir(t)&&!Rs(t).x_()&&t.Ta.length>0}function j_(t){Rs(t).start()}async function q0(t){Rs(t).ra()}async function H0(t){const e=Rs(t);for(const n of t.Ta)e.ea(n.mutations)}async function K0(t,e,n){const s=t.Ta.shift(),r=Mu.from(s,e,n);await B_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await ul(t)}async function G0(t,e){e&&Rs(t).X_&&await(async function(s,r){if((function(o){return bb(o)&&o!==j.ABORTED})(r.code)){const i=s.Ta.shift();Rs(s).B_(),await B_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await ul(s)}})(t,e),$_(t)&&j_(t)}async function lp(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),re(Zs,"RemoteStore received new credentials");const s=ir(n);n.Ea.add(3),await yo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cl(n)}async function z0(t,e){const n=ve(t);e?(n.Ea.delete(2),await cl(n)):e||(n.Ea.add(2),await yo(n),n.Ra.set("Unknown"))}function Yr(t){return t.ma||(t.ma=(function(n,s,r){const i=ve(n);return i.sa(),new N0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:M0.bind(null,t),t_:F0.bind(null,t),r_:U0.bind(null,t),H_:B0.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),zu(t)?Gu(t):t.Ra.set("Unknown")):(await t.ma.stop(),U_(t))}))),t.ma}function Rs(t){return t.fa||(t.fa=(function(n,s,r){const i=ve(n);return i.sa(),new D0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:q0.bind(null,t),r_:G0.bind(null,t),ta:H0.bind(null,t),na:K0.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ul(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Zs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Wu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Wu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qu(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Qr(t))return new oe(j.UNAVAILABLE,`${e}: ${t}`);throw t}class Sr{static emptySet(e){return new Sr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=Ii(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Sr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class cp{constructor(){this.ga=new Qe(he.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class qr{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new qr(e,n,Sr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class W0{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Q0{constructor(){this.queries=up(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ve(n),i=r.queries;r.queries=up(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new oe(j.ABORTED,"Firestore shutting down"))}}function up(){return new sr((t=>c_(t)),sl)}async function Y0(t,e){const n=ve(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new W0,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Qu(o,`Initialization of query '${mr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Yu(n)}async function X0(t,e){const n=ve(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function J0(t,e){const n=ve(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Yu(n)}function Z0(t,e,n){const s=ve(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Yu(t){t.Ca.forEach((e=>{e.next()}))}var Bc,hp;(hp=Bc||(Bc={})).Ma="default",hp.Cache="cache";class e1{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new qr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bc.Cache}}class q_{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class t1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=u_(e),this.tu=new Sr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new cp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,p)=>{const m=r.get(f),_=rl(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?k!==D&&(s.track({type:3,doc:_}),V=!0):this.su(m,_)||(s.track({type:2,doc:_}),V=!0,(c&&this.eu(_,c)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(s.track({type:0,doc:_}),V=!0):m&&!_&&(s.track({type:1,doc:m}),V=!0,(c||h)&&(l=!0)),V&&(_?(o=o.add(_),i=D?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(_,k){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:V})}};return D(_)-D(k)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new qr(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new H_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new q_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xu="SyncEngine";class n1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class s1{constructor(e){this.key=e,this.hu=!1}}class r1{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new sr((l=>c_(l)),sl),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(he.comparator),this.Au=new Map,this.Ru=new Bu,this.Vu={},this.mu=new Map,this.fu=jr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function i1(t,e,n=!0){const s=Y_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await K_(s,e,n,!0),r}async function o1(t,e){const n=Y_(t);await K_(n,e,!0,!1)}async function K_(t,e,n,s){const r=await A0(t.localStore,En(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await a1(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&M_(t.remoteStore,r),l}async function a1(t,e,n,s,r){t.pu=(p,m,_)=>(async function(D,V,U,B){let Q=V.view.ru(U);Q.Cs&&(Q=await sp(D.localStore,V.query,!1).then((({documents:w})=>V.view.ru(w,Q))));const G=B&&B.targetChanges.get(V.targetId),de=B&&B.targetMismatches.get(V.targetId)!=null,Ee=V.view.applyChanges(Q,D.isPrimaryClient,G,de);return dp(D,V.targetId,Ee.au),Ee.snapshot})(t,p,m,_);const i=await sp(t.localStore,e,!0),o=new t1(e,i.Qs),l=o.ru(i.documents),c=_o.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);dp(t,n,h.au);const f=new n1(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function l1(t,e,n){const s=ve(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!sl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Fc(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Hu(s.remoteStore,r.targetId),$c(s,r.targetId)})).catch(Wr)):($c(s,r.targetId),await Fc(s.localStore,r.targetId,!0))}async function c1(t,e){const n=ve(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Hu(n.remoteStore,s.targetId))}async function u1(t,e,n){const s=_1(t);try{const r=await(function(o,l){const c=ve(o),h=Ge.now(),f=l.reduce(((_,k)=>_.add(k.key)),Pe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let k=zn(),D=Pe();return c.Ns.getEntries(_,f).next((V=>{k=V,k.forEach(((U,B)=>{B.isValidDocument()||(D=D.add(U))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,k))).next((V=>{p=V;const U=[];for(const B of l){const Q=Ib(B,p.get(B.key).overlayedDocument);Q!=null&&U.push(new rr(B.key,Q,n_(Q.value.mapValue),Tn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,U,l)})).next((V=>{m=V;const U=V.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(_,V.batchId,U)}))})).then((()=>({batchId:m.batchId,changes:f_(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Qe(Ce)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(s,r.batchId,n),await vo(s,r.changes),await ul(s.remoteStore)}catch(r){const i=Qu(r,"Failed to persist write");n.reject(i)}}async function G_(t,e){const n=ve(t);try{const s=await E0(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Me(o.hu,14607):r.removedDocuments.size>0&&(Me(o.hu,42227),o.hu=!1))})),await vo(n,s,e)}catch(s){await Wr(s)}}function fp(t,e,n){const s=ve(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=ve(o);c.onlineState=l;let h=!1;c.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)})),h&&Yu(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function h1(t,e,n){const s=ve(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Qe(he.comparator);o=o.insert(i,Ct.newNoDocument(i,ye.min()));const l=Pe().add(i),c=new al(ye.min(),new Map,new Qe(Ce),o,l);await G_(s,c),s.du=s.du.remove(i),s.Au.delete(e),Ju(s)}else await Fc(s.localStore,e,!1).then((()=>$c(s,e,n))).catch(Wr)}async function f1(t,e){const n=ve(t),s=e.batch.batchId;try{const r=await v0(n.localStore,e);W_(n,s,null),z_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await vo(n,r)}catch(r){await Wr(r)}}async function d1(t,e,n){const s=ve(t);try{const r=await(function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(Me(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>c.localDocuments.getDocuments(h,f)))}))})(s.localStore,e);W_(s,e,n),z_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await vo(s,r)}catch(r){await Wr(r)}}function z_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function W_(t,e,n){const s=ve(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function $c(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||Q_(t,s)}))}function Q_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Hu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ju(t))}function dp(t,e,n){for(const s of n)s instanceof q_?(t.Ru.addReference(s.key,e),p1(t,s)):s instanceof H_?(re(Xu,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Q_(t,s.key)):pe(19791,{wu:s})}function p1(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(re(Xu,"New document in limbo: "+n),t.Eu.add(s),Ju(t))}function Ju(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(We.fromString(e)),s=t.fu.next();t.Au.set(s,new s1(n)),t.du=t.du.insert(n,s),M_(t.remoteStore,new ps(En(Ou(n.path)),s,"TargetPurposeLimboResolution",Za.ce))}}async function vo(t,e,n){const s=ve(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){r.push(h);const f=ju.As(c.targetId,h);i.push(f)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,h){const f=ve(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(h,(m=>M.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_))).next((()=>M.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))))))}catch(p){if(!Qr(p))throw p;re(qu,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const _=f.Ms.get(m),k=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(k);f.Ms=f.Ms.insert(m,D)}}})(s.localStore,i))}async function m1(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){re(Xu,"User change. New user:",e.toKey());const s=await V_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new oe(j.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await vo(n,s.Ls)}}function g1(t,e){const n=ve(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let r=Pe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function Y_(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h1.bind(null,e),e.Pu.H_=J0.bind(null,e.eventManager),e.Pu.yu=Z0.bind(null,e.eventManager),e}function _1(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d1.bind(null,e),e}class Ca{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ll(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return y0(this.persistence,new m0,e.initialUser,this.serializer)}Cu(e){return new D_($u.mi,this.serializer)}Du(e){return new R0}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ca.provider={build:()=>new Ca};class y1 extends Ca{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Sa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new e0(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new D_((s=>Sa.mi(s,n)),this.serializer)}}class jc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=m1.bind(null,this.syncEngine),await z0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Q0})()}createDatastore(e){const n=ll(e.databaseInfo.databaseId),s=(function(i){return new k0(i)})(e.databaseInfo);return(function(i,o,l,c){return new O0(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new L0(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>fp(this.syncEngine,n,0)),(function(){return op.v()?new op:new S0})())}createSyncEngine(e,n){return(function(r,i,o,l,c,h,f){const p=new r1(r,i,o,l,c,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ve(n);re(Zs,"RemoteStore shutting down."),s.Ea.add(5),await yo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jc.provider={build:()=>new jc};class v1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ss="FirestoreClient";class E1{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=St.UNAUTHENTICATED,this.clientId=bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{re(Ss,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(re(Ss,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qu(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ec(t,e){t.asyncQueue.verifyOperationInProgress(),re(Ss,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await V_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function pp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await T1(t);re(Ss,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>lp(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>lp(e.remoteStore,r))),t._onlineComponents=e}async function T1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Ss,"Using user provided OfflineComponentProvider");try{await ec(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),await ec(t,new Ca)}}else re(Ss,"Using default OfflineComponentProvider"),await ec(t,new y1(void 0));return t._offlineComponents}async function X_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Ss,"Using user provided OnlineComponentProvider"),await pp(t,t._uninitializedComponentsProvider._online)):(re(Ss,"Using default OnlineComponentProvider"),await pp(t,new jc))),t._onlineComponents}function I1(t){return X_(t).then((e=>e.syncEngine))}async function A1(t){const e=await X_(t),n=e.eventManager;return n.onListen=i1.bind(null,e.syncEngine),n.onUnlisten=l1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=c1.bind(null,e.syncEngine),n}function w1(t,e,n={}){const s=new Es;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,h){const f=new v1({next:m=>{f.Nu(),o.enqueueAndForget((()=>X0(i,p)));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new oe(j.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?h.reject(new oe(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new e1(Ou(l.path),f,{includeMetadataChanges:!0,qa:!0});return Y0(i,p)})(await A1(t),t.asyncQueue,e,n,s))),s.promise}function J_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const mp=new Map;const Z_="firestore.googleapis.com",gp=!0;class _p{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z_,this.ssl=gp}else this.host=e.host,this.ssl=e.ssl??gp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=N_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jb)throw new oe(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zu{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new AS;switch(s.type){case"firstParty":return new bS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=mp.get(n);s&&(re("ComponentProvider","Removing Datastore"),mp.delete(n),s.terminate())})(this),Promise.resolve()}}function R1(t,e,n,s={}){t=Ur(t,Zu);const r=Hr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(eg(`https://${l}`),tg("Firestore",!0)),i.host!==Z_&&i.host!==l&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Qs(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=St.MOCK_USER;else{h=zI(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new oe(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new St(p)}t._authCredentials=new wS(new Kg(h,f))}}class eh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new eh(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new no(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(mo(n,mt._jsonSchema))return new mt(e,s||null,new he(We.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:rt("string",mt._jsonSchemaVersion),referencePath:rt("string")};class no extends eh{constructor(e,n,s){super(e,n,Ou(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new he(e))}withConverter(e){return new no(this.firestore,e,this._path)}}function Pa(t,e,...n){if(t=Jt(t),arguments.length===1&&(e=bu.newId()),VS("doc","path",e),t instanceof Zu){const s=We.fromString(e,...n);return Nd(s),new mt(t,null,new he(s))}{if(!(t instanceof mt||t instanceof no))throw new oe(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(We.fromString(e,...n));return Nd(s),new mt(t.firestore,t instanceof no?t.converter:null,new he(s))}}const yp="AsyncQueue";class vp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x_(this,"async_queue_retry"),this._c=()=>{const s=Zl();s&&re(yp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Zl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qr(e))throw e;re(yp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",Ep(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Wu.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&pe(47125,{Pc:Ep(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ep(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class hl extends Zu{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new vp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vp(e),this._firestoreClient=void 0,await e}}}function S1(t,e){const n=typeof t=="object"?t:ig(),s=typeof t=="string"?t:Ea,r=mu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=KI("firestore");i&&R1(r,...i)}return r}function ey(t){if(t._terminated)throw new oe(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||b1(t),t._firestoreClient}function b1(t){const e=t._freezeSettings(),n=(function(r,i,o,l){return new KS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,J_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new E1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(Et.fromBase64String(e))}catch(n){throw new oe(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mo(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:rt("string",Qt._jsonSchemaVersion),bytes:rt("string")};class th{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nh{constructor(e){this._methodName=e}}class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(mo(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:rt("string",An._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};class wn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mo(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wn(e.vectorValues);throw new oe(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:rt("string",wn._jsonSchemaVersion),vectorValues:rt("object")};const C1=/^__.*__$/;class P1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new go(e,this.data,n,this.fieldTransforms)}}function ty(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class sh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ka(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ty(this.Ac)&&C1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class k1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ll(e)}Cc(e,n,s,r=!1){return new sh({Ac:e,methodName:n,Dc:s,path:yt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function N1(t){const e=t._freezeSettings(),n=ll(t._databaseId);return new k1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D1(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);iy("Data must be an object, but it was:",o,s);const l=sy(s,o);let c,h;if(i.merge)c=new rn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=V1(e,p,n);if(!o.contains(m))throw new oe(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x1(f,m)||f.push(m)}c=new rn(f),h=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=o.fieldTransforms;return new P1(new Wt(l),c,h)}class rh extends nh{_toFieldTransform(e){return new yb(e.path,new Zi)}isEqual(e){return e instanceof rh}}function ny(t,e){if(ry(t=Jt(t)))return iy("Unsupported field value:",e,t),sy(t,e);if(t instanceof nh)return(function(s,r){if(!ty(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=ny(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=Jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mb(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ge.fromDate(s);return{timestampValue:Ra(r.serializer,i)}}if(s instanceof Ge){const i=new Ge(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ra(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qt)return{bytesValue:w_(r.serializer,s._byteString)};if(s instanceof mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Uu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wn)return(function(o,l){return{mapValue:{fields:{[e_]:{stringValue:t_},[Ta]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return xu(l.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Cu(s)}`)})(t,e)}function sy(t,e){const n={};return Wg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nr(t,((s,r)=>{const i=ny(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function ry(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof An||t instanceof Qt||t instanceof mt||t instanceof nh||t instanceof wn)}function iy(t,e,n){if(!ry(n)||!Gg(n)){const s=Cu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function V1(t,e,n){if((e=Jt(e))instanceof th)return e._internalPath;if(typeof e=="string")return oy(t,e);throw ka("Field path arguments must be of type string or ",t,!1,void 0,n)}const O1=new RegExp("[~\\*/\\[\\]]");function oy(t,e,n){if(e.search(O1)>=0)throw ka(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new th(...e.split("."))._internalPath}catch{throw ka(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ka(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new oe(j.INVALID_ARGUMENT,l+t+c)}function x1(t,e){return t.some((n=>n.isEqual(e)))}class ay{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L1 extends ay{data(){return super.data()}}function ly(t,e){return typeof e=="string"?oy(t,e):e instanceof th?e._internalPath:e._delegate._internalPath}class M1{convertValue(e,n="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return nr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Ta].arrayValue?.values?.map((s=>Je(s.doubleValue)));return new wn(n)}convertGeoPoint(e){return new An(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=tl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Yi(e));default:return null}}convertTimestamp(e){const n=Is(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=We.fromString(e);Me(k_(s),9688,{name:e});const r=new Xi(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function F1(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends ay{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ly("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:rt("string",Gs._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class na extends Gs{data(e={}){return super.data(e)}}class Fi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new wi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new na(this._firestore,this._userDataWriter,s.key,s,new wi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new na(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new na(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:U1(l.type),doc:c,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function U1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}function cy(t){t=Ur(t,mt);const e=Ur(t.firestore,hl);return w1(ey(e),t._key).then((n=>q1(e,t,n)))}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:rt("string",Fi._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class B1 extends M1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function $1(t,e,n){t=Ur(t,mt);const s=Ur(t.firestore,hl),r=F1(t.converter,e,n);return uy(s,[D1(N1(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Tn.none())])}function j1(t){return uy(Ur(t.firestore,hl),[new Lu(t._key,Tn.none())])}function uy(t,e){return(function(s,r){const i=new Es;return s.asyncQueue.enqueueAndForget((async()=>u1(await I1(s),r,i))),i.promise})(ey(t),e)}function q1(t,e,n){const s=n.docs.get(e._key),r=new B1(t);return new Gs(t,r,e._key,s,new wi(n.hasPendingWrites,n.fromCache),e.converter)}function H1(){return new rh("serverTimestamp")}(function(e,n=!0){(function(r){zr=r})(Kr),xr(new Ys("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new hl(new RS(s.getProvider("auth-internal")),new CS(o,s.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new oe(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(h.options.projectId,f)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),ys(bd,Cd,e),ys(bd,Cd,"esm2020")})();const K1={apiKey:"AIzaSyDMvSyTEhJGh7a0coyDWCDiAsWCgxE9QsU",authDomain:"realcitytransport.firebaseapp.com",databaseURL:"https://realcitytransport-default-rtdb.firebaseio.com",projectId:"realcitytransport",storageBucket:"realcitytransport.firebasestorage.app",messagingSenderId:"510805652928",appId:"1:510805652928:web:0559bdd8da50af10b7c425",measurementId:"G-JE98MMZMCW"},hy=rg(K1),qc=vS(hy),Na=S1(hy),Ke=3600,yi=8*Ke,Cs=[{id:"sys_unlock_vehicle",type:"SYSTEM",domain:"vehicle",timePolicy:"FIXED",title:"  ",desc:" /    . ( 8,  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"vehicle"}]},{id:"sys_unlock_route",type:"SYSTEM",domain:"route",timePolicy:"FIXED",title:"  ",desc:" //  . ( 8,  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"route"}]},{id:"sys_unlock_construction",type:"SYSTEM",domain:"construction",timePolicy:"FIXED",title:"  ",desc:"//    . ( 8,  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"construction"}]},{id:"sys_unlock_finance",type:"SYSTEM",domain:"finance",timePolicy:"FIXED",title:"()  ",desc:"//    . ( 8,  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"finance"}]},{id:"sys_unlock_city",type:"SYSTEM",domain:"city",timePolicy:"FIXED",title:"  ",desc:"/      . ( 8,  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"city"}]},{id:"sys_preview_starter_vehicles",type:"REAL",domain:"vehicle",timePolicy:"SCALABLE",title:" () ",desc:" (8)  , //     . (4,  )",tier:1,durationSec:4*Ke,requires:["unlock_bus_t1","unlock_truck_t1","unlock_rail_t1"],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_STARTER_FLEET_PREVIEW",transports:["bus","truck","rail"],runTimeMinSec:1800,runTimeMaxSec:2*Ke,countPerTransport:1}]},{id:"city_scale_region",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  .',tier:1,durationSec:4*Ke,requires:["sys_unlock_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"REGION"}]},{id:"city_scale_city",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  . (  )',tier:1,durationSec:8*Ke,requires:["city_scale_region"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"CITY"}]},{id:"city_scale_country",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . ( / )',tier:1,durationSec:12*Ke,requires:["city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"COUNTRY"}]},{id:"city_scale_state",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:16*Ke,requires:["city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"STATE"}]},{id:"city_scale_planet",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:24*Ke,requires:["city_scale_state"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"PLANET"}]},{id:"unlock_bus_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*Ke,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"bus",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"bus",tier:1}]},{id:"unlock_truck_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*Ke,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"truck",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"truck",tier:1}]},{id:"unlock_rail_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*Ke,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"rail",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"rail",tier:1}]},{id:"unlock_plane_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*Ke,requires:["sys_unlock_city","city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"plane",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"plane",tier:1}]},{id:"unlock_ship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*Ke,requires:["sys_unlock_city","city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"ship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"ship",tier:1}]},{id:"unlock_spaceship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:3*Ke,requires:["sys_unlock_city","city_scale_planet"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"spaceship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"spaceship",tier:1}]},{id:"rs_1",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  I",desc:"     5% . (SYSTEM  8 )",tier:1,durationSec:1*Ke,requires:[],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:1}]},{id:"rs_2",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  II",desc:"     10% . (SYSTEM  8 )",tier:1,durationSec:2*Ke,requires:["rs_1"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:2}]},{id:"rs_3",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  III",desc:"     15% . (SYSTEM  8 )",tier:1,durationSec:4*Ke,requires:["rs_2"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:3}]},{id:"rs_4",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  IV",desc:"     20% . (SYSTEM  8 )",tier:1,durationSec:8*Ke,requires:["rs_3"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:4}]},{id:"rs_5",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  V",desc:"     25% . (SYSTEM  8 )",tier:1,durationSec:16*Ke,requires:["rs_4"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:5}]},{id:"qol_4h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"   . ( UI/ )",tier:1,durationSec:4*Ke,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_4h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"  ",desc:"/   . (  )",tier:1,durationSec:4*Ke,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*Ke,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*Ke,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_03",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/     .",tier:1,durationSec:8*Ke,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"t2_transport_foundation",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:" 2  ()",desc:"2   .   .",tier:2,durationSec:12*Ke,requires:[],revealAfter:[],enabled:!1,effects:[]}];function fy(t){return Cs.find(e=>e.id===t)||null}const dy="rcts.research.saveEnabled",py="rcts.research.autosave.enabled",my="rcts.research.autosave.base",ih="rcts.research.autosave.intervalMin",{kstDate:gy,isKstTimeReady:_y}=Om(),Eo=ge(()=>_y.value&&gy.value instanceof Date);function fl(){return Eo.value?gy.value.getTime():Date.now()}const Wn=Ae(null),Gt=Ae(new Set),ze=Ae(null),tt=Ae([]),yy=Ae({}),vy=Ae(1),oh=Ae(0),so=Ae(1),er=Ae(1),Da=Ae("NONE"),Va=Ae({vehicle:!1,route:!1,construction:!1,finance:!1,city:!1}),Hc=Ae(!1),Kc=Ae(!1),Un=Ae(!1),or=Ae(null);let Ft=null,zs=!1;const Ws=Ae(Ty(dy,!0)),ro=Ae(Ty(py,!1)),ah=Ae(Iy(my,5)),io=Ae(Iy(ih,10)),lh=Ae(!1),Ey=Ae(0);let $s=null;function Ty(t,e){const n=localStorage.getItem(t);return n===null?e:n==="1"}function Iy(t,e){const n=localStorage.getItem(t),s=n==null?NaN:Number(n);return Number.isFinite(s)?s:e}function Ay(t,e){localStorage.setItem(t,e?"1":"0")}function Gc(t,e){localStorage.setItem(t,String(e))}function dl(t){const e=Math.max(1,Math.min(3,Number(t||1)));return e===1?1:e===2?3:5}function G1(t){Ws.value=!!t,Ay(dy,Ws.value),Ws.value?To():(Ft&&(clearTimeout(Ft),Ft=null),nn())}function z1(t){ro.value=!!t,Ay(py,ro.value),To()}function W1(t){const e=Number(t)===10?10:5;ah.value=e,Gc(my,e);const n=Number(io.value)||e,s=Math.max(e,Math.round(n/e)*e);io.value=s,Gc(ih,s),To(!0)}function Q1(t){const e=Number(ah.value)===10?10:5,n=Number(t);if(!Number.isFinite(n)||n<=0)return;const s=Math.max(e,Math.round(n/e)*e);io.value=s,Gc(ih,s),To(!0)}function Y1(t){const e=Number(t);if(!Number.isFinite(e)||e<=0)return 6e4;const n=e*60*1e3,s=540*60*1e3,r=Date.now()+s,o=(Math.floor(r/n)+1)*n-r;return Math.max(1e3,o)}function nn(){lh.value=!1,$s&&(clearTimeout($s),$s=null)}function wy(){if($s&&(clearTimeout($s),$s=null),!ro.value||!Ws.value||!or.value||!Un.value||zs)return nn();lh.value=!0;const t=Number(io.value)||10,e=Y1(t);$s=setTimeout(async()=>{try{await hh({reason:"autosave"}),Ey.value=Date.now()}catch(n){console.error("useResearch:  :",n)}finally{wy()}},e)}function To(t=!1){t&&nn(),ro.value&&Ws.value&&or.value&&Un.value&&!zs?wy():nn()}function X1(){Ft&&(clearTimeout(Ft),Ft=null),nn(),or.value=null,Un.value=!1,zs=!1}function J1(t){return(Array.isArray(t?.requires)?t.requires:[]).every(n=>Gt.value.has(n))}function Ry(t){const e=Array.isArray(t?.revealAfter)?t.revealAfter:[];return e.length===0?!0:e.every(n=>Gt.value.has(n))}function ch(t){return Gt.value.has(t)}function Z1(t){return!t||Number(t.tier||1)!==1?!1:(t.effects||[]).some(e=>e?.type==="UNLOCK_TRANSPORT_TIER"&&Number(e?.tier||1)===1&&!!e?.transportId)}function Sy(t){return t?t.timePolicy==="FIXED"?!0:t.type==="SYSTEM":!1}function eC(t){return t?t.timePolicy==="SCALABLE"?!0:t.timePolicy==null?!Sy(t):!1:!1}function Oa(t){switch(String(t||"").toUpperCase()){case"REGION":return 1;case"CITY":return 2;case"COUNTRY":return 3;case"STATE":return 4;case"PLANET":return 5;default:return 0}}function Xr(){const t={};let e=1,n=0,s=1,r="NONE";const i={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1};for(const c of Cs)if(Gt.value.has(c.id))for(const h of c.effects||[]){if(h.type==="UNLOCK_TRANSPORT_TIER"){const f=h.transportId,p=Number(h.tier||1);if(!f)continue;t[f]=Math.max(Number(t[f]||0),p)}if(h.type==="INCOME_MULTIPLIER"&&(e*=Number(h.value||1)),h.type==="RESEARCH_SPEED_LEVEL"){const f=Number(h.level||0);Number.isFinite(f)&&(n=Math.max(n,f))}if(h.type==="QUEUE_RESERVE_LEVEL"){const f=Number(h.level||1);Number.isFinite(f)&&(s=Math.max(s,f))}if(h.type==="UNLOCK_FEATURE"){const f=String(h.featureKey||"");f&&Object.prototype.hasOwnProperty.call(i,f)&&(i[f]=!0)}if(h.type==="SET_CITY_SCALE"){const f=String(h.scale||"").toUpperCase();Oa(f)>Oa(r)&&(r=f)}}yy.value=t,vy.value=e,oh.value=n;const o=1-.05*Math.max(0,n);so.value=Math.max(.2,o),Da.value=r,Va.value=i,er.value=Math.max(1,Math.min(3,s));const l=dl(er.value);tt.value.length>l&&(tt.value=tt.value.slice(0,l))}const tC=ge(()=>Cs.filter(t=>Number(t?.tier||1)>=2?!0:Ry(t))),nC=ge(()=>{const t=new Set;for(const e of Cs)if(Number(e.tier||1)===1)for(const n of e.effects||[])n.type==="UNLOCK_TRANSPORT_TIER"&&Number(n.tier||1)===1&&n.transportId&&t.add(n.transportId);return Array.from(t)}),sC=ge(()=>!Wn.value),rC=ge(()=>nC.value.map(t=>({id:t})));function uh(t){const e=fy(t);if(!e)return"unknown";const n=Number(e.tier||1);return n===1&&!Ry(e)?"hidden":ch(t)?"done":ze.value?.id===t?"active":tt.value.includes(t)?"queued":e.enabled===!1?"comingSoon":n===1&&Z1(e)&&Wn.value||J1(e)?"available":"locked"}function by(t){return Cs.find(n=>n.enabled!==!1&&Number(n.tier||1)===1&&(n.effects||[]).some(s=>s.type==="UNLOCK_TRANSPORT_TIER"&&s.transportId===t&&Number(s.tier||1)===1))?.id??null}function Cy(){return!(!Ws.value||!or.value||!Un.value||zs)}function iC(){const t=dl(er.value);return{version:10,firstUnlockTransportId:Wn.value??null,completedResearchIds:Array.from(Gt.value),activeResearch:ze.value?{id:ze.value.id,startedAtMs:ze.value.startedAtMs,endsAtMs:ze.value.endsAtMs}:null,queuedResearchIds:Array.isArray(tt.value)?tt.value.slice(0,t):[]}}function oC(t){Wn.value=typeof t?.firstUnlockTransportId=="string"?t.firstUnlockTransportId:typeof t?.firstUnlockId=="string"?t.firstUnlockId:null;const e=Array.isArray(t?.completedResearchIds)?t.completedResearchIds:[];Gt.value=new Set(e.filter(o=>typeof o=="string"));const n=t?.activeResearch;n&&typeof n=="object"&&typeof n.id=="string"?ze.value={id:n.id,startedAtMs:Number(n.startedAtMs||0),endsAtMs:Number(n.endsAtMs||0)}:ze.value=null;const s=Array.isArray(t?.queuedResearchIds)?t.queuedResearchIds.filter(o=>typeof o=="string"):[],r=typeof t?.queuedResearchId=="string"?t.queuedResearchId:null,i=[];for(const o of s)i.includes(o)||i.push(o);if(r&&!i.includes(r)&&i.push(r),tt.value=i,Gt.value.size===0&&Array.isArray(t?.transports)){for(const o of t.transports)if(!(!o||typeof o.id!="string")&&o.locked===!1){const l=by(o.id);l&&Gt.value.add(l)}}Xr()}async function hh({reason:t="manual"}={}){if(Cy()){Ft&&(clearTimeout(Ft),Ft=null);try{Kc.value=!0;const e={...iC(),updatedAt:H1(),lastSaveReason:t},n=Pa(Na,"users",or.value,"research","state");await $1(n,e,{merge:!0})}catch(e){console.error("useResearch: Firebase  :",e)}finally{Kc.value=!1}}}const bs=()=>{Cy()&&(Ft&&clearTimeout(Ft),Ft=setTimeout(async()=>{await hh({reason:"debounced"})},800))};function aC(t){if(!t||Wn.value)return;const e=by(t);e&&(Wn.value=t,Gt.value.add(e),Xr(),bs())}function Py(t){const e=fy(t);if(!e)return{ok:!1,reason:"UNKNOWN_RESEARCH"};if(!Wn.value)return{ok:!1,reason:"FIRST_UNLOCK_REQUIRED"};if(!Eo.value)return{ok:!1,reason:"KST_NOT_READY"};if(ch(t))return{ok:!1,reason:"ALREADY_DONE"};if(e.enabled===!1)return{ok:!1,reason:"COMING_SOON"};const n=uh(t);if(n!=="available")return{ok:!1,reason:n.toUpperCase()};const s=fl(),r=Number(e.durationSec||0);let i=0;return r>0&&(Sy(e)?i=Math.ceil(r):(eC(e),i=Math.ceil(r*so.value))),i<=0?(Gt.value.add(t),Xr(),bs(),{ok:!0,instant:!0}):(ze.value={id:t,startedAtMs:s,endsAtMs:s+i*1e3},bs(),{ok:!0,instant:!1})}function lC(t){const e=dl(er.value);if(ch(t))return{ok:!1,reason:"ALREADY_DONE"};if(ze.value?.id===t)return{ok:!1,reason:"ALREADY_ACTIVE"};if(tt.value.includes(t))return{ok:!0,queued:!0,alreadyQueued:!0};if(ze.value){if(tt.value.length>=e)return{ok:!1,reason:"QUEUE_FULL"};const n=uh(t);return n!=="available"?{ok:!1,reason:n.toUpperCase()}:(tt.value=[...tt.value,t].slice(0,e),bs(),{ok:!0,queued:!0})}return Py(t)}function cC(t){const e=tt.value.slice(),n=e.filter(s=>s!==t);n.length!==e.length&&(tt.value=n,bs())}function uC(){tt.value.length!==0&&(tt.value=[],bs())}function hC(t){if(!ze.value||ze.value.id!==t||!Eo.value)return 0;const e=ze.value.endsAtMs-ze.value.startedAtMs;if(e<=0)return 0;const n=fl()-ze.value.startedAtMs;return Math.max(0,Math.min(100,n/e*100))}function fC(t){if(!ze.value||ze.value.id!==t||!Eo.value)return"00h 00m 00s";const e=Math.max(0,ze.value.endsAtMs-fl()),n=Math.floor(e/1e3),s=String(Math.floor(n/3600)).padStart(2,"0"),r=String(Math.floor(n%3600/60)).padStart(2,"0"),i=String(n%60).padStart(2,"0");return`${s}h ${r}m ${i}s`}async function dC(t){if(t){Ft&&(clearTimeout(Ft),Ft=null),nn(),or.value=t,Hc.value=!0,Un.value=!1;try{const e=Pa(Na,"users",t,"research","state"),n=await cy(e);zs=!0,n.exists()?(oC(n.data()),console.log("useResearch: Firebase   ")):(console.log("useResearch: Firebase   ( )"),Xr()),zs=!1,Un.value=!0,To(!0)}catch(e){zs=!1,console.error("useResearch: Firebase  :",e),Un.value=!1,nn()}finally{Hc.value=!1}}}function pC(){X1(),Wn.value=null,Gt.value=new Set,ze.value=null,tt.value=[],Da.value="NONE",Va.value={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1},oh.value=0,so.value=1,er.value=1,Xr()}Kv(()=>{if(!Eo.value)return;const t=fl();if(ze.value&&t>=Number(ze.value.endsAtMs||0)){const e=ze.value.id;if(ze.value=null,Gt.value.add(e),Xr(),tt.value.length>0){const[n,...s]=tt.value;tt.value=s;const r=Py(n);r?.ok||console.warn("useResearch: queued next start failed:",n,r?.reason)}bs()}});function Jr(){const t=ge(()=>!or.value||Un.value),e=ge(()=>dl(er.value)),n=ge(()=>tt.value.length),s=ge(()=>n.value>=e.value);return{catalog:Cs,visibleCatalog:tC,firstUnlockTransportId:Wn,needsFirstUnlockSelection:sC,firstUnlockCandidates:rC,setFirstUnlockTransport:aC,completedIds:Gt,activeResearch:ze,queuedResearchIds:tt,queueReserveLevel:er,queueLimit:e,queueCount:n,isQueueFull:s,unlockedTransportTiers:yy,incomeMultiplier:vy,researchSpeedLevel:oh,researchDurationMultiplier:so,cityScale:Da,unlockedFeatures:Va,hasFeature:o=>!!Va.value?.[o],cityScaleAtLeast:o=>Oa(Da.value)>=Oa(o),getStatus:uh,startResearch:lC,cancelQueuedResearch:cC,cancelAllQueuedResearch:uC,getResearchProgress:hC,getResearchRemainingTime:fC,isKstTimeReady:_y,loadForUser:dC,clearUserState:pC,saveNow:hh,scheduleSave:bs,saveEnabled:Ws,setSaveEnabled:G1,autoSaveEnabled:ro,autoSaveBase:ah,autoSaveIntervalMin:io,setAutoSaveEnabled:z1,setAutoSaveBase:W1,setAutoSaveIntervalMin:Q1,autoSaveRunning:lh,lastAutoSaveAtMs:Ey,isLoadingFirebaseData:Hc,isSavingFirebaseData:Kc,isStateLoaded:Un,isHydrated:t}}const ky=Ae(null),vi=Ae(null),Ny=Ae(!1);let Tp=!1;if(!Tp){const t=Jr();aR(qc,async e=>{ky.value=e||null,Ny.value=!0;try{e?.uid?(console.log("   :  ",e.displayName||e.email),await t.loadForUser(e.uid)):(console.log("   :  "),t.clearUserState())}catch(n){console.error("useAuth: research sync failed:",n)}}),Tp=!0}function fh(){return{user:ky,authError:vi,authReady:Ny,signInWithGoogle:async()=>{const n=new On;try{const s=await CR(qc,n);return vi.value=null,console.log("useAuth:  !",s.user.displayName||s.user.email),s.user}catch(s){throw vi.value=s,console.error("useAuth:  :",s),s}},signOutUser:async()=>{try{return await lR(qc),vi.value=null,console.log("useAuth:  !"),!0}catch(n){throw vi.value=n,console.error("useAuth:  :",n),n}}}}const Zt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},mC={class:"top-bar-area"},gC={class:"top-bar-content"},_C={class:"kst-time-display"},yC={class:"time-value"},vC={class:"user-auth-area"},EC={__name:"TheTopBar",setup(t){Ae(1e6);const{kstString:e}=Om(),{user:n,signInWithGoogle:s,signOutUser:r}=fh();return(i,o)=>(z(),Y("header",mC,[T("div",gC,[o[2]||(o[2]=T("div",{class:"logo-area"},[T("h1",{class:"game-title"},"RCTS")],-1)),T("div",_C,[o[1]||(o[1]=T("span",{class:"time-label"},"KST",-1)),T("span",yC,ce(et(e)),1)]),T("div",vC,[T("button",{class:"login-btn",onClick:o[0]||(o[0]=l=>et(n)?et(r)():et(s)())},ce(et(n)?"":""),1)])])]))}},TC=Zt(EC,[["__scopeId","data-v-629df092"]]),IC=["bus","truck","rail","plane","ship","spaceship"],sa={bus:{name:"",icon:""},truck:{name:"",icon:""},rail:{name:"",icon:""},plane:{name:"",icon:""},ship:{name:"",icon:""},spaceship:{name:"",icon:""}};function jo(t,e=1){const n=Number(e||1);return Cs.find(r=>(r.effects||[]).some(i=>i.type==="UNLOCK_TRANSPORT_TIER"&&i.transportId===t&&Number(i.tier||1)===n))?.id??null}function AC(){const t=Cs.find(s=>(s.effects||[]).some(r=>r?.type==="UNLOCK_STARTER_FLEET_PREVIEW"));if(!t)return{researchId:null,config:null};const e=(t.effects||[]).find(s=>s?.type==="UNLOCK_STARTER_FLEET_PREVIEW")||null,n=e?{transports:Array.isArray(e.transports)?e.transports.filter(Boolean):[],runTimeMinSec:Number(e.runTimeMinSec||0),runTimeMaxSec:Number(e.runTimeMaxSec||0),countPerTransport:Number(e.countPerTransport||1)}:null;return{researchId:t.id,config:n}}function wC(){const t=Jr(),e=ge(()=>AC()),n=ge(()=>e.value.researchId),s=ge(()=>e.value.config),r=ge(()=>{const m=n.value;return m?!!t.completedIds.value?.has?.(m):!1}),i=ge(()=>{const m=s.value;return m?new Set(m.transports||[]):new Set}),o=ge(()=>{const m=i.value,_=r.value;return IC.map(k=>{const D=sa[k]||{},V=D.name??k,U=D.icon??"",Q=Number(t.unlockedTransportTiers.value?.[k]||0)<1,G=jo(k,1),de=!!G&&t.activeResearch.value?.id===G;let Ee=null,w=null;de&&t.activeResearch.value&&(Ee=new Date(t.activeResearch.value.startedAtMs),w=new Date(t.activeResearch.value.endsAtMs));const y=m.has(k),I=!!_&&!Q&&y;return{id:k,name:V,icon:U,locked:Q,isResearching:de,researchStartTime:Ee,researchFinishTime:w,unlockResearchId:G,previewEligible:y,previewActive:I,previewLabel:I?"  ":null}})}),l=ge(()=>o.value.filter(m=>m.locked)),c=ge(()=>o.value.filter(m=>!m.locked));function h(m){const _=jo(m,1);_&&t.startResearch(_)}function f(m){const _=jo(m,1);return _?t.getResearchProgress(_):0}function p(m){const _=jo(m,1);return _?t.getResearchRemainingTime(_):"00h 00m 00s"}return{transportTypes:o,lockedTransports:l,unlockedTransports:c,unlockTransport:h,getResearchProgress:f,getResearchRemainingTime:p,previewResearchId:n,previewConfig:s,previewStarterFleetUnlocked:r}}const Ip=Ae(null);function RC(){return{selectedTransportId:Ip,setSelectedTransportId:e=>{Ip.value=e}}}const SC={class:"layout-area left-area"},bC={class:"left-panel-wrapper"},CC={class:"transport-list-container"},PC={key:0,class:"transport-list"},kC=["onClick"],NC={class:"transport-icon"},DC={class:"transport-name"},VC={key:1,class:"transport-details-placeholder"},OC={class:"transport-details-container"},xC={class:"panel-heading"},LC={key:0,class:"transport-details-placeholder"},MC={key:1,class:"details-content"},FC={key:0,class:"lock-box"},UC={key:1,class:"preview-box"},BC={class:"details-placeholder"},$C={class:"resource-container"},jC={key:0,class:"placeholder-text"},qC={key:1},HC={__name:"TheLeftArea",setup(t){const{transportTypes:e,unlockedTransports:n,previewStarterFleetUnlocked:s}=wC(),r=Jr(),i=ge(()=>!!r.completedIds.value?.has?.("sys_unlock_finance")),{selectedTransportId:o,setSelectedTransportId:l}=RC(),c=ge(()=>n.value||[]),h=ge(()=>o.value&&(e.value||[]).find(f=>f.id===o.value)||null);return(f,p)=>(z(),Y("div",SC,[T("div",bC,[T("div",CC,[p[2]||(p[2]=T("h3",{class:"panel-heading"},"   ",-1)),c.value.length>0?(z(),Y("ul",PC,[(z(!0),Y(Ze,null,is(c.value,m=>(z(),Y("li",{key:m.id,class:br(["transport-item",{active:et(o)===m.id}]),onClick:_=>et(l)(m.id)},[T("span",NC,ce(m.icon),1),T("span",DC,ce(m.name),1),p[0]||(p[0]=T("span",{class:"transport-count"},"0",-1))],10,kC))),128))])):(z(),Y("div",VC,[...p[1]||(p[1]=[T("p",{class:"placeholder-text"},"    .   .",-1)])]))]),T("div",OC,[T("h3",xC,ce(h.value?`${h.value.name}  `:"   "),1),h.value?(z(),Y("div",MC,[T("p",null,[p[4]||(p[4]=T("strong",null,":",-1)),st(" "+ce(h.value.icon),1)]),T("p",null,[p[5]||(p[5]=T("strong",null,":",-1)),st(" "+ce(h.value.name),1)]),p[9]||(p[9]=T("p",null,[T("strong",null,"  :"),st(" 0")],-1)),T("p",null,[p[6]||(p[6]=T("strong",null,"  :",-1)),st(" "+ce(h.value.locked?"":""),1)]),p[10]||(p[10]=T("hr",{class:"divider"},null,-1)),et(s)?(z(),Y("div",UC,[...p[8]||(p[8]=[T("p",{class:"preview-title"},"   ",-1),T("p",{class:"preview-desc"},[st("     .   "),T("strong",null,"//"),st(" . ")],-1),T("div",{class:"preview-placeholder"},[T("p",{class:"placeholder-text"},"    ()")],-1)])])):(z(),Y("div",FC,[...p[7]||(p[7]=[T("p",{class:"lock-title"},"    ",-1),T("p",{class:"lock-desc"},[st("  ()     "),T("strong",null,"  "),st(" . ")],-1),T("p",{class:"lock-desc subtle"}," (    , //   .) ",-1)])])),T("p",BC,"  "+ce(h.value.name)+"       . ",1)])):(z(),Y("div",LC,[...p[3]||(p[3]=[T("p",{class:"placeholder-text"},"     .",-1)])]))]),T("div",$C,[p[11]||(p[11]=T("h3",{class:"panel-heading"},"   ",-1)),i.value?(z(),Y("p",qC,": $10,000")):(z(),Y("p",jC," ."))])])]))}},KC=Zt(HC,[["__scopeId","data-v-031ea4db"]]),GC={},zC={class:"layout-area center-area"},WC={class:"center-content-wrapper"},QC={class:"main-content-nav"},YC={class:"main-content-display"};function XC(t,e){const n=ji("router-link"),s=ji("router-view");return z(),Y("div",zC,[T("div",WC,[T("nav",QC,[T("ul",null,[T("li",null,[$e(n,{to:"/home/research"},{default:gn(()=>[...e[0]||(e[0]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/vehicles"},{default:gn(()=>[...e[1]||(e[1]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/line"},{default:gn(()=>[...e[2]||(e[2]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/construction"},{default:gn(()=>[...e[3]||(e[3]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/finance"},{default:gn(()=>[...e[4]||(e[4]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/settings"},{default:gn(()=>[...e[5]||(e[5]=[st("",-1)])]),_:1})])])]),T("div",YC,[$e(s)])])])}const JC=Zt(GC,[["render",XC],["__scopeId","data-v-0703c5ab"]]),ZC={class:"game-wrapper"},eP={class:"main-layout-horizontal"},tP={__name:"HomeView",setup(t){return(e,n)=>(z(),Y("div",ZC,[$e(TC),T("div",eP,[$e(KC),$e(JC)])]))}},nP=Zt(tP,[["__scopeId","data-v-7c99d32f"]]),sP={class:"research-page"},rP={class:"research-header"},iP={class:"status-row"},oP={key:0,class:"badge ok"},aP={class:"badge"},lP={class:"panel"},cP={class:"panel-head"},uP={class:"panel-actions"},hP=["disabled"],fP={key:0,class:"empty"},dP={key:1,class:"empty"},pP={key:2,class:"list"},mP={class:"card"},gP={class:"card-mid"},_P={class:"name-row"},yP={class:"name"},vP={class:"meta"},EP={class:"pill time"},TP={key:0,class:"pill fixed"},IP={key:0,class:"hint2"},AP={class:"progress-area"},wP={class:"progress-bar"},RP={class:"progress-info"},SP={class:"mono"},bP={key:1,class:"queue-row"},CP={class:"queue-title"},PP={key:2,class:"queue-list"},kP={class:"mono"},NP=["onClick"],DP={class:"panel"},VP={key:0,class:"empty"},OP={key:1,class:"empty"},xP={key:2,class:"list"},LP={class:"card-left"},MP={class:"icon"},FP={class:"card-mid"},UP={class:"name-row"},BP={class:"name"},$P={key:0,class:"hint2"},jP={class:"card-right"},qP=["disabled","onClick"],HP={class:"panel"},KP={key:0,class:"empty"},GP={key:1,class:"empty"},zP={key:2,class:"list"},WP={class:"card-mid"},QP={class:"name-row"},YP={class:"name"},XP={class:"meta"},JP={class:"pill time"},ZP={key:0,class:"pill"},ek={key:1,class:"pill"},tk={key:0,class:"hint2"},nk={class:"card-right"},sk=["disabled","onClick"],rk={class:"panel"},ik={key:0,class:"empty"},ok={key:1,class:"empty"},ak={key:2,class:"list"},lk={class:"card-mid"},ck={class:"name-row"},uk={class:"name"},hk={class:"meta"},fk={class:"pill time"},dk={key:0,class:"pill"},pk={key:1,class:"pill"},mk={key:0,class:"hint2"},gk={class:"card-right"},_k=["disabled","onClick"],yk={class:"panel"},vk={key:0,class:"empty"},Ek={key:1,class:"empty"},Tk={key:2,class:"list"},Ik={class:"card-left"},Ak={class:"icon"},wk={class:"card-mid"},Rk={class:"name-row"},Sk={class:"name"},bk={class:"meta"},Ck={class:"pill time"},Pk={key:0,class:"pill"},kk={key:1,class:"pill"},Nk={key:0,class:"hint2"},Dk={class:"card-right"},Vk=["disabled","onClick"],Ok={class:"panel"},xk={key:0,class:"empty"},Lk={key:1,class:"empty"},Mk={key:2,class:"list"},Fk={class:"card-mid"},Uk={class:"name-row"},Bk={class:"name"},$k={class:"meta"},jk={class:"pill time"},qk={key:0,class:"pill"},Hk={key:1,class:"pill"},Kk={key:0,class:"hint2"},Gk={class:"card-right"},zk=["disabled","onClick"],Wk={class:"panel"},Qk={key:0,class:"empty"},Yk={key:1,class:"empty"},Xk={key:2,class:"list"},Jk={class:"card-mid"},Zk={class:"name-row"},eN={class:"name"},tN={class:"meta"},nN={class:"pill lock"},sN={class:"pill time"},rN={key:0,class:"pill fixed"},iN={key:0,class:"hint2"},oN={key:1,class:"hint2"},aN={key:2,class:"hint2"},lN={__name:"ResearchView",setup(t){const e=Jr(),n=ge(()=>e.isHydrated.value),s=e.firstUnlockTransportId,r=e.needsFirstUnlockSelection,i=e.firstUnlockCandidates,o=ge(()=>e.activeResearch.value),l=ge(()=>e.queuedResearchIds.value||[]),c=ge(()=>e.queueReserveLevel.value||1),h=ge(()=>e.queueLimit.value||1),f=ge(()=>e.queueCount.value||0),p=ge(()=>e.isQueueFull.value),m=ge(()=>!!e.saveEnabled.value&&!!e.isStateLoaded.value&&!e.isSavingFirebaseData.value);function _(q){return sa[q]?.name??q}function k(q){return e.catalog.find(X=>X.id===q)||null}function D(q){return k(q)?.title??q}function V(q){return q?q.timePolicy==="FIXED"?!0:q.type==="SYSTEM":!1}function U(q){return V(k(q))}function B(q){const X=Number(q?.durationSec||0);if(!X)return"";const W=Math.round(X/3600);return V(q)?`: ${W}`:`: ${W}`}function Q(q){return B(k(q))}function G(q){return(q.effects||[]).find(W=>W?.type==="UNLOCK_TRANSPORT_TIER"&&Number(W?.tier||1)===1)?.transportId||null}function de(q,X){const W=G(q);return!W||!X.has(W)?null:{key:`first-${W}`,transportId:W,icon:sa[W]?.icon??"",title:`${sa[W]?.name??W}  `,desc:" 1  ."}}const Ee=ge(()=>{const q=e.visibleCatalog.value||[];if(s.value)return[];const X=new Set((i.value||[]).map(W=>W.id));return q.map(W=>de(W,X)).filter(Boolean)}),w=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&(q.type==="SYSTEM"||q.timePolicy==="FIXED")).map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),y=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="CITY").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),I=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="TRANSPORT").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q),icon:""}))),S=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="EFFICIENCY").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),R=ge(()=>(e.visibleCatalog.value||[]).map(q=>{const X=e.getStatus(q.id);return X!=="locked"&&X!=="comingSoon"?null:{id:q.id,status:X,statusLabel:X==="comingSoon"?"":"",title:q.title??q.id,desc:q.desc??"",durationLabel:B(q),fixed:V(q),lockReason:"  ."}}).filter(Boolean));function b(q){return l.value.includes(q)}function E(q){return o.value?b(q)?"":p.value?" ":"":" "}function ie(q){e.setFirstUnlockTransport(q)}function te(q){e.startResearch(q)}function Ne(q){e.cancelQueuedResearch(q)}function Ve(){e.cancelAllQueuedResearch()}function we(q){return e.getResearchProgress(q)}function Tt(q){return e.getResearchRemainingTime(q)}function zt(q){e.saveNow(q)}function Vt(){console.log("[ResearchView Debug]"),console.log("queueReserveLevel:",c.value),console.log("queueLimit:",h.value),console.log("queuedResearchIds:",l.value)}return(q,X)=>(z(),Y("div",sP,[T("header",rP,[X[1]||(X[1]=T("h1",{class:"title"},"",-1)),X[2]||(X[2]=T("p",{class:"desc"},"    1 .        . ",-1)),T("div",iP,[T("span",{class:br(["badge",{ok:n.value}])},ce(n.value?"  ":"  "),3),T("span",{class:br(["badge",{warn:et(r)}])},ce(et(r)?"  ()":"  "),3),et(s)?(z(),Y("span",oP,"  : "+ce(_(et(s))),1)):dt("",!0),T("span",aP," : "+ce(f.value)+"/"+ce(h.value)+" (Lv"+ce(c.value)+") ",1)])]),T("section",lP,[T("div",cP,[X[3]||(X[3]=T("h2",{class:"panel-title"}," ",-1)),T("div",uP,[T("button",{class:"btn",disabled:!m.value,onClick:X[0]||(X[0]=W=>zt({reason:"manual"}))},"   ",8,hP),T("button",{class:"btn ghost",onClick:Vt},"   ")])]),n.value?o.value?(z(),Y("div",pP,[T("article",mP,[X[6]||(X[6]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",gP,[T("div",_P,[T("div",yP,ce(D(o.value.id)),1),T("div",vP,[X[4]||(X[4]=T("span",{class:"pill"},"",-1)),T("span",EP,ce(Q(o.value.id)),1),U(o.value.id)?(z(),Y("span",TP,"")):dt("",!0)])]),U(o.value.id)?(z(),Y("div",IP,"    ,     . ")):dt("",!0),T("div",AP,[T("div",wP,[T("div",{class:"progress-fill",style:Ba({width:we(o.value.id)+"%"})},null,4)]),T("div",RP,[T("span",null,ce(we(o.value.id).toFixed(1))+"%",1),T("span",SP,": "+ce(Tt(o.value.id)),1)])]),l.value.length>0?(z(),Y("div",bP,[X[5]||(X[5]=T("span",{class:"pill"},"",-1)),T("span",CP,ce(l.value.length)+" ",1),T("button",{class:"btn small ghost",onClick:Ve}," ")])):dt("",!0),l.value.length>0?(z(),Y("div",PP,[(z(!0),Y(Ze,null,is(l.value,W=>(z(),Y("div",{key:W,class:"queue-item"},[T("span",kP,ce(D(W)),1),T("button",{class:"btn small ghost",onClick:ut=>Ne(W)},"",8,NP)]))),128))])):dt("",!0)]),X[7]||(X[7]=T("div",{class:"card-right"},[T("button",{class:"btn primary",disabled:""},"")],-1))])])):(z(),Y("div",dP,"    .     . ")):(z(),Y("div",fP," "))]),T("section",DP,[X[9]||(X[9]=T("h2",{class:"panel-title"}," ()",-1)),X[10]||(X[10]=T("p",{class:"panel-desc"},"  1   .       . ",-1)),n.value?et(r)?(z(),Y("div",xP,[(z(!0),Y(Ze,null,is(Ee.value,W=>(z(),Y("article",{key:W.key,class:"card"},[T("div",LP,[T("div",MP,ce(W.icon),1)]),T("div",FP,[T("div",UP,[T("div",BP,ce(W.title),1),X[8]||(X[8]=T("div",{class:"meta"},[T("span",{class:"pill time"},"")],-1))]),W.desc?(z(),Y("div",$P,ce(W.desc),1)):dt("",!0)]),T("div",jP,[T("button",{class:"btn primary",disabled:!!o.value||!n.value,onClick:ut=>ie(W.transportId)},"   ",8,qP)])]))),128))])):(z(),Y("div",OP,"   . ")):(z(),Y("div",VP," "))]),T("section",HP,[X[14]||(X[14]=T("h2",{class:"panel-title"},"  ( 8)",-1)),X[15]||(X[15]=T("p",{class:"panel-desc"},"   (////) .         . ",-1)),n.value?w.value.length===0?(z(),Y("div",GP,"     .")):(z(),Y("div",zP,[(z(!0),Y(Ze,null,is(w.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[13]||(X[13]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",WP,[T("div",QP,[T("div",YP,ce(W.title),1),T("div",XP,[T("span",JP,ce(W.durationLabel),1),X[11]||(X[11]=T("span",{class:"pill fixed"},"",-1)),o.value?(z(),Y("span",ZP,"")):(z(),Y("span",ek,""))])]),W.desc?(z(),Y("div",tk,ce(W.desc),1)):dt("",!0),X[12]||(X[12]=T("div",{class:"hint2"},"        .",-1))]),T("div",nk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,sk)])]))),128))])):(z(),Y("div",KP," "))]),T("section",rk,[X[17]||(X[17]=T("h2",{class:"panel-title"}," /",-1)),X[18]||(X[18]=T("p",{class:"panel-desc"},"           . (//)   . ",-1)),n.value?y.value.length===0?(z(),Y("div",ok,"     .")):(z(),Y("div",ak,[(z(!0),Y(Ze,null,is(y.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[16]||(X[16]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",lk,[T("div",ck,[T("div",uk,ce(W.title),1),T("div",hk,[T("span",fk,ce(W.durationLabel),1),o.value?(z(),Y("span",dk,"")):(z(),Y("span",pk,""))])]),W.desc?(z(),Y("div",mk,ce(W.desc),1)):dt("",!0)]),T("div",gk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,_k)])]))),128))])):(z(),Y("div",ik," "))]),T("section",yk,[X[19]||(X[19]=T("h2",{class:"panel-title"}," ",-1)),X[20]||(X[20]=T("p",{class:"panel-desc"},"  1   ,     . ",-1)),n.value?I.value.length===0?(z(),Y("div",Ek,"    .")):(z(),Y("div",Tk,[(z(!0),Y(Ze,null,is(I.value,W=>(z(),Y("article",{key:W.id,class:"card"},[T("div",Ik,[T("div",Ak,ce(W.icon),1)]),T("div",wk,[T("div",Rk,[T("div",Sk,ce(W.title),1),T("div",bk,[T("span",Ck,ce(W.durationLabel),1),o.value?(z(),Y("span",Pk,"")):(z(),Y("span",kk,""))])]),W.desc?(z(),Y("div",Nk,ce(W.desc),1)):dt("",!0)]),T("div",Dk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,Vk)])]))),128))])):(z(),Y("div",vk," "))]),T("section",Ok,[X[22]||(X[22]=T("h2",{class:"panel-title"}," ",-1)),X[23]||(X[23]=T("p",{class:"panel-desc"},"     .  ( 8)  . ",-1)),n.value?S.value.length===0?(z(),Y("div",Lk,"    .")):(z(),Y("div",Mk,[(z(!0),Y(Ze,null,is(S.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[21]||(X[21]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",Fk,[T("div",Uk,[T("div",Bk,ce(W.title),1),T("div",$k,[T("span",jk,ce(W.durationLabel),1),o.value?(z(),Y("span",qk,"")):(z(),Y("span",Hk,""))])]),W.desc?(z(),Y("div",Kk,ce(W.desc),1)):dt("",!0)]),T("div",Gk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,zk)])]))),128))])):(z(),Y("div",xk," "))]),T("section",Wk,[X[26]||(X[26]=T("h2",{class:"panel-title"},"  ",-1)),X[27]||(X[27]=T("p",{class:"panel-desc"}," 2(2)  ,       . ",-1)),n.value?R.value.length===0?(z(),Y("div",Yk,"/  .")):(z(),Y("div",Xk,[(z(!0),Y(Ze,null,is(R.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[24]||(X[24]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",Jk,[T("div",Zk,[T("div",eN,ce(W.title),1),T("div",tN,[T("span",nN,ce(W.statusLabel),1),T("span",sN,ce(W.durationLabel),1),W.fixed?(z(),Y("span",rN,"")):dt("",!0)])]),W.desc?(z(),Y("div",iN,ce(W.desc),1)):dt("",!0),W.status==="comingSoon"?(z(),Y("div",oN,".")):W.status==="locked"?(z(),Y("div",aN,ce(W.lockReason||"  ."),1)):dt("",!0)]),X[25]||(X[25]=T("div",{class:"card-right"},[T("button",{class:"btn primary",disabled:""},"")],-1))]))),128))])):(z(),Y("div",Qk," "))])]))}},cN=Zt(lN,[["__scopeId","data-v-3243713e"]]),uN={class:"vehicles-page-container"},hN={__name:"VehiclesView",setup(t){return(e,n)=>(z(),Y("div",uN,[...n[0]||(n[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"       .   ,     . ",-1),T("p",{class:"placeholder-text"},"     . (  )",-1)])]))}},fN=Zt(hN,[["__scopeId","data-v-ab2e0e12"]]),dN={},pN={class:"line-page-container"};function mN(t,e){return z(),Y("div",pN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"      .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const gN=Zt(dN,[["render",mN],["__scopeId","data-v-986441d8"]]),_N={},yN={class:"construction-page-container"};function vN(t,e){return z(),Y("div",yN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"     .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const EN=Zt(_N,[["render",vN],["__scopeId","data-v-bbfe3657"]]),TN={},IN={class:"finance-page-container"};function AN(t,e){return z(),Y("div",IN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"     .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const wN=Zt(TN,[["render",AN],["__scopeId","data-v-eb5d7345"]]),RN={},SN={class:"settings-shell"},bN={class:"settings-nav"},CN={class:"settings-content"};function PN(t,e){return z(),Y("div",SN,[T("aside",bN,[cf(t.$slots,"nav",{},void 0)]),T("section",CN,[cf(t.$slots,"content",{},void 0)])])}const kN=Zt(RN,[["render",PN],["__scopeId","data-v-c3b57252"]]),NN={},DN={class:"settings-nav-inner"},VN={class:"menu"};function ON(t,e){const n=ji("router-link");return z(),Y("nav",DN,[e[1]||(e[1]=T("h3",{class:"title"},"",-1)),T("ul",VN,[T("li",null,[$e(n,{to:{name:"DataManager"}},{default:gn(()=>[...e[0]||(e[0]=[st("   ",-1)])]),_:1})])])])}const xN=Zt(NN,[["render",ON],["__scopeId","data-v-96f4cf08"]]),LN={__name:"SettingsView",setup(t){return(e,n)=>{const s=ji("router-view");return z(),kr(kN,null,{nav:gn(()=>[$e(xN)]),content:gn(()=>[$e(s)]),_:1})}}},MN={class:"data-manager"},FN={class:"card"},UN={class:"kv"},BN={class:"v"},$N={key:0,class:"hint"},jN={class:"card"},qN={class:"row"},HN=["disabled"],KN=["disabled"],GN=["disabled"],zN={class:"autosave"},WN={class:"autosave-controls"},QN={class:"radio"},YN=["disabled"],XN={class:"radio"},JN=["disabled"],ZN={class:"radio"},eD=["disabled"],tD={key:0,class:"hint"},nD={key:0,class:"message"},sD={key:1,class:"preview"},rD={class:"preview-head"},iD={class:"summary"},oD={class:"summary-item"},aD={class:"summary-v"},lD={class:"summary-item"},cD={class:"summary-v"},uD={class:"summary-item"},hD={class:"summary-v"},fD={key:0,class:"pre"},dD={key:2,class:"hint"},pD={class:"modal"},mD={class:"check"},gD={class:"row"},_D=["disabled"],yD=["disabled"],vD={__name:"DataManagerPanel",setup(t){const e=fh(),n=ge(()=>(e?.user?.value??e?.currentUser?.value??e?.firebaseUser?.value??e?.user??e?.currentUser??null)?.uid??null),{saveNow:s,isSavingFirebaseData:r,autoSaveEnabled:i,autoSaveBase:o,autoSaveIntervalMin:l,setAutoSaveEnabled:c,setAutoSaveBase:h,setAutoSaveIntervalMin:f,autoSaveRunning:p}=Jr(),m=ge(()=>r.value),_=Ae(!1),k=Ae(""),D=Ae(!1),V=Ae(null),U=Ae(!1);function B(ie){return JSON.stringify(ie,null,2)}function Q(ie){if(!ie)return"-";try{return typeof ie?.toDate=="function"?ie.toDate().toLocaleString():ie instanceof Date?ie.toLocaleString():typeof ie=="number"?new Date(ie).toLocaleString():String(ie)}catch{return String(ie)}}const G=Ae("off");function de(){if(!i.value){G.value="off";return}const ie=Number(o.value),te=Number(l.value);ie===10&&te===10?G.value="10":ie===5&&te===5?G.value="5":ie===10?G.value="10":G.value="5"}Hs([i,o,l],()=>de(),{immediate:!0}),Hs(G,ie=>{if(n.value){if(ie==="off"){c(!1);return}if(ie==="5"){h(5),f(5),c(!0);return}ie==="10"&&(h(10),f(10),c(!0))}});async function Ee(){if(n.value){k.value="";try{await s({reason:"manual-ui"}),k.value=" ."}catch(ie){console.error("DataManager: save failed",ie),k.value=` : ${String(ie?.message??ie)}`}}}async function w(){if(n.value){_.value=!0,k.value="",D.value=!1,V.value=null,U.value=!1;try{const ie=Pa(Na,"users",n.value,"research","state"),te=await cy(ie);te.exists()?(V.value=te.data(),D.value=!0,k.value="  ."):k.value="  . ( )"}catch(ie){console.error("DataManager: load failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{_.value=!1}}}const y=Ae(!1),I=Ae(!1),S=Ae("");function R(){y.value=!0,I.value=!1,S.value=""}function b(){y.value=!1}async function E(){if(n.value){_.value=!0,k.value="";try{const ie=Pa(Na,"users",n.value,"research","state");await j1(ie),D.value=!1,V.value=null,U.value=!1,k.value=" .   .",b()}catch(ie){console.error("DataManager: delete failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{_.value=!1}}}return(ie,te)=>(z(),Y("div",MN,[te[22]||(te[22]=T("header",{class:"header"},[T("div",null,[T("h1",{class:"title"}," "),T("p",{class:"desc"},"   ,        . ")])],-1)),T("section",FN,[te[7]||(te[7]=T("h2",{class:"card-title"}," ",-1)),T("div",UN,[te[6]||(te[6]=T("div",{class:"k"}," ",-1)),T("div",BN,ce(n.value?"":"()"),1)]),n.value?dt("",!0):(z(),Y("p",$N," Firestore  /   . "))]),T("section",jN,[te[16]||(te[16]=T("h2",{class:"card-title"}," ",-1)),T("div",qN,[T("button",{class:"btn",onClick:Ee,disabled:!n.value||_.value||m.value},"  ",8,HN),T("button",{class:"btn",onClick:w,disabled:!n.value||_.value},"   ",8,KN),T("button",{class:"btn danger",onClick:R,disabled:!n.value||_.value},"   ",8,GN)]),T("div",zN,[te[11]||(te[11]=T("div",{class:"autosave-title"},"",-1)),T("div",WN,[T("label",QN,[mi(T("input",{type:"radio",name:"autosave",value:"off","onUpdate:modelValue":te[0]||(te[0]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,YN),[[Fl,G.value]]),te[8]||(te[8]=T("span",null,"",-1))]),T("label",XN,[mi(T("input",{type:"radio",name:"autosave",value:"5","onUpdate:modelValue":te[1]||(te[1]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,JN),[[Fl,G.value]]),te[9]||(te[9]=T("span",null,"5",-1))]),T("label",ZN,[mi(T("input",{type:"radio",name:"autosave",value:"10","onUpdate:modelValue":te[2]||(te[2]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,eD),[[Fl,G.value]]),te[10]||(te[10]=T("span",null,"10",-1))])]),n.value&&et(i)&&et(p)?(z(),Y("p",tD,"    (KST   ) ")):dt("",!0)]),k.value?(z(),Y("p",nD,ce(k.value),1)):dt("",!0),D.value?(z(),Y("div",sD,[T("div",rD,[te[12]||(te[12]=T("h3",{class:"preview-title"},"    ",-1)),T("button",{class:"btn small",onClick:te[3]||(te[3]=Ne=>U.value=!U.value)},ce(U.value?"":""),1)]),T("div",iD,[T("div",oD,[te[13]||(te[13]=T("div",{class:"summary-k"},"",-1)),T("div",aD,ce(V.value?.version??"-"),1)]),T("div",lD,[te[14]||(te[14]=T("div",{class:"summary-k"},"  ",-1)),T("div",cD,ce(V.value?.transports?.length??0),1)]),T("div",uD,[te[15]||(te[15]=T("div",{class:"summary-k"},"",-1)),T("div",hD,ce(Q(V.value?.updatedAt)),1)])]),U.value?(z(),Y("pre",fD,ce(B(V.value)),1)):dt("",!0)])):(z(),Y("p",dD,"   ."))]),y.value?(z(),Y("div",{key:0,class:"modal-backdrop",onClick:TT(b,["self"])},[T("div",pD,[te[18]||(te[18]=T("h2",{class:"modal-title"}," ?",-1)),te[19]||(te[19]=T("p",{class:"modal-desc danger-text"},"     .  ? ",-1)),te[20]||(te[20]=T("p",{class:"modal-desc"},[st("   ,  "),T("b",null," "),st(". ")],-1)),T("label",mD,[mi(T("input",{type:"checkbox","onUpdate:modelValue":te[4]||(te[4]=Ne=>I.value=Ne)},null,512),[[yT,I.value]]),te[17]||(te[17]=T("span",null,"      .",-1))]),te[21]||(te[21]=T("p",{class:"modal-desc"},[st("   "),T("b",null,"DELETE"),st(" . ")],-1)),mi(T("input",{class:"input","onUpdate:modelValue":te[5]||(te[5]=Ne=>S.value=Ne),placeholder:"DELETE"},null,512),[[_T,S.value]]),T("div",gD,[T("button",{class:"btn",onClick:b,disabled:_.value},"",8,_D),T("button",{class:"btn danger",onClick:E,disabled:_.value||!I.value||S.value!=="DELETE"},"   ",8,yD)])])])):dt("",!0)]))}},ED=Zt(vD,[["__scopeId","data-v-17233cc7"]]),TD={__name:"DataManagerView",setup(t){return(e,n)=>(z(),kr(ED))}},ID=[{path:"/",redirect:{name:"Research"}},{path:"/home",component:nP,children:[{path:"",redirect:{name:"Research"}},{path:"research",name:"Research",component:cN},{path:"vehicles",name:"Vehicles",component:fN},{path:"line",name:"Line",component:gN},{path:"construction",name:"Construction",component:EN},{path:"finance",name:"Finance",component:wN},{path:"settings",component:LN,children:[{path:"",redirect:{name:"DataManager"}},{path:"data",name:"DataManager",component:TD}]}]}],AD=LI({history:pI(),routes:ID}),{user:wD,authReady:RD}=fh(),{loadForUser:SD,clearUserState:bD}=Jr();let tc=null;Hs([RD,wD],async([t,e])=>{if(!t)return;if(!e){tc=null,bD();return}const n=e.uid;n&&n!==tc&&(tc=n,await SD(n))},{immediate:!0});const Dy=wT(kT);Dy.use(AD);Dy.mount("#app");
