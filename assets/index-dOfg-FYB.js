(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Wc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},yr=[],yn=()=>{},Rp=()=>!1,xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Qc=t=>t.startsWith("onUpdate:"),Nt=Object.assign,Yc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},sv=Object.prototype.hasOwnProperty,xe=(t,e)=>sv.call(t,e),me=Array.isArray,vr=t=>oo(t)==="[object Map]",Ma=t=>oo(t)==="[object Set]",sf=t=>oo(t)==="[object Date]",Te=t=>typeof t=="function",it=t=>typeof t=="string",ln=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",Sp=t=>(qe(t)||Te(t))&&Te(t.then)&&Te(t.catch),bp=Object.prototype.toString,oo=t=>bp.call(t),rv=t=>oo(t).slice(8,-1),Cp=t=>oo(t)==="[object Object]",Xc=t=>it(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ri=Wc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fa=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},iv=/-\w/g,Xt=Fa(t=>t.replace(iv,e=>e.slice(1).toUpperCase())),ov=/\B([A-Z])/g,tr=Fa(t=>t.replace(ov,"-$1").toLowerCase()),Ua=Fa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Pl=Fa(t=>t?`on${Ua(t)}`:""),gs=(t,e)=>!Object.is(t,e),qo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Pp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Jc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let rf;const Ba=()=>rf||(rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $a(t){if(me(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=it(s)?uv(s):$a(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(it(t)||qe(t))return t}const av=/;(?![^(]*\))/g,lv=/:([^]+)/,cv=/\/\*[^]*?\*\//g;function uv(t){const e={};return t.replace(cv,"").split(av).forEach(n=>{if(n){const s=n.split(lv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function br(t){let e="";if(it(t))e=t;else if(me(t))for(let n=0;n<t.length;n++){const s=br(t[n]);s&&(e+=s+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const hv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fv=Wc(hv);function kp(t){return!!t||t===""}function dv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Cr(t[s],e[s]);return n}function Cr(t,e){if(t===e)return!0;let n=sf(t),s=sf(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ln(t),s=ln(e),n||s)return t===e;if(n=me(t),s=me(e),n||s)return n&&s?dv(t,e):!1;if(n=qe(t),s=qe(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Cr(t[o],e[o]))return!1}}return String(t)===String(e)}function Np(t,e){return t.findIndex(n=>Cr(n,e))}const Dp=t=>!!(t&&t.__v_isRef===!0),ce=t=>it(t)?t:t==null?"":me(t)||qe(t)&&(t.toString===bp||!Te(t.toString))?Dp(t)?ce(t.value):JSON.stringify(t,Vp,2):String(t),Vp=(t,e)=>Dp(e)?Vp(t,e.value):vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[kl(s,i)+" =>"]=r,n),{})}:Ma(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>kl(n))}:ln(e)?kl(e):qe(e)&&!me(e)&&!Cp(e)?String(e):e,kl=(t,e="")=>{var n;return ln(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ut;class pv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ut,!e&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ut;try{return Ut=this,e()}finally{Ut=n}}}on(){++this._on===1&&(this.prevScope=Ut,Ut=this)}off(){this._on>0&&--this._on===0&&(Ut=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function mv(){return Ut}let He;const Nl=new WeakSet;class Op{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ut&&Ut.active&&Ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Nl.has(this)&&(Nl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,of(this),Mp(this);const e=He,n=on;He=this,on=!0;try{return this.fn()}finally{Fp(this),He=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)tu(e);this.deps=this.depsTail=void 0,of(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Nl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){sc(this)&&this.run()}get dirty(){return sc(this)}}let Lp=0,Si,bi;function xp(t,e=!1){if(t.flags|=8,e){t.next=bi,bi=t;return}t.next=Si,Si=t}function Zc(){Lp++}function eu(){if(--Lp>0)return;if(bi){let e=bi;for(bi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Si;){let e=Si;for(Si=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Mp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Fp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),tu(s),gv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function sc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Up(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Up(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ui)||(t.globalVersion=Ui,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!sc(t))))return;t.flags|=2;const e=t.dep,n=He,s=on;He=t,on=!0;try{Mp(t);const r=t.fn(t._value);(e.version===0||gs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{He=n,on=s,Fp(t),t.flags&=-3}}function tu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)tu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function gv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const Bp=[];function Bn(){Bp.push(on),on=!1}function $n(){const t=Bp.pop();on=t===void 0?!0:t}function of(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let Ui=0;class _v{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class nu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!on||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new _v(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,$p(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=s)}return n}trigger(e){this.version++,Ui++,this.notify(e)}notify(e){Zc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{eu()}}}function $p(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)$p(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const rc=new WeakMap,qs=Symbol(""),ic=Symbol(""),Bi=Symbol("");function bt(t,e,n){if(on&&He){let s=rc.get(t);s||rc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new nu),r.map=s,r.key=n),r.track()}}function Dn(t,e,n,s,r,i){const o=rc.get(t);if(!o){Ui++;return}const l=c=>{c&&c.trigger()};if(Zc(),e==="clear")o.forEach(l);else{const c=me(t),h=c&&Xc(n);if(c&&n==="length"){const f=Number(s);o.forEach((p,m)=>{(m==="length"||m===Bi||!ln(m)&&m>=f)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Bi)),e){case"add":c?h&&l(o.get("length")):(l(o.get(qs)),vr(t)&&l(o.get(ic)));break;case"delete":c||(l(o.get(qs)),vr(t)&&l(o.get(ic)));break;case"set":vr(t)&&l(o.get(qs));break}}eu()}function hr(t){const e=Le(t);return e===t?e:(bt(e,"iterate",Bi),Yt(t)?e:e.map(cn))}function ja(t){return bt(t=Le(t),"iterate",Bi),t}function as(t,e){return jn(t)?Hs(t)?Pr(cn(e)):Pr(e):cn(e)}const yv={__proto__:null,[Symbol.iterator](){return Dl(this,Symbol.iterator,t=>as(this,t))},concat(...t){return hr(this).concat(...t.map(e=>me(e)?hr(e):e))},entries(){return Dl(this,"entries",t=>(t[1]=as(this,t[1]),t))},every(t,e){return Pn(this,"every",t,e,void 0,arguments)},filter(t,e){return Pn(this,"filter",t,e,n=>n.map(s=>as(this,s)),arguments)},find(t,e){return Pn(this,"find",t,e,n=>as(this,n),arguments)},findIndex(t,e){return Pn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Pn(this,"findLast",t,e,n=>as(this,n),arguments)},findLastIndex(t,e){return Pn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Pn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vl(this,"includes",t)},indexOf(...t){return Vl(this,"indexOf",t)},join(t){return hr(this).join(t)},lastIndexOf(...t){return Vl(this,"lastIndexOf",t)},map(t,e){return Pn(this,"map",t,e,void 0,arguments)},pop(){return pi(this,"pop")},push(...t){return pi(this,"push",t)},reduce(t,...e){return af(this,"reduce",t,e)},reduceRight(t,...e){return af(this,"reduceRight",t,e)},shift(){return pi(this,"shift")},some(t,e){return Pn(this,"some",t,e,void 0,arguments)},splice(...t){return pi(this,"splice",t)},toReversed(){return hr(this).toReversed()},toSorted(t){return hr(this).toSorted(t)},toSpliced(...t){return hr(this).toSpliced(...t)},unshift(...t){return pi(this,"unshift",t)},values(){return Dl(this,"values",t=>as(this,t))}};function Dl(t,e,n){const s=ja(t),r=s[e]();return s!==t&&!Yt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const vv=Array.prototype;function Pn(t,e,n,s,r,i){const o=ja(t),l=o!==t&&!Yt(t),c=o[e];if(c!==vv[e]){const p=c.apply(t,i);return l?cn(p):p}let h=n;o!==t&&(l?h=function(p,m){return n.call(this,as(t,p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const f=c.call(o,h,s);return l&&r?r(f):f}function af(t,e,n,s){const r=ja(t);let i=n;return r!==t&&(Yt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,as(t,l),c,t)}),r[e](i,...s)}function Vl(t,e,n){const s=Le(t);bt(s,"iterate",Bi);const r=s[e](...n);return(r===-1||r===!1)&&iu(n[0])?(n[0]=Le(n[0]),s[e](...n)):r}function pi(t,e,n=[]){Bn(),Zc();const s=Le(t)[e].apply(t,n);return eu(),$n(),s}const Ev=Wc("__proto__,__v_isRef,__isVue"),jp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ln));function Tv(t){ln(t)||(t=String(t));const e=Le(this);return bt(e,"has",t),e.hasOwnProperty(t)}class qp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Nv:zp:i?Gp:Kp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=me(e);if(!r){let c;if(o&&(c=yv[n]))return c;if(n==="hasOwnProperty")return Tv}const l=Reflect.get(e,n,kt(e)?e:s);if((ln(n)?jp.has(n):Ev(n))||(r||bt(e,"get",n),i))return l;if(kt(l)){const c=o&&Xc(n)?l:l.value;return r&&qe(c)?ac(c):c}return qe(l)?r?ac(l):qa(l):l}}class Hp extends qp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=me(e)&&Xc(n);if(!this._isShallow){const h=jn(i);if(!Yt(s)&&!jn(s)&&(i=Le(i),s=Le(s)),!o&&kt(i)&&!kt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:xe(e,n),c=Reflect.set(e,n,s,kt(e)?e:r);return e===Le(r)&&(l?gs(s,i)&&Dn(e,"set",n,s):Dn(e,"add",n,s)),c}deleteProperty(e,n){const s=xe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Dn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!ln(n)||!jp.has(n))&&bt(e,"has",n),s}ownKeys(e){return bt(e,"iterate",me(e)?"length":qs),Reflect.ownKeys(e)}}class Iv extends qp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Av=new Hp,wv=new Iv,Rv=new Hp(!0);const oc=t=>t,Do=t=>Reflect.getPrototypeOf(t);function Sv(t,e,n){return function(...s){const r=this.__v_raw,i=Le(r),o=vr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),f=n?oc:e?Pr:cn;return!e&&bt(i,"iterate",c?ic:qs),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Vo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function bv(t,e){const n={get(r){const i=this.__v_raw,o=Le(i),l=Le(r);t||(gs(r,l)&&bt(o,"get",r),bt(o,"get",l));const{has:c}=Do(o),h=e?oc:t?Pr:cn;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&bt(Le(r),"iterate",qs),r.size},has(r){const i=this.__v_raw,o=Le(i),l=Le(r);return t||(gs(r,l)&&bt(o,"has",r),bt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Le(l),h=e?oc:t?Pr:cn;return!t&&bt(c,"iterate",qs),l.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return Nt(n,t?{add:Vo("add"),set:Vo("set"),delete:Vo("delete"),clear:Vo("clear")}:{add(r){!e&&!Yt(r)&&!jn(r)&&(r=Le(r));const i=Le(this);return Do(i).has.call(i,r)||(i.add(r),Dn(i,"add",r,r)),this},set(r,i){!e&&!Yt(i)&&!jn(i)&&(i=Le(i));const o=Le(this),{has:l,get:c}=Do(o);let h=l.call(o,r);h||(r=Le(r),h=l.call(o,r));const f=c.call(o,r);return o.set(r,i),h?gs(i,f)&&Dn(o,"set",r,i):Dn(o,"add",r,i),this},delete(r){const i=Le(this),{has:o,get:l}=Do(i);let c=o.call(i,r);c||(r=Le(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&Dn(i,"delete",r,void 0),h},clear(){const r=Le(this),i=r.size!==0,o=r.clear();return i&&Dn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Sv(r,t,e)}),n}function su(t,e){const n=bv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(xe(n,r)&&r in s?n:s,r,i)}const Cv={get:su(!1,!1)},Pv={get:su(!1,!0)},kv={get:su(!0,!1)};const Kp=new WeakMap,Gp=new WeakMap,zp=new WeakMap,Nv=new WeakMap;function Dv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vv(t){return t.__v_skip||!Object.isExtensible(t)?0:Dv(rv(t))}function qa(t){return jn(t)?t:ru(t,!1,Av,Cv,Kp)}function Wp(t){return ru(t,!1,Rv,Pv,Gp)}function ac(t){return ru(t,!0,wv,kv,zp)}function ru(t,e,n,s,r){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Vv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Hs(t){return jn(t)?Hs(t.__v_raw):!!(t&&t.__v_isReactive)}function jn(t){return!!(t&&t.__v_isReadonly)}function Yt(t){return!!(t&&t.__v_isShallow)}function iu(t){return t?!!t.__v_raw:!1}function Le(t){const e=t&&t.__v_raw;return e?Le(e):t}function Ov(t){return!xe(t,"__v_skip")&&Object.isExtensible(t)&&Pp(t,"__v_skip",!0),t}const cn=t=>qe(t)?qa(t):t,Pr=t=>qe(t)?ac(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function Ae(t){return Qp(t,!1)}function Lv(t){return Qp(t,!0)}function Qp(t,e){return kt(t)?t:new xv(t,e)}class xv{constructor(e,n){this.dep=new nu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Le(e),this._value=n?e:cn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Yt(e)||jn(e);e=s?e:Le(e),gs(e,n)&&(this._rawValue=e,this._value=s?e:cn(e),this.dep.trigger())}}function tt(t){return kt(t)?t.value:t}const Mv={get:(t,e,n)=>e==="__v_raw"?t:tt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Yp(t){return Hs(t)?t:new Proxy(t,Mv)}class Fv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new nu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ui-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return xp(this,!0),!0}get value(){const e=this.dep.track();return Up(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Uv(t,e,n=!1){let s,r;return Te(t)?s=t:(s=t.get,r=t.set),new Fv(s,r,n)}const Oo={},ra=new WeakMap;let Ms;function Bv(t,e=!1,n=Ms){if(n){let s=ra.get(n);s||ra.set(n,s=[]),s.push(t)}}function $v(t,e,n=Be){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=G=>r?G:Yt(G)||r===!1||r===0?Vn(G,1):Vn(G);let f,p,m,_,k=!1,D=!1;if(kt(t)?(p=()=>t.value,k=Yt(t)):Hs(t)?(p=()=>h(t),k=!0):me(t)?(D=!0,k=t.some(G=>Hs(G)||Yt(G)),p=()=>t.map(G=>{if(kt(G))return G.value;if(Hs(G))return h(G);if(Te(G))return c?c(G,2):G()})):Te(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){Bn();try{m()}finally{$n()}}const G=Ms;Ms=f;try{return c?c(t,3,[_]):t(_)}finally{Ms=G}}:p=yn,e&&r){const G=p,de=r===!0?1/0:r;p=()=>Vn(G(),de)}const V=mv(),U=()=>{f.stop(),V&&V.active&&Yc(V.effects,f)};if(i&&e){const G=e;e=(...de)=>{G(...de),U()}}let B=D?new Array(t.length).fill(Oo):Oo;const Q=G=>{if(!(!(f.flags&1)||!f.dirty&&!G))if(e){const de=f.run();if(r||k||(D?de.some((Ee,w)=>gs(Ee,B[w])):gs(de,B))){m&&m();const Ee=Ms;Ms=f;try{const w=[de,B===Oo?void 0:D&&B[0]===Oo?[]:B,_];B=de,c?c(e,3,w):e(...w)}finally{Ms=Ee}}}else f.run()};return l&&l(Q),f=new Op(p),f.scheduler=o?()=>o(Q,!1):Q,_=G=>Bv(G,!1,f),m=f.onStop=()=>{const G=ra.get(f);if(G){if(c)c(G,4);else for(const de of G)de();ra.delete(f)}},e?s?Q(!0):B=f.run():o?o(Q.bind(null,!0),!0):f.run(),U.pause=f.pause.bind(f),U.resume=f.resume.bind(f),U.stop=U,U}function Vn(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,kt(t))Vn(t.value,e,n);else if(me(t))for(let s=0;s<t.length;s++)Vn(t[s],e,n);else if(Ma(t)||vr(t))t.forEach(s=>{Vn(s,e,n)});else if(Cp(t)){for(const s in t)Vn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Vn(t[s],e,n)}return t}function ao(t,e,n,s){try{return s?t(...s):t()}catch(r){Ha(r,e,n)}}function Rn(t,e,n,s){if(Te(t)){const r=ao(t,e,n,s);return r&&Sp(r)&&r.catch(i=>{Ha(i,e,n)}),r}if(me(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Rn(t[i],e,n,s));return r}}function Ha(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,c,h)===!1)return}l=l.parent}if(i){Bn(),ao(i,null,10,[t,c,h]),$n();return}}jv(t,n,r,s,o)}function jv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Mt=[];let pn=-1;const Er=[];let ls=null,fr=0;const Xp=Promise.resolve();let ia=null;function Jp(t){const e=ia||Xp;return t?e.then(this?t.bind(this):t):e}function qv(t){let e=pn+1,n=Mt.length;for(;e<n;){const s=e+n>>>1,r=Mt[s],i=$i(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function ou(t){if(!(t.flags&1)){const e=$i(t),n=Mt[Mt.length-1];!n||!(t.flags&2)&&e>=$i(n)?Mt.push(t):Mt.splice(qv(e),0,t),t.flags|=1,Zp()}}function Zp(){ia||(ia=Xp.then(tm))}function Hv(t){me(t)?Er.push(...t):ls&&t.id===-1?ls.splice(fr+1,0,t):t.flags&1||(Er.push(t),t.flags|=1),Zp()}function lf(t,e,n=pn+1){for(;n<Mt.length;n++){const s=Mt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Mt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function em(t){if(Er.length){const e=[...new Set(Er)].sort((n,s)=>$i(n)-$i(s));if(Er.length=0,ls){ls.push(...e);return}for(ls=e,fr=0;fr<ls.length;fr++){const n=ls[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ls=null,fr=0}}const $i=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tm(t){try{for(pn=0;pn<Mt.length;pn++){const e=Mt[pn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ao(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;pn<Mt.length;pn++){const e=Mt[pn];e&&(e.flags&=-2)}pn=-1,Mt.length=0,em(),ia=null,(Mt.length||Er.length)&&tm()}}let vt=null,nm=null;function oa(t){const e=vt;return vt=t,nm=t&&t.type.__scopeId||null,e}function gn(t,e=vt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ca(-1);const i=oa(e);let o;try{o=t(...r)}finally{oa(i),s._d&&ca(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function mi(t,e){if(vt===null)return t;const n=Wa(vt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Be]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Vn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ls(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Bn(),Rn(c,n,8,[t.el,l,t,e]),$n())}}function Ho(t,e){if(Pt){let n=Pt.provides;const s=Pt.parent&&Pt.parent.provides;s===n&&(n=Pt.provides=Object.create(s)),n[t]=e}}function Mn(t,e,n=!1){const s=HE();if(s||Ir){let r=Ir?Ir._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Te(e)?e.call(s&&s.proxy):e}}const Kv=Symbol.for("v-scx"),Gv=()=>Mn(Kv);function sm(t,e){return au(t,null,e)}function Ks(t,e,n){return au(t,e,n)}function au(t,e,n=Be){const{immediate:s,deep:r,flush:i,once:o}=n,l=Nt({},n),c=e&&s||!e&&i!=="post";let h;if(Ki){if(i==="sync"){const _=Gv();h=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=yn,_.resume=yn,_.pause=yn,_}}const f=Pt;l.call=(_,k,D)=>Rn(_,f,k,D);let p=!1;i==="post"?l.scheduler=_=>{Ht(_,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(_,k)=>{k?_():ou(_)}),l.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=$v(t,e,l);return Ki&&(h?h.push(m):c&&m()),m}function zv(t,e,n){const s=this.proxy,r=it(t)?t.includes(".")?rm(s,t):()=>s[t]:t.bind(s,s);let i;Te(e)?i=e:(i=e.handler,n=e);const o=lo(this),l=au(r,i.bind(s),n);return o(),l}function rm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Wv=Symbol("_vte"),Qv=t=>t.__isTeleport,Yv=Symbol("_leaveCb");function lu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,lu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function im(t,e){return Te(t)?Nt({name:t.name},e,{setup:t}):t}function om(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const aa=new WeakMap;function Ci(t,e,n,s,r=!1){if(me(t)){t.forEach((k,D)=>Ci(k,e&&(me(e)?e[D]:e),n,s,r));return}if(Tr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ci(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Wa(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,f=l.refs===Be?l.refs={}:l.refs,p=l.setupState,m=Le(p),_=p===Be?Rp:k=>xe(m,k);if(h!=null&&h!==c){if(cf(e),it(h))f[h]=null,_(h)&&(p[h]=null);else if(kt(h)){h.value=null;const k=e;k.k&&(f[k.k]=null)}}if(Te(c))ao(c,l,12,[o,f]);else{const k=it(c),D=kt(c);if(k||D){const V=()=>{if(t.f){const U=k?_(c)?p[c]:f[c]:c.value;if(r)me(U)&&Yc(U,i);else if(me(U))U.includes(i)||U.push(i);else if(k)f[c]=[i],_(c)&&(p[c]=f[c]);else{const B=[i];c.value=B,t.k&&(f[t.k]=B)}}else k?(f[c]=o,_(c)&&(p[c]=o)):D&&(c.value=o,t.k&&(f[t.k]=o))};if(o){const U=()=>{V(),aa.delete(t)};U.id=-1,aa.set(t,U),Ht(U,n)}else cf(t),V()}}}function cf(t){const e=aa.get(t);e&&(e.flags|=8,aa.delete(t))}Ba().requestIdleCallback;Ba().cancelIdleCallback;const Tr=t=>!!t.type.__asyncLoader,am=t=>t.type.__isKeepAlive;function Xv(t,e){lm(t,"a",e)}function Jv(t,e){lm(t,"da",e)}function lm(t,e,n=Pt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ka(e,s,n),n){let r=n.parent;for(;r&&r.parent;)am(r.parent.vnode)&&Zv(s,e,n,r),r=r.parent}}function Zv(t,e,n,s){const r=Ka(e,t,s,!0);um(()=>{Yc(s[e],r)},n)}function Ka(t,e,n=Pt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Bn();const l=lo(n),c=Rn(e,n,t,o);return l(),$n(),c});return s?r.unshift(i):r.push(i),i}}const Yn=t=>(e,n=Pt)=>{(!Ki||t==="sp")&&Ka(t,(...s)=>e(...s),n)},eE=Yn("bm"),cm=Yn("m"),tE=Yn("bu"),nE=Yn("u"),sE=Yn("bum"),um=Yn("um"),rE=Yn("sp"),iE=Yn("rtg"),oE=Yn("rtc");function aE(t,e=Pt){Ka("ec",t,e)}const lE="components";function ji(t,e){return uE(lE,t,!0,e)||t}const cE=Symbol.for("v-ndc");function uE(t,e,n=!0,s=!1){const r=vt||Pt;if(r){const i=r.type;{const l=QE(i,!1);if(l&&(l===e||l===Xt(e)||l===Ua(Xt(e))))return i}const o=uf(r[t]||i[t],e)||uf(r.appContext[t],e);return!o&&s?i:o}}function uf(t,e){return t&&(t[e]||t[Xt(e)]||t[Ua(Xt(e))])}function os(t,e,n,s){let r;const i=n,o=me(t);if(o||it(t)){const l=o&&Hs(t);let c=!1,h=!1;l&&(c=!Yt(t),h=jn(t),t=ja(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(c?h?Pr(cn(t[f])):cn(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(qe(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];r[c]=e(t[f],f,c,i)}}else r=[];return r}function hf(t,e,n={},s,r){if(vt.ce||vt.parent&&Tr(vt.parent)&&vt.parent.ce){const h=Object.keys(n).length>0;return e!=="default"&&(n.name=e),z(),kr(et,null,[$e("slot",n,s)],h?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),z();const o=i&&hm(i(n)),l=n.key||o&&o.key,c=kr(et,{key:(l&&!ln(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function hm(t){return t.some(e=>Hi(e)?!(e.type===qn||e.type===et&&!hm(e.children)):!0)?t:null}const lc=t=>t?km(t)?Wa(t):lc(t.parent):null,Pi=Nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>lc(t.parent),$root:t=>lc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>dm(t),$forceUpdate:t=>t.f||(t.f=()=>{ou(t.update)}),$nextTick:t=>t.n||(t.n=Jp.bind(t.proxy)),$watch:t=>zv.bind(t)}),Ol=(t,e)=>t!==Be&&!t.__isScriptSetup&&xe(t,e),hE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Ol(s,e))return o[e]=1,s[e];if(r!==Be&&xe(r,e))return o[e]=2,r[e];if(xe(i,e))return o[e]=3,i[e];if(n!==Be&&xe(n,e))return o[e]=4,n[e];cc&&(o[e]=0)}}const h=Pi[e];let f,p;if(h)return e==="$attrs"&&bt(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==Be&&xe(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,xe(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Ol(r,e)?(r[e]=n,!0):s!==Be&&xe(s,e)?(s[e]=n,!0):xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Be&&l[0]!=="$"&&xe(t,l)||Ol(e,l)||xe(i,l)||xe(s,l)||xe(Pi,l)||xe(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ff(t){return me(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let cc=!0;function fE(t){const e=dm(t),n=t.proxy,s=t.ctx;cc=!1,e.beforeCreate&&df(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:_,updated:k,activated:D,deactivated:V,beforeDestroy:U,beforeUnmount:B,destroyed:Q,unmounted:G,render:de,renderTracked:Ee,renderTriggered:w,errorCaptured:y,serverPrefetch:I,expose:S,inheritAttrs:R,components:b,directives:E,filters:ie}=e;if(h&&dE(h,s,null),o)for(const Ve in o){const we=o[Ve];Te(we)&&(s[Ve]=we.bind(n))}if(r){const Ve=r.call(n,n);qe(Ve)&&(t.data=qa(Ve))}if(cc=!0,i)for(const Ve in i){const we=i[Ve],Tt=Te(we)?we.bind(n,n):Te(we.get)?we.get.bind(n,n):yn,zt=!Te(we)&&Te(we.set)?we.set.bind(n):yn,Vt=ge({get:Tt,set:zt});Object.defineProperty(s,Ve,{enumerable:!0,configurable:!0,get:()=>Vt.value,set:q=>Vt.value=q})}if(l)for(const Ve in l)fm(l[Ve],s,n,Ve);if(c){const Ve=Te(c)?c.call(n):c;Reflect.ownKeys(Ve).forEach(we=>{Ho(we,Ve[we])})}f&&df(f,t,"c");function Ne(Ve,we){me(we)?we.forEach(Tt=>Ve(Tt.bind(n))):we&&Ve(we.bind(n))}if(Ne(eE,p),Ne(cm,m),Ne(tE,_),Ne(nE,k),Ne(Xv,D),Ne(Jv,V),Ne(aE,y),Ne(oE,Ee),Ne(iE,w),Ne(sE,B),Ne(um,G),Ne(rE,I),me(S))if(S.length){const Ve=t.exposed||(t.exposed={});S.forEach(we=>{Object.defineProperty(Ve,we,{get:()=>n[we],set:Tt=>n[we]=Tt,enumerable:!0})})}else t.exposed||(t.exposed={});de&&t.render===yn&&(t.render=de),R!=null&&(t.inheritAttrs=R),b&&(t.components=b),E&&(t.directives=E),I&&om(t)}function dE(t,e,n=yn){me(t)&&(t=uc(t));for(const s in t){const r=t[s];let i;qe(r)?"default"in r?i=Mn(r.from||s,r.default,!0):i=Mn(r.from||s):i=Mn(r),kt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function df(t,e,n){Rn(me(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function fm(t,e,n,s){let r=s.includes(".")?rm(n,s):()=>n[s];if(it(t)){const i=e[t];Te(i)&&Ks(r,i)}else if(Te(t))Ks(r,t.bind(n));else if(qe(t))if(me(t))t.forEach(i=>fm(i,e,n,s));else{const i=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(i)&&Ks(r,i,t)}}function dm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>la(c,h,o,!0)),la(c,e,o)),qe(e)&&i.set(e,c),c}function la(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&la(t,i,n,!0),r&&r.forEach(o=>la(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=pE[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const pE={data:pf,props:mf,emits:mf,methods:Ei,computed:Ei,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Ei,directives:Ei,watch:gE,provide:pf,inject:mE};function pf(t,e){return e?t?function(){return Nt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function mE(t,e){return Ei(uc(t),uc(e))}function uc(t){if(me(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ei(t,e){return t?Nt(Object.create(null),t,e):e}function mf(t,e){return t?me(t)&&me(e)?[...new Set([...t,...e])]:Nt(Object.create(null),ff(t),ff(e??{})):e}function gE(t,e){if(!t)return e;if(!e)return t;const n=Nt(Object.create(null),t);for(const s in e)n[s]=Lt(t[s],e[s]);return n}function pm(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _E=0;function yE(t,e){return function(s,r=null){Te(s)||(s=Nt({},s)),r!=null&&!qe(r)&&(r=null);const i=pm(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:_E++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:XE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&Te(f.install)?(o.add(f),f.install(h,...p)):Te(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!c){const _=h._ceVNode||$e(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),c=!0,h._container=f,f.__vue_app__=h,Wa(_.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Rn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Ir;Ir=h;try{return f()}finally{Ir=p}}};return h}}let Ir=null;const vE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xt(e)}Modifiers`]||t[`${tr(e)}Modifiers`];function EE(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Be;let r=n;const i=e.startsWith("update:"),o=i&&vE(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>it(f)?f.trim():f)),o.number&&(r=n.map(Jc)));let l,c=s[l=Pl(e)]||s[l=Pl(Xt(e))];!c&&i&&(c=s[l=Pl(tr(e))]),c&&Rn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Rn(h,t,6,r)}}const TE=new WeakMap;function mm(t,e,n=!1){const s=n?TE:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Te(t)){const c=h=>{const f=mm(h,e,!0);f&&(l=!0,Nt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(qe(t)&&s.set(t,null),null):(me(i)?i.forEach(c=>o[c]=null):Nt(o,i),qe(t)&&s.set(t,o),o)}function Ga(t,e){return!t||!xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(t,e[0].toLowerCase()+e.slice(1))||xe(t,tr(e))||xe(t,e))}function gf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:m,setupState:_,ctx:k,inheritAttrs:D}=t,V=oa(t);let U,B;try{if(n.shapeFlag&4){const G=r||s,de=G;U=_n(h.call(de,G,f,p,_,m,k)),B=l}else{const G=e;U=_n(G.length>1?G(p,{attrs:l,slots:o,emit:c}):G(p,null)),B=e.props?l:IE(l)}}catch(G){ki.length=0,Ha(G,t,1),U=$e(qn)}let Q=U;if(B&&D!==!1){const G=Object.keys(B),{shapeFlag:de}=Q;G.length&&de&7&&(i&&G.some(Qc)&&(B=AE(B,i)),Q=Nr(Q,B,!1,!0))}return n.dirs&&(Q=Nr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&lu(Q,n.transition),U=Q,oa(V),U}const IE=t=>{let e;for(const n in t)(n==="class"||n==="style"||xa(n))&&((e||(e={}))[n]=t[n]);return e},AE=(t,e)=>{const n={};for(const s in t)(!Qc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function wE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?_f(s,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==s[m]&&!Ga(h,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?_f(s,o,h):!0:!!o;return!1}function _f(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Ga(n,i))return!0}return!1}function RE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const gm={},_m=()=>Object.create(gm),ym=t=>Object.getPrototypeOf(t)===gm;function SE(t,e,n,s=!1){const r={},i=_m();t.propsDefaults=Object.create(null),vm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Wp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function bE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Le(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Ga(t.emitsOptions,m))continue;const _=e[m];if(c)if(xe(i,m))_!==i[m]&&(i[m]=_,h=!0);else{const k=Xt(m);r[k]=hc(c,l,k,_,t,!1)}else _!==i[m]&&(i[m]=_,h=!0)}}}else{vm(t,e,r,i)&&(h=!0);let f;for(const p in l)(!e||!xe(e,p)&&((f=tr(p))===p||!xe(e,f)))&&(c?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=hc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!xe(e,p))&&(delete i[p],h=!0)}h&&Dn(t.attrs,"set","")}function vm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ri(c))continue;const h=e[c];let f;r&&xe(r,f=Xt(c))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:Ga(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=Le(n),h=l||Be;for(let f=0;f<i.length;f++){const p=i[f];n[p]=hc(r,c,p,h[p],t,!xe(h,p))}}return o}function hc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=xe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Te(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=lo(r);s=h[n]=c.call(null,e),f()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===tr(n))&&(s=!0))}return s}const CE=new WeakMap;function Em(t,e,n=!1){const s=n?CE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Te(t)){const f=p=>{c=!0;const[m,_]=Em(p,e,!0);Nt(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return qe(t)&&s.set(t,yr),yr;if(me(i))for(let f=0;f<i.length;f++){const p=Xt(i[f]);yf(p)&&(o[p]=Be)}else if(i)for(const f in i){const p=Xt(f);if(yf(p)){const m=i[f],_=o[p]=me(m)||Te(m)?{type:m}:Nt({},m),k=_.type;let D=!1,V=!0;if(me(k))for(let U=0;U<k.length;++U){const B=k[U],Q=Te(B)&&B.name;if(Q==="Boolean"){D=!0;break}else Q==="String"&&(V=!1)}else D=Te(k)&&k.name==="Boolean";_[0]=D,_[1]=V,(D||xe(_,"default"))&&l.push(p)}}const h=[o,l];return qe(t)&&s.set(t,h),h}function yf(t){return t[0]!=="$"&&!Ri(t)}const cu=t=>t==="_"||t==="_ctx"||t==="$stable",uu=t=>me(t)?t.map(_n):[_n(t)],PE=(t,e,n)=>{if(e._n)return e;const s=gn((...r)=>uu(e(...r)),n);return s._c=!1,s},Tm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(cu(r))continue;const i=t[r];if(Te(i))e[r]=PE(r,i,s);else if(i!=null){const o=uu(i);e[r]=()=>o}}},Im=(t,e)=>{const n=uu(e);t.slots.default=()=>n},Am=(t,e,n)=>{for(const s in e)(n||!cu(s))&&(t[s]=e[s])},kE=(t,e,n)=>{const s=t.slots=_m();if(t.vnode.shapeFlag&32){const r=e._;r?(Am(s,e,n),n&&Pp(s,"_",r,!0)):Tm(e,s)}else e&&Im(t,e)},NE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Be;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Am(r,e,n):(i=!e.$stable,Tm(e,r)),o=e}else e&&(Im(t,e),o={default:1});if(i)for(const l in r)!cu(l)&&o[l]==null&&delete r[l]},Ht=xE;function DE(t){return VE(t)}function VE(t,e){const n=Ba();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:_=yn,insertStaticContent:k}=t,D=(v,A,C,O=null,F=null,L=null,Z=void 0,K=null,H=!!A.dynamicChildren)=>{if(v===A)return;v&&!gi(v,A)&&(O=x(v),q(v,F,L,!0),v=null),A.patchFlag===-2&&(H=!1,A.dynamicChildren=null);const{type:$,ref:ue,shapeFlag:ne}=A;switch($){case za:V(v,A,C,O);break;case qn:U(v,A,C,O);break;case xl:v==null&&B(A,C,O,Z);break;case et:b(v,A,C,O,F,L,Z,K,H);break;default:ne&1?de(v,A,C,O,F,L,Z,K,H):ne&6?E(v,A,C,O,F,L,Z,K,H):(ne&64||ne&128)&&$.process(v,A,C,O,F,L,Z,K,H,ae)}ue!=null&&F?Ci(ue,v&&v.ref,L,A||v,!A):ue==null&&v&&v.ref!=null&&Ci(v.ref,null,L,v,!0)},V=(v,A,C,O)=>{if(v==null)s(A.el=l(A.children),C,O);else{const F=A.el=v.el;A.children!==v.children&&h(F,A.children)}},U=(v,A,C,O)=>{v==null?s(A.el=c(A.children||""),C,O):A.el=v.el},B=(v,A,C,O)=>{[v.el,v.anchor]=k(v.children,A,C,O,v.el,v.anchor)},Q=({el:v,anchor:A},C,O)=>{let F;for(;v&&v!==A;)F=m(v),s(v,C,O),v=F;s(A,C,O)},G=({el:v,anchor:A})=>{let C;for(;v&&v!==A;)C=m(v),r(v),v=C;r(A)},de=(v,A,C,O,F,L,Z,K,H)=>{if(A.type==="svg"?Z="svg":A.type==="math"&&(Z="mathml"),v==null)Ee(A,C,O,F,L,Z,K,H);else{const $=v.el&&v.el._isVueCE?v.el:null;try{$&&$._beginPatch(),I(v,A,F,L,Z,K,H)}finally{$&&$._endPatch()}}},Ee=(v,A,C,O,F,L,Z,K)=>{let H,$;const{props:ue,shapeFlag:ne,transition:le,dirs:fe}=v;if(H=v.el=o(v.type,L,ue&&ue.is,ue),ne&8?f(H,v.children):ne&16&&y(v.children,H,null,O,F,Ll(v,L),Z,K),fe&&Ls(v,null,O,"created"),w(H,v,v.scopeId,Z,O),ue){for(const Fe in ue)Fe!=="value"&&!Ri(Fe)&&i(H,Fe,null,ue[Fe],L,O);"value"in ue&&i(H,"value",null,ue.value,L),($=ue.onVnodeBeforeMount)&&dn($,O,v)}fe&&Ls(v,null,O,"beforeMount");const Re=OE(F,le);Re&&le.beforeEnter(H),s(H,A,C),(($=ue&&ue.onVnodeMounted)||Re||fe)&&Ht(()=>{$&&dn($,O,v),Re&&le.enter(H),fe&&Ls(v,null,O,"mounted")},F)},w=(v,A,C,O,F)=>{if(C&&_(v,C),O)for(let L=0;L<O.length;L++)_(v,O[L]);if(F){let L=F.subTree;if(A===L||bm(L.type)&&(L.ssContent===A||L.ssFallback===A)){const Z=F.vnode;w(v,Z,Z.scopeId,Z.slotScopeIds,F.parent)}}},y=(v,A,C,O,F,L,Z,K,H=0)=>{for(let $=H;$<v.length;$++){const ue=v[$]=K?cs(v[$]):_n(v[$]);D(null,ue,A,C,O,F,L,Z,K)}},I=(v,A,C,O,F,L,Z)=>{const K=A.el=v.el;let{patchFlag:H,dynamicChildren:$,dirs:ue}=A;H|=v.patchFlag&16;const ne=v.props||Be,le=A.props||Be;let fe;if(C&&xs(C,!1),(fe=le.onVnodeBeforeUpdate)&&dn(fe,C,A,v),ue&&Ls(A,v,C,"beforeUpdate"),C&&xs(C,!0),(ne.innerHTML&&le.innerHTML==null||ne.textContent&&le.textContent==null)&&f(K,""),$?S(v.dynamicChildren,$,K,C,O,Ll(A,F),L):Z||we(v,A,K,null,C,O,Ll(A,F),L,!1),H>0){if(H&16)R(K,ne,le,C,F);else if(H&2&&ne.class!==le.class&&i(K,"class",null,le.class,F),H&4&&i(K,"style",ne.style,le.style,F),H&8){const Re=A.dynamicProps;for(let Fe=0;Fe<Re.length;Fe++){const De=Re[Fe],At=ne[De],wt=le[De];(wt!==At||De==="value")&&i(K,De,At,wt,F,C)}}H&1&&v.children!==A.children&&f(K,A.children)}else!Z&&$==null&&R(K,ne,le,C,F);((fe=le.onVnodeUpdated)||ue)&&Ht(()=>{fe&&dn(fe,C,A,v),ue&&Ls(A,v,C,"updated")},O)},S=(v,A,C,O,F,L,Z)=>{for(let K=0;K<A.length;K++){const H=v[K],$=A[K],ue=H.el&&(H.type===et||!gi(H,$)||H.shapeFlag&198)?p(H.el):C;D(H,$,ue,null,O,F,L,Z,!0)}},R=(v,A,C,O,F)=>{if(A!==C){if(A!==Be)for(const L in A)!Ri(L)&&!(L in C)&&i(v,L,A[L],null,F,O);for(const L in C){if(Ri(L))continue;const Z=C[L],K=A[L];Z!==K&&L!=="value"&&i(v,L,K,Z,F,O)}"value"in C&&i(v,"value",A.value,C.value,F)}},b=(v,A,C,O,F,L,Z,K,H)=>{const $=A.el=v?v.el:l(""),ue=A.anchor=v?v.anchor:l("");let{patchFlag:ne,dynamicChildren:le,slotScopeIds:fe}=A;fe&&(K=K?K.concat(fe):fe),v==null?(s($,C,O),s(ue,C,O),y(A.children||[],C,ue,F,L,Z,K,H)):ne>0&&ne&64&&le&&v.dynamicChildren&&v.dynamicChildren.length===le.length?(S(v.dynamicChildren,le,C,F,L,Z,K),(A.key!=null||F&&A===F.subTree)&&wm(v,A,!0)):we(v,A,C,ue,F,L,Z,K,H)},E=(v,A,C,O,F,L,Z,K,H)=>{A.slotScopeIds=K,v==null?A.shapeFlag&512?F.ctx.activate(A,C,O,Z,H):ie(A,C,O,F,L,Z,H):te(v,A,H)},ie=(v,A,C,O,F,L,Z)=>{const K=v.component=qE(v,O,F);if(am(v)&&(K.ctx.renderer=ae),KE(K,!1,Z),K.asyncDep){if(F&&F.registerDep(K,Ne,Z),!v.el){const H=K.subTree=$e(qn);U(null,H,A,C),v.placeholder=H.el}}else Ne(K,v,A,C,F,L,Z)},te=(v,A,C)=>{const O=A.component=v.component;if(wE(v,A,C))if(O.asyncDep&&!O.asyncResolved){Ve(O,A,C);return}else O.next=A,O.update();else A.el=v.el,O.vnode=A},Ne=(v,A,C,O,F,L,Z)=>{const K=()=>{if(v.isMounted){let{next:ne,bu:le,u:fe,parent:Re,vnode:Fe}=v;{const jt=Rm(v);if(jt){ne&&(ne.el=Fe.el,Ve(v,ne,Z)),jt.asyncDep.then(()=>{v.isUnmounted||K()});return}}let De=ne,At;xs(v,!1),ne?(ne.el=Fe.el,Ve(v,ne,Z)):ne=Fe,le&&qo(le),(At=ne.props&&ne.props.onVnodeBeforeUpdate)&&dn(At,Re,ne,Fe),xs(v,!0);const wt=gf(v),$t=v.subTree;v.subTree=wt,D($t,wt,p($t.el),x($t),v,F,L),ne.el=wt.el,De===null&&RE(v,wt.el),fe&&Ht(fe,F),(At=ne.props&&ne.props.onVnodeUpdated)&&Ht(()=>dn(At,Re,ne,Fe),F)}else{let ne;const{el:le,props:fe}=A,{bm:Re,m:Fe,parent:De,root:At,type:wt}=v,$t=Tr(A);xs(v,!1),Re&&qo(Re),!$t&&(ne=fe&&fe.onVnodeBeforeMount)&&dn(ne,De,A),xs(v,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(wt);const jt=v.subTree=gf(v);D(null,jt,C,O,v,F,L),A.el=jt.el}if(Fe&&Ht(Fe,F),!$t&&(ne=fe&&fe.onVnodeMounted)){const jt=A;Ht(()=>dn(ne,De,jt),F)}(A.shapeFlag&256||De&&Tr(De.vnode)&&De.vnode.shapeFlag&256)&&v.a&&Ht(v.a,F),v.isMounted=!0,A=C=O=null}};v.scope.on();const H=v.effect=new Op(K);v.scope.off();const $=v.update=H.run.bind(H),ue=v.job=H.runIfDirty.bind(H);ue.i=v,ue.id=v.uid,H.scheduler=()=>ou(ue),xs(v,!0),$()},Ve=(v,A,C)=>{A.component=v;const O=v.vnode.props;v.vnode=A,v.next=null,bE(v,A.props,O,C),NE(v,A.children,C),Bn(),lf(v),$n()},we=(v,A,C,O,F,L,Z,K,H=!1)=>{const $=v&&v.children,ue=v?v.shapeFlag:0,ne=A.children,{patchFlag:le,shapeFlag:fe}=A;if(le>0){if(le&128){zt($,ne,C,O,F,L,Z,K,H);return}else if(le&256){Tt($,ne,C,O,F,L,Z,K,H);return}}fe&8?(ue&16&&It($,F,L),ne!==$&&f(C,ne)):ue&16?fe&16?zt($,ne,C,O,F,L,Z,K,H):It($,F,L,!0):(ue&8&&f(C,""),fe&16&&y(ne,C,O,F,L,Z,K,H))},Tt=(v,A,C,O,F,L,Z,K,H)=>{v=v||yr,A=A||yr;const $=v.length,ue=A.length,ne=Math.min($,ue);let le;for(le=0;le<ne;le++){const fe=A[le]=H?cs(A[le]):_n(A[le]);D(v[le],fe,C,null,F,L,Z,K,H)}$>ue?It(v,F,L,!0,!1,ne):y(A,C,O,F,L,Z,K,H,ne)},zt=(v,A,C,O,F,L,Z,K,H)=>{let $=0;const ue=A.length;let ne=v.length-1,le=ue-1;for(;$<=ne&&$<=le;){const fe=v[$],Re=A[$]=H?cs(A[$]):_n(A[$]);if(gi(fe,Re))D(fe,Re,C,null,F,L,Z,K,H);else break;$++}for(;$<=ne&&$<=le;){const fe=v[ne],Re=A[le]=H?cs(A[le]):_n(A[le]);if(gi(fe,Re))D(fe,Re,C,null,F,L,Z,K,H);else break;ne--,le--}if($>ne){if($<=le){const fe=le+1,Re=fe<ue?A[fe].el:O;for(;$<=le;)D(null,A[$]=H?cs(A[$]):_n(A[$]),C,Re,F,L,Z,K,H),$++}}else if($>le)for(;$<=ne;)q(v[$],F,L,!0),$++;else{const fe=$,Re=$,Fe=new Map;for($=Re;$<=le;$++){const gt=A[$]=H?cs(A[$]):_n(A[$]);gt.key!=null&&Fe.set(gt.key,$)}let De,At=0;const wt=le-Re+1;let $t=!1,jt=0;const en=new Array(wt);for($=0;$<wt;$++)en[$]=0;for($=fe;$<=ne;$++){const gt=v[$];if(At>=wt){q(gt,F,L,!0);continue}let ht;if(gt.key!=null)ht=Fe.get(gt.key);else for(De=Re;De<=le;De++)if(en[De-Re]===0&&gi(gt,A[De])){ht=De;break}ht===void 0?q(gt,F,L,!0):(en[ht-Re]=$+1,ht>=jt?jt=ht:$t=!0,D(gt,A[ht],C,null,F,L,Z,K,H),At++)}const ar=$t?LE(en):yr;for(De=ar.length-1,$=wt-1;$>=0;$--){const gt=Re+$,ht=A[gt],Zr=A[gt+1],ks=gt+1<ue?Zr.el||Sm(Zr):O;en[$]===0?D(null,ht,C,ks,F,L,Z,K,H):$t&&(De<0||$!==ar[De]?Vt(ht,C,ks,2):De--)}}},Vt=(v,A,C,O,F=null)=>{const{el:L,type:Z,transition:K,children:H,shapeFlag:$}=v;if($&6){Vt(v.component.subTree,A,C,O);return}if($&128){v.suspense.move(A,C,O);return}if($&64){Z.move(v,A,C,ae);return}if(Z===et){s(L,A,C);for(let ne=0;ne<H.length;ne++)Vt(H[ne],A,C,O);s(v.anchor,A,C);return}if(Z===xl){Q(v,A,C);return}if(O!==2&&$&1&&K)if(O===0)K.beforeEnter(L),s(L,A,C),Ht(()=>K.enter(L),F);else{const{leave:ne,delayLeave:le,afterLeave:fe}=K,Re=()=>{v.ctx.isUnmounted?r(L):s(L,A,C)},Fe=()=>{L._isLeaving&&L[Yv](!0),ne(L,()=>{Re(),fe&&fe()})};le?le(L,Re,Fe):Fe()}else s(L,A,C)},q=(v,A,C,O=!1,F=!1)=>{const{type:L,props:Z,ref:K,children:H,dynamicChildren:$,shapeFlag:ue,patchFlag:ne,dirs:le,cacheIndex:fe}=v;if(ne===-2&&(F=!1),K!=null&&(Bn(),Ci(K,null,C,v,!0),$n()),fe!=null&&(A.renderCache[fe]=void 0),ue&256){A.ctx.deactivate(v);return}const Re=ue&1&&le,Fe=!Tr(v);let De;if(Fe&&(De=Z&&Z.onVnodeBeforeUnmount)&&dn(De,A,v),ue&6)ut(v.component,C,O);else{if(ue&128){v.suspense.unmount(C,O);return}Re&&Ls(v,null,A,"beforeUnmount"),ue&64?v.type.remove(v,A,C,ae,O):$&&!$.hasOnce&&(L!==et||ne>0&&ne&64)?It($,A,C,!1,!0):(L===et&&ne&384||!F&&ue&16)&&It(H,A,C),O&&X(v)}(Fe&&(De=Z&&Z.onVnodeUnmounted)||Re)&&Ht(()=>{De&&dn(De,A,v),Re&&Ls(v,null,A,"unmounted")},C)},X=v=>{const{type:A,el:C,anchor:O,transition:F}=v;if(A===et){W(C,O);return}if(A===xl){G(v);return}const L=()=>{r(C),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(v.shapeFlag&1&&F&&!F.persisted){const{leave:Z,delayLeave:K}=F,H=()=>Z(C,L);K?K(v.el,L,H):H()}else L()},W=(v,A)=>{let C;for(;v!==A;)C=m(v),r(v),v=C;r(A)},ut=(v,A,C)=>{const{bum:O,scope:F,job:L,subTree:Z,um:K,m:H,a:$}=v;vf(H),vf($),O&&qo(O),F.stop(),L&&(L.flags|=8,q(Z,v,A,C)),K&&Ht(K,A),Ht(()=>{v.isUnmounted=!0},A)},It=(v,A,C,O=!1,F=!1,L=0)=>{for(let Z=L;Z<v.length;Z++)q(v[Z],A,C,O,F)},x=v=>{if(v.shapeFlag&6)return x(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const A=m(v.anchor||v.el),C=A&&A[Wv];return C?m(C):A};let se=!1;const ee=(v,A,C)=>{let O;v==null?A._vnode&&(q(A._vnode,null,null,!0),O=A._vnode.component):D(A._vnode||null,v,A,null,null,null,C),A._vnode=v,se||(se=!0,lf(O),em(),se=!1)},ae={p:D,um:q,m:Vt,r:X,mt:ie,mc:y,pc:we,pbc:S,n:x,o:t};return{render:ee,hydrate:void 0,createApp:yE(ee)}}function Ll({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function xs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function OE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function wm(t,e,n=!1){const s=t.children,r=e.children;if(me(s)&&me(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=cs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&wm(o,l)),l.type===za&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=i+(t.type===et?1:0)),l.type===qn&&!l.el&&(l.el=o.el)}}function LE(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Rm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Rm(e)}function vf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Sm(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Sm(e.subTree):null}const bm=t=>t.__isSuspense;function xE(t,e){e&&e.pendingBranch?me(t)?e.effects.push(...t):e.effects.push(t):Hv(t)}const et=Symbol.for("v-fgt"),za=Symbol.for("v-txt"),qn=Symbol.for("v-cmt"),xl=Symbol.for("v-stc"),ki=[];let Kt=null;function z(t=!1){ki.push(Kt=t?null:[])}function ME(){ki.pop(),Kt=ki[ki.length-1]||null}let qi=1;function ca(t,e=!1){qi+=t,t<0&&Kt&&e&&(Kt.hasOnce=!0)}function Cm(t){return t.dynamicChildren=qi>0?Kt||yr:null,ME(),qi>0&&Kt&&Kt.push(t),t}function Y(t,e,n,s,r,i){return Cm(T(t,e,n,s,r,i,!0))}function kr(t,e,n,s,r){return Cm($e(t,e,n,s,r,!0))}function Hi(t){return t?t.__v_isVNode===!0:!1}function gi(t,e){return t.type===e.type&&t.key===e.key}const Pm=({key:t})=>t??null,Ko=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?it(t)||kt(t)||Te(t)?{i:vt,r:t,k:e,f:!!n}:t:null);function T(t,e=null,n=null,s=0,r=null,i=t===et?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pm(e),ref:e&&Ko(e),scopeId:nm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vt};return l?(hu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),qi>0&&!o&&Kt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Kt.push(c),c}const $e=FE;function FE(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===cE)&&(t=qn),Hi(t)){const l=Nr(t,e,!0);return n&&hu(l,n),qi>0&&!i&&Kt&&(l.shapeFlag&6?Kt[Kt.indexOf(t)]=l:Kt.push(l)),l.patchFlag=-2,l}if(YE(t)&&(t=t.__vccOpts),e){e=UE(e);let{class:l,style:c}=e;l&&!it(l)&&(e.class=br(l)),qe(c)&&(iu(c)&&!me(c)&&(c=Nt({},c)),e.style=$a(c))}const o=it(t)?1:bm(t)?128:Qv(t)?64:qe(t)?4:Te(t)?2:0;return T(t,e,n,s,r,o,i,!0)}function UE(t){return t?iu(t)||ym(t)?Nt({},t):t:null}function Nr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?BE(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Pm(h),ref:e&&e.ref?n&&i?me(i)?i.concat(Ko(e)):[i,Ko(e)]:Ko(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Nr(t.ssContent),ssFallback:t.ssFallback&&Nr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&lu(f,c.clone(f)),f}function st(t=" ",e=0){return $e(za,null,t,e)}function dt(t="",e=!1){return e?(z(),kr(qn,null,t)):$e(qn,null,t)}function _n(t){return t==null||typeof t=="boolean"?$e(qn):me(t)?$e(et,null,t.slice()):Hi(t)?cs(t):$e(za,null,String(t))}function cs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Nr(t)}function hu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(me(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),hu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!ym(e)?e._ctx=vt:r===3&&vt&&(vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:vt},n=32):(e=String(e),s&64?(n=16,e=[st(e)]):n=8);t.children=e,t.shapeFlag|=n}function BE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=br([e.class,s.class]));else if(r==="style")e.style=$a([e.style,s.style]);else if(xa(r)){const i=e[r],o=s[r];o&&i!==o&&!(me(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function dn(t,e,n,s=null){Rn(t,e,7,[n,s])}const $E=pm();let jE=0;function qE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||$E,i={uid:jE++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Em(s,r),emitsOptions:mm(s,r),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:s.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=EE.bind(null,i),t.ce&&t.ce(i),i}let Pt=null;const HE=()=>Pt||vt;let ua,fc;{const t=Ba(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ua=e("__VUE_INSTANCE_SETTERS__",n=>Pt=n),fc=e("__VUE_SSR_SETTERS__",n=>Ki=n)}const lo=t=>{const e=Pt;return ua(t),t.scope.on(),()=>{t.scope.off(),ua(e)}},Ef=()=>{Pt&&Pt.scope.off(),ua(null)};function km(t){return t.vnode.shapeFlag&4}let Ki=!1;function KE(t,e=!1,n=!1){e&&fc(e);const{props:s,children:r}=t.vnode,i=km(t);SE(t,s,i,e),kE(t,r,n||e);const o=i?GE(t,e):void 0;return e&&fc(!1),o}function GE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hE);const{setup:s}=n;if(s){Bn();const r=t.setupContext=s.length>1?WE(t):null,i=lo(t),o=ao(s,t,0,[t.props,r]),l=Sp(o);if($n(),i(),(l||t.sp)&&!Tr(t)&&om(t),l){if(o.then(Ef,Ef),e)return o.then(c=>{Tf(t,c)}).catch(c=>{Ha(c,t,0)});t.asyncDep=o}else Tf(t,o)}else Nm(t)}function Tf(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=Yp(e)),Nm(t)}function Nm(t,e,n){const s=t.type;t.render||(t.render=s.render||yn);{const r=lo(t);Bn();try{fE(t)}finally{$n(),r()}}}const zE={get(t,e){return bt(t,"get",""),t[e]}};function WE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zE),slots:t.slots,emit:t.emit,expose:e}}function Wa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yp(Ov(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pi)return Pi[n](t)},has(e,n){return n in e||n in Pi}})):t.proxy}function QE(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function YE(t){return Te(t)&&"__vccOpts"in t}const ge=(t,e)=>Uv(t,e,Ki);function Dm(t,e,n){try{ca(-1);const s=arguments.length;return s===2?qe(e)&&!me(e)?Hi(e)?$e(t,null,[e]):$e(t,e):$e(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Hi(n)&&(n=[n]),$e(t,e,n))}finally{ca(1)}}const XE="3.5.26";let dc;const If=typeof window<"u"&&window.trustedTypes;if(If)try{dc=If.createPolicy("vue",{createHTML:t=>t})}catch{}const Vm=dc?t=>dc.createHTML(t):t=>t,JE="http://www.w3.org/2000/svg",ZE="http://www.w3.org/1998/Math/MathML",Nn=typeof document<"u"?document:null,Af=Nn&&Nn.createElement("template"),eT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Nn.createElementNS(JE,t):e==="mathml"?Nn.createElementNS(ZE,t):n?Nn.createElement(t,{is:n}):Nn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Nn.createTextNode(t),createComment:t=>Nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Af.innerHTML=Vm(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Af.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tT=Symbol("_vtc");function nT(t,e,n){const s=t[tT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const wf=Symbol("_vod"),sT=Symbol("_vsh"),rT=Symbol(""),iT=/(?:^|;)\s*display\s*:/;function oT(t,e,n){const s=t.style,r=it(n);let i=!1;if(n&&!r){if(e)if(it(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Go(s,l,"")}else for(const o in e)n[o]==null&&Go(s,o,"");for(const o in n)o==="display"&&(i=!0),Go(s,o,n[o])}else if(r){if(e!==n){const o=s[rT];o&&(n+=";"+o),s.cssText=n,i=iT.test(n)}}else e&&t.removeAttribute("style");wf in t&&(t[wf]=i?s.display:"",t[sT]&&(s.display="none"))}const Rf=/\s*!important$/;function Go(t,e,n){if(me(n))n.forEach(s=>Go(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=aT(t,e);Rf.test(n)?t.setProperty(tr(s),n.replace(Rf,""),"important"):t[s]=n}}const Sf=["Webkit","Moz","ms"],Ml={};function aT(t,e){const n=Ml[e];if(n)return n;let s=Xt(e);if(s!=="filter"&&s in t)return Ml[e]=s;s=Ua(s);for(let r=0;r<Sf.length;r++){const i=Sf[r]+s;if(i in t)return Ml[e]=i}return e}const bf="http://www.w3.org/1999/xlink";function Cf(t,e,n,s,r,i=fv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(bf,e.slice(6,e.length)):t.setAttributeNS(bf,e,n):n==null||i&&!kp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ln(n)?String(n):n)}function Pf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Vm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=kp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function hs(t,e,n,s){t.addEventListener(e,n,s)}function lT(t,e,n,s){t.removeEventListener(e,n,s)}const kf=Symbol("_vei");function cT(t,e,n,s,r=null){const i=t[kf]||(t[kf]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=uT(e);if(s){const h=i[e]=dT(s,r);hs(t,l,h,c)}else o&&(lT(t,l,o,c),i[e]=void 0)}}const Nf=/(?:Once|Passive|Capture)$/;function uT(t){let e;if(Nf.test(t)){e={};let s;for(;s=t.match(Nf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):tr(t.slice(2)),e]}let Fl=0;const hT=Promise.resolve(),fT=()=>Fl||(hT.then(()=>Fl=0),Fl=Date.now());function dT(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Rn(pT(s,n.value),e,5,[s])};return n.value=t,n.attached=fT(),n}function pT(t,e){if(me(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Df=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mT=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?nT(t,s,o):e==="style"?oT(t,n,s):xa(e)?Qc(e)||cT(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gT(t,e,s,o))?(Pf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!it(s))?Pf(t,Xt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Cf(t,e,s,o))};function gT(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Df(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Df(e)&&it(n)?!1:e in t}const Dr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return me(e)?n=>qo(e,n):e};function _T(t){t.target.composing=!0}function Vf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fn=Symbol("_assign");function Of(t,e,n){return e&&(t=t.trim()),n&&(t=Jc(t)),t}const yT={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Fn]=Dr(r);const i=s||r.props&&r.props.type==="number";hs(t,e?"change":"input",o=>{o.target.composing||t[Fn](Of(t.value,n,i))}),(n||i)&&hs(t,"change",()=>{t.value=Of(t.value,n,i)}),e||(hs(t,"compositionstart",_T),hs(t,"compositionend",Vf),hs(t,"change",Vf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Fn]=Dr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Jc(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},vT={deep:!0,created(t,e,n){t[Fn]=Dr(n),hs(t,"change",()=>{const s=t._modelValue,r=Om(t),i=t.checked,o=t[Fn];if(me(s)){const l=Np(s,r),c=l!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const h=[...s];h.splice(l,1),o(h)}}else if(Ma(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Lm(t,i))})},mounted:Lf,beforeUpdate(t,e,n){t[Fn]=Dr(n),Lf(t,e,n)}};function Lf(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(me(e))r=Np(e,s.props.value)>-1;else if(Ma(e))r=e.has(s.props.value);else{if(e===n)return;r=Cr(e,Lm(t,!0))}t.checked!==r&&(t.checked=r)}const Ul={created(t,{value:e},n){t.checked=Cr(e,n.props.value),t[Fn]=Dr(n),hs(t,"change",()=>{t[Fn](Om(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Fn]=Dr(s),e!==n&&(t.checked=Cr(e,s.props.value))}};function Om(t){return"_value"in t?t._value:t.value}function Lm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ET=["ctrl","shift","alt","meta"],TT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ET.some(n=>t[`${n}Key`]&&!e.includes(n))},IT=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=TT[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},AT=Nt({patchProp:mT},eT);let xf;function wT(){return xf||(xf=DE(AT))}const RT=((...t)=>{const e=wT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=bT(s);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,ST(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function ST(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bT(t){return it(t)?document.querySelector(t):t}const pc=Ae(null),xm=Ae(""),mc=Ae(!1);let Mf=null;const Lo=t=>String(t).padStart(2,"0"),CT=()=>{const t=new Date,e=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(e+540*60*1e3)},PT=t=>{if(!(t instanceof Date))return"...";const e=t.getFullYear(),n=Lo(t.getMonth()+1),s=Lo(t.getDate()),r=Lo(t.getHours()),i=Lo(t.getMinutes());return`${e}. ${n}. ${s}. ${r}:${i}`};function kT(){if(Mf)return;const t=()=>{pc.value=CT(),xm.value=PT(pc.value),mc.value||(mc.value=!0)};t(),Mf=setInterval(t,1e3)}function Mm(){return{kstDate:pc,kstString:xm,isKstTimeReady:mc}}const NT={__name:"App",setup(t){return cm(()=>{kT()}),(e,n)=>{const s=ji("router-view");return z(),kr(s)}}};const dr=typeof document<"u";function Fm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function DT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Fm(t.default)}const Oe=Object.assign;function Bl(t,e){const n={};for(const s in e){const r=e[s];n[s]=un(r)?r.map(t):t(r)}return n}const Ni=()=>{},un=Array.isArray;function Ff(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Um=/#/g,VT=/&/g,OT=/\//g,LT=/=/g,xT=/\?/g,Bm=/\+/g,MT=/%5B/g,FT=/%5D/g,$m=/%5E/g,UT=/%60/g,jm=/%7B/g,BT=/%7C/g,qm=/%7D/g,$T=/%20/g;function fu(t){return t==null?"":encodeURI(""+t).replace(BT,"|").replace(MT,"[").replace(FT,"]")}function jT(t){return fu(t).replace(jm,"{").replace(qm,"}").replace($m,"^")}function gc(t){return fu(t).replace(Bm,"%2B").replace($T,"+").replace(Um,"%23").replace(VT,"%26").replace(UT,"`").replace(jm,"{").replace(qm,"}").replace($m,"^")}function qT(t){return gc(t).replace(LT,"%3D")}function HT(t){return fu(t).replace(Um,"%23").replace(xT,"%3F")}function KT(t){return HT(t).replace(OT,"%2F")}function Gi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const GT=/\/$/,zT=t=>t.replace(GT,"");function $l(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=XT(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Gi(o)}}function WT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Uf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function QT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Vr(e.matched[s],n.matched[r])&&Hm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Vr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Hm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!YT(t[n],e[n]))return!1;return!0}function YT(t,e){return un(t)?Bf(t,e):un(e)?Bf(e,t):t?.valueOf()===e?.valueOf()}function Bf(t,e){return un(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function XT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const rs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let _c=(function(t){return t.pop="pop",t.push="push",t})({}),jl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function JT(t){if(!t)if(dr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),zT(t)}const ZT=/^[^#]+#/;function eI(t,e){return t.replace(ZT,"#")+e}function tI(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Qa=()=>({left:window.scrollX,top:window.scrollY});function nI(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=tI(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function $f(t,e){return(history.state?history.state.position-e:-1)+t}const yc=new Map;function sI(t,e){yc.set(t,e)}function rI(t){const e=yc.get(t);return yc.delete(t),e}function iI(t){return typeof t=="string"||t&&typeof t=="object"}function Km(t){return typeof t=="string"||typeof t=="symbol"}let Je=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Gm=Symbol("");Je.MATCHER_NOT_FOUND+"",Je.NAVIGATION_GUARD_REDIRECT+"",Je.NAVIGATION_ABORTED+"",Je.NAVIGATION_CANCELLED+"",Je.NAVIGATION_DUPLICATED+"";function Or(t,e){return Oe(new Error,{type:t,[Gm]:!0},e)}function kn(t,e){return t instanceof Error&&Gm in t&&(e==null||!!(t.type&e))}const oI=["params","query","hash"];function aI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of oI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function lI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Bm," "),i=r.indexOf("="),o=Gi(i<0?r:r.slice(0,i)),l=i<0?null:Gi(r.slice(i+1));if(o in e){let c=e[o];un(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function jf(t){let e="";for(let n in t){const s=t[n];if(n=qT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(s)?s.map(r=>r&&gc(r)):[s&&gc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function cI(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=un(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const uI=Symbol(""),qf=Symbol(""),du=Symbol(""),zm=Symbol(""),vc=Symbol("");function _i(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function us(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=m=>{m===!1?c(Or(Je.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):iI(m)?c(Or(Je.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(m=>c(m))})}function ql(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Fm(c)){const h=(c.__vccOpts||c)[e];h&&i.push(us(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=DT(f)?f.default:f;o.mods[l]=f,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&us(m,n,s,o,l,r)()}))}}return i}function hI(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Vr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Vr(h,c))||r.push(c))}return[n,s,r]}let fI=()=>location.protocol+"//"+location.host;function Wm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Uf(l,"")}return Uf(n,t)+s+r}function dI(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const _=Wm(t,location),k=n.value,D=e.value;let V=0;if(m){if(n.value=_,e.value=m,o&&o===k){o=null;return}V=D?m.position-D.position:0}else s(_);r.forEach(U=>{U(n.value,k,{delta:V,type:_c.pop,direction:V?V>0?jl.forward:jl.back:jl.unknown})})};function c(){o=n.value}function h(m){r.push(m);const _=()=>{const k=r.indexOf(m);k>-1&&r.splice(k,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Oe({},m.state,{scroll:Qa()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:p}}function Hf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Qa():null}}function pI(t){const{history:e,location:n}=window,s={value:Wm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:fI()+t+c;try{e[f?"replaceState":"pushState"](h,"",m),r.value=h}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(c,h){i(c,Oe({},e.state,Hf(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const f=Oe({},r.value,e.state,{forward:c,scroll:Qa()});i(f.current,f,!0),i(c,Oe({},Hf(s.value,c,null),{position:f.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function mI(t){t=JT(t);const e=pI(t),n=dI(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Oe({location:"",base:t,go:s,createHref:eI.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Us=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var at=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(at||{});const gI={type:Us.Static,value:""},_I=/[a-zA-Z0-9_]/;function yI(t){if(!t)return[[]];if(t==="/")return[[gI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${h}": ${_}`)}let n=at.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(n===at.Static?i.push({type:Us.Static,value:h}):n===at.Param||n===at.ParamRegExp||n===at.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Us.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==at.ParamRegExp){s=n,n=at.EscapeNext;continue}switch(n){case at.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=at.Param):m();break;case at.EscapeNext:m(),n=s;break;case at.Param:c==="("?n=at.ParamRegExp:_I.test(c)?m():(p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case at.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=at.ParamRegExpEnd:f+=c;break;case at.ParamRegExpEnd:p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:e("Unknown state");break}}return n===at.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Kf="[^/]+?",vI={sensitive:!1,strict:!1,start:!0,end:!0};var xt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(xt||{});const EI=/[.+*?^${}()[\]/\\]/g;function TI(t,e){const n=Oe({},vI,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[xt.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const m=h[p];let _=xt.Segment+(n.sensitive?xt.BonusCaseSensitive:0);if(m.type===Us.Static)p||(r+="/"),r+=m.value.replace(EI,"\\$&"),_+=xt.Static;else if(m.type===Us.Param){const{value:k,repeatable:D,optional:V,regexp:U}=m;i.push({name:k,repeatable:D,optional:V});const B=U||Kf;if(B!==Kf){_+=xt.BonusCustomRegExp;try{`${B}`}catch(G){throw new Error(`Invalid custom RegExp for param "${k}" (${B}): `+G.message)}}let Q=D?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(Q=V&&h.length<2?`(?:/${Q})`:"/"+Q),V&&(Q+="?"),r+=Q,_+=xt.Dynamic,V&&(_+=xt.BonusOptional),D&&(_+=xt.BonusRepeatable),B===".*"&&(_+=xt.BonusWildcard)}f.push(_)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=xt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",k=i[m-1];p[k.name]=_&&k.repeatable?_.split("/"):_}return p}function c(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of m)if(_.type===Us.Static)f+=_.value;else if(_.type===Us.Param){const{value:k,repeatable:D,optional:V}=_,U=k in h?h[k]:"";if(un(U)&&!D)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const B=un(U)?U.join("/"):U;if(!B)if(V)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${k}"`);f+=B}}return f||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function II(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===xt.Static+xt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===xt.Static+xt.Segment?1:-1:0}function Qm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=II(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Gf(s))return 1;if(Gf(r))return-1}return r.length-s.length}function Gf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AI={strict:!1,end:!0,sensitive:!1};function wI(t,e,n){const s=TI(yI(t.path),n),r=Oe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function RI(t,e){const n=[],s=new Map;e=Ff(AI,e);function r(p){return s.get(p)}function i(p,m,_){const k=!_,D=Wf(p);D.aliasOf=_&&_.record;const V=Ff(e,p),U=[D];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const de of G)U.push(Wf(Oe({},D,{components:_?_.record.components:D.components,path:de,aliasOf:_?_.record:D})))}let B,Q;for(const G of U){const{path:de}=G;if(m&&de[0]!=="/"){const Ee=m.record.path,w=Ee[Ee.length-1]==="/"?"":"/";G.path=m.record.path+(de&&w+de)}if(B=wI(G,m,V),_?_.alias.push(B):(Q=Q||B,Q!==B&&Q.alias.push(B),k&&p.name&&!Qf(B)&&o(p.name)),Ym(B)&&c(B),D.children){const Ee=D.children;for(let w=0;w<Ee.length;w++)i(Ee[w],B,_&&_.children[w])}_=_||B}return Q?()=>{o(Q)}:Ni}function o(p){if(Km(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=CI(p,n);n.splice(m,0,p),p.record.name&&!Qf(p)&&s.set(p.record.name,p)}function h(p,m){let _,k={},D,V;if("name"in p&&p.name){if(_=s.get(p.name),!_)throw Or(Je.MATCHER_NOT_FOUND,{location:p});V=_.record.name,k=Oe(zf(m.params,_.keys.filter(Q=>!Q.optional).concat(_.parent?_.parent.keys.filter(Q=>Q.optional):[]).map(Q=>Q.name)),p.params&&zf(p.params,_.keys.map(Q=>Q.name))),D=_.stringify(k)}else if(p.path!=null)D=p.path,_=n.find(Q=>Q.re.test(D)),_&&(k=_.parse(D),V=_.record.name);else{if(_=m.name?s.get(m.name):n.find(Q=>Q.re.test(m.path)),!_)throw Or(Je.MATCHER_NOT_FOUND,{location:p,currentLocation:m});V=_.record.name,k=Oe({},m.params,p.params),D=_.stringify(k)}const U=[];let B=_;for(;B;)U.unshift(B.record),B=B.parent;return{name:V,path:D,params:k,matched:U,meta:bI(U)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:l,getRecordMatcher:r}}function zf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Wf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:SI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function SI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Qf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function bI(t){return t.reduce((e,n)=>Oe(e,n.meta),{})}function CI(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Qm(t,e[i])<0?s=i:n=i+1}const r=PI(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function PI(t){let e=t;for(;e=e.parent;)if(Ym(e)&&Qm(t,e)===0)return e}function Ym({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Yf(t){const e=Mn(du),n=Mn(zm),s=ge(()=>{const c=tt(t.to);return e.resolve(c)}),r=ge(()=>{const{matched:c}=s.value,{length:h}=c,f=c[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Vr.bind(null,f));if(m>-1)return m;const _=Xf(c[h-2]);return h>1&&Xf(f)===_&&p[p.length-1].path!==_?p.findIndex(Vr.bind(null,c[h-2])):m}),i=ge(()=>r.value>-1&&OI(n.params,s.value.params)),o=ge(()=>r.value>-1&&r.value===n.matched.length-1&&Hm(n.params,s.value.params));function l(c={}){if(VI(c)){const h=e[tt(t.replace)?"replace":"push"](tt(t.to)).catch(Ni);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:ge(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function kI(t){return t.length===1?t[0]:t}const NI=im({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yf,setup(t,{slots:e}){const n=qa(Yf(t)),{options:s}=Mn(du),r=ge(()=>({[Jf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Jf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&kI(e.default(n));return t.custom?i:Dm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),DI=NI;function VI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function OI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!un(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function Xf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jf=(t,e,n)=>t??e??n,LI=im({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Mn(vc),r=ge(()=>t.route||s.value),i=Mn(qf,0),o=ge(()=>{let h=tt(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=ge(()=>r.value.matched[o.value]);Ho(qf,ge(()=>o.value+1)),Ho(uI,l),Ho(vc,r);const c=Ae();return Ks(()=>[c.value,l.value,t.name],([h,f,p],[m,_,k])=>{f&&(f.instances[p]=h,_&&_!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),h&&f&&(!_||!Vr(f,_)||!m)&&(f.enterCallbacks[p]||[]).forEach(D=>D(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=l.value,m=p&&p.components[f];if(!m)return Zf(n.default,{Component:m,route:h});const _=p.props[f],k=_?_===!0?h.params:typeof _=="function"?_(h):_:null,V=Dm(m,Oe({},k,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return Zf(n.default,{Component:V,route:h})||V}}});function Zf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const xI=LI;function MI(t){const e=RI(t.routes,t),n=t.parseQuery||lI,s=t.stringifyQuery||jf,r=t.history,i=_i(),o=_i(),l=_i(),c=Lv(rs);let h=rs;dr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Bl.bind(null,x=>""+x),p=Bl.bind(null,KT),m=Bl.bind(null,Gi);function _(x,se){let ee,ae;return Km(x)?(ee=e.getRecordMatcher(x),ae=se):ae=x,e.addRoute(ae,ee)}function k(x){const se=e.getRecordMatcher(x);se&&e.removeRoute(se)}function D(){return e.getRoutes().map(x=>x.record)}function V(x){return!!e.getRecordMatcher(x)}function U(x,se){if(se=Oe({},se||c.value),typeof x=="string"){const C=$l(n,x,se.path),O=e.resolve({path:C.path},se),F=r.createHref(C.fullPath);return Oe(C,O,{params:m(O.params),hash:Gi(C.hash),redirectedFrom:void 0,href:F})}let ee;if(x.path!=null)ee=Oe({},x,{path:$l(n,x.path,se.path).path});else{const C=Oe({},x.params);for(const O in C)C[O]==null&&delete C[O];ee=Oe({},x,{params:p(C)}),se.params=p(se.params)}const ae=e.resolve(ee,se),Se=x.hash||"";ae.params=f(m(ae.params));const v=WT(s,Oe({},x,{hash:jT(Se),path:ae.path})),A=r.createHref(v);return Oe({fullPath:v,hash:Se,query:s===jf?cI(x.query):x.query||{}},ae,{redirectedFrom:void 0,href:A})}function B(x){return typeof x=="string"?$l(n,x,c.value.path):Oe({},x)}function Q(x,se){if(h!==x)return Or(Je.NAVIGATION_CANCELLED,{from:se,to:x})}function G(x){return w(x)}function de(x){return G(Oe(B(x),{replace:!0}))}function Ee(x,se){const ee=x.matched[x.matched.length-1];if(ee&&ee.redirect){const{redirect:ae}=ee;let Se=typeof ae=="function"?ae(x,se):ae;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=B(Se):{path:Se},Se.params={}),Oe({query:x.query,hash:x.hash,params:Se.path!=null?{}:x.params},Se)}}function w(x,se){const ee=h=U(x),ae=c.value,Se=x.state,v=x.force,A=x.replace===!0,C=Ee(ee,ae);if(C)return w(Oe(B(C),{state:typeof C=="object"?Oe({},Se,C.state):Se,force:v,replace:A}),se||ee);const O=ee;O.redirectedFrom=se;let F;return!v&&QT(s,ae,ee)&&(F=Or(Je.NAVIGATION_DUPLICATED,{to:O,from:ae}),Vt(ae,ae,!0,!1)),(F?Promise.resolve(F):S(O,ae)).catch(L=>kn(L)?kn(L,Je.NAVIGATION_GUARD_REDIRECT)?L:zt(L):we(L,O,ae)).then(L=>{if(L){if(kn(L,Je.NAVIGATION_GUARD_REDIRECT))return w(Oe({replace:A},B(L.to),{state:typeof L.to=="object"?Oe({},Se,L.to.state):Se,force:v}),se||O)}else L=b(O,ae,!0,A,Se);return R(O,ae,L),L})}function y(x,se){const ee=Q(x,se);return ee?Promise.reject(ee):Promise.resolve()}function I(x){const se=W.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(x):x()}function S(x,se){let ee;const[ae,Se,v]=hI(x,se);ee=ql(ae.reverse(),"beforeRouteLeave",x,se);for(const C of ae)C.leaveGuards.forEach(O=>{ee.push(us(O,x,se))});const A=y.bind(null,x,se);return ee.push(A),It(ee).then(()=>{ee=[];for(const C of i.list())ee.push(us(C,x,se));return ee.push(A),It(ee)}).then(()=>{ee=ql(Se,"beforeRouteUpdate",x,se);for(const C of Se)C.updateGuards.forEach(O=>{ee.push(us(O,x,se))});return ee.push(A),It(ee)}).then(()=>{ee=[];for(const C of v)if(C.beforeEnter)if(un(C.beforeEnter))for(const O of C.beforeEnter)ee.push(us(O,x,se));else ee.push(us(C.beforeEnter,x,se));return ee.push(A),It(ee)}).then(()=>(x.matched.forEach(C=>C.enterCallbacks={}),ee=ql(v,"beforeRouteEnter",x,se,I),ee.push(A),It(ee))).then(()=>{ee=[];for(const C of o.list())ee.push(us(C,x,se));return ee.push(A),It(ee)}).catch(C=>kn(C,Je.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function R(x,se,ee){l.list().forEach(ae=>I(()=>ae(x,se,ee)))}function b(x,se,ee,ae,Se){const v=Q(x,se);if(v)return v;const A=se===rs,C=dr?history.state:{};ee&&(ae||A?r.replace(x.fullPath,Oe({scroll:A&&C&&C.scroll},Se)):r.push(x.fullPath,Se)),c.value=x,Vt(x,se,ee,A),zt()}let E;function ie(){E||(E=r.listen((x,se,ee)=>{if(!ut.listening)return;const ae=U(x),Se=Ee(ae,ut.currentRoute.value);if(Se){w(Oe(Se,{replace:!0,force:!0}),ae).catch(Ni);return}h=ae;const v=c.value;dr&&sI($f(v.fullPath,ee.delta),Qa()),S(ae,v).catch(A=>kn(A,Je.NAVIGATION_ABORTED|Je.NAVIGATION_CANCELLED)?A:kn(A,Je.NAVIGATION_GUARD_REDIRECT)?(w(Oe(B(A.to),{force:!0}),ae).then(C=>{kn(C,Je.NAVIGATION_ABORTED|Je.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===_c.pop&&r.go(-1,!1)}).catch(Ni),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),we(A,ae,v))).then(A=>{A=A||b(ae,v,!1),A&&(ee.delta&&!kn(A,Je.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===_c.pop&&kn(A,Je.NAVIGATION_ABORTED|Je.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),R(ae,v,A)}).catch(Ni)}))}let te=_i(),Ne=_i(),Ve;function we(x,se,ee){zt(x);const ae=Ne.list();return ae.length?ae.forEach(Se=>Se(x,se,ee)):console.error(x),Promise.reject(x)}function Tt(){return Ve&&c.value!==rs?Promise.resolve():new Promise((x,se)=>{te.add([x,se])})}function zt(x){return Ve||(Ve=!x,ie(),te.list().forEach(([se,ee])=>x?ee(x):se()),te.reset()),x}function Vt(x,se,ee,ae){const{scrollBehavior:Se}=t;if(!dr||!Se)return Promise.resolve();const v=!ee&&rI($f(x.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Jp().then(()=>Se(x,se,v)).then(A=>A&&nI(A)).catch(A=>we(A,x,se))}const q=x=>r.go(x);let X;const W=new Set,ut={currentRoute:c,listening:!0,addRoute:_,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:D,resolve:U,options:t,push:G,replace:de,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ne.add,isReady:Tt,install(x){x.component("RouterLink",DI),x.component("RouterView",xI),x.config.globalProperties.$router=ut,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>tt(c)}),dr&&!X&&c.value===rs&&(X=!0,G(r.location).catch(ae=>{}));const se={};for(const ae in rs)Object.defineProperty(se,ae,{get:()=>c.value[ae],enumerable:!0});x.provide(du,ut),x.provide(zm,Wp(se)),x.provide(vc,c);const ee=x.unmount;W.add(x),x.unmount=function(){W.delete(x),W.size<1&&(h=rs,E&&E(),E=null,c.value=rs,X=!1,Ve=!1),ee()}}};function It(x){return x.reduce((se,ee)=>se.then(()=>I(ee)),Promise.resolve())}return ut}const FI=()=>{};var ed={};const Xm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},UI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Jm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;c||(_=64,o||(m=64)),s.push(n[f],n[p],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new BI;const m=i<<2|l>>4;if(s.push(m),h!==64){const _=l<<4&240|h>>2;if(s.push(_),p!==64){const k=h<<6&192|p;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $I=function(t){const e=Xm(t);return Jm.encodeByteArray(e,!0)},ha=function(t){return $I(t).replace(/\./g,"")},Zm=function(t){try{return Jm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const qI=()=>jI().__FIREBASE_DEFAULTS__,HI=()=>{if(typeof process>"u"||typeof ed>"u")return;const t=ed.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Zm(t[1]);return e&&JSON.parse(e)},Ya=()=>{try{return FI()||qI()||HI()||KI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eg=t=>Ya()?.emulatorHosts?.[t],GI=t=>{const e=eg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tg=()=>Ya()?.config,ng=t=>Ya()?.[`_${t}`];class zI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sg(t){return(await fetch(t,{credentials:"include"})).ok}function WI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ha(JSON.stringify(n)),ha(JSON.stringify(o)),""].join(".")}const Di={};function QI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Di))Di[e]?t.emulator.push(e):t.prod.push(e);return t}function YI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let td=!1;function rg(t,e){if(typeof window>"u"||typeof document>"u"||!Hr(window.location.host)||Di[t]===e||Di[t]||td)return;Di[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=QI().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{td=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=YI(s),_=n("text"),k=document.getElementById(_)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),U=n("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const Q=m.element;l(Q),f(V,D);const G=h();c(B,U),Q.append(B,k,V,G),document.body.appendChild(Q)}i?(k.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function JI(){const t=Ya()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nA(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sA(){return!JI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rA(){try{return typeof indexedDB=="object"}catch{return!1}}function iA(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const oA="FirebaseError";class Xn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=oA,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,co.prototype.create)}}class co{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?aA(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Xn(r,l,s)}}function aA(t,e){return t.replace(lA,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const lA=/\{\$([^}]+)}/g;function cA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(nd(i)&&nd(o)){if(!Qs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function nd(t){return t!==null&&typeof t=="object"}function uo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function uA(t,e){const n=new hA(t,e);return n.subscribe.bind(n)}class hA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");fA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Hl),r.error===void 0&&(r.error=Hl),r.complete===void 0&&(r.complete=Hl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hl(){}function Jt(t){return t&&t._delegate?t._delegate:t}class Ys{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fs="[DEFAULT]";class dA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new zI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mA(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:pA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pA(t){return t===Fs?void 0:t}function mA(t){return t.instantiationMode==="EAGER"}class gA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const _A={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},yA=be.INFO,vA={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},EA=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=vA[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pu{constructor(e){this.name=e,this._logLevel=yA,this._logHandler=EA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_A[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const TA=(t,e)=>e.some(n=>t instanceof n);let sd,rd;function IA(){return sd||(sd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AA(){return rd||(rd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ig=new WeakMap,Ec=new WeakMap,og=new WeakMap,Kl=new WeakMap,mu=new WeakMap;function wA(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_s(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ig.set(n,t)}).catch(()=>{}),mu.set(e,t),e}function RA(t){if(Ec.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ec.set(t,e)}let Tc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ec.get(t);if(e==="objectStoreNames")return t.objectStoreNames||og.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SA(t){Tc=t(Tc)}function bA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Gl(this),e,...n);return og.set(s,e.sort?e.sort():[e]),_s(s)}:AA().includes(t)?function(...e){return t.apply(Gl(this),e),_s(ig.get(this))}:function(...e){return _s(t.apply(Gl(this),e))}}function CA(t){return typeof t=="function"?bA(t):(t instanceof IDBTransaction&&RA(t),TA(t,IA())?new Proxy(t,Tc):t)}function _s(t){if(t instanceof IDBRequest)return wA(t);if(Kl.has(t))return Kl.get(t);const e=CA(t);return e!==t&&(Kl.set(t,e),mu.set(e,t)),e}const Gl=t=>mu.get(t);function PA(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=_s(o);return s&&o.addEventListener("upgradeneeded",c=>{s(_s(o.result),c.oldVersion,c.newVersion,_s(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const kA=["get","getKey","getAll","getAllKeys","count"],NA=["put","add","delete","clear"],zl=new Map;function id(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zl.get(e))return zl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=NA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||kA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return zl.set(e,i),i}SA(t=>({...t,get:(e,n,s)=>id(e,n)||t.get(e,n,s),has:(e,n)=>!!id(e,n)||t.has(e,n)}));class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function VA(t){return t.getComponent()?.type==="VERSION"}const Ic="@firebase/app",od="0.14.6";const Hn=new pu("@firebase/app"),OA="@firebase/app-compat",LA="@firebase/analytics-compat",xA="@firebase/analytics",MA="@firebase/app-check-compat",FA="@firebase/app-check",UA="@firebase/auth",BA="@firebase/auth-compat",$A="@firebase/database",jA="@firebase/data-connect",qA="@firebase/database-compat",HA="@firebase/functions",KA="@firebase/functions-compat",GA="@firebase/installations",zA="@firebase/installations-compat",WA="@firebase/messaging",QA="@firebase/messaging-compat",YA="@firebase/performance",XA="@firebase/performance-compat",JA="@firebase/remote-config",ZA="@firebase/remote-config-compat",ew="@firebase/storage",tw="@firebase/storage-compat",nw="@firebase/firestore",sw="@firebase/ai",rw="@firebase/firestore-compat",iw="firebase",ow="12.6.0";const Ac="[DEFAULT]",aw={[Ic]:"fire-core",[OA]:"fire-core-compat",[xA]:"fire-analytics",[LA]:"fire-analytics-compat",[FA]:"fire-app-check",[MA]:"fire-app-check-compat",[UA]:"fire-auth",[BA]:"fire-auth-compat",[$A]:"fire-rtdb",[jA]:"fire-data-connect",[qA]:"fire-rtdb-compat",[HA]:"fire-fn",[KA]:"fire-fn-compat",[GA]:"fire-iid",[zA]:"fire-iid-compat",[WA]:"fire-fcm",[QA]:"fire-fcm-compat",[YA]:"fire-perf",[XA]:"fire-perf-compat",[JA]:"fire-rc",[ZA]:"fire-rc-compat",[ew]:"fire-gcs",[tw]:"fire-gcs-compat",[nw]:"fire-fst",[rw]:"fire-fst-compat",[sw]:"fire-vertex","fire-js":"fire-js",[iw]:"fire-js-all"};const fa=new Map,lw=new Map,wc=new Map;function ad(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lr(t){const e=t.name;if(wc.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;wc.set(e,t);for(const n of fa.values())ad(n,t);for(const n of lw.values())ad(n,t);return!0}function gu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}const cw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new co("app","Firebase",cw);class uw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}const Kr=ow;function ag(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Ac,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ys.create("bad-app-name",{appName:String(r)});if(n||(n=tg()),!n)throw ys.create("no-options");const i=fa.get(r);if(i){if(Qs(n,i.options)&&Qs(s,i.config))return i;throw ys.create("duplicate-app",{appName:r})}const o=new gA(r);for(const c of wc.values())o.addComponent(c);const l=new uw(n,s,o);return fa.set(r,l),l}function lg(t=Ac){const e=fa.get(t);if(!e&&t===Ac&&tg())return ag();if(!e)throw ys.create("no-app",{appName:t});return e}function vs(t,e,n){let s=aw[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}Lr(new Ys(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const hw="firebase-heartbeat-database",fw=1,zi="firebase-heartbeat-store";let Wl=null;function cg(){return Wl||(Wl=PA(hw,fw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Wl}async function dw(t){try{const n=(await cg()).transaction(zi),s=await n.objectStore(zi).get(ug(t));return await n.done,s}catch(e){if(e instanceof Xn)Hn.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}}async function ld(t,e){try{const s=(await cg()).transaction(zi,"readwrite");await s.objectStore(zi).put(e,ug(t)),await s.done}catch(n){if(n instanceof Xn)Hn.warn(n.message);else{const s=ys.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(s.message)}}}function ug(t){return`${t.name}!${t.options.appId}`}const pw=1024,mw=30;class gw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>mw){const r=vw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cd(),{heartbeatsToSend:n,unsentEntries:s}=_w(this._heartbeatsCache.heartbeats),r=ha(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Hn.warn(e),""}}}function cd(){return new Date().toISOString().substring(0,10)}function _w(t,e=pw){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ud(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ud(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rA()?iA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ld(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ld(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ud(t){return ha(JSON.stringify({version:2,heartbeats:t})).length}function vw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Ew(t){Lr(new Ys("platform-logger",e=>new DA(e),"PRIVATE")),Lr(new Ys("heartbeat",e=>new gw(e),"PRIVATE")),vs(Ic,od,t),vs(Ic,od,"esm2020"),vs("fire-js","")}Ew("");function hg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tw=hg,fg=new co("auth","Firebase",hg());const da=new pu("@firebase/auth");function Iw(t,...e){da.logLevel<=be.WARN&&da.warn(`Auth (${Kr}): ${t}`,...e)}function zo(t,...e){da.logLevel<=be.ERROR&&da.error(`Auth (${Kr}): ${t}`,...e)}function Sn(t,...e){throw yu(t,...e)}function an(t,...e){return yu(t,...e)}function _u(t,e,n){const s={...Tw(),[e]:n};return new co("auth","Firebase",s).create(e,{appName:t.name})}function Gs(t){return _u(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Aw(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Sn(t,"argument-error"),_u(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return fg.create(t,...e)}function _e(t,e,...n){if(!t)throw yu(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zo(e),new Error(e)}function Kn(t,e){t||Ln(e)}function Rc(){return typeof self<"u"&&self.location?.href||""}function ww(){return hd()==="http:"||hd()==="https:"}function hd(){return typeof self<"u"&&self.location?.protocol||null}function Rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ww()||eA()||"connection"in navigator)?navigator.onLine:!0}function Sw(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ho{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=XI()||tA()}get(){return Rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vu(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class dg{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Cw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pw=new ho(3e4,6e4);function Eu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Gr(t,e,n,s,r={}){return pg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=uo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return ZI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(h.credentials="include"),dg.fetch()(await mg(t,t.config.apiHost,n,l),h)})}async function pg(t,e,n){t._canInitEmulator=!1;const s={...bw,...e};try{const r=new Nw(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xo(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _u(t,f,h);Sn(t,f)}}catch(r){if(r instanceof Xn)throw r;Sn(t,"network-request-failed",{message:String(r)})}}async function kw(t,e,n,s,r={}){const i=await Gr(t,e,n,s,r);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?vu(t.config,r):`${t.config.apiScheme}://${r}`;return Cw.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Nw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(an(this.auth,"network-request-failed")),Pw.get())})}}function xo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=an(t,e,s);return r.customData._tokenResponse=n,r}async function Dw(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function pa(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}function Vi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vw(t,e=!1){const n=Jt(t),s=await n.getIdToken(e),r=Tu(s);_e(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Vi(Ql(r.auth_time)),issuedAtTime:Vi(Ql(r.iat)),expirationTime:Vi(Ql(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Ql(t){return Number(t)*1e3}function Tu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return zo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Zm(n);return r?JSON.parse(r):(zo("Failed to decode base64 JWT payload"),null)}catch(r){return zo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function fd(t){const e=Tu(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xn&&Ow(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Ow({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Lw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Sc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vi(this.lastLoginAt),this.creationTime=Vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ma(t){const e=t.auth,n=await t.getIdToken(),s=await Wi(t,pa(e,{idToken:n}));_e(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?gg(r.providerUserInfo):[],o=Mw(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Sc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function xw(t){const e=Jt(t);await ma(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mw(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function gg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Fw(t,e){const n=await pg(t,{},async()=>{const s=uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await mg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(c.credentials="include"),dg.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Uw(t,e){return Gr(t,"POST","/v2/accounts:revokeToken",Eu(t,e))}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=fd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Fw(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Ar;return s&&(_e(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(_e(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(_e(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return Ln("not implemented")}}function is(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Lw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Wi(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vw(this,e)}reload(){return xw(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ma(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Gs(this.auth));const e=await this.getIdToken();return await Wi(this,Dw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:k,stsTokenManager:D}=n;_e(p&&D,e,"internal-error");const V=Ar.fromJSON(this.name,D);_e(typeof p=="string",e,"internal-error"),is(s,e.name),is(r,e.name),_e(typeof m=="boolean",e,"internal-error"),_e(typeof _=="boolean",e,"internal-error"),is(i,e.name),is(o,e.name),is(l,e.name),is(c,e.name),is(h,e.name),is(f,e.name);const U=new sn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:f});return k&&Array.isArray(k)&&(U.providerData=k.map(B=>({...B}))),c&&(U._redirectEventId=c),U}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ar;r.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ma(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];_e(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?gg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Ar;l.updateFromIdToken(s);const c=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Sc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const dd=new Map;function xn(t){Kn(t instanceof Function,"Expected a class definition");let e=dd.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dd.set(t,e),e)}class _g{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_g.type="NONE";const pd=_g;function Wo(t,e,n){return`firebase:${t}:${e}:${n}`}class wr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Wo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pa(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new wr(xn(pd),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||xn(pd);const o=Wo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const m=await pa(e,{idToken:f}).catch(()=>{});if(!m)break;p=await sn._fromGetAccountInfoResponse(e,m,f)}else p=sn._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new wr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new wr(i,e,s))}}function md(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ag(e))return"Blackberry";if(wg(e))return"Webos";if(vg(e))return"Safari";if((e.includes("chrome/")||Eg(e))&&!e.includes("edge/"))return"Chrome";if(Ig(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function yg(t=Dt()){return/firefox\//i.test(t)}function vg(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eg(t=Dt()){return/crios\//i.test(t)}function Tg(t=Dt()){return/iemobile/i.test(t)}function Ig(t=Dt()){return/android/i.test(t)}function Ag(t=Dt()){return/blackberry/i.test(t)}function wg(t=Dt()){return/webos/i.test(t)}function Iu(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bw(t=Dt()){return Iu(t)&&!!window.navigator?.standalone}function $w(){return nA()&&document.documentMode===10}function Rg(t=Dt()){return Iu(t)||Ig(t)||wg(t)||Ag(t)||/windows phone/i.test(t)||Tg(t)}function Sg(t,e=[]){let n;switch(t){case"Browser":n=md(Dt());break;case"Worker":n=`${md(Dt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kr}/${s}`}class jw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function qw(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",Eu(t,e))}const Hw=6;class Kw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Hw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Gw{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gd(this),this.idTokenSubscription=new gd(this),this.beforeStateQueue=new jw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pa(this,{idToken:e}),s=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ma(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Gs(this));const n=e?Jt(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qw(this),n=new Kw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new co("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Uw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xn(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await wr.create(this,[xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Iw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xa(t){return Jt(t)}class gd{constructor(e){this.auth=e,this.observer=null,this.addObserver=uA(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Au={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zw(t){Au=t}function Ww(t){return Au.loadJS(t)}function Qw(){return Au.gapiScript}function Yw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Xw(t,e){const n=gu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Qs(i,e??{}))return r;Sn(r,"already-initialized")}return n.initialize({options:e})}function Jw(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function Zw(t,e,n){const s=Xa(t);_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=bg(e),{host:o,port:l}=eR(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){_e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_e(Qs(h,s.config.emulator)&&Qs(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Hr(o)?(sg(`${i}//${o}${c}`),rg("Auth",!0)):tR()}function bg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eR(t){const e=bg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:_d(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:_d(o)}}}function _d(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function Rr(t,e){return kw(t,"POST","/v1/accounts:signInWithIdp",Eu(t,e))}const nR="http://localhost";class Xs extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Xs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rr(e,n)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uo(n)}return e}}class wu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fo extends wu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fs extends fo{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";class On extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return On.credential(n,s)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";class ds extends fo{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";class ps extends fo{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ps.credential(n,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await sn._fromIdTokenResponse(e,s,r),o=yd(s);return new xr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=yd(s);return new xr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function yd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ga extends Xn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ga(e,n,s,r)}}function Pg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ga._fromErrorAndOperation(t,i,e,s):i})}async function sR(t,e,n=!1){const s=await Wi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xr._forOperation(t,"link",s)}async function rR(t,e,n=!1){const{auth:s}=t;if(tn(s.app))return Promise.reject(Gs(s));const r="reauthenticate";try{const i=await Wi(t,Pg(s,r,e,t),n);_e(i.idToken,s,"internal-error");const o=Tu(i.idToken);_e(o,s,"internal-error");const{sub:l}=o;return _e(t.uid===l,s,"user-mismatch"),xr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Sn(s,"user-mismatch"),i}}async function iR(t,e,n=!1){if(tn(t.app))return Promise.reject(Gs(t));const s="signIn",r=await Pg(t,s,e),i=await xr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function oR(t,e,n,s){return Jt(t).onIdTokenChanged(e,n,s)}function aR(t,e,n){return Jt(t).beforeAuthStateChanged(e,n)}function lR(t,e,n,s){return Jt(t).onAuthStateChanged(e,n,s)}function cR(t){return Jt(t).signOut()}const _a="__sak";class kg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uR=1e3,hR=10;class Ng extends kg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);$w()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hR):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ng.type="LOCAL";const fR=Ng;class Dg extends kg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Dg.type="SESSION";const Vg=Dg;function dR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ja{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ja(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await dR(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ja.receivers=[];function Ru(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class pR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Ru("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function vn(){return window}function mR(t){vn().location.href=t}function Og(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function gR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _R(){return navigator?.serviceWorker?.controller||null}function yR(){return Og()?self:null}const Lg="firebaseLocalStorageDb",vR=1,ya="firebaseLocalStorage",xg="fbase_key";class po{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Za(t,e){return t.transaction([ya],e?"readwrite":"readonly").objectStore(ya)}function ER(){const t=indexedDB.deleteDatabase(Lg);return new po(t).toPromise()}function bc(){const t=indexedDB.open(Lg,vR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ya,{keyPath:xg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ya)?e(s):(s.close(),await ER(),e(await bc()))})})}async function vd(t,e,n){const s=Za(t,!0).put({[xg]:e,value:n});return new po(s).toPromise()}async function TR(t,e){const n=Za(t,!1).get(e),s=await new po(n).toPromise();return s===void 0?null:s.value}function Ed(t,e){const n=Za(t,!0).delete(e);return new po(n).toPromise()}const IR=800,AR=3;class Mg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>AR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Og()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ja._getInstance(yR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gR(),!this.activeServiceWorker)return;this.sender=new pR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bc();return await vd(e,_a,"1"),await Ed(e,_a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>vd(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>TR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ed(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Za(r,!1).getAll();return new po(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mg.type="LOCAL";const wR=Mg;new ho(3e4,6e4);function Fg(t,e){return e?xn(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Su extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RR(t){return iR(t.auth,new Su(t),t.bypassAuthState)}function SR(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),rR(n,new Su(t),t.bypassAuthState)}async function bR(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),sR(n,new Su(t),t.bypassAuthState)}class Ug{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return bR;case"reauthViaPopup":case"reauthViaRedirect":return SR;default:Sn(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CR=new ho(2e3,1e4);async function PR(t,e,n){if(tn(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const s=Xa(t);Aw(t,e,wu);const r=Fg(s,n);return new Bs(s,"signInViaPopup",e,r).executeNotNull()}class Bs extends Ug{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=Ru();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CR.get())};e()}}Bs.currentPopupAction=null;const kR="pendingRedirect",Qo=new Map;class NR extends Ug{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Qo.get(this.auth._key());if(!e){try{const s=await DR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Qo.set(this.auth._key(),e)}return this.bypassAuthState||Qo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DR(t,e){const n=LR(e),s=OR(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function VR(t,e){Qo.set(t._key(),e)}function OR(t){return xn(t._redirectPersistence)}function LR(t){return Wo(kR,t.config.apiKey,t.name)}async function xR(t,e,n=!1){if(tn(t.app))return Promise.reject(Gs(t));const s=Xa(t),r=Fg(s,e),o=await new NR(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const MR=600*1e3;class FR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Bg(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(an(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Td(e))}saveEventToCache(e){this.cachedEventUids.add(Td(e)),this.lastProcessedEventTime=Date.now()}}function Td(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function UR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bg(t);default:return!1}}async function BR(t,e={}){return Gr(t,"GET","/v1/projects",e)}const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jR=/^https?/;async function qR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BR(t);for(const n of e)try{if(HR(n))return}catch{}Sn(t,"unauthorized-domain")}function HR(t){const e=Rc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!jR.test(n))return!1;if($R.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const KR=new ho(3e4,6e4);function Id(){const t=vn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GR(t){return new Promise((e,n)=>{function s(){Id(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Id(),n(an(t,"network-request-failed"))},timeout:KR.get()})}if(vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vn().gapi?.load)s();else{const r=Yw("iframefcb");return vn()[r]=()=>{gapi.load?s():n(an(t,"network-request-failed"))},Ww(`${Qw()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Yo=null,e})}let Yo=null;function zR(t){return Yo=Yo||GR(t),Yo}const WR=new ho(5e3,15e3),QR="__/auth/iframe",YR="emulator/auth/iframe",XR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZR(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vu(e,YR):`https://${t.config.authDomain}/${QR}`,s={apiKey:e.apiKey,appName:t.name,v:Kr},r=JR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${uo(s).slice(1)}`}async function eS(t){const e=await zR(t),n=vn().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:ZR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=vn().setTimeout(()=>{i(o)},WR.get());function c(){vn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const tS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nS=500,sS=600,rS="_blank",iS="http://localhost";class Ad{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oS(t,e,n,s=nS,r=sS){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...tS,width:s.toString(),height:r.toString(),top:i,left:o},h=Dt().toLowerCase();n&&(l=Eg(h)?rS:n),yg(h)&&(e=e||iS,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[_,k])=>`${m}${_}=${k},`,"");if(Bw(h)&&l!=="_self")return aS(e||"",l),new Ad(null);const p=window.open(e||"",l,f);_e(p,t,"popup-blocked");try{p.focus()}catch{}return new Ad(p)}function aS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const lS="__/auth/handler",cS="emulator/auth/handler",uS=encodeURIComponent("fac");async function wd(t,e,n,s,r,i){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Kr,eventId:r};if(e instanceof wu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof fo){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${uS}=${encodeURIComponent(c)}`:"";return`${hS(t)}?${uo(l).slice(1)}${h}`}function hS({config:t}){return t.emulator?vu(t,cS):`https://${t.authDomain}/${lS}`}const Yl="webStorageSupport";class fS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vg,this._completeRedirectFn=xR,this._overrideRedirectResult=VR}async _openPopup(e,n,s,r){Kn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await wd(e,n,s,Rc(),r);return oS(e,i,Ru())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await wd(e,n,s,Rc(),r);return mR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Kn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await eS(e),s=new FR(e);return n.register("authEvent",r=>(_e(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yl,{type:Yl},r=>{const i=r?.[0]?.[Yl];i!==void 0&&n(!!i),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rg()||vg()||Iu()}}const dS=fS;var Rd="@firebase/auth",Sd="1.12.0";class pS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gS(t){Lr(new Ys("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sg(t)},h=new Gw(s,r,i,c);return Jw(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Lr(new Ys("auth-internal",e=>{const n=Xa(e.getProvider("auth").getImmediate());return(s=>new pS(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vs(Rd,Sd,mS(t)),vs(Rd,Sd,"esm2020")}const _S=300,yS=ng("authIdTokenMaxAge")||_S;let bd=null;const vS=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>yS)return;const r=n?.token;bd!==r&&(bd=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ES(t=lg()){const e=gu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xw(t,{popupRedirectResolver:dS,persistence:[wR,fR,Vg]}),s=ng("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=vS(i.toString());aR(n,o,()=>o(n.currentUser)),oR(n,l=>o(l))}}const r=eg("auth");return r&&Zw(n,`http://${r}`),n}function TS(){return document.getElementsByTagName("head")?.[0]??document}zw({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=an("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",TS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gS("Browser");var IS="firebase",AS="12.7.0";vs(IS,AS,"app");var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Es,$g;(function(){var t;function e(w,y){function I(){}I.prototype=y.prototype,w.F=y.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(S,R,b){for(var E=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)E[ie-2]=arguments[ie];return y.prototype[R].apply(S,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,I){I||(I=0);const S=Array(16);if(typeof y=="string")for(var R=0;R<16;++R)S[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;R<16;++R)S[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=w.g[0],I=w.g[1],R=w.g[2];let b=w.g[3],E;E=y+(b^I&(R^b))+S[0]+3614090360&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[1]+3905402710&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[2]+606105819&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[3]+3250441966&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[5]+1200080426&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[6]+2821735955&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[7]+4249261313&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[9]+2336552879&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[10]+4294925233&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[11]+2304563134&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(b^I&(R^b))+S[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=b+(R^y&(I^R))+S[13]+4254626195&4294967295,b=y+(E<<12&4294967295|E>>>20),E=R+(I^b&(y^I))+S[14]+2792965006&4294967295,R=b+(E<<17&4294967295|E>>>15),E=I+(y^R&(b^y))+S[15]+1236535329&4294967295,I=R+(E<<22&4294967295|E>>>10),E=y+(R^b&(I^R))+S[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[6]+3225465664&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[11]+643717713&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[0]+3921069994&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[10]+38016083&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[15]+3634488961&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[4]+3889429448&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[14]+3275163606&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[3]+4107603335&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[8]+1163531501&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(R^b&(I^R))+S[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=b+(I^R&(y^I))+S[2]+4243563512&4294967295,b=y+(E<<9&4294967295|E>>>23),E=R+(y^I&(b^y))+S[7]+1735328473&4294967295,R=b+(E<<14&4294967295|E>>>18),E=I+(b^y&(R^b))+S[12]+2368359562&4294967295,I=R+(E<<20&4294967295|E>>>12),E=y+(I^R^b)+S[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[8]+2272392833&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[11]+1839030562&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[14]+4259657740&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[4]+1272893353&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[7]+4139469664&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[10]+3200236656&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[0]+3936430074&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[3]+3572445317&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[6]+76029189&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(I^R^b)+S[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=b+(y^I^R)+S[12]+3873151461&4294967295,b=y+(E<<11&4294967295|E>>>21),E=R+(b^y^I)+S[15]+530742520&4294967295,R=b+(E<<16&4294967295|E>>>16),E=I+(R^b^y)+S[2]+3299628645&4294967295,I=R+(E<<23&4294967295|E>>>9),E=y+(R^(I|~b))+S[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[7]+1126891415&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[14]+2878612391&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[5]+4237533241&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[3]+2399980690&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[10]+4293915773&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[1]+2240044497&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[15]+4264355552&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[6]+2734768916&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[13]+1309151649&4294967295,I=R+(E<<21&4294967295|E>>>11),E=y+(R^(I|~b))+S[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=b+(I^(y|~R))+S[11]+3174756917&4294967295,b=y+(E<<10&4294967295|E>>>22),E=R+(y^(b|~I))+S[2]+718787259&4294967295,R=b+(E<<15&4294967295|E>>>17),E=I+(b^(R|~y))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+b&4294967295}s.prototype.v=function(w,y){y===void 0&&(y=w.length);const I=y-this.blockSize,S=this.C;let R=this.h,b=0;for(;b<y;){if(R==0)for(;b<=I;)r(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<y;)if(S[R++]=w.charCodeAt(b++),R==this.blockSize){r(this,S),R=0;break}}else for(;b<y;)if(S[R++]=w[b++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=y},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;y=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=y&255,y/=256;for(this.v(w),w=Array(16),y=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)w[y++]=this.g[I]>>>S&255;return w};function i(w,y){var I=l;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=y(w)}function o(w,y){this.h=y;const I=[];let S=!0;for(let R=w.length-1;R>=0;R--){const b=w[R]|0;S&&b==y||(I[R]=b,S=!1)}this.g=I}var l={};function c(w){return-128<=w&&w<128?i(w,function(y){return new o([y|0],y<0?-1:0)}):new o([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return V(h(-w));const y=[];let I=1;for(let S=0;w>=I;S++)y[S]=w/I|0,I*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return V(f(w.substring(1),y));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(y,8));let S=p;for(let b=0;b<w.length;b+=8){var R=Math.min(8,w.length-b);const E=parseInt(w.substring(b,b+R),y);R<8?(R=h(Math.pow(y,R)),S=S.j(R).add(h(E))):(S=S.j(I),S=S.add(h(E)))}return S}var p=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-V(this).m();let w=0,y=1;for(let I=0;I<this.g.length;I++){const S=this.i(I);w+=(S>=0?S:4294967296+S)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(D(this))return"-"+V(this).toString(w);const y=h(Math.pow(w,6));var I=this;let S="";for(;;){const R=G(I,y).g;I=U(I,R.j(y));let b=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=R,k(I))return b+S;for(;b.length<6;)b="0"+b;S=b+S}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(let y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=U(this,w),D(w)?-1:k(w)?0:1};function V(w){const y=w.g.length,I=[];for(let S=0;S<y;S++)I[S]=~w.g[S];return new o(I,~w.h).add(m)}t.abs=function(){return D(this)?V(this):this},t.add=function(w){const y=Math.max(this.g.length,w.g.length),I=[];let S=0;for(let R=0;R<=y;R++){let b=S+(this.i(R)&65535)+(w.i(R)&65535),E=(b>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);S=E>>>16,b&=65535,E&=65535,I[R]=E<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function U(w,y){return w.add(V(y))}t.j=function(w){if(k(this)||k(w))return p;if(D(this))return D(w)?V(this).j(V(w)):V(V(this).j(w));if(D(w))return V(this.j(V(w)));if(this.l(_)<0&&w.l(_)<0)return h(this.m()*w.m());const y=this.g.length+w.g.length,I=[];for(var S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<w.g.length;R++){const b=this.i(S)>>>16,E=this.i(S)&65535,ie=w.i(R)>>>16,te=w.i(R)&65535;I[2*S+2*R]+=E*te,B(I,2*S+2*R),I[2*S+2*R+1]+=b*te,B(I,2*S+2*R+1),I[2*S+2*R+1]+=E*ie,B(I,2*S+2*R+1),I[2*S+2*R+2]+=b*ie,B(I,2*S+2*R+2)}for(w=0;w<y;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=y;w<2*y;w++)I[w]=0;return new o(I,0)};function B(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function Q(w,y){this.g=w,this.h=y}function G(w,y){if(k(y))throw Error("division by zero");if(k(w))return new Q(p,p);if(D(w))return y=G(V(w),y),new Q(V(y.g),V(y.h));if(D(y))return y=G(w,V(y)),new Q(V(y.g),y.h);if(w.g.length>30){if(D(w)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=y;S.l(w)<=0;)I=de(I),S=de(S);var R=Ee(I,1),b=Ee(S,1);for(S=Ee(S,2),I=Ee(I,2);!k(S);){var E=b.add(S);E.l(w)<=0&&(R=R.add(I),b=E),S=Ee(S,1),I=Ee(I,1)}return y=U(w,R.j(y)),new Q(R,y)}for(R=p;w.l(y)>=0;){for(I=Math.max(1,Math.floor(w.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),b=h(I),E=b.j(y);D(E)||E.l(w)>0;)I-=S,b=h(I),E=b.j(y);k(b)&&(b=m),R=R.add(b),w=U(w,E)}return new Q(R,w)}t.B=function(w){return G(this,w).h},t.and=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)&w.i(S);return new o(I,this.h&w.h)},t.or=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)|w.i(S);return new o(I,this.h|w.h)},t.xor=function(w){const y=Math.max(this.g.length,w.g.length),I=[];for(let S=0;S<y;S++)I[S]=this.i(S)^w.i(S);return new o(I,this.h^w.h)};function de(w){const y=w.g.length+1,I=[];for(let S=0;S<y;S++)I[S]=w.i(S)<<1|w.i(S-1)>>>31;return new o(I,w.h)}function Ee(w,y){const I=y>>5;y%=32;const S=w.g.length-I,R=[];for(let b=0;b<S;b++)R[b]=y>0?w.i(b+I)>>>y|w.i(b+I+1)<<32-y:w.i(b+I);return new o(R,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,$g=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Es=o}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jg,Ti,qg,Xo,Cc,Hg,Kg,Gg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mo=="object"&&Mo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in d))break e;d=d[P]}a=a[a.length-1],g=d[a],u=u(g),u!=g&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],g;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.push([g,u[g]]);return d}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,P,N){for(var J=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)J[Ie-2]=arguments[Ie];return u.prototype[P].apply(g,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const u=a.length;if(u>0){const d=Array(u);for(let g=0;g<u;g++)d[g]=a[g];return d}return[]}function k(a,u){for(let g=1;g<arguments.length;g++){const P=arguments[g];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const N=P.length||0;a.length=d+N;for(let J=0;J<N;J++)a[d+J]=P[J]}else a.push(P)}}class D{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function V(a){o.setTimeout(()=>{throw a},0)}function U(){var a=w;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class B{constructor(){this.h=this.g=null}add(u,d){const g=Q.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Q=new D(()=>new G,a=>a.reset());class G{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ee=!1,w=new B,y=()=>{const a=Promise.resolve(void 0);de=()=>{a.then(I)}};function I(){for(var a;a=U();){try{a.h.call(a.g)}catch(d){V(d)}var u=Q;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}Ee=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a})();function E(a){return/^[\s\xa0]*$/.test(a)}function ie(a,u){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ie,R),ie.prototype.init=function(a,u){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Ve(a,u,d,g,P){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=P,this.key=++Ne,this.da=this.fa=!1}function we(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Tt(a,u,d){for(const g in a)u.call(d,a[g],g,a)}function zt(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function Vt(a){const u={};for(const d in a)u[d]=a[d];return u}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,u){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)a[d]=g[d];for(let N=0;N<q.length;N++)d=q[N],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function W(a){this.src=a,this.g={},this.h=0}W.prototype.add=function(a,u,d,g,P){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const J=It(a,u,g,P);return J>-1?(u=a[J],d||(u.fa=!1)):(u=new Ve(u,this.src,N,!!g,P),u.fa=d,a.push(u)),u};function ut(a,u){const d=u.type;if(d in a.g){var g=a.g[d],P=Array.prototype.indexOf.call(g,u,void 0),N;(N=P>=0)&&Array.prototype.splice.call(g,P,1),N&&(we(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function It(a,u,d,g){for(let P=0;P<a.length;++P){const N=a[P];if(!N.da&&N.listener==u&&N.capture==!!d&&N.ha==g)return P}return-1}var x="closure_lm_"+(Math.random()*1e6|0),se={};function ee(a,u,d,g,P){if(Array.isArray(u)){for(let N=0;N<u.length;N++)ee(a,u[N],d,g,P);return null}return d=Z(d),a&&a[te]?a.J(u,d,l(g)?!!g.capture:!1,P):ae(a,u,d,!1,g,P)}function ae(a,u,d,g,P,N){if(!u)throw Error("Invalid event type");const J=l(P)?!!P.capture:!!P;let Ie=F(a);if(Ie||(a[x]=Ie=new W(a)),d=Ie.add(u,d,g,J,N),d.proxy)return d;if(g=Se(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)b||(P=J),P===void 0&&(P=!1),a.addEventListener(u.toString(),g,P);else if(a.attachEvent)a.attachEvent(C(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Se(){function a(d){return u.call(a.src,a.listener,d)}const u=O;return a}function v(a,u,d,g,P){if(Array.isArray(u))for(var N=0;N<u.length;N++)v(a,u[N],d,g,P);else g=l(g)?!!g.capture:!!g,d=Z(d),a&&a[te]?(a=a.i,N=String(u).toString(),N in a.g&&(u=a.g[N],d=It(u,d,g,P),d>-1&&(we(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[N],a.h--)))):a&&(a=F(a))&&(u=a.g[u.toString()],a=-1,u&&(a=It(u,d,g,P)),(d=a>-1?u[a]:null)&&A(d))}function A(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[te])ut(u.i,a);else{var d=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(d,g,a.capture):u.detachEvent?u.detachEvent(C(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=F(u))?(ut(d,a),d.h==0&&(d.src=null,u[x]=null)):we(a)}}}function C(a){return a in se?se[a]:se[a]="on"+a}function O(a,u){if(a.da)a=!0;else{u=new ie(u,this);const d=a.listener,g=a.ha||a.src;a.fa&&A(a),a=d.call(g,u)}return a}function F(a){return a=a[x],a instanceof W?a:null}var L="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(a){return typeof a=="function"?a:(a[L]||(a[L]=function(u){return a.handleEvent(u)}),a[L])}function K(){S.call(this),this.i=new W(this),this.M=this,this.G=null}p(K,S),K.prototype[te]=!0,K.prototype.removeEventListener=function(a,u,d,g){v(this,a,u,d,g)};function H(a,u){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new R(u,a);else if(u instanceof R)u.target=u.target||a;else{var P=u;u=new R(g,a),X(u,P)}P=!0;let N,J;if(d)for(J=d.length-1;J>=0;J--)N=u.g=d[J],P=$(N,g,!0,u)&&P;if(N=u.g=a,P=$(N,g,!0,u)&&P,P=$(N,g,!1,u)&&P,d)for(J=0;J<d.length;J++)N=u.g=d[J],P=$(N,g,!1,u)&&P}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let g=0;g<d.length;g++)we(d[g]);delete a.g[u],a.h--}}this.G=null},K.prototype.J=function(a,u,d,g){return this.i.add(String(a),u,!1,d,g)},K.prototype.K=function(a,u,d,g){return this.i.add(String(a),u,!0,d,g)};function $(a,u,d,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let N=0;N<u.length;++N){const J=u[N];if(J&&!J.da&&J.capture==d){const Ie=J.listener,ot=J.ha||J.src;J.fa&&ut(a.i,J),P=Ie.call(ot,g)!==!1&&P}}return P&&!g.defaultPrevented}function ue(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function ne(a){a.g=ue(()=>{a.g=null,a.i&&(a.i=!1,ne(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class le extends S{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(a){S.call(this),this.h=a,this.g={}}p(fe,S);var Re=[];function Fe(a){Tt(a.g,function(u,d){this.g.hasOwnProperty(d)&&A(u)},a),a.g={}}fe.prototype.N=function(){fe.Z.N.call(this),Fe(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=o.JSON.stringify,At=o.JSON.parse,wt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function $t(){}function jt(){}var en={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ar(){R.call(this,"d")}p(ar,R);function gt(){R.call(this,"c")}p(gt,R);var ht={},Zr=null;function ks(){return Zr=Zr||new K}ht.Ia="serverreachability";function mh(a){R.call(this,ht.Ia,a)}p(mh,R);function ei(a){const u=ks();H(u,new mh(u))}ht.STAT_EVENT="statevent";function gh(a,u){R.call(this,ht.STAT_EVENT,a),this.stat=u}p(gh,R);function Ot(a){const u=ks();H(u,new gh(u,a))}ht.Ja="timingevent";function _h(a,u){R.call(this,ht.Ja,a),this.size=u}p(_h,R);function ti(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Ly(a,u,d,g,P,N){a.info(function(){if(a.g)if(N){var J="",Ie=N.split("&");for(let Ue=0;Ue<Ie.length;Ue++){var ot=Ie[Ue].split("=");if(ot.length>1){const ft=ot[0];ot=ot[1];const fn=ft.split("_");J=fn.length>=2&&fn[1]=="type"?J+(ft+"="+ot+"&"):J+(ft+"=redacted&")}}}else J=null;else J=N;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+u+`
`+d+`
`+J})}function xy(a,u,d,g,P,N,J){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+u+`
`+d+`
`+N+" "+J})}function lr(a,u,d,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Fy(a,d)+(g?" "+g:"")})}function My(a,u){a.info(function(){return"TIMEOUT: "+u})}ni.prototype.info=function(){};function Fy(a,u){if(!a.g)return u;if(!u)return null;try{const N=JSON.parse(u);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let J=1;J<g.length;J++)g[J]=""}}}}return De(N)}catch{return u}}var Io={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vh;function ml(){}p(ml,$t),ml.prototype.g=function(){return new XMLHttpRequest},vh=new ml;function si(a){return encodeURIComponent(String(a))}function Uy(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Jn(a,u,d,g){this.j=a,this.i=u,this.l=d,this.S=g||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}var Th={},gl={};function _l(a,u,d){a.M=1,a.A=wo(hn(u)),a.u=d,a.R=!0,Ih(a,null)}function Ih(a,u){a.F=Date.now(),Ao(a),a.B=hn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Lh(d.i,"t",g),a.C=0,d=a.j.L,a.h=new Eh,a.g=Zh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new le(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(Re[0]=P.toString()),P=Re);for(let N=0;N<P.length;N++){const J=ee(d,P[N],g||u.handleEvent,!1,u.h||u);if(!J)break;u.g[J.key]=J}u=a.J?Vt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),ei(),Ly(a.i,a.v,a.B,a.l,a.S,a.u)}Jn.prototype.ba=function(a){a=a.target;const u=this.O;u&&ts(a)==3?u.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const Ie=ts(this.g),ot=this.g.ya(),Ue=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||jh(this.g)))){this.K||Ie!=4||ot==7||(ot==8||Ue<=0?ei(3):ei(2)),yl(this);var u=this.g.ca();this.X=u;var d=By(this);if(this.o=u==200,xy(this.i,this.v,this.B,this.l,this.S,Ie,u),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var N=g;break t}}N=null}if(a=N)lr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vl(this,a);else{this.o=!1,this.m=3,Ot(12),Ns(this),ri(this);break e}}if(this.R){a=!0;let ft;for(;!this.K&&this.C<d.length;)if(ft=$y(this,d),ft==gl){Ie==4&&(this.m=4,Ot(14),a=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Th){this.m=4,Ot(15),lr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else lr(this.i,this.l,ft,null),vl(this,ft);if(Ah(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||d.length!=0||this.h.h||(this.m=1,Ot(16),a=!1),this.o=this.o&&a,!a)lr(this.i,this.l,d,"[Invalid Chunked Response]"),Ns(this),ri(this);else if(d.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),bl(J),J.P=!0,Ot(11))}}else lr(this.i,this.l,d,null),vl(this,d);Ie==4&&Ns(this),this.o&&!this.K&&(Ie==4?Qh(this.j,this):(this.o=!1,Ao(this)))}else tv(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Ns(this),ri(this)}}}catch{}};function By(a){if(!Ah(a))return a.g.la();const u=jh(a.g);if(u==="")return"";let d="";const g=u.length,P=ts(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ns(a),ri(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<g;N++)a.h.h=!0,d+=a.h.i.decode(u[N],{stream:!(P&&N==g-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function Ah(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function $y(a,u){var d=a.C,g=u.indexOf(`
`,d);return g==-1?gl:(d=Number(u.substring(d,g)),isNaN(d)?Th:(g+=1,g+d>u.length?gl:(u=u.slice(g,g+d),a.C=g+d,u)))}Jn.prototype.cancel=function(){this.K=!0,Ns(this)};function Ao(a){a.T=Date.now()+a.H,wh(a,a.H)}function wh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ti(h(a.aa,a),u)}function yl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Jn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(My(this.i,this.B),this.M!=2&&(ei(),Ot(17)),Ns(this),this.m=2,ri(this)):wh(this,this.T-a)};function ri(a){a.j.I==0||a.K||Qh(a.j,a)}function Ns(a){yl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Fe(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function vl(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||El(d.h,a))){if(!a.L&&El(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Po(d),bo(d);else break e;Sl(d),Ot(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=ti(h(d.Va,d),6e3));bh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Vs(d,11)}else if((a.L||d.g==a)&&Po(d),!E(u))for(P=d.Ba.g.parse(u),u=0;u<P.length;u++){let Ue=P[u];const ft=Ue[0];if(!(ft<=d.K))if(d.K=ft,Ue=Ue[1],d.I==2)if(Ue[0]=="c"){d.M=Ue[1],d.ba=Ue[2];const fn=Ue[3];fn!=null&&(d.ka=fn,d.j.info("VER="+d.ka));const Os=Ue[4];Os!=null&&(d.za=Os,d.j.info("SVER="+d.za));const ns=Ue[5];ns!=null&&typeof ns=="number"&&ns>0&&(g=1.5*ns,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const ss=a.g;if(ss){const No=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var N=g.h;N.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Tl(N,N.h),N.h=null))}if(g.G){const Cl=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(g.wa=Cl,Ge(g.J,g.G,Cl))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var J=a;if(g.na=Jh(g,g.L?g.ba:null,g.W),J.L){Ch(g.h,J);var Ie=J,ot=g.O;ot&&(Ie.H=ot),Ie.D&&(yl(Ie),Ao(Ie)),g.g=J}else zh(g);d.i.length>0&&Co(d)}else Ue[0]!="stop"&&Ue[0]!="close"||Vs(d,7);else d.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Vs(d,7):Rl(d):Ue[0]!="noop"&&d.l&&d.l.qa(Ue),d.A=0)}}ei(4)}catch{}}var jy=class{constructor(a,u){this.g=a,this.map=u}};function Rh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bh(a){return a.h?1:a.g?a.g.size:0}function El(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Tl(a,u){a.g?a.g.add(u):a.h=u}function Ch(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Rh.prototype.cancel=function(){if(this.i=Ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ph(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return _(a.i)}var kh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qy(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let P,N=null;g>=0?(P=a[d].substring(0,g),N=a[d].substring(g+1)):P=a[d],u(P,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Zn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Zn?(this.l=a.l,ii(this,a.j),this.o=a.o,this.g=a.g,oi(this,a.u),this.h=a.h,Il(this,xh(a.i)),this.m=a.m):a&&(u=String(a).match(kh))?(this.l=!1,ii(this,u[1]||"",!0),this.o=ai(u[2]||""),this.g=ai(u[3]||"",!0),oi(this,u[4]),this.h=ai(u[5]||"",!0),Il(this,u[6]||"",!0),this.m=ai(u[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}Zn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(li(u,Nh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(li(u,Nh,!0),"@"),a.push(si(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(li(d,d.charAt(0)=="/"?Gy:Ky,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",li(d,Wy)),a.join("")},Zn.prototype.resolve=function(a){const u=hn(this);let d=!!a.j;d?ii(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var g=a.h;if(d)oi(u,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=u.h.lastIndexOf("/");P!=-1&&(g=u.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const N=[];for(let J=0;J<P.length;){const Ie=P[J++];Ie=="."?g&&J==P.length&&N.push(""):Ie==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&J==P.length&&N.push("")):(N.push(Ie),g=!0)}g=N.join("/")}else g=P}return d?u.h=g:d=a.i.toString()!=="",d?Il(u,xh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function hn(a){return new Zn(a)}function ii(a,u,d){a.j=d?ai(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function oi(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Il(a,u,d){u instanceof ci?(a.i=u,Qy(a.i,a.l)):(d||(u=li(u,zy)),a.i=new ci(u,a.l))}function Ge(a,u,d){a.i.set(u,d)}function wo(a){return Ge(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ai(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function li(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,Hy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Hy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Nh=/[#\/\?@]/g,Ky=/[#\?:]/g,Gy=/[#\?]/g,zy=/[#\?@]/g,Wy=/#/g;function ci(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Ds(a){a.g||(a.g=new Map,a.h=0,a.i&&qy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ci.prototype,t.add=function(a,u){Ds(this),this.i=null,a=cr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Dh(a,u){Ds(a),u=cr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Vh(a,u){return Ds(a),u=cr(a,u),a.g.has(u)}t.forEach=function(a,u){Ds(this),this.g.forEach(function(d,g){d.forEach(function(P){a.call(u,P,g,this)},this)},this)};function Oh(a,u){Ds(a);let d=[];if(typeof u=="string")Vh(a,u)&&(d=d.concat(a.g.get(cr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return Ds(this),this.i=null,a=cr(this,a),Vh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Oh(this,a),a.length>0?String(a[0]):u):u};function Lh(a,u,d){Dh(a,u),d.length>0&&(a.i=null,a.g.set(cr(a,u),_(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let g=0;g<u.length;g++){var d=u[g];const P=si(d);d=Oh(this,d);for(let N=0;N<d.length;N++){let J=P;d[N]!==""&&(J+="="+si(d[N])),a.push(J)}}return this.i=a.join("&")};function xh(a){const u=new ci;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function cr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Qy(a,u){u&&!a.j&&(Ds(a),a.i=null,a.g.forEach(function(d,g){const P=g.toLowerCase();g!=P&&(Dh(this,g),Lh(this,P,d))},a)),a.j=u}function Yy(a,u){const d=new ni;if(o.Image){const g=new Image;g.onload=f(es,d,"TestLoadImage: loaded",!0,u,g),g.onerror=f(es,d,"TestLoadImage: error",!1,u,g),g.onabort=f(es,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=f(es,d,"TestLoadImage: timeout",!1,u,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function Xy(a,u){const d=new ni,g=new AbortController,P=setTimeout(()=>{g.abort(),es(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(P),N.ok?es(d,"TestPingServer: ok",!0,u):es(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),es(d,"TestPingServer: error",!1,u)})}function es(a,u,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Jy(){this.g=new wt}function Al(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Al,$t),Al.prototype.g=function(){return new Ro(this.i,this.h)};function Ro(a,u){K.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ro,K),t=Ro.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,hi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ui(this):hi(this),this.readyState==3&&Mh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ui(this))},t.Na=function(a){this.g&&(this.response=a,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.B=null,hi(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function hi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Fh(a){let u="";return Tt(a,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function wl(a,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Fh(d),typeof a=="string"?d!=null&&si(d):Ge(a,u,d))}function Xe(a){K.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Xe,K);var Zy=/^https?$/i,ev=["POST","PUT"];t=Xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vh.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(N){Uh(this,N);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(ev,u,void 0)>=0)||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,J]of d)this.g.setRequestHeader(N,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){Uh(this,N)}};function Uh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Bh(a),So(a)}function Bh(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$h(this):this.Xa())},t.Xa=function(){$h(this)};function $h(a){if(a.h&&typeof i<"u"){if(a.v&&ts(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),ts(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=N===0){let J=String(a.D).match(kh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),g=!Zy.test(J?J.toLowerCase():"")}d=g}if(d)H(a,"complete"),H(a,"success");else{a.o=6;try{var P=ts(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Bh(a)}}finally{So(a)}}}}function So(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||H(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ts(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ts(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),At(u)}};function jh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function tv(a){const u={};a=(a.g&&ts(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var d=Uy(a[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=u[P]||[];u[P]=N,N.push(d)}zt(u,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function qh(a){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,a),this.Za=fi("retryDelaySeedMs",1e4,a),this.Ta=fi("forwardChannelMaxRetries",2,a),this.va=fi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Rh(a&&a.concurrentRequestLimit),this.Ba=new Jy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=qh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,g){Ot(0),this.W=a,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Jh(this,null,this.W),Co(this)};function Rl(a){if(Hh(a),a.I==3){var u=a.V++,d=hn(a.J);if(Ge(d,"SID",a.M),Ge(d,"RID",u),Ge(d,"TYPE","terminate"),di(a,d),u=new Jn(a,a.j,u),u.M=2,u.A=wo(hn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=Zh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Ao(u)}Xh(a)}function bo(a){a.g&&(bl(a),a.g.cancel(),a.g=null)}function Hh(a){bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Po(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Co(a){if(!Sh(a.h)&&!a.m){a.m=!0;var u=a.Ea;de||y(),Ee||(de(),Ee=!0),w.add(u,a),a.D=0}}function nv(a,u){return bh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ti(h(a.Ea,a,u),Yh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Jn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Vt(N),X(N,this.U)):N=this.U),this.u!==null||this.R||(P.J=N,N=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Gh(this,P,u),d=hn(this.J),Ge(d,"RID",a),Ge(d,"CVER",22),this.G&&Ge(d,"X-HTTP-Session-Id",this.G),di(this,d),N&&(this.R?u="headers="+si(Fh(N))+"&"+u:this.u&&wl(d,this.u,N)),Tl(this.h,P),this.Ra&&Ge(d,"TYPE","init"),this.S?(Ge(d,"$req",u),Ge(d,"SID","null"),P.U=!0,_l(P,d,null)):_l(P,d,u),this.I=2}}else this.I==3&&(a?Kh(this,a):this.i.length==0||Sh(this.h)||Kh(this))};function Kh(a,u){var d;u?d=u.l:d=a.V++;const g=hn(a.J);Ge(g,"SID",a.M),Ge(g,"RID",d),Ge(g,"AID",a.K),di(a,g),a.u&&a.o&&wl(g,a.u,a.o),d=new Jn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Gh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Tl(a.h,d),_l(d,g,u)}function di(a,u){a.H&&Tt(a.H,function(d,g){Ge(u,g,d)}),a.l&&Tt({},function(d,g){Ge(u,g,d)})}function Gh(a,u,d){d=Math.min(a.i.length,d);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ie=-1;for(;;){const ot=["count="+d];Ie==-1?d>0?(Ie=P[0].g,ot.push("ofs="+Ie)):Ie=0:ot.push("ofs="+Ie);let Ue=!0;for(let ft=0;ft<d;ft++){var N=P[ft].g;const fn=P[ft].map;if(N-=Ie,N<0)Ie=Math.max(0,P[ft].g-100),Ue=!1;else try{N="req"+N+"_"||"";try{var J=fn instanceof Map?fn:Object.entries(fn);for(const[Os,ns]of J){let ss=ns;l(ns)&&(ss=De(ns)),ot.push(N+Os+"="+encodeURIComponent(ss))}}catch(Os){throw ot.push(N+"type="+encodeURIComponent("_badmap")),Os}}catch{g&&g(fn)}}if(Ue){J=ot.join("&");break e}}J=void 0}return a=a.i.splice(0,d),u.G=a,J}function zh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;de||y(),Ee||(de(),Ee=!0),w.add(u,a),a.A=0}}function Sl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ti(h(a.Da,a),Yh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Wh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ti(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),bo(this),Wh(this))};function bl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Wh(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=hn(a.na);Ge(u,"RID","rpc"),Ge(u,"SID",a.M),Ge(u,"AID",a.K),Ge(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ge(u,"TO",a.ia),Ge(u,"TYPE","xmlhttp"),di(a,u),a.u&&a.o&&wl(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=wo(hn(u)),d.u=null,d.R=!0,Ih(d,a)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),Sl(this),Ot(19))};function Po(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Qh(a,u){var d=null;if(a.g==u){Po(a),bl(a),a.g=null;var g=2}else if(El(a.h,u))d=u.G,Ch(a.h,u),g=1;else return;if(a.I!=0){if(u.o)if(g==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var P=a.D;g=ks(),H(g,new _h(g,d)),Co(a)}else zh(a);else if(P=u.m,P==3||P==0&&u.X>0||!(g==1&&nv(a,u)||g==2&&Sl(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),P){case 1:Vs(a,5);break;case 4:Vs(a,10);break;case 3:Vs(a,6);break;default:Vs(a,2)}}}function Yh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function Vs(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),g=a.Ua;const P=!g;g=new Zn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ii(g,"https"),wo(g),P?Yy(g.toString(),d):Xy(g.toString(),d)}else Ot(2);a.I=0,a.l&&a.l.pa(u),Xh(a),Hh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Xh(a){if(a.I=0,a.ja=[],a.l){const u=Ph(a.h);(u.length!=0||a.i.length!=0)&&(k(a.ja,u),k(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Jh(a,u,d){var g=d instanceof Zn?hn(d):new Zn(d);if(g.g!="")u&&(g.g=u+"."+g.g),oi(g,g.u);else{var P=o.location;g=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const N=new Zn(null);g&&ii(N,g),u&&(N.g=u),P&&oi(N,P),d&&(N.h=d),g=N}return d=a.G,u=a.wa,d&&u&&Ge(g,d,u),Ge(g,"VER",a.ka),di(a,g),g}function Zh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Xe(new Al({ab:d})):new Xe(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ef(){}t=ef.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ko(){}ko.prototype.g=function(a,u){return new qt(a,u)};function qt(a,u){K.call(this),this.g=new qh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new ur(this)}p(qt,K),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Rl(this.g)},qt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=De(a),a=d);u.i.push(new jy(u.Ya++,a)),u.I==3&&Co(u)},qt.prototype.N=function(){this.g.l=null,delete this.j,Rl(this.g),delete this.g,qt.Z.N.call(this)};function tf(a){ar.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(tf,ar);function nf(){gt.call(this),this.status=1}p(nf,gt);function ur(a){this.g=a}p(ur,ef),ur.prototype.ra=function(){H(this.g,"a")},ur.prototype.qa=function(a){H(this.g,new tf(a))},ur.prototype.pa=function(a){H(this.g,new nf)},ur.prototype.oa=function(){H(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Gg=function(){return new ko},Kg=function(){return ks()},Hg=ht,Cc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,Xo=Io,yh.COMPLETE="complete",qg=yh,jt.EventType=en,en.OPEN="a",en.CLOSE="b",en.ERROR="c",en.MESSAGE="d",K.prototype.listen=K.prototype.J,Ti=jt,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,jg=Xe}).apply(typeof Mo<"u"?Mo:typeof self<"u"?self:typeof window<"u"?window:{});const Pd="@firebase/firestore",kd="4.9.3";class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");let zr="12.7.0";const Js=new pu("@firebase/firestore");function pr(){return Js.logLevel}function re(t,...e){if(Js.logLevel<=be.DEBUG){const n=e.map(bu);Js.debug(`Firestore (${zr}): ${t}`,...n)}}function Gn(t,...e){if(Js.logLevel<=be.ERROR){const n=e.map(bu);Js.error(`Firestore (${zr}): ${t}`,...n)}}function Mr(t,...e){if(Js.logLevel<=be.WARN){const n=e.map(bu);Js.warn(`Firestore (${zr}): ${t}`,...n)}}function bu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,zg(t,s,n)}function zg(t,e,n){let s=`FIRESTORE (${zr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Gn(s),new Error(s)}function Me(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||zg(e,r,s)}function ve(t,e){return t}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ts{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Wg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(St.UNAUTHENTICATED)))}shutdown(){}}class RS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class SS{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ts,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ts)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string",31837,{l:s}),new Wg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class bS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new bS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(St.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const s=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nd(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Cu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=kS(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Pc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Xl(r)===Xl(i)?Ce(r,i):Xl(r)?1:-1}return Ce(t.length,e.length)}const NS=55296,DS=57343;function Xl(t){const e=t.charCodeAt(0);return e>=NS&&e<=DS}function Fr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const Dd="__name__";class mn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return mn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=mn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=mn.isNumericId(e),r=mn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?mn.extractNumericId(e).compare(mn.extractNumericId(n)):Pc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class Qe extends mn{construct(e,n,s){return new Qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Qe(n)}static emptyPath(){return new Qe([])}}const VS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends mn{construct(e,n,s){return new yt(e,n,s)}static isValidIdentifier(e){return VS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dd}static keyField(){return new yt([Dd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new oe(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new oe(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(Qe.fromString(e))}static fromName(e){return new he(Qe.fromString(e).popFirst(5))}static empty(){return new he(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Qe(e.slice()))}}function OS(t,e,n){if(!n)throw new oe(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LS(t,e,n,s){if(e===!0&&s===!0)throw new oe(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vd(t){if(!he.isDocumentKey(t))throw new oe(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pu(t);throw new oe(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function mo(t,e){if(!Qg(t))throw new oe(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new oe(j.INVALID_ARGUMENT,n);return!0}const Od=-62135596800,Ld=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ld);return new We(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Od)throw new oe(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ld}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mo(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Od;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:rt("string",We._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new We(0,0))}static max(){return new ye(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qi=-1;function xS(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(s===1e9?new We(n+1,0):new We(n,s));return new As(r,he.empty(),e)}function MS(t){return new As(t.readTime,t.key,Qi)}class As{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new As(ye.min(),he.empty(),Qi)}static max(){return new As(ye.max(),he.empty(),Qi)}}function FS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}const US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wr(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==US)throw t;re("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,s)=>{n(e)}))}static reject(e){return new M(((n,s)=>{s(e)}))}static waitFor(e){return new M(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=M.resolve(!1);for(const s of e)n=n.next((r=>r?M.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new M(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next((f=>{o[h]=f,++l,l===i&&s(o)}),(f=>r(f)))}}))}static doWhile(e,n){return new M(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function $S(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qr(t){return t.name==="IndexedDbTransactionError"}class el{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}el.ce=-1;const ku=-1;function tl(t){return t==null}function va(t){return t===0&&1/t==-1/0}function jS(t){return typeof t=="number"&&Number.isInteger(t)&&!va(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Yg="";function qS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xd(e)),e=HS(t.get(n),e);return xd(e)}function HS(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Yg:n+="";break;default:n+=i}}return n}function xd(t){return t+Yg+""}function Md(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ye{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}}class Fo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??_t.RED,this.left=r??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new _t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return _t.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ct{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fd(this.data.getIterator())}getIteratorFrom(e){return new Fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Fd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new ct(yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Jg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Jg("Invalid base64 string: "+i):i}})(e);return new Et(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const KS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=KS.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}const Zg="server_timestamp",e_="__type__",t_="__previous_value__",n_="__local_write_time__";function Nu(t){return(t?.mapValue?.fields||{})[e_]?.stringValue===Zg}function nl(t){const e=t.mapValue.fields[t_];return Nu(e)?nl(e):e}function Yi(t){const e=ws(t.mapValue.fields[n_].timestampValue);return new We(e.seconds,e.nanos)}class GS{constructor(e,n,s,r,i,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const Ea="(default)";class Xi{constructor(e,n){this.projectId=e,this.database=n||Ea}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===Ea}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}const s_="__type__",zS="__max__",Uo={mapValue:{}},r_="__vector__",Ta="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nu(t)?4:QS(t)?9007199254740991:WS(t)?10:11:pe(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yi(t).isEqual(Yi(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ws(r.timestampValue),l=ws(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Rs(r.bytesValue).isEqual(Rs(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return Ze(r.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return Ze(r.integerValue)===Ze(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ze(r.doubleValue),l=Ze(i.doubleValue);return o===l?va(o)===va(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Md(o)!==Md(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bn(o[c],l[c])))return!1;return!0})(t,e);default:return pe(52216,{left:t})}}function Ji(t,e){return(t.values||[]).find((n=>bn(n,e)))!==void 0}function Br(t,e){if(t===e)return 0;const n=Ss(t),s=Ss(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=Ze(i.integerValue||i.doubleValue),c=Ze(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return Ud(t.timestampValue,e.timestampValue);case 4:return Ud(Yi(t),Yi(e));case 5:return Pc(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=Rs(i),c=Rs(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Ce(l[h],c[h]);if(f!==0)return f}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(Ze(i.latitude),Ze(o.latitude));return l!==0?l:Ce(Ze(i.longitude),Ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Bd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},h=l[Ta]?.arrayValue,f=c[Ta]?.arrayValue,p=Ce(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Bd(h,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Uo.mapValue&&o===Uo.mapValue)return 0;if(i===Uo.mapValue)return 1;if(o===Uo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=Pc(c[p],f[p]);if(m!==0)return m;const _=Br(l[c[p]],h[f[p]]);if(_!==0)return _}return Ce(c.length,f.length)})(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function Ud(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=ws(t),s=ws(e),r=Ce(n.seconds,s.seconds);return r!==0?r:Ce(n.nanos,s.nanos)}function Bd(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Br(n[r],s[r]);if(i)return i}return Ce(n.length,s.length)}function $r(t){return kc(t)}function kc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=ws(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Rs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return he.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=kc(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${kc(n.fields[o])}`;return r+"}"})(t.mapValue):pe(61005,{value:t})}function Jo(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nl(t);return e?16+Jo(e):16;case 5:return 2*t.stringValue.length;case 6:return Rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Jo(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return nr(s.fields,((i,o)=>{r+=i.length+Jo(o)})),r})(t.mapValue);default:throw pe(13486,{value:t})}}function Nc(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function $d(t){return!!t&&"nullValue"in t}function jd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zo(t){return!!t&&"mapValue"in t}function WS(t){return(t?.mapValue?.fields||{})[s_]?.stringValue===r_}function Oi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return nr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Oi(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oi(t.arrayValue.values[n]);return e}return{...t}}function QS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===zS}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Zo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oi(n)}setAll(e){let n=yt.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Oi(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Zo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Zo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){nr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Wt(Oi(this.value))}}function i_(t){const e=[];return nr(t.fields,((n,s)=>{const r=new yt([n]);if(Zo(s)){const i=i_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new rn(e)}class Ct{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ct(e,0,ye.min(),ye.min(),ye.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ct(e,1,n,ye.min(),s,r,0)}static newNoDocument(e,n){return new Ct(e,2,n,ye.min(),ye.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,ye.min(),ye.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,n){this.position=e,this.inclusive=n}}function qd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=Br(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Hd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}class Aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function YS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class o_{}class lt extends o_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new JS(e,n,s):n==="array-contains"?new tb(e,s):n==="in"?new nb(e,s):n==="not-in"?new sb(e,s):n==="array-contains-any"?new rb(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ZS(e,s):new eb(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Br(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(Br(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends o_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cn(e,n)}matches(e){return a_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function a_(t){return t.op==="and"}function l_(t){return XS(t)&&a_(t)}function XS(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Dc(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+$r(t.value);if(l_(t))return t.filters.map((e=>Dc(e))).join(",");{const e=t.filters.map((n=>Dc(n))).join(",");return`${t.op}(${e})`}}function c_(t,e){return t instanceof lt?(function(s,r){return r instanceof lt&&s.op===r.op&&s.field.isEqual(r.field)&&bn(s.value,r.value)})(t,e):t instanceof Cn?(function(s,r){return r instanceof Cn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&c_(o,r.filters[l])),!0):!1})(t,e):void pe(19439)}function u_(t){return t instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${$r(n.value)}`})(t):t instanceof Cn?(function(n){return n.op.toString()+" {"+n.getFilters().map(u_).join(" ,")+"}"})(t):"Filter"}class JS extends lt{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZS extends lt{constructor(e,n){super(e,"in",n),this.keys=h_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class eb extends lt{constructor(e,n){super(e,"not-in",n),this.keys=h_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function h_(t,e){return(e.arrayValue?.values||[]).map((n=>he.fromName(n.referenceValue)))}class tb extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Du(n)&&Ji(n.arrayValue,this.value)}}class nb extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ji(this.value.arrayValue,n)}}class sb extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ji(this.value.arrayValue,n)}}class rb extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ji(this.value.arrayValue,s)))}}class ib{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Kd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new ib(t,e,n,s,r,i,o)}function Vu(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Dc(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),tl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$r(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$r(s))).join(",")),e.Te=n}return e.Te}function Ou(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hd(t.startAt,e.startAt)&&Hd(t.endAt,e.endAt)}function Vc(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class sl{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ob(t,e,n,s,r,i,o,l){return new sl(t,e,n,s,r,i,o,l)}function Lu(t){return new sl(t)}function Gd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ab(t){return t.collectionGroup!==null}function Li(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(yt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Aa(i,s))})),n.has(yt.keyField().canonicalString())||e.Ie.push(new Aa(yt.keyField(),s))}return e.Ie}function En(t){const e=ve(t);return e.Ee||(e.Ee=lb(e,Li(t))),e.Ee}function lb(t,e){if(t.limitType==="F")return Kd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Aa(r.field,i)}));const n=t.endAt?new Ia(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ia(t.startAt.position,t.startAt.inclusive):null;return Kd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Oc(t,e,n){return new sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rl(t,e){return Ou(En(t),En(e))&&t.limitType===e.limitType}function f_(t){return`${Vu(En(t))}|lt:${t.limitType}`}function mr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>u_(r))).join(", ")}]`),tl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>$r(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>$r(r))).join(",")),`Target(${s})`})(En(t))}; limitType=${t.limitType})`}function il(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Li(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const h=qd(o,l,c);return o.inclusive?h<=0:h<0})(s.startAt,Li(s),r)||s.endAt&&!(function(o,l,c){const h=qd(o,l,c);return o.inclusive?h>=0:h>0})(s.endAt,Li(s),r))})(t,e)}function cb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d_(t){return(e,n)=>{let s=!1;for(const r of Li(t)){const i=ub(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function ub(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Br(c,h):pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:t.dir})}}class sr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return Xg(this.inner)}size(){return this.innerSize}}const hb=new Ye(he.comparator);function zn(){return hb}const p_=new Ye(he.comparator);function Ii(...t){let e=p_;for(const n of t)e=e.insert(n.key,n);return e}function m_(t){let e=p_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function $s(){return xi()}function g_(){return xi()}function xi(){return new sr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fb=new Ye(he.comparator),db=new ct(he.comparator);function Pe(...t){let e=db;for(const n of t)e=e.add(n);return e}const pb=new ct(Ce);function mb(){return pb}function xu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:va(e)?"-0":e}}function __(t){return{integerValue:""+t}}function gb(t,e){return jS(e)?__(e):xu(t,e)}class ol{constructor(){this._=void 0}}function _b(t,e,n){return t instanceof Zi?(function(r,i){const o={fields:{[e_]:{stringValue:Zg},[n_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Nu(i)&&(i=nl(i)),i&&(o.fields[t_]=i),{mapValue:o}})(n,e):t instanceof eo?v_(t,e):t instanceof to?E_(t,e):(function(r,i){const o=y_(r,i),l=zd(o)+zd(r.Ae);return Nc(o)&&Nc(r.Ae)?__(l):xu(r.serializer,l)})(t,e)}function yb(t,e,n){return t instanceof eo?v_(t,e):t instanceof to?E_(t,e):n}function y_(t,e){return t instanceof wa?(function(s){return Nc(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Zi extends ol{}class eo extends ol{constructor(e){super(),this.elements=e}}function v_(t,e){const n=T_(e);for(const s of t.elements)n.some((r=>bn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class to extends ol{constructor(e){super(),this.elements=e}}function E_(t,e){let n=T_(e);for(const s of t.elements)n=n.filter((r=>!bn(r,s)));return{arrayValue:{values:n}}}class wa extends ol{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zd(t){return Ze(t.integerValue||t.doubleValue)}function T_(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class vb{constructor(e,n){this.field=e,this.transform=n}}function Eb(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof eo&&r instanceof eo||s instanceof to&&r instanceof to?Fr(s.elements,r.elements,bn):s instanceof wa&&r instanceof wa?bn(s.Ae,r.Ae):s instanceof Zi&&r instanceof Zi})(t.transform,e.transform)}class Tb{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ea(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class al{}function I_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mu(t.key,Tn.none()):new go(t.key,t.data,Tn.none());{const n=t.data,s=Wt.empty();let r=new ct(yt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new rr(t.key,s,new rn(r.toArray()),Tn.none())}}function Ib(t,e,n){t instanceof go?(function(r,i,o){const l=r.value.clone(),c=Qd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof rr?(function(r,i,o){if(!ea(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Qd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(A_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Mi(t,e,n,s){return t instanceof go?(function(i,o,l,c){if(!ea(i.precondition,o))return l;const h=i.value.clone(),f=Yd(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof rr?(function(i,o,l,c){if(!ea(i.precondition,o))return l;const h=Yd(i.fieldTransforms,c,o),f=o.data;return f.setAll(A_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,l){return ea(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function Ab(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=y_(s.transform,r||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,i))}return n||null}function Wd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Fr(s,r,((i,o)=>Eb(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class go extends al{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rr extends al{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function A_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Qd(t,e,n){const s=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,yb(o,l,n[r]))}return s}function Yd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,_b(i,o,e))}return s}class Mu extends al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wb extends al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Ib(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Mi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Mi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=g_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=I_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,((n,s)=>Wd(n,s)))&&Fr(this.baseMutations,e.baseMutations,((n,s)=>Wd(n,s)))}}class Fu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Me(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return fb})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Fu(e,n,s,r)}}class Sb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bb{constructor(e,n){this.count=e,this.unchangedNames=n}}var nt,ke;function Cb(t){switch(t){case j.OK:return pe(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function w_(t){if(t===void 0)return Gn("GRPC error has no .code"),j.UNKNOWN;switch(t){case nt.OK:return j.OK;case nt.CANCELLED:return j.CANCELLED;case nt.UNKNOWN:return j.UNKNOWN;case nt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case nt.INTERNAL:return j.INTERNAL;case nt.UNAVAILABLE:return j.UNAVAILABLE;case nt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case nt.NOT_FOUND:return j.NOT_FOUND;case nt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case nt.ABORTED:return j.ABORTED;case nt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case nt.DATA_LOSS:return j.DATA_LOSS;default:return pe(39323,{code:t})}}(ke=nt||(nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function Pb(){return new TextEncoder}const kb=new Es([4294967295,4294967295],0);function Xd(t){const e=Pb().encode(t),n=new $g;return n.update(e),new Uint8Array(n.digest())}function Jd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Es([n,s],0),new Es([r,i],0)]}class Uu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ai(`Invalid padding: ${n}`);if(s<0)throw new Ai(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ai(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ai(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Es.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Es.fromNumber(s)));return r.compare(kb)===1&&(r=new Es([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xd(e),[s,r]=Jd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uu(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=Xd(e),[s,r]=Jd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ai extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ll{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ll(ye.min(),r,new Ye(Ce),zn(),Pe())}}class _o{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _o(s,n,Pe(),Pe(),Pe())}}class ta{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class R_{constructor(e,n){this.targetId=e,this.Ce=n}}class S_{constructor(e,n,s=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Zd{constructor(){this.ve=0,this.Fe=ep(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pe(38017,{changeType:i})}})),new _o(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=ep()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nb{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=Bo(),this.He=Bo(),this.Ye=new Ye(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Vc(i))if(s===0){const o=new he(i.path);this.et(n,o,Ct.newNoDocument(o,ye.min()))}else Me(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Rs(s).toUint8Array()}catch(c){if(c instanceof Jg)return Mr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Uu(o,r,i)}catch(c){return Mr(c instanceof Ai?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Vc(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ct.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Pe();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new ll(e,n,this.Ye,this.je,s);return this.je=zn(),this.Je=Bo(),this.He=Bo(),this.Ye=new Ye(Ce),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ct(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ct(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bo(){return new Ye(he.comparator)}function ep(){return new Ye(he.comparator)}const Db={asc:"ASCENDING",desc:"DESCENDING"},Vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ob={and:"AND",or:"OR"};class Lb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lc(t,e){return t.useProto3Json||tl(e)?e:{value:e}}function Ra(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xb(t,e){return Ra(t,e.toTimestamp())}function In(t){return Me(!!t,49232),ye.fromTimestamp((function(n){const s=ws(n);return new We(s.seconds,s.nanos)})(t))}function Bu(t,e){return xc(t,e).canonicalString()}function xc(t,e){const n=(function(r){return new Qe(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function C_(t){const e=Qe.fromString(t);return Me(V_(e),10190,{key:e.toString()}),e}function Mc(t,e){return Bu(t.databaseId,e.path)}function Jl(t,e){const n=C_(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(k_(n))}function P_(t,e){return Bu(t.databaseId,e)}function Mb(t){const e=C_(t);return e.length===4?Qe.emptyPath():k_(e)}function Fc(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function k_(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tp(t,e,n){return{name:Mc(t,e),fields:n.value.mapValue.fields}}function Fb(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Me(f===void 0||typeof f=="string",58123),Et.fromBase64String(f||"")):(Me(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Et.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(h){const f=h.code===void 0?j.UNKNOWN:w_(h.code);return new oe(f,h.message||"")})(o);n=new S_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Jl(t,s.document.name),i=In(s.document.updateTime),o=s.document.createTime?In(s.document.createTime):ye.min(),l=new Wt({mapValue:{fields:s.document.fields}}),c=Ct.newFoundDocument(r,i,o,l),h=s.targetIds||[],f=s.removedTargetIds||[];n=new ta(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Jl(t,s.document),i=s.readTime?In(s.readTime):ye.min(),o=Ct.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ta([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Jl(t,s.document),i=s.removedTargetIds||[];n=new ta([],i,r,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new bb(r,i),l=s.targetId;n=new R_(l,o)}}return n}function Ub(t,e){let n;if(e instanceof go)n={update:tp(t,e.key,e.value)};else if(e instanceof Mu)n={delete:Mc(t,e.key)};else if(e instanceof rr)n={update:tp(t,e.key,e.data),updateMask:Wb(e.fieldMask)};else{if(!(e instanceof wb))return pe(16599,{Vt:e.type});n={verify:Mc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof Zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof eo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof to)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wa)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw pe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:xb(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe(27497)})(t,e.precondition)),n}function Bb(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?In(r.updateTime):In(i);return o.isEqual(ye.min())&&(o=In(i)),new Tb(o,r.transformResults||[])})(n,e)))):[]}function $b(t,e){return{documents:[P_(t,e.path)]}}function jb(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=P_(t,r);const i=(function(h){if(h.length!==0)return D_(Cn.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(m){return{field:gr(m.field),direction:Kb(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function qb(t){let e=Mb(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Me(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=N_(p);return m instanceof Cn&&l_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(k){return new Aa(_r(k.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let m;return m=typeof p=="object"?p.value:p,tl(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(p){const m=!!p.before,_=p.values||[];return new Ia(_,m)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const m=!p.before,_=p.values||[];return new Ia(_,m)})(n.endAt)),ob(e,r,o,i,l,"F",c,h)}function Hb(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function N_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=_r(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=_r(n.unaryFilter.field);return lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_r(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return lt.create(_r(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Cn.create(n.compositeFilter.filters.map((s=>N_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(n.compositeFilter.op))})(t):pe(30097,{filter:t})}function Kb(t){return Db[t]}function Gb(t){return Vb[t]}function zb(t){return Ob[t]}function gr(t){return{fieldPath:t.canonicalString()}}function _r(t){return yt.fromServerFormat(t.fieldPath)}function D_(t){return t instanceof lt?(function(n){if(n.op==="=="){if(jd(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if($d(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jd(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if($d(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:Gb(n.op),value:n.value}}})(t):t instanceof Cn?(function(n){const s=n.getFilters().map((r=>D_(r)));return s.length===1?s[0]:{compositeFilter:{op:zb(n.op),filters:s}}})(t):pe(54877,{filter:t})}function Wb(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function V_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ms{constructor(e,n,s,r,i=ye.min(),o=ye.min(),l=Et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qb{constructor(e){this.yt=e}}function Yb(t){const e=qb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oc(e,e.limit,"L"):e}class Xb{constructor(){this.Cn=new Jb}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(As.min())}updateCollectionGroup(e,n,s){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Jb{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ct(Qe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ct(Qe.comparator)).toArray()}}const np={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=41943040;class Bt{static withCacheSize(e){return new Bt(e,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(O_,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);class jr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jr(0)}static cr(){return new jr(-1)}}const sp="LruGarbageCollector",Zb=1048576;function rp([t,e],[n,s]){const r=Ce(t,n);return r===0?Ce(e,s):r}class e0{constructor(e){this.Ir=e,this.buffer=new ct(rp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t0{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(sp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qr(n)?re(sp,"Ignoring IndexedDB error during garbage collection: ",n):await Wr(n)}await this.Vr(3e5)}))}}class n0{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(el.ce);const s=new e0(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(np)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),np):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,l=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),pr()<=be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function s0(t,e){return new n0(t,e)}class r0{constructor(){this.changes=new sr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?M.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class i0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class o0{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Mi(s.mutation,r,rn.empty(),We.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const r=$s();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Ii();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=zn();const o=xi(),l=(function(){return xi()})();return n.forEach(((c,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof rr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Mi(f.mutation,h,f.mutation.getFieldMask(),We.now())):o.set(h.key,rn.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((h,f)=>o.set(h,f))),n.forEach(((h,f)=>l.set(h,new i0(f,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=xi();let r=new Ye(((o,l)=>o-l)),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let f=s.get(c)||rn.empty();f=l.applyToLocalView(h,f),s.set(c,f);const p=(r.get(l.batchId)||Pe()).add(c);r=r.insert(l.batchId,p)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=g_();f.forEach((m=>{if(!i.has(m)){const _=I_(n.get(m),s.get(m));_!==null&&p.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):M.resolve($s());let l=Qi,c=i;return o.next((h=>M.forEach(h,((f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{c=c.insert(f,m)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,c,h,Pe()))).next((f=>({batchId:l,changes:m_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next((s=>{let r=Ii();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ii();return this.indexManager.getCollectionParents(e,i).next((l=>M.forEach(l,(c=>{const h=(function(p,m){return new sl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Ct.newInvalidDocument(f)))}));let l=Ii();return o.forEach(((c,h)=>{const f=i.get(c);f!==void 0&&Mi(f.mutation,h,rn.empty(),We.now()),il(n,h)&&(l=l.insert(c,h))})),l}))}}class a0{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:In(r.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:Yb(r.bundledQuery),readTime:In(r.readTime)}})(n)),M.resolve()}}class l0{constructor(){this.overlays=new Ye(he.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return M.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),M.resolve()}getOverlaysForCollection(e,n,s){const r=$s(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ye(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=$s(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=$s(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,f)=>l.set(h,f))),!(l.size()>=r)););return M.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Sb(n,s));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class c0{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class $u{constructor(){this.Qr=new ct(pt.$r),this.Ur=new ct(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new pt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new he(new Qe([])),s=new pt(n,e),r=new pt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Qe([])),s=new pt(n,e),r=new pt(n,e+1);let i=Pe();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new pt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}class u0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ct(pt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rb(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ku:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pt(n,0),r=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ct(Ce);return n.forEach((r=>{const i=new pt(r,0),o=new pt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),M.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new pt(new he(i),0);let l=new ct(Ce);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)}),o),M.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return M.forEach(n.mutations,(r=>{const i=new pt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new pt(n,0),r=this.Zr.firstAfterOrEqual(s);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class h0{constructor(e){this.ri=e,this.docs=(function(){return new Ye(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return M.resolve(s?s.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let s=zn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ct.newInvalidDocument(r))})),M.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=zn();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||FS(MS(f),s)<=0||(r.has(f.key)||il(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,s,r){pe(9500)}ii(e,n){return M.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new f0(this)}getSize(e){return M.resolve(this.size)}}class f0 extends r0{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class d0{constructor(e){this.persistence=e,this.si=new sr((n=>Vu(n)),Ou),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new $u,this.targetCount=0,this.ai=jr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new jr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),M.waitFor(i).next((()=>r))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return M.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),M.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return M.resolve(s)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}class L_{constructor(e,n){this.ui={},this.overlays={},this.ci=new el(0),this.li=!1,this.li=!0,this.hi=new c0,this.referenceDelegate=e(this),this.Pi=new d0(this),this.indexManager=new Xb,this.remoteDocumentCache=(function(r){return new h0(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Qb(n),this.Ii=new a0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new u0(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const r=new p0(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return M.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class p0 extends BS{constructor(e){super(),this.currentSequenceNumber=e}}class ju{constructor(e){this.persistence=e,this.Ri=new $u,this.Vi=null}static mi(e){return new ju(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),M.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(s=>{const r=he.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Sa{constructor(e,n){this.persistence=e,this.pi=new sr((s=>qS(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=s0(this,n)}static mi(e,n){return new Sa(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return M.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?M.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jo(e.data.value)),n}br(e,n,s){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qu(e,n.fromCache,s,r)}}class m0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class g0{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sA()?8:$S(Dt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new m0;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(pr()<=be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(pr()<=be.DEBUG&&re("QueryEngine","Query:",mr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(pr()<=be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):M.resolve())}ys(e,n){if(Gd(n))return M.resolve(null);let s=En(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Oc(n,null,"F"),s=En(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Pe(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Oc(n,null,"F")):this.vs(e,h,n,c)}))))})))))}ws(e,n,s,r){return Gd(n)||r.isEqual(ye.min())?M.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?M.resolve(null):(pr()<=be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mr(n)),this.vs(e,o,n,xS(r,Qi)).next((l=>l)))}))}Ds(e,n){let s=new ct(d_(e));return n.forEach(((r,i)=>{il(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return pr()<=be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",mr(n)),this.ps.getDocumentsMatchingQuery(e,n,As.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Hu="LocalStore",_0=3e8;class y0{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ye(Ce),this.xs=new sr((i=>Vu(i)),Ou),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o0(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function v0(t,e,n,s){return new y0(t,e,n,s)}async function x_(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=Pe();for(const h of r){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function E0(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,f){const p=h.batch,m=p.keys();let _=M.resolve();return m.forEach((k=>{_=_.next((()=>f.getEntry(c,k))).next((D=>{const V=h.docVersions.get(k);Me(V!==null,48541),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=Pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function M_(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function T0(t,e){const n=ve(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((f,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Et.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,s)),r=r.insert(p,_),(function(D,V,U){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=_0?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(m,_,f)&&l.push(n.Pi.updateTargetData(i,_))}));let c=zn(),h=Pe();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),l.push(I0(i,o,e.documentUpdates).next((f=>{c=f.ks,h=f.qs}))),!s.isEqual(ye.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(f)}return M.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function I0(t,e,n){let s=Pe(),r=Pe();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=zn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(Hu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function A0(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ku),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function w0(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,M.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new ms(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Uc(t,e,n){const s=ve(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Qr(o))throw o;re(Hu,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ip(t,e,n){const s=ve(t);let r=ye.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,f){const p=ve(c),m=p.xs.get(f);return m!==void 0?M.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)})(s,o,En(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ye.min(),n?i:Pe()))).next((l=>(R0(s,cb(e),l),{documents:l,Qs:i})))))}function R0(t,e,n){let s=t.Os.get(e)||ye.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class op{constructor(){this.activeTargetIds=mb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S0{constructor(){this.Mo=new op,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new op,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class b0{Oo(e){}shutdown(){}}const ap="ConnectivityMonitor";class lp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(ap,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(ap,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $o=null;function Bc(){return $o===null?$o=(function(){return 268435456+Math.round(2147483648*Math.random())})():$o++,"0x"+$o.toString(16)}const Zl="RestConnection",C0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P0{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ea?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Bc(),l=this.zo(e,n.toUriEncodedString());re(Zl,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),f=Hr(h);return this.Jo(e,l,c,s,f).then((p=>(re(Zl,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Mr(Zl,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=C0[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class k0{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Rt="WebChannelConnection";class N0 extends P0{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Bc();return new Promise(((l,c)=>{const h=new jg;h.setWithCredentials(!0),h.listenOnce(qg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Xo.NO_ERROR:const p=h.getResponseJson();re(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Xo.TIMEOUT:re(Rt,`RPC '${e}' ${o} timed out`),c(new oe(j.DEADLINE_EXCEEDED,"Request time out"));break;case Xo.HTTP_ERROR:const m=h.getStatus();if(re(Rt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const k=_?.error;if(k&&k.status&&k.message){const D=(function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(B)>=0?B:j.UNKNOWN})(k.status);c(new oe(D,k.message))}else c(new oe(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new oe(j.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{re(Rt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);re(Rt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=Bc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gg(),l=Kg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");re(Rt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let m=!1,_=!1;const k=new k0({Yo:V=>{_?re(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(m||(re(Rt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),re(Rt,`RPC '${e}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),D=(V,U,B)=>{V.listen(U,(Q=>{try{B(Q)}catch(G){setTimeout((()=>{throw G}),0)}}))};return D(p,Ti.EventType.OPEN,(()=>{_||(re(Rt,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),D(p,Ti.EventType.CLOSE,(()=>{_||(_=!0,re(Rt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(p))})),D(p,Ti.EventType.ERROR,(V=>{_||(_=!0,Mr(Rt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),k.a_(new oe(j.UNAVAILABLE,"The operation could not be completed")))})),D(p,Ti.EventType.MESSAGE,(V=>{if(!_){const U=V.data[0];Me(!!U,16349);const B=U,Q=B?.error||B[0]?.error;if(Q){re(Rt,`RPC '${e}' stream ${r} received error:`,Q);const G=Q.status;let de=(function(y){const I=nt[y];if(I!==void 0)return w_(I)})(G),Ee=Q.message;de===void 0&&(de=j.INTERNAL,Ee="Unknown error status: "+G+" with message "+Q.message),_=!0,k.a_(new oe(de,Ee)),p.close()}else re(Rt,`RPC '${e}' stream ${r} received:`,U),k.u_(U)}})),D(l,Hg.STAT_EVENT,(V=>{V.stat===Cc.PROXY?re(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===Cc.NOPROXY&&re(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ec(){return typeof document<"u"?document:null}function cl(t){return new Lb(t,!0)}class F_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const cp="PersistentStream";class U_{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new F_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new oe(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(cp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(cp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class D0 extends U_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Fb(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?In(o.readTime):ye.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Fc(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=Vc(c)?{documents:$b(i,c)}:{query:jb(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=b_(i,o.resumeToken);const h=Lc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=Ra(i,o.snapshotVersion.toTimestamp());const h=Lc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const s=Hb(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Fc(this.serializer),n.removeTarget=e,this.q_(n)}}class V0 extends U_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Bb(e.writeResults,e.commitTime),s=In(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Fc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Ub(this.serializer,s)))};this.q_(n)}}class O0{}class L0 extends O0{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oe(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,xc(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(j.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,xc(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(j.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class x0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zs="RemoteStore";class M0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{ir(this)&&(re(Zs,"Restarting streams for network reachability change."),await(async function(c){const h=ve(c);h.Ea.add(4),await yo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ul(h)})(this))}))})),this.Ra=new x0(s,r)}}async function ul(t){if(ir(t))for(const e of t.da)await e(!0)}async function yo(t){for(const e of t.da)await e(!1)}function B_(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Wu(n)?zu(n):Yr(n).O_()&&Gu(n,e))}function Ku(t,e){const n=ve(t),s=Yr(n);n.Ia.delete(e),s.O_()&&$_(n,e),n.Ia.size===0&&(s.O_()?s.L_():ir(n)&&n.Ra.set("Unknown"))}function Gu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yr(t).Y_(e)}function $_(t,e){t.Va.Ue(e),Yr(t).Z_(e)}function zu(t){t.Va=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yr(t).start(),t.Ra.ua()}function Wu(t){return ir(t)&&!Yr(t).x_()&&t.Ia.size>0}function ir(t){return ve(t).Ea.size===0}function j_(t){t.Va=void 0}async function F0(t){t.Ra.set("Online")}async function U0(t){t.Ia.forEach(((e,n)=>{Gu(t,e)}))}async function B0(t,e){j_(t),Wu(t)?(t.Ra.ha(e),zu(t)):t.Ra.set("Unknown")}async function $0(t,e,n){if(t.Ra.set("Online"),e instanceof S_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){re(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ba(t,s)}else if(e instanceof ta?t.Va.Ze(e):e instanceof R_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const s=await M_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(Et.EMPTY_BYTE_STRING,f.snapshotVersion)),$_(i,c);const p=new ms(f.target,c,h,f.sequenceNumber);Gu(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){re(Zs,"Failed to raise snapshot:",s),await ba(t,s)}}async function ba(t,e,n){if(!Qr(e))throw e;t.Ea.add(1),await yo(t),t.Ra.set("Offline"),n||(n=()=>M_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{re(Zs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ul(t)}))}function q_(t,e){return e().catch((n=>ba(t,n,e)))}async function hl(t){const e=ve(t),n=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ku;for(;j0(e);)try{const r=await A0(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,q0(e,r)}catch(r){await ba(e,r)}H_(e)&&K_(e)}function j0(t){return ir(t)&&t.Ta.length<10}function q0(t,e){t.Ta.push(e);const n=bs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function H_(t){return ir(t)&&!bs(t).x_()&&t.Ta.length>0}function K_(t){bs(t).start()}async function H0(t){bs(t).ra()}async function K0(t){const e=bs(t);for(const n of t.Ta)e.ea(n.mutations)}async function G0(t,e,n){const s=t.Ta.shift(),r=Fu.from(s,e,n);await q_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await hl(t)}async function z0(t,e){e&&bs(t).X_&&await(async function(s,r){if((function(o){return Cb(o)&&o!==j.ABORTED})(r.code)){const i=s.Ta.shift();bs(s).B_(),await q_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await hl(s)}})(t,e),H_(t)&&K_(t)}async function up(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),re(Zs,"RemoteStore received new credentials");const s=ir(n);n.Ea.add(3),await yo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ul(n)}async function W0(t,e){const n=ve(t);e?(n.Ea.delete(2),await ul(n)):e||(n.Ea.add(2),await yo(n),n.Ra.set("Unknown"))}function Yr(t){return t.ma||(t.ma=(function(n,s,r){const i=ve(n);return i.sa(),new D0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:F0.bind(null,t),t_:U0.bind(null,t),r_:B0.bind(null,t),H_:$0.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Wu(t)?zu(t):t.Ra.set("Unknown")):(await t.ma.stop(),j_(t))}))),t.ma}function bs(t){return t.fa||(t.fa=(function(n,s,r){const i=ve(n);return i.sa(),new V0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:H0.bind(null,t),r_:z0.bind(null,t),ta:K0.bind(null,t),na:G0.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await hl(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Zs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Qu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Qu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yu(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Qr(t))return new oe(j.UNAVAILABLE,`${e}: ${t}`);throw t}class Sr{static emptySet(e){return new Sr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=Ii(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Sr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class hp{constructor(){this.ga=new Ye(he.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class qr{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new qr(e,n,Sr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class Q0{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Y0{constructor(){this.queries=fp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ve(n),i=r.queries;r.queries=fp(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new oe(j.ABORTED,"Firestore shutting down"))}}function fp(){return new sr((t=>f_(t)),rl)}async function X0(t,e){const n=ve(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Q0,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Yu(o,`Initialization of query '${mr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Xu(n)}async function J0(t,e){const n=ve(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Z0(t,e){const n=ve(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Xu(n)}function e1(t,e,n){const s=ve(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Xu(t){t.Ca.forEach((e=>{e.next()}))}var $c,dp;(dp=$c||($c={})).Ma="default",dp.Cache="cache";class t1{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new qr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$c.Cache}}class G_{constructor(e){this.key=e}}class z_{constructor(e){this.key=e}}class n1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=d_(e),this.tu=new Sr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new hp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,p)=>{const m=r.get(f),_=il(this.query,p)?p:null,k=!!m&&this.mutatedKeys.has(m.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?k!==D&&(s.track({type:3,doc:_}),V=!0):this.su(m,_)||(s.track({type:2,doc:_}),V=!0,(c&&this.eu(_,c)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(s.track({type:0,doc:_}),V=!0):m&&!_&&(s.track({type:1,doc:m}),V=!0,(c||h)&&(l=!0)),V&&(_?(o=o.add(_),i=D?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(_,k){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:V})}};return D(_)-D(k)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new qr(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new z_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new G_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ju="SyncEngine";class s1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class r1{constructor(e){this.key=e,this.hu=!1}}class i1{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new sr((l=>f_(l)),rl),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(he.comparator),this.Au=new Map,this.Ru=new $u,this.Vu={},this.mu=new Map,this.fu=jr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function o1(t,e,n=!0){const s=Z_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await W_(s,e,n,!0),r}async function a1(t,e){const n=Z_(t);await W_(n,e,!0,!1)}async function W_(t,e,n,s){const r=await w0(t.localStore,En(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await l1(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&B_(t.remoteStore,r),l}async function l1(t,e,n,s,r){t.pu=(p,m,_)=>(async function(D,V,U,B){let Q=V.view.ru(U);Q.Cs&&(Q=await ip(D.localStore,V.query,!1).then((({documents:w})=>V.view.ru(w,Q))));const G=B&&B.targetChanges.get(V.targetId),de=B&&B.targetMismatches.get(V.targetId)!=null,Ee=V.view.applyChanges(Q,D.isPrimaryClient,G,de);return mp(D,V.targetId,Ee.au),Ee.snapshot})(t,p,m,_);const i=await ip(t.localStore,e,!0),o=new n1(e,i.Qs),l=o.ru(i.documents),c=_o.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);mp(t,n,h.au);const f=new s1(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function c1(t,e,n){const s=ve(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!rl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Uc(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Ku(s.remoteStore,r.targetId),jc(s,r.targetId)})).catch(Wr)):(jc(s,r.targetId),await Uc(s.localStore,r.targetId,!0))}async function u1(t,e){const n=ve(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ku(n.remoteStore,s.targetId))}async function h1(t,e,n){const s=y1(t);try{const r=await(function(o,l){const c=ve(o),h=We.now(),f=l.reduce(((_,k)=>_.add(k.key)),Pe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let k=zn(),D=Pe();return c.Ns.getEntries(_,f).next((V=>{k=V,k.forEach(((U,B)=>{B.isValidDocument()||(D=D.add(U))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,k))).next((V=>{p=V;const U=[];for(const B of l){const Q=Ab(B,p.get(B.key).overlayedDocument);Q!=null&&U.push(new rr(B.key,Q,i_(Q.value.mapValue),Tn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,U,l)})).next((V=>{m=V;const U=V.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(_,V.batchId,U)}))})).then((()=>({batchId:m.batchId,changes:m_(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ye(Ce)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(s,r.batchId,n),await vo(s,r.changes),await hl(s.remoteStore)}catch(r){const i=Yu(r,"Failed to persist write");n.reject(i)}}async function Q_(t,e){const n=ve(t);try{const s=await T0(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Me(o.hu,14607):r.removedDocuments.size>0&&(Me(o.hu,42227),o.hu=!1))})),await vo(n,s,e)}catch(s){await Wr(s)}}function pp(t,e,n){const s=ve(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=ve(o);c.onlineState=l;let h=!1;c.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)})),h&&Xu(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function f1(t,e,n){const s=ve(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ye(he.comparator);o=o.insert(i,Ct.newNoDocument(i,ye.min()));const l=Pe().add(i),c=new ll(ye.min(),new Map,new Ye(Ce),o,l);await Q_(s,c),s.du=s.du.remove(i),s.Au.delete(e),Zu(s)}else await Uc(s.localStore,e,!1).then((()=>jc(s,e,n))).catch(Wr)}async function d1(t,e){const n=ve(t),s=e.batch.batchId;try{const r=await E0(n.localStore,e);X_(n,s,null),Y_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await vo(n,r)}catch(r){await Wr(r)}}async function p1(t,e,n){const s=ve(t);try{const r=await(function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(Me(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>c.localDocuments.getDocuments(h,f)))}))})(s.localStore,e);X_(s,e,n),Y_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await vo(s,r)}catch(r){await Wr(r)}}function Y_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function X_(t,e,n){const s=ve(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||J_(t,s)}))}function J_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ku(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Zu(t))}function mp(t,e,n){for(const s of n)s instanceof G_?(t.Ru.addReference(s.key,e),m1(t,s)):s instanceof z_?(re(Ju,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||J_(t,s.key)):pe(19791,{wu:s})}function m1(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(re(Ju,"New document in limbo: "+n),t.Eu.add(s),Zu(t))}function Zu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Qe.fromString(e)),s=t.fu.next();t.Au.set(s,new r1(n)),t.du=t.du.insert(n,s),B_(t.remoteStore,new ms(En(Lu(n.path)),s,"TargetPurposeLimboResolution",el.ce))}}async function vo(t,e,n){const s=ve(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){r.push(h);const f=qu.As(c.targetId,h);i.push(f)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,h){const f=ve(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(h,(m=>M.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_))).next((()=>M.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))))))}catch(p){if(!Qr(p))throw p;re(Hu,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const _=f.Ms.get(m),k=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(k);f.Ms=f.Ms.insert(m,D)}}})(s.localStore,i))}async function g1(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){re(Ju,"User change. New user:",e.toKey());const s=await x_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new oe(j.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await vo(n,s.Ls)}}function _1(t,e){const n=ve(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let r=Pe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function Z_(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f1.bind(null,e),e.Pu.H_=Z0.bind(null,e.eventManager),e.Pu.yu=e1.bind(null,e.eventManager),e}function y1(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p1.bind(null,e),e}class Ca{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return v0(this.persistence,new g0,e.initialUser,this.serializer)}Cu(e){return new L_(ju.mi,this.serializer)}Du(e){return new S0}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ca.provider={build:()=>new Ca};class v1 extends Ca{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Sa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new t0(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new L_((s=>Sa.mi(s,n)),this.serializer)}}class qc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=g1.bind(null,this.syncEngine),await W0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Y0})()}createDatastore(e){const n=cl(e.databaseInfo.databaseId),s=(function(i){return new N0(i)})(e.databaseInfo);return(function(i,o,l,c){return new L0(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new M0(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>pp(this.syncEngine,n,0)),(function(){return lp.v()?new lp:new b0})())}createSyncEngine(e,n){return(function(r,i,o,l,c,h,f){const p=new i1(r,i,o,l,c,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ve(n);re(Zs,"RemoteStore shutting down."),s.Ea.add(5),await yo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qc.provider={build:()=>new qc};class E1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Cs="FirestoreClient";class T1{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=St.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{re(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(re(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Yu(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function tc(t,e){t.asyncQueue.verifyOperationInProgress(),re(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await x_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function gp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I1(t);re(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>up(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>up(e.remoteStore,r))),t._onlineComponents=e}async function I1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Cs,"Using user provided OfflineComponentProvider");try{await tc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),await tc(t,new Ca)}}else re(Cs,"Using default OfflineComponentProvider"),await tc(t,new v1(void 0));return t._offlineComponents}async function ey(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Cs,"Using user provided OnlineComponentProvider"),await gp(t,t._uninitializedComponentsProvider._online)):(re(Cs,"Using default OnlineComponentProvider"),await gp(t,new qc))),t._onlineComponents}function A1(t){return ey(t).then((e=>e.syncEngine))}async function w1(t){const e=await ey(t),n=e.eventManager;return n.onListen=o1.bind(null,e.syncEngine),n.onUnlisten=c1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u1.bind(null,e.syncEngine),n}function R1(t,e,n={}){const s=new Ts;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,h){const f=new E1({next:m=>{f.Nu(),o.enqueueAndForget((()=>J0(i,p)));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new oe(j.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?h.reject(new oe(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new t1(Lu(l.path),f,{includeMetadataChanges:!0,qa:!0});return X0(i,p)})(await w1(t),t.asyncQueue,e,n,s))),s.promise}function ty(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const _p=new Map;const ny="firestore.googleapis.com",yp=!0;class vp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ny,this.ssl=yp}else this.host=e.host,this.ssl=e.ssl??yp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zb)throw new oe(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ty(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new wS;switch(s.type){case"firstParty":return new CS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=_p.get(n);s&&(re("ComponentProvider","Removing Datastore"),_p.delete(n),s.terminate())})(this),Promise.resolve()}}function S1(t,e,n,s={}){t=Ur(t,eh);const r=Hr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(sg(`https://${l}`),rg("Firestore",!0)),i.host!==ny&&i.host!==l&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Qs(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=St.MOCK_USER;else{h=WI(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new oe(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new St(p)}t._authCredentials=new RS(new Wg(h,f))}}class th{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new th(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new no(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(mo(n,mt._jsonSchema))return new mt(e,s||null,new he(Qe.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:rt("string",mt._jsonSchemaVersion),referencePath:rt("string")};class no extends th{constructor(e,n,s){super(e,n,Lu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new he(e))}withConverter(e){return new no(this.firestore,e,this._path)}}function Pa(t,e,...n){if(t=Jt(t),arguments.length===1&&(e=Cu.newId()),OS("doc","path",e),t instanceof eh){const s=Qe.fromString(e,...n);return Vd(s),new mt(t,null,new he(s))}{if(!(t instanceof mt||t instanceof no))throw new oe(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Qe.fromString(e,...n));return Vd(s),new mt(t.firestore,t instanceof no?t.converter:null,new he(s))}}const Ep="AsyncQueue";class Tp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new F_(this,"async_queue_retry"),this._c=()=>{const s=ec();s&&re(Ep,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=ec();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ec();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qr(e))throw e;re(Ep,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",Ip(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Qu.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&pe(47125,{Pc:Ip(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ip(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fl extends eh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Tp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tp(e),this._firestoreClient=void 0,await e}}}function b1(t,e){const n=typeof t=="object"?t:lg(),s=typeof t=="string"?t:Ea,r=gu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=GI("firestore");i&&S1(r,...i)}return r}function sy(t){if(t._terminated)throw new oe(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C1(t),t._firestoreClient}function C1(t){const e=t._freezeSettings(),n=(function(r,i,o,l){return new GS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ty(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new T1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(Et.fromBase64String(e))}catch(n){throw new oe(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mo(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:rt("string",Qt._jsonSchemaVersion),bytes:rt("string")};class nh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sh{constructor(e){this._methodName=e}}class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(mo(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:rt("string",An._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};class wn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mo(e,wn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wn(e.vectorValues);throw new oe(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wn._jsonSchemaVersion="firestore/vectorValue/1.0",wn._jsonSchema={type:rt("string",wn._jsonSchemaVersion),vectorValues:rt("object")};const P1=/^__.*__$/;class k1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new go(e,this.data,n,this.fieldTransforms)}}function ry(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class rh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ka(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ry(this.Ac)&&P1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||cl(e)}Cc(e,n,s,r=!1){return new rh({Ac:e,methodName:n,Dc:s,path:yt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D1(t){const e=t._freezeSettings(),n=cl(t._databaseId);return new N1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function V1(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);ly("Data must be an object, but it was:",o,s);const l=oy(s,o);let c,h;if(i.merge)c=new rn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=O1(e,p,n);if(!o.contains(m))throw new oe(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x1(f,m)||f.push(m)}c=new rn(f),h=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=o.fieldTransforms;return new k1(new Wt(l),c,h)}class ih extends sh{_toFieldTransform(e){return new vb(e.path,new Zi)}isEqual(e){return e instanceof ih}}function iy(t,e){if(ay(t=Jt(t)))return ly("Unsupported field value:",e,t),oy(t,e);if(t instanceof sh)return(function(s,r){if(!ry(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=iy(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=Jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return gb(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=We.fromDate(s);return{timestampValue:Ra(r.serializer,i)}}if(s instanceof We){const i=new We(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ra(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qt)return{bytesValue:b_(r.serializer,s._byteString)};if(s instanceof mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wn)return(function(o,l){return{mapValue:{fields:{[s_]:{stringValue:r_},[Ta]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return xu(l.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Pu(s)}`)})(t,e)}function oy(t,e){const n={};return Xg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nr(t,((s,r)=>{const i=iy(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function ay(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof An||t instanceof Qt||t instanceof mt||t instanceof sh||t instanceof wn)}function ly(t,e,n){if(!ay(n)||!Qg(n)){const s=Pu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function O1(t,e,n){if((e=Jt(e))instanceof nh)return e._internalPath;if(typeof e=="string")return cy(t,e);throw ka("Field path arguments must be of type string or ",t,!1,void 0,n)}const L1=new RegExp("[~\\*/\\[\\]]");function cy(t,e,n){if(e.search(L1)>=0)throw ka(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nh(...e.split("."))._internalPath}catch{throw ka(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ka(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new oe(j.INVALID_ARGUMENT,l+t+c)}function x1(t,e){return t.some((n=>n.isEqual(e)))}class uy{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M1 extends uy{data(){return super.data()}}function hy(t,e){return typeof e=="string"?cy(t,e):e instanceof nh?e._internalPath:e._delegate._internalPath}class F1{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return nr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Ta].arrayValue?.values?.map((s=>Ze(s.doubleValue)));return new wn(n)}convertGeoPoint(e){return new An(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=nl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Yi(e));default:return null}}convertTimestamp(e){const n=ws(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qe.fromString(e);Me(V_(s),9688,{name:e});const r=new Xi(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function U1(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zs extends uy{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:rt("string",zs._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class na extends zs{data(e={}){return super.data(e)}}class Fi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new wi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new na(this._firestore,this._userDataWriter,s.key,s,new wi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new na(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new na(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:B1(l.type),doc:c,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function B1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}function fy(t){t=Ur(t,mt);const e=Ur(t.firestore,fl);return R1(sy(e),t._key).then((n=>H1(e,t,n)))}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:rt("string",Fi._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class $1 extends F1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function j1(t,e,n){t=Ur(t,mt);const s=Ur(t.firestore,fl),r=U1(t.converter,e,n);return dy(s,[V1(D1(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Tn.none())])}function q1(t){return dy(Ur(t.firestore,fl),[new Mu(t._key,Tn.none())])}function dy(t,e){return(function(s,r){const i=new Ts;return s.asyncQueue.enqueueAndForget((async()=>h1(await A1(s),r,i))),i.promise})(sy(t),e)}function H1(t,e,n){const s=n.docs.get(e._key),r=new $1(t);return new zs(t,r,e._key,s,new wi(n.hasPendingWrites,n.fromCache),e.converter)}function K1(){return new ih("serverTimestamp")}(function(e,n=!0){(function(r){zr=r})(Kr),Lr(new Ys("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new fl(new SS(s.getProvider("auth-internal")),new PS(o,s.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new oe(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(h.options.projectId,f)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),vs(Pd,kd,e),vs(Pd,kd,"esm2020")})();const G1={apiKey:"AIzaSyDMvSyTEhJGh7a0coyDWCDiAsWCgxE9QsU",authDomain:"realcitytransport.firebaseapp.com",databaseURL:"https://realcitytransport-default-rtdb.firebaseio.com",projectId:"realcitytransport",storageBucket:"realcitytransport.firebasestorage.app",messagingSenderId:"510805652928",appId:"1:510805652928:web:0559bdd8da50af10b7c425",measurementId:"G-JE98MMZMCW"},py=ag(G1),Hc=ES(py),Na=b1(py),ze=3600,yi=8*ze,Ps=[{id:"sys_unlock_vehicle",type:"SYSTEM",domain:"vehicle",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"vehicle"}]},{id:"sys_unlock_route",type:"SYSTEM",domain:"route",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"route"}]},{id:"sys_unlock_construction",type:"SYSTEM",domain:"construction",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"construction"}]},{id:"sys_unlock_finance",type:"SYSTEM",domain:"finance",timePolicy:"FIXED",title:"()  ",desc:"  . (  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"finance"}]},{id:"sys_unlock_city",type:"SYSTEM",domain:"city",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:yi,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"city"}]},{id:"sys_preview_starter_vehicles",type:"REAL",domain:"vehicle",timePolicy:"SCALABLE",title:" () ",desc:" (8)  , //     . (4,  )",tier:1,durationSec:4*ze,requires:["unlock_bus_t1","unlock_truck_t1","unlock_rail_t1"],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_STARTER_FLEET_PREVIEW",transports:["bus","truck","rail"],runTimeMinSec:1800,runTimeMaxSec:2*ze,countPerTransport:1}]},{id:"city_scale_region",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  .',tier:1,durationSec:4*ze,requires:["sys_unlock_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"REGION"}]},{id:"city_scale_city",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  . (  )',tier:1,durationSec:8*ze,requires:["city_scale_region"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"CITY"}]},{id:"city_scale_country",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . ( / )',tier:1,durationSec:12*ze,requires:["city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"COUNTRY"}]},{id:"city_scale_state",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:16*ze,requires:["city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"STATE"}]},{id:"city_scale_planet",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:24*ze,requires:["city_scale_state"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"PLANET"}]},{id:"unlock_bus_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*ze,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"bus",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"bus",tier:1}]},{id:"unlock_truck_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*ze,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"truck",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"truck",tier:1}]},{id:"unlock_rail_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*ze,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"rail",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"rail",tier:1}]},{id:"unlock_plane_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*ze,requires:["sys_unlock_city","city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"plane",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"plane",tier:1}]},{id:"unlock_ship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*ze,requires:["sys_unlock_city","city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"ship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"ship",tier:1}]},{id:"unlock_spaceship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:3*ze,requires:["sys_unlock_city","city_scale_planet"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"spaceship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"spaceship",tier:1}]},{id:"rs_1",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  I",desc:"     5% . (SYSTEM  8 )",tier:1,durationSec:1*ze,requires:[],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:1}]},{id:"rs_2",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  II",desc:"     10% . (SYSTEM  8 )",tier:1,durationSec:2*ze,requires:["rs_1"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:2}]},{id:"rs_3",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  III",desc:"     15% . (SYSTEM  8 )",tier:1,durationSec:4*ze,requires:["rs_2"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:3}]},{id:"rs_4",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  IV",desc:"     20% . (SYSTEM  8 )",tier:1,durationSec:8*ze,requires:["rs_3"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:4}]},{id:"rs_5",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  V",desc:"     25% . (SYSTEM  8 )",tier:1,durationSec:16*ze,requires:["rs_4"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:5}]},{id:"qol_4h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"   . ( UI/ )",tier:1,durationSec:4*ze,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_4h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"  ",desc:"/   . (  )",tier:1,durationSec:4*ze,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*ze,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*ze,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_03",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/     .",tier:1,durationSec:8*ze,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"t2_transport_foundation",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:" 2  ()",desc:"2   .   .",tier:2,durationSec:12*ze,requires:[],revealAfter:[],enabled:!1,effects:[]}];function oh(t){return Ps.find(e=>e.id===t)||null}const my="rcts.research.saveEnabled",gy="rcts.research.autosave.enabled",_y="rcts.research.autosave.base",ah="rcts.research.autosave.intervalMin",{kstDate:yy,isKstTimeReady:vy}=Mm(),Eo=ge(()=>vy.value&&yy.value instanceof Date);function dl(){return Eo.value?yy.value.getTime():Date.now()}const z1=new Set(["sys_unlock_vehicle","sys_unlock_route","sys_unlock_construction","sys_unlock_finance","sys_unlock_city"]);function Da(t){return!t||!z1.has(t)?!1:oh(t)?.enabled===!1}const Wn=Ae(null),Gt=Ae(new Set),je=Ae(null),Ke=Ae([]),Ey=Ae({}),Ty=Ae(1),lh=Ae(0),so=Ae(1),er=Ae(1),Va=Ae("NONE"),Oa=Ae({vehicle:!1,route:!1,construction:!1,finance:!1,city:!1}),Kc=Ae(!1),Gc=Ae(!1),Un=Ae(!1),or=Ae(null);let Ft=null,Is=!1;const Ws=Ae(Ay(my,!0)),ro=Ae(Ay(gy,!1)),ch=Ae(wy(_y,5)),io=Ae(wy(ah,10)),uh=Ae(!1),Iy=Ae(0);let js=null;function Ay(t,e){const n=localStorage.getItem(t);return n===null?e:n==="1"}function wy(t,e){const n=localStorage.getItem(t),s=n==null?NaN:Number(n);return Number.isFinite(s)?s:e}function Ry(t,e){localStorage.setItem(t,e?"1":"0")}function zc(t,e){localStorage.setItem(t,String(e))}function pl(t){const e=Math.max(1,Math.min(3,Number(t||1)));return e===1?1:e===2?3:5}function W1(t){Ws.value=!!t,Ry(my,Ws.value),Ws.value?To():(Ft&&(clearTimeout(Ft),Ft=null),nn())}function Q1(t){ro.value=!!t,Ry(gy,ro.value),To()}function Y1(t){const e=Number(t)===10?10:5;ch.value=e,zc(_y,e);const n=Number(io.value)||e,s=Math.max(e,Math.round(n/e)*e);io.value=s,zc(ah,s),To(!0)}function X1(t){const e=Number(ch.value)===10?10:5,n=Number(t);if(!Number.isFinite(n)||n<=0)return;const s=Math.max(e,Math.round(n/e)*e);io.value=s,zc(ah,s),To(!0)}function J1(t){const e=Number(t);if(!Number.isFinite(e)||e<=0)return 6e4;const n=e*60*1e3,s=540*60*1e3,r=Date.now()+s,o=(Math.floor(r/n)+1)*n-r;return Math.max(1e3,o)}function nn(){uh.value=!1,js&&(clearTimeout(js),js=null)}function Sy(){if(js&&(clearTimeout(js),js=null),!ro.value||!Ws.value||!or.value||!Un.value||Is)return nn();uh.value=!0;const t=Number(io.value)||10,e=J1(t);js=setTimeout(async()=>{try{await dh({reason:"autosave"}),Iy.value=Date.now()}catch(n){console.error("useResearch:  :",n)}finally{Sy()}},e)}function To(t=!1){t&&nn(),ro.value&&Ws.value&&or.value&&Un.value&&!Is?Sy():nn()}function Z1(){Ft&&(clearTimeout(Ft),Ft=null),nn(),or.value=null,Un.value=!1,Is=!1}function eC(t){return(Array.isArray(t?.requires)?t.requires:[]).every(n=>Gt.value.has(n))}function by(t){const e=Array.isArray(t?.revealAfter)?t.revealAfter:[];return e.length===0?!0:e.every(n=>Gt.value.has(n))}function hh(t){return Gt.value.has(t)}function tC(t){return!t||Number(t.tier||1)!==1?!1:(t.effects||[]).some(e=>e?.type==="UNLOCK_TRANSPORT_TIER"&&Number(e?.tier||1)===1&&!!e?.transportId)}function Cy(t){return t?t.timePolicy==="FIXED"?!0:t.type==="SYSTEM":!1}function nC(t){return t?t.timePolicy==="SCALABLE"?!0:t.timePolicy==null?!Cy(t):!1:!1}function La(t){switch(String(t||"").toUpperCase()){case"REGION":return 1;case"CITY":return 2;case"COUNTRY":return 3;case"STATE":return 4;case"PLANET":return 5;default:return 0}}function Xr(){const t={};let e=1,n=0,s=1,r="NONE";const i={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1};for(const c of Ps)if(Gt.value.has(c.id))for(const h of c.effects||[]){if(h.type==="UNLOCK_TRANSPORT_TIER"){const f=h.transportId,p=Number(h.tier||1);if(!f)continue;t[f]=Math.max(Number(t[f]||0),p)}if(h.type==="INCOME_MULTIPLIER"&&(e*=Number(h.value||1)),h.type==="RESEARCH_SPEED_LEVEL"){const f=Number(h.level||0);Number.isFinite(f)&&(n=Math.max(n,f))}if(h.type==="QUEUE_RESERVE_LEVEL"){const f=Number(h.level||1);Number.isFinite(f)&&(s=Math.max(s,f))}if(h.type==="UNLOCK_FEATURE"){const f=String(h.featureKey||"");f&&Object.prototype.hasOwnProperty.call(i,f)&&(i[f]=!0)}if(h.type==="SET_CITY_SCALE"){const f=String(h.scale||"").toUpperCase();La(f)>La(r)&&(r=f)}}Ey.value=t,Ty.value=e,lh.value=n;const o=1-.05*Math.max(0,n);so.value=Math.max(.2,o),Va.value=r,Oa.value=i,er.value=Math.max(1,Math.min(3,s));const l=pl(er.value);Ke.value.length>l&&(Ke.value=Ke.value.slice(0,l))}const sC=ge(()=>Ps.filter(t=>Number(t?.tier||1)>=2?!0:by(t))),rC=ge(()=>{const t=new Set;for(const e of Ps)if(Number(e.tier||1)===1)for(const n of e.effects||[])n.type==="UNLOCK_TRANSPORT_TIER"&&Number(n.tier||1)===1&&n.transportId&&t.add(n.transportId);return Array.from(t)}),iC=ge(()=>!Wn.value),oC=ge(()=>rC.value.map(t=>({id:t})));function fh(t){const e=oh(t);if(!e)return"unknown";const n=Number(e.tier||1);return n===1&&!by(e)?"hidden":hh(t)?"done":je.value?.id===t?"active":Ke.value.includes(t)?"queued":e.enabled===!1?"comingSoon":n===1&&tC(e)&&Wn.value||eC(e)?"available":"locked"}function Py(t){return Ps.find(n=>n.enabled!==!1&&Number(n.tier||1)===1&&(n.effects||[]).some(s=>s.type==="UNLOCK_TRANSPORT_TIER"&&s.transportId===t&&Number(s.tier||1)===1))?.id??null}function ky(){return!(!Ws.value||!or.value||!Un.value||Is)}function aC(){const t=pl(er.value);return{version:10,firstUnlockTransportId:Wn.value??null,completedResearchIds:Array.from(Gt.value),activeResearch:je.value?{id:je.value.id,startedAtMs:je.value.startedAtMs,endsAtMs:je.value.endsAtMs}:null,queuedResearchIds:Array.isArray(Ke.value)?Ke.value.slice(0,t):[]}}function lC(t){Wn.value=typeof t?.firstUnlockTransportId=="string"?t.firstUnlockTransportId:typeof t?.firstUnlockId=="string"?t.firstUnlockId:null;const e=Array.isArray(t?.completedResearchIds)?t.completedResearchIds:[];Gt.value=new Set(e.filter(o=>typeof o=="string"));const n=t?.activeResearch;n&&typeof n=="object"&&typeof n.id=="string"?je.value={id:n.id,startedAtMs:Number(n.startedAtMs||0),endsAtMs:Number(n.endsAtMs||0)}:je.value=null;const s=Array.isArray(t?.queuedResearchIds)?t.queuedResearchIds.filter(o=>typeof o=="string"):[],r=typeof t?.queuedResearchId=="string"?t.queuedResearchId:null,i=[];for(const o of s)i.includes(o)||i.push(o);if(r&&!i.includes(r)&&i.push(r),Ke.value=i,Gt.value.size===0&&Array.isArray(t?.transports)){for(const o of t.transports)if(!(!o||typeof o.id!="string")&&o.locked===!1){const l=Py(o.id);l&&Gt.value.add(l)}}Xr()}async function dh({reason:t="manual"}={}){if(ky()){Ft&&(clearTimeout(Ft),Ft=null);try{Gc.value=!0;const e={...aC(),updatedAt:K1(),lastSaveReason:t},n=Pa(Na,"users",or.value,"research","state");await j1(n,e,{merge:!0})}catch(e){console.error("useResearch: Firebase  :",e)}finally{Gc.value=!1}}}const Qn=()=>{ky()&&(Ft&&clearTimeout(Ft),Ft=setTimeout(async()=>{await dh({reason:"debounced"})},800))};function cC(t){if(!t||Wn.value)return;const e=Py(t);e&&(Wn.value=t,Gt.value.add(e),Xr(),Qn())}function Ny(t){if(Da(t))return{ok:!1,reason:"COMING_SOON"};const e=oh(t);if(!e)return{ok:!1,reason:"UNKNOWN_RESEARCH"};if(!Wn.value)return{ok:!1,reason:"FIRST_UNLOCK_REQUIRED"};if(!Eo.value)return{ok:!1,reason:"KST_NOT_READY"};if(hh(t))return{ok:!1,reason:"ALREADY_DONE"};if(e.enabled===!1)return{ok:!1,reason:"COMING_SOON"};const n=fh(t);if(n!=="available")return{ok:!1,reason:n.toUpperCase()};const s=dl(),r=Number(e.durationSec||0);let i=0;return r>0&&(Cy(e)?i=Math.ceil(r):(nC(e),i=Math.ceil(r*so.value))),i<=0?(Gt.value.add(t),Xr(),Qn(),{ok:!0,instant:!0}):(je.value={id:t,startedAtMs:s,endsAtMs:s+i*1e3},Qn(),{ok:!0,instant:!1})}function uC(t){if(Da(t))return{ok:!1,reason:"COMING_SOON"};const e=pl(er.value);if(hh(t))return{ok:!1,reason:"ALREADY_DONE"};if(je.value?.id===t)return{ok:!1,reason:"ALREADY_ACTIVE"};if(Ke.value.includes(t))return{ok:!0,queued:!0,alreadyQueued:!0};if(je.value){if(Ke.value.length>=e)return{ok:!1,reason:"QUEUE_FULL"};const n=fh(t);return n!=="available"?{ok:!1,reason:n.toUpperCase()}:(Ke.value=[...Ke.value,t].slice(0,e),Qn(),{ok:!0,queued:!0})}return Ny(t)}function hC(t){const e=Ke.value.slice(),n=e.filter(s=>s!==t);n.length!==e.length&&(Ke.value=n,Qn())}function fC(){Ke.value.length!==0&&(Ke.value=[],Qn())}function dC(t){if(!je.value||je.value.id!==t||!Eo.value)return 0;const e=je.value.endsAtMs-je.value.startedAtMs;if(e<=0)return 0;const n=dl()-je.value.startedAtMs;return Math.max(0,Math.min(100,n/e*100))}function pC(t){if(!je.value||je.value.id!==t||!Eo.value)return"00h 00m 00s";const e=Math.max(0,je.value.endsAtMs-dl()),n=Math.floor(e/1e3),s=String(Math.floor(n/3600)).padStart(2,"0"),r=String(Math.floor(n%3600/60)).padStart(2,"0"),i=String(n%60).padStart(2,"0");return`${s}h ${r}m ${i}s`}async function mC(t){if(t){Ft&&(clearTimeout(Ft),Ft=null),nn(),or.value=t,Kc.value=!0,Un.value=!1;try{const e=Pa(Na,"users",t,"research","state"),n=await fy(e);Is=!0,n.exists()?(lC(n.data()),console.log("useResearch: Firebase   ")):(console.log("useResearch: Firebase   ( )"),Xr()),Is=!1,Un.value=!0,To(!0)}catch(e){Is=!1,console.error("useResearch: Firebase  :",e),Un.value=!1,nn()}finally{Kc.value=!1}}}function gC(){Z1(),Wn.value=null,Gt.value=new Set,je.value=null,Ke.value=[],Va.value="NONE",Oa.value={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1},lh.value=0,so.value=1,er.value=1,Xr()}sm(()=>{if(Is)return;let t=!1;if(je.value?.id&&Da(je.value.id)&&(je.value=null,t=!0),Array.isArray(Ke.value)&&Ke.value.length>0){const e=Ke.value.filter(n=>!Da(n));e.length!==Ke.value.length&&(Ke.value=e,t=!0)}t&&Qn()});sm(()=>{if(!Eo.value)return;const t=dl();if(je.value&&t>=Number(je.value.endsAtMs||0)){const e=je.value.id;if(je.value=null,Gt.value.add(e),Xr(),Ke.value.length>0){const[n,...s]=Ke.value;Ke.value=s;const r=Ny(n);r?.ok||console.warn("useResearch: queued next start failed:",n,r?.reason)}Qn()}});function Jr(){const t=ge(()=>!or.value||Un.value),e=ge(()=>pl(er.value)),n=ge(()=>Ke.value.length),s=ge(()=>n.value>=e.value);return{catalog:Ps,visibleCatalog:sC,firstUnlockTransportId:Wn,needsFirstUnlockSelection:iC,firstUnlockCandidates:oC,setFirstUnlockTransport:cC,completedIds:Gt,activeResearch:je,queuedResearchIds:Ke,queueReserveLevel:er,queueLimit:e,queueCount:n,isQueueFull:s,unlockedTransportTiers:Ey,incomeMultiplier:Ty,researchSpeedLevel:lh,researchDurationMultiplier:so,cityScale:Va,unlockedFeatures:Oa,hasFeature:o=>!!Oa.value?.[o],cityScaleAtLeast:o=>La(Va.value)>=La(o),getStatus:fh,startResearch:uC,cancelQueuedResearch:hC,cancelAllQueuedResearch:fC,getResearchProgress:dC,getResearchRemainingTime:pC,isKstTimeReady:vy,loadForUser:mC,clearUserState:gC,saveNow:dh,scheduleSave:Qn,saveEnabled:Ws,setSaveEnabled:W1,autoSaveEnabled:ro,autoSaveBase:ch,autoSaveIntervalMin:io,setAutoSaveEnabled:Q1,setAutoSaveBase:Y1,setAutoSaveIntervalMin:X1,autoSaveRunning:uh,lastAutoSaveAtMs:Iy,isLoadingFirebaseData:Kc,isSavingFirebaseData:Gc,isStateLoaded:Un,isHydrated:t}}const Dy=Ae(null),vi=Ae(null),Vy=Ae(!1);let Ap=!1;if(!Ap){const t=Jr();lR(Hc,async e=>{Dy.value=e||null,Vy.value=!0;try{e?.uid?(console.log("   :  ",e.displayName||e.email),await t.loadForUser(e.uid)):(console.log("   :  "),t.clearUserState())}catch(n){console.error("useAuth: research sync failed:",n)}}),Ap=!0}function ph(){return{user:Dy,authError:vi,authReady:Vy,signInWithGoogle:async()=>{const n=new On;try{const s=await PR(Hc,n);return vi.value=null,console.log("useAuth:  !",s.user.displayName||s.user.email),s.user}catch(s){throw vi.value=s,console.error("useAuth:  :",s),s}},signOutUser:async()=>{try{return await cR(Hc),vi.value=null,console.log("useAuth:  !"),!0}catch(n){throw vi.value=n,console.error("useAuth:  :",n),n}}}}const Zt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},_C={class:"top-bar-area"},yC={class:"top-bar-content"},vC={class:"kst-time-display"},EC={class:"time-value"},TC={class:"user-auth-area"},IC={__name:"TheTopBar",setup(t){Ae(1e6);const{kstString:e}=Mm(),{user:n,signInWithGoogle:s,signOutUser:r}=ph();return(i,o)=>(z(),Y("header",_C,[T("div",yC,[o[2]||(o[2]=T("div",{class:"logo-area"},[T("h1",{class:"game-title"},"RCTS")],-1)),T("div",vC,[o[1]||(o[1]=T("span",{class:"time-label"},"KST",-1)),T("span",EC,ce(tt(e)),1)]),T("div",TC,[T("button",{class:"login-btn",onClick:o[0]||(o[0]=l=>tt(n)?tt(r)():tt(s)())},ce(tt(n)?"":""),1)])])]))}},AC=Zt(IC,[["__scopeId","data-v-629df092"]]),wC=["bus","truck","rail","plane","ship","spaceship"],sa={bus:{name:"",icon:""},truck:{name:"",icon:""},rail:{name:"",icon:""},plane:{name:"",icon:""},ship:{name:"",icon:""},spaceship:{name:"",icon:""}};function jo(t,e=1){const n=Number(e||1);return Ps.find(r=>(r.effects||[]).some(i=>i.type==="UNLOCK_TRANSPORT_TIER"&&i.transportId===t&&Number(i.tier||1)===n))?.id??null}function RC(){const t=Ps.find(s=>(s.effects||[]).some(r=>r?.type==="UNLOCK_STARTER_FLEET_PREVIEW"));if(!t)return{researchId:null,config:null};const e=(t.effects||[]).find(s=>s?.type==="UNLOCK_STARTER_FLEET_PREVIEW")||null,n=e?{transports:Array.isArray(e.transports)?e.transports.filter(Boolean):[],runTimeMinSec:Number(e.runTimeMinSec||0),runTimeMaxSec:Number(e.runTimeMaxSec||0),countPerTransport:Number(e.countPerTransport||1)}:null;return{researchId:t.id,config:n}}function SC(){const t=Jr(),e=ge(()=>RC()),n=ge(()=>e.value.researchId),s=ge(()=>e.value.config),r=ge(()=>{const m=n.value;return m?!!t.completedIds.value?.has?.(m):!1}),i=ge(()=>{const m=s.value;return m?new Set(m.transports||[]):new Set}),o=ge(()=>{const m=i.value,_=r.value;return wC.map(k=>{const D=sa[k]||{},V=D.name??k,U=D.icon??"",Q=Number(t.unlockedTransportTiers.value?.[k]||0)<1,G=jo(k,1),de=!!G&&t.activeResearch.value?.id===G;let Ee=null,w=null;de&&t.activeResearch.value&&(Ee=new Date(t.activeResearch.value.startedAtMs),w=new Date(t.activeResearch.value.endsAtMs));const y=m.has(k),I=!!_&&!Q&&y;return{id:k,name:V,icon:U,locked:Q,isResearching:de,researchStartTime:Ee,researchFinishTime:w,unlockResearchId:G,previewEligible:y,previewActive:I,previewLabel:I?"  ":null}})}),l=ge(()=>o.value.filter(m=>m.locked)),c=ge(()=>o.value.filter(m=>!m.locked));function h(m){const _=jo(m,1);_&&t.startResearch(_)}function f(m){const _=jo(m,1);return _?t.getResearchProgress(_):0}function p(m){const _=jo(m,1);return _?t.getResearchRemainingTime(_):"00h 00m 00s"}return{transportTypes:o,lockedTransports:l,unlockedTransports:c,unlockTransport:h,getResearchProgress:f,getResearchRemainingTime:p,previewResearchId:n,previewConfig:s,previewStarterFleetUnlocked:r}}const wp=Ae(null);function bC(){return{selectedTransportId:wp,setSelectedTransportId:e=>{wp.value=e}}}const CC={class:"layout-area left-area"},PC={class:"left-panel-wrapper"},kC={class:"transport-list-container"},NC={key:0,class:"transport-list"},DC=["onClick"],VC={class:"transport-icon"},OC={class:"transport-name"},LC={key:1,class:"transport-details-placeholder"},xC={class:"transport-details-container"},MC={class:"panel-heading"},FC={key:0,class:"transport-details-placeholder"},UC={key:1,class:"details-content"},BC={key:0,class:"lock-box"},$C={key:1,class:"preview-box"},jC={class:"details-placeholder"},qC={class:"resource-container"},HC={key:0,class:"placeholder-text"},KC={key:1},GC={__name:"TheLeftArea",setup(t){const{transportTypes:e,unlockedTransports:n,previewStarterFleetUnlocked:s}=SC(),r=Jr(),i=ge(()=>!!r.completedIds.value?.has?.("sys_unlock_finance")),{selectedTransportId:o,setSelectedTransportId:l}=bC(),c=ge(()=>n.value||[]),h=ge(()=>o.value&&(e.value||[]).find(f=>f.id===o.value)||null);return(f,p)=>(z(),Y("div",CC,[T("div",PC,[T("div",kC,[p[2]||(p[2]=T("h3",{class:"panel-heading"},"   ",-1)),c.value.length>0?(z(),Y("ul",NC,[(z(!0),Y(et,null,os(c.value,m=>(z(),Y("li",{key:m.id,class:br(["transport-item",{active:tt(o)===m.id}]),onClick:_=>tt(l)(m.id)},[T("span",VC,ce(m.icon),1),T("span",OC,ce(m.name),1),p[0]||(p[0]=T("span",{class:"transport-count"},"0",-1))],10,DC))),128))])):(z(),Y("div",LC,[...p[1]||(p[1]=[T("p",{class:"placeholder-text"},"    .   .",-1)])]))]),T("div",xC,[T("h3",MC,ce(h.value?`${h.value.name}  `:"   "),1),h.value?(z(),Y("div",UC,[T("p",null,[p[4]||(p[4]=T("strong",null,":",-1)),st(" "+ce(h.value.icon),1)]),T("p",null,[p[5]||(p[5]=T("strong",null,":",-1)),st(" "+ce(h.value.name),1)]),p[9]||(p[9]=T("p",null,[T("strong",null,"  :"),st(" 0")],-1)),T("p",null,[p[6]||(p[6]=T("strong",null,"  :",-1)),st(" "+ce(h.value.locked?"":""),1)]),p[10]||(p[10]=T("hr",{class:"divider"},null,-1)),tt(s)?(z(),Y("div",$C,[...p[8]||(p[8]=[T("p",{class:"preview-title"},"   ",-1),T("p",{class:"preview-desc"},[st("     .   "),T("strong",null,"//"),st(" . ")],-1),T("div",{class:"preview-placeholder"},[T("p",{class:"placeholder-text"},"    ()")],-1)])])):(z(),Y("div",BC,[...p[7]||(p[7]=[T("p",{class:"lock-title"},"    ",-1),T("p",{class:"lock-desc"},[st("  ()     "),T("strong",null,"  "),st(" . ")],-1),T("p",{class:"lock-desc subtle"}," (    , //   .) ",-1)])])),T("p",jC,"  "+ce(h.value.name)+"       . ",1)])):(z(),Y("div",FC,[...p[3]||(p[3]=[T("p",{class:"placeholder-text"},"     .",-1)])]))]),T("div",qC,[p[11]||(p[11]=T("h3",{class:"panel-heading"},"   ",-1)),i.value?(z(),Y("p",KC,": $10,000")):(z(),Y("p",HC," ."))])])]))}},zC=Zt(GC,[["__scopeId","data-v-031ea4db"]]),WC={},QC={class:"layout-area center-area"},YC={class:"center-content-wrapper"},XC={class:"main-content-nav"},JC={class:"main-content-display"};function ZC(t,e){const n=ji("router-link"),s=ji("router-view");return z(),Y("div",QC,[T("div",YC,[T("nav",XC,[T("ul",null,[T("li",null,[$e(n,{to:"/home/research"},{default:gn(()=>[...e[0]||(e[0]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/vehicles"},{default:gn(()=>[...e[1]||(e[1]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/line"},{default:gn(()=>[...e[2]||(e[2]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/construction"},{default:gn(()=>[...e[3]||(e[3]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/finance"},{default:gn(()=>[...e[4]||(e[4]=[st("",-1)])]),_:1})]),T("li",null,[$e(n,{to:"/home/settings"},{default:gn(()=>[...e[5]||(e[5]=[st("",-1)])]),_:1})])])]),T("div",JC,[$e(s)])])])}const eP=Zt(WC,[["render",ZC],["__scopeId","data-v-0703c5ab"]]),tP={class:"game-wrapper"},nP={class:"main-layout-horizontal"},sP={__name:"HomeView",setup(t){return(e,n)=>(z(),Y("div",tP,[$e(AC),T("div",nP,[$e(zC),$e(eP)])]))}},rP=Zt(sP,[["__scopeId","data-v-7c99d32f"]]),iP={class:"research-page"},oP={class:"research-header"},aP={class:"status-row"},lP={key:0,class:"badge ok"},cP={class:"badge"},uP={class:"panel"},hP={class:"panel-head"},fP={class:"panel-actions"},dP=["disabled"],pP={key:0,class:"empty"},mP={key:1,class:"empty"},gP={key:2,class:"list"},_P={class:"card"},yP={class:"card-mid"},vP={class:"name-row"},EP={class:"name"},TP={class:"meta"},IP={class:"pill time"},AP={key:0,class:"pill fixed"},wP={key:0,class:"hint2"},RP={class:"progress-area"},SP={class:"progress-bar"},bP={class:"progress-info"},CP={class:"mono"},PP={key:1,class:"queue-row"},kP={class:"queue-title"},NP={key:2,class:"queue-list"},DP={class:"mono"},VP=["onClick"],OP={class:"panel"},LP={key:0,class:"empty"},xP={key:1,class:"empty"},MP={key:2,class:"list"},FP={class:"card-left"},UP={class:"icon"},BP={class:"card-mid"},$P={class:"name-row"},jP={class:"name"},qP={key:0,class:"hint2"},HP={class:"card-right"},KP=["disabled","onClick"],GP={class:"panel"},zP={key:0,class:"empty"},WP={key:1,class:"empty"},QP={key:2,class:"list"},YP={class:"card-mid"},XP={class:"name-row"},JP={class:"name"},ZP={class:"meta"},ek={class:"pill time"},tk={key:0,class:"pill"},nk={key:1,class:"pill"},sk={key:0,class:"hint2"},rk={class:"card-right"},ik=["disabled","onClick"],ok={class:"panel"},ak={key:0,class:"empty"},lk={key:1,class:"empty"},ck={key:2,class:"list"},uk={class:"card-mid"},hk={class:"name-row"},fk={class:"name"},dk={class:"meta"},pk={class:"pill time"},mk={key:0,class:"pill"},gk={key:1,class:"pill"},_k={key:0,class:"hint2"},yk={class:"card-right"},vk=["disabled","onClick"],Ek={class:"panel"},Tk={key:0,class:"empty"},Ik={key:1,class:"empty"},Ak={key:2,class:"list"},wk={class:"card-left"},Rk={class:"icon"},Sk={class:"card-mid"},bk={class:"name-row"},Ck={class:"name"},Pk={class:"meta"},kk={class:"pill time"},Nk={key:0,class:"pill"},Dk={key:1,class:"pill"},Vk={key:0,class:"hint2"},Ok={class:"card-right"},Lk=["disabled","onClick"],xk={class:"panel"},Mk={key:0,class:"empty"},Fk={key:1,class:"empty"},Uk={key:2,class:"list"},Bk={class:"card-mid"},$k={class:"name-row"},jk={class:"name"},qk={class:"meta"},Hk={class:"pill time"},Kk={key:0,class:"pill"},Gk={key:1,class:"pill"},zk={key:0,class:"hint2"},Wk={class:"card-right"},Qk=["disabled","onClick"],Yk={class:"panel"},Xk={key:0,class:"empty"},Jk={key:1,class:"empty"},Zk={key:2,class:"list"},eN={class:"card-mid"},tN={class:"name-row"},nN={class:"name"},sN={class:"meta"},rN={class:"pill lock"},iN={class:"pill time"},oN={key:0,class:"pill fixed"},aN={key:0,class:"hint2"},lN={key:1,class:"hint2"},cN={key:2,class:"hint2"},uN={__name:"ResearchView",setup(t){const e=Jr(),n=ge(()=>e.isHydrated.value),s=e.firstUnlockTransportId,r=e.needsFirstUnlockSelection,i=e.firstUnlockCandidates,o=ge(()=>e.activeResearch.value),l=ge(()=>e.queuedResearchIds.value||[]),c=ge(()=>e.queueReserveLevel.value||1),h=ge(()=>e.queueLimit.value||1),f=ge(()=>e.queueCount.value||0),p=ge(()=>e.isQueueFull.value),m=ge(()=>!!e.saveEnabled.value&&!!e.isStateLoaded.value&&!e.isSavingFirebaseData.value);function _(q){return sa[q]?.name??q}function k(q){return e.catalog.find(X=>X.id===q)||null}function D(q){return k(q)?.title??q}function V(q){return q?q.timePolicy==="FIXED"?!0:q.type==="SYSTEM":!1}function U(q){return V(k(q))}function B(q){const X=Number(q?.durationSec||0);if(!X)return"";const W=Math.round(X/3600);return V(q)?`: ${W}`:`: ${W}`}function Q(q){return B(k(q))}function G(q){return(q.effects||[]).find(W=>W?.type==="UNLOCK_TRANSPORT_TIER"&&Number(W?.tier||1)===1)?.transportId||null}function de(q,X){const W=G(q);return!W||!X.has(W)?null:{key:`first-${W}`,transportId:W,icon:sa[W]?.icon??"",title:`${sa[W]?.name??W}  `,desc:" 1  ."}}const Ee=ge(()=>{const q=e.visibleCatalog.value||[];if(s.value)return[];const X=new Set((i.value||[]).map(W=>W.id));return q.map(W=>de(W,X)).filter(Boolean)}),w=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&(q.type==="SYSTEM"||q.timePolicy==="FIXED")).map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),y=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="CITY").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),I=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="TRANSPORT").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q),icon:""}))),S=ge(()=>(e.visibleCatalog.value||[]).filter(q=>e.getStatus(q.id)==="available"&&q.type==="EFFICIENCY").map(q=>({id:q.id,title:q.title,desc:q.desc,durationLabel:B(q)}))),R=ge(()=>(e.visibleCatalog.value||[]).map(q=>{const X=e.getStatus(q.id);return X!=="locked"&&X!=="comingSoon"?null:{id:q.id,status:X,statusLabel:X==="comingSoon"?"":"",title:q.title??q.id,desc:q.desc??"",durationLabel:B(q),fixed:V(q),lockReason:"  ."}}).filter(Boolean));function b(q){return l.value.includes(q)}function E(q){return o.value?b(q)?"":p.value?" ":"":" "}function ie(q){e.setFirstUnlockTransport(q)}function te(q){e.startResearch(q)}function Ne(q){e.cancelQueuedResearch(q)}function Ve(){e.cancelAllQueuedResearch()}function we(q){return e.getResearchProgress(q)}function Tt(q){return e.getResearchRemainingTime(q)}function zt(q){e.saveNow(q)}function Vt(){console.log("[ResearchView Debug]"),console.log("queueReserveLevel:",c.value),console.log("queueLimit:",h.value),console.log("queuedResearchIds:",l.value)}return(q,X)=>(z(),Y("div",iP,[T("header",oP,[X[1]||(X[1]=T("h1",{class:"title"},"",-1)),X[2]||(X[2]=T("p",{class:"desc"},"    1 .        . ",-1)),T("div",aP,[T("span",{class:br(["badge",{ok:n.value}])},ce(n.value?"  ":"  "),3),T("span",{class:br(["badge",{warn:tt(r)}])},ce(tt(r)?"  ()":"  "),3),tt(s)?(z(),Y("span",lP,"  : "+ce(_(tt(s))),1)):dt("",!0),T("span",cP," : "+ce(f.value)+"/"+ce(h.value)+" (Lv"+ce(c.value)+") ",1)])]),T("section",uP,[T("div",hP,[X[3]||(X[3]=T("h2",{class:"panel-title"}," ",-1)),T("div",fP,[T("button",{class:"btn",disabled:!m.value,onClick:X[0]||(X[0]=W=>zt({reason:"manual"}))},"   ",8,dP),T("button",{class:"btn ghost",onClick:Vt},"   ")])]),n.value?o.value?(z(),Y("div",gP,[T("article",_P,[X[6]||(X[6]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",yP,[T("div",vP,[T("div",EP,ce(D(o.value.id)),1),T("div",TP,[X[4]||(X[4]=T("span",{class:"pill"},"",-1)),T("span",IP,ce(Q(o.value.id)),1),U(o.value.id)?(z(),Y("span",AP,"")):dt("",!0)])]),U(o.value.id)?(z(),Y("div",wP,"    ,     . ")):dt("",!0),T("div",RP,[T("div",SP,[T("div",{class:"progress-fill",style:$a({width:we(o.value.id)+"%"})},null,4)]),T("div",bP,[T("span",null,ce(we(o.value.id).toFixed(1))+"%",1),T("span",CP,": "+ce(Tt(o.value.id)),1)])]),l.value.length>0?(z(),Y("div",PP,[X[5]||(X[5]=T("span",{class:"pill"},"",-1)),T("span",kP,ce(l.value.length)+" ",1),T("button",{class:"btn small ghost",onClick:Ve}," ")])):dt("",!0),l.value.length>0?(z(),Y("div",NP,[(z(!0),Y(et,null,os(l.value,W=>(z(),Y("div",{key:W,class:"queue-item"},[T("span",DP,ce(D(W)),1),T("button",{class:"btn small ghost",onClick:ut=>Ne(W)},"",8,VP)]))),128))])):dt("",!0)]),X[7]||(X[7]=T("div",{class:"card-right"},[T("button",{class:"btn primary",disabled:""},"")],-1))])])):(z(),Y("div",mP,"    .     . ")):(z(),Y("div",pP," "))]),T("section",OP,[X[9]||(X[9]=T("h2",{class:"panel-title"}," ()",-1)),X[10]||(X[10]=T("p",{class:"panel-desc"},"  1   .       . ",-1)),n.value?tt(r)?(z(),Y("div",MP,[(z(!0),Y(et,null,os(Ee.value,W=>(z(),Y("article",{key:W.key,class:"card"},[T("div",FP,[T("div",UP,ce(W.icon),1)]),T("div",BP,[T("div",$P,[T("div",jP,ce(W.title),1),X[8]||(X[8]=T("div",{class:"meta"},[T("span",{class:"pill time"},"")],-1))]),W.desc?(z(),Y("div",qP,ce(W.desc),1)):dt("",!0)]),T("div",HP,[T("button",{class:"btn primary",disabled:!!o.value||!n.value,onClick:ut=>ie(W.transportId)},"   ",8,KP)])]))),128))])):(z(),Y("div",xP,"   . ")):(z(),Y("div",LP," "))]),T("section",GP,[X[14]||(X[14]=T("h2",{class:"panel-title"},"  ( 8)",-1)),X[15]||(X[15]=T("p",{class:"panel-desc"},"   (////) .         . ",-1)),n.value?w.value.length===0?(z(),Y("div",WP,"     .")):(z(),Y("div",QP,[(z(!0),Y(et,null,os(w.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[13]||(X[13]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",YP,[T("div",XP,[T("div",JP,ce(W.title),1),T("div",ZP,[T("span",ek,ce(W.durationLabel),1),X[11]||(X[11]=T("span",{class:"pill fixed"},"",-1)),o.value?(z(),Y("span",tk,"")):(z(),Y("span",nk,""))])]),W.desc?(z(),Y("div",sk,ce(W.desc),1)):dt("",!0),X[12]||(X[12]=T("div",{class:"hint2"},"        .",-1))]),T("div",rk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,ik)])]))),128))])):(z(),Y("div",zP," "))]),T("section",ok,[X[17]||(X[17]=T("h2",{class:"panel-title"}," /",-1)),X[18]||(X[18]=T("p",{class:"panel-desc"},"           . (//)   . ",-1)),n.value?y.value.length===0?(z(),Y("div",lk,"     .")):(z(),Y("div",ck,[(z(!0),Y(et,null,os(y.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[16]||(X[16]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",uk,[T("div",hk,[T("div",fk,ce(W.title),1),T("div",dk,[T("span",pk,ce(W.durationLabel),1),o.value?(z(),Y("span",mk,"")):(z(),Y("span",gk,""))])]),W.desc?(z(),Y("div",_k,ce(W.desc),1)):dt("",!0)]),T("div",yk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,vk)])]))),128))])):(z(),Y("div",ak," "))]),T("section",Ek,[X[19]||(X[19]=T("h2",{class:"panel-title"}," ",-1)),X[20]||(X[20]=T("p",{class:"panel-desc"},"  1   ,     . ",-1)),n.value?I.value.length===0?(z(),Y("div",Ik,"    .")):(z(),Y("div",Ak,[(z(!0),Y(et,null,os(I.value,W=>(z(),Y("article",{key:W.id,class:"card"},[T("div",wk,[T("div",Rk,ce(W.icon),1)]),T("div",Sk,[T("div",bk,[T("div",Ck,ce(W.title),1),T("div",Pk,[T("span",kk,ce(W.durationLabel),1),o.value?(z(),Y("span",Nk,"")):(z(),Y("span",Dk,""))])]),W.desc?(z(),Y("div",Vk,ce(W.desc),1)):dt("",!0)]),T("div",Ok,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,Lk)])]))),128))])):(z(),Y("div",Tk," "))]),T("section",xk,[X[22]||(X[22]=T("h2",{class:"panel-title"}," ",-1)),X[23]||(X[23]=T("p",{class:"panel-desc"},"     .  ( 8)  . ",-1)),n.value?S.value.length===0?(z(),Y("div",Fk,"    .")):(z(),Y("div",Uk,[(z(!0),Y(et,null,os(S.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[21]||(X[21]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",Bk,[T("div",$k,[T("div",jk,ce(W.title),1),T("div",qk,[T("span",Hk,ce(W.durationLabel),1),o.value?(z(),Y("span",Kk,"")):(z(),Y("span",Gk,""))])]),W.desc?(z(),Y("div",zk,ce(W.desc),1)):dt("",!0)]),T("div",Wk,[T("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!b(W.id),onClick:ut=>te(W.id)},ce(E(W.id)),9,Qk)])]))),128))])):(z(),Y("div",Mk," "))]),T("section",Yk,[X[26]||(X[26]=T("h2",{class:"panel-title"},"  ",-1)),X[27]||(X[27]=T("p",{class:"panel-desc"}," 2(2)  ,       . ",-1)),n.value?R.value.length===0?(z(),Y("div",Jk,"/  .")):(z(),Y("div",Zk,[(z(!0),Y(et,null,os(R.value,W=>(z(),Y("article",{key:W.id,class:"card"},[X[24]||(X[24]=T("div",{class:"card-left"},[T("div",{class:"icon"},"")],-1)),T("div",eN,[T("div",tN,[T("div",nN,ce(W.title),1),T("div",sN,[T("span",rN,ce(W.statusLabel),1),T("span",iN,ce(W.durationLabel),1),W.fixed?(z(),Y("span",oN,"")):dt("",!0)])]),W.desc?(z(),Y("div",aN,ce(W.desc),1)):dt("",!0),W.status==="comingSoon"?(z(),Y("div",lN,".")):W.status==="locked"?(z(),Y("div",cN,ce(W.lockReason||"  ."),1)):dt("",!0)]),X[25]||(X[25]=T("div",{class:"card-right"},[T("button",{class:"btn primary",disabled:""},"")],-1))]))),128))])):(z(),Y("div",Xk," "))])]))}},hN=Zt(uN,[["__scopeId","data-v-3243713e"]]),fN={class:"vehicles-page-container"},dN={__name:"VehiclesView",setup(t){return(e,n)=>(z(),Y("div",fN,[...n[0]||(n[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"       .   ,     . ",-1),T("p",{class:"placeholder-text"},"     . (  )",-1)])]))}},pN=Zt(dN,[["__scopeId","data-v-ab2e0e12"]]),mN={},gN={class:"line-page-container"};function _N(t,e){return z(),Y("div",gN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"      .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const yN=Zt(mN,[["render",_N],["__scopeId","data-v-986441d8"]]),vN={},EN={class:"construction-page-container"};function TN(t,e){return z(),Y("div",EN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"     .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const IN=Zt(vN,[["render",TN],["__scopeId","data-v-bbfe3657"]]),AN={},wN={class:"finance-page-container"};function RN(t,e){return z(),Y("div",wN,[...e[0]||(e[0]=[T("h2",{class:"page-title"},"   ",-1),T("p",{class:"page-description"},"     .",-1),T("p",{class:"placeholder-text"},"(     .)",-1)])])}const SN=Zt(AN,[["render",RN],["__scopeId","data-v-eb5d7345"]]),bN={},CN={class:"settings-shell"},PN={class:"settings-nav"},kN={class:"settings-content"};function NN(t,e){return z(),Y("div",CN,[T("aside",PN,[hf(t.$slots,"nav",{},void 0)]),T("section",kN,[hf(t.$slots,"content",{},void 0)])])}const DN=Zt(bN,[["render",NN],["__scopeId","data-v-c3b57252"]]),VN={},ON={class:"settings-nav-inner"},LN={class:"menu"};function xN(t,e){const n=ji("router-link");return z(),Y("nav",ON,[e[1]||(e[1]=T("h3",{class:"title"},"",-1)),T("ul",LN,[T("li",null,[$e(n,{to:{name:"DataManager"}},{default:gn(()=>[...e[0]||(e[0]=[st("   ",-1)])]),_:1})])])])}const MN=Zt(VN,[["render",xN],["__scopeId","data-v-96f4cf08"]]),FN={__name:"SettingsView",setup(t){return(e,n)=>{const s=ji("router-view");return z(),kr(DN,null,{nav:gn(()=>[$e(MN)]),content:gn(()=>[$e(s)]),_:1})}}},UN={class:"data-manager"},BN={class:"card"},$N={class:"kv"},jN={class:"v"},qN={key:0,class:"hint"},HN={class:"card"},KN={class:"row"},GN=["disabled"],zN=["disabled"],WN=["disabled"],QN={class:"autosave"},YN={class:"autosave-controls"},XN={class:"radio"},JN=["disabled"],ZN={class:"radio"},eD=["disabled"],tD={class:"radio"},nD=["disabled"],sD={key:0,class:"hint"},rD={key:0,class:"message"},iD={key:1,class:"preview"},oD={class:"preview-head"},aD={class:"summary"},lD={class:"summary-item"},cD={class:"summary-v"},uD={class:"summary-item"},hD={class:"summary-v"},fD={class:"summary-item"},dD={class:"summary-v"},pD={key:0,class:"pre"},mD={key:2,class:"hint"},gD={class:"modal"},_D={class:"check"},yD={class:"row"},vD=["disabled"],ED=["disabled"],TD={__name:"DataManagerPanel",setup(t){const e=ph(),n=ge(()=>(e?.user?.value??e?.currentUser?.value??e?.firebaseUser?.value??e?.user??e?.currentUser??null)?.uid??null),{saveNow:s,isSavingFirebaseData:r,autoSaveEnabled:i,autoSaveBase:o,autoSaveIntervalMin:l,setAutoSaveEnabled:c,setAutoSaveBase:h,setAutoSaveIntervalMin:f,autoSaveRunning:p}=Jr(),m=ge(()=>r.value),_=Ae(!1),k=Ae(""),D=Ae(!1),V=Ae(null),U=Ae(!1);function B(ie){return JSON.stringify(ie,null,2)}function Q(ie){if(!ie)return"-";try{return typeof ie?.toDate=="function"?ie.toDate().toLocaleString():ie instanceof Date?ie.toLocaleString():typeof ie=="number"?new Date(ie).toLocaleString():String(ie)}catch{return String(ie)}}const G=Ae("off");function de(){if(!i.value){G.value="off";return}const ie=Number(o.value),te=Number(l.value);ie===10&&te===10?G.value="10":ie===5&&te===5?G.value="5":ie===10?G.value="10":G.value="5"}Ks([i,o,l],()=>de(),{immediate:!0}),Ks(G,ie=>{if(n.value){if(ie==="off"){c(!1);return}if(ie==="5"){h(5),f(5),c(!0);return}ie==="10"&&(h(10),f(10),c(!0))}});async function Ee(){if(n.value){k.value="";try{await s({reason:"manual-ui"}),k.value=" ."}catch(ie){console.error("DataManager: save failed",ie),k.value=` : ${String(ie?.message??ie)}`}}}async function w(){if(n.value){_.value=!0,k.value="",D.value=!1,V.value=null,U.value=!1;try{const ie=Pa(Na,"users",n.value,"research","state"),te=await fy(ie);te.exists()?(V.value=te.data(),D.value=!0,k.value="  ."):k.value="  . ( )"}catch(ie){console.error("DataManager: load failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{_.value=!1}}}const y=Ae(!1),I=Ae(!1),S=Ae("");function R(){y.value=!0,I.value=!1,S.value=""}function b(){y.value=!1}async function E(){if(n.value){_.value=!0,k.value="";try{const ie=Pa(Na,"users",n.value,"research","state");await q1(ie),D.value=!1,V.value=null,U.value=!1,k.value=" .   .",b()}catch(ie){console.error("DataManager: delete failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{_.value=!1}}}return(ie,te)=>(z(),Y("div",UN,[te[22]||(te[22]=T("header",{class:"header"},[T("div",null,[T("h1",{class:"title"}," "),T("p",{class:"desc"},"   ,        . ")])],-1)),T("section",BN,[te[7]||(te[7]=T("h2",{class:"card-title"}," ",-1)),T("div",$N,[te[6]||(te[6]=T("div",{class:"k"}," ",-1)),T("div",jN,ce(n.value?"":"()"),1)]),n.value?dt("",!0):(z(),Y("p",qN," Firestore  /   . "))]),T("section",HN,[te[16]||(te[16]=T("h2",{class:"card-title"}," ",-1)),T("div",KN,[T("button",{class:"btn",onClick:Ee,disabled:!n.value||_.value||m.value},"  ",8,GN),T("button",{class:"btn",onClick:w,disabled:!n.value||_.value},"   ",8,zN),T("button",{class:"btn danger",onClick:R,disabled:!n.value||_.value},"   ",8,WN)]),T("div",QN,[te[11]||(te[11]=T("div",{class:"autosave-title"},"",-1)),T("div",YN,[T("label",XN,[mi(T("input",{type:"radio",name:"autosave",value:"off","onUpdate:modelValue":te[0]||(te[0]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,JN),[[Ul,G.value]]),te[8]||(te[8]=T("span",null,"",-1))]),T("label",ZN,[mi(T("input",{type:"radio",name:"autosave",value:"5","onUpdate:modelValue":te[1]||(te[1]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,eD),[[Ul,G.value]]),te[9]||(te[9]=T("span",null,"5",-1))]),T("label",tD,[mi(T("input",{type:"radio",name:"autosave",value:"10","onUpdate:modelValue":te[2]||(te[2]=Ne=>G.value=Ne),disabled:!n.value||_.value},null,8,nD),[[Ul,G.value]]),te[10]||(te[10]=T("span",null,"10",-1))])]),n.value&&tt(i)&&tt(p)?(z(),Y("p",sD,"    (KST   ) ")):dt("",!0)]),k.value?(z(),Y("p",rD,ce(k.value),1)):dt("",!0),D.value?(z(),Y("div",iD,[T("div",oD,[te[12]||(te[12]=T("h3",{class:"preview-title"},"    ",-1)),T("button",{class:"btn small",onClick:te[3]||(te[3]=Ne=>U.value=!U.value)},ce(U.value?"":""),1)]),T("div",aD,[T("div",lD,[te[13]||(te[13]=T("div",{class:"summary-k"},"",-1)),T("div",cD,ce(V.value?.version??"-"),1)]),T("div",uD,[te[14]||(te[14]=T("div",{class:"summary-k"},"  ",-1)),T("div",hD,ce(V.value?.transports?.length??0),1)]),T("div",fD,[te[15]||(te[15]=T("div",{class:"summary-k"},"",-1)),T("div",dD,ce(Q(V.value?.updatedAt)),1)])]),U.value?(z(),Y("pre",pD,ce(B(V.value)),1)):dt("",!0)])):(z(),Y("p",mD,"   ."))]),y.value?(z(),Y("div",{key:0,class:"modal-backdrop",onClick:IT(b,["self"])},[T("div",gD,[te[18]||(te[18]=T("h2",{class:"modal-title"}," ?",-1)),te[19]||(te[19]=T("p",{class:"modal-desc danger-text"},"     .  ? ",-1)),te[20]||(te[20]=T("p",{class:"modal-desc"},[st("   ,  "),T("b",null," "),st(". ")],-1)),T("label",_D,[mi(T("input",{type:"checkbox","onUpdate:modelValue":te[4]||(te[4]=Ne=>I.value=Ne)},null,512),[[vT,I.value]]),te[17]||(te[17]=T("span",null,"      .",-1))]),te[21]||(te[21]=T("p",{class:"modal-desc"},[st("   "),T("b",null,"DELETE"),st(" . ")],-1)),mi(T("input",{class:"input","onUpdate:modelValue":te[5]||(te[5]=Ne=>S.value=Ne),placeholder:"DELETE"},null,512),[[yT,S.value]]),T("div",yD,[T("button",{class:"btn",onClick:b,disabled:_.value},"",8,vD),T("button",{class:"btn danger",onClick:E,disabled:_.value||!I.value||S.value!=="DELETE"},"   ",8,ED)])])])):dt("",!0)]))}},ID=Zt(TD,[["__scopeId","data-v-17233cc7"]]),AD={__name:"DataManagerView",setup(t){return(e,n)=>(z(),kr(ID))}},wD=[{path:"/",redirect:{name:"Research"}},{path:"/home",component:rP,children:[{path:"",redirect:{name:"Research"}},{path:"research",name:"Research",component:hN},{path:"vehicles",name:"Vehicles",component:pN},{path:"line",name:"Line",component:yN},{path:"construction",name:"Construction",component:IN},{path:"finance",name:"Finance",component:SN},{path:"settings",component:FN,children:[{path:"",redirect:{name:"DataManager"}},{path:"data",name:"DataManager",component:AD}]}]}],RD=MI({history:mI(),routes:wD}),{user:SD,authReady:bD}=ph(),{loadForUser:CD,clearUserState:PD}=Jr();let nc=null;Ks([bD,SD],async([t,e])=>{if(!t)return;if(!e){nc=null,PD();return}const n=e.uid;n&&n!==nc&&(nc=n,await CD(n))},{immediate:!0});const Oy=RT(NT);Oy.use(RD);Oy.mount("#app");
