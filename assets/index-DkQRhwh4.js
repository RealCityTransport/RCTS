(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function tu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const He={},Tr=[],Tn=()=>{},xp=()=>!1,ja=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),nu=t=>t.startsWith("onUpdate:"),Vt=Object.assign,su=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_v=Object.prototype.hasOwnProperty,Le=(t,e)=>_v.call(t,e),_e=Array.isArray,Ir=t=>ho(t)==="[object Map]",qa=t=>ho(t)==="[object Set]",hd=t=>ho(t)==="[object Date]",Te=t=>typeof t=="function",ot=t=>typeof t=="string",dn=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",Lp=t=>(Ge(t)||Te(t))&&Te(t.then)&&Te(t.catch),Fp=Object.prototype.toString,ho=t=>Fp.call(t),yv=t=>ho(t).slice(8,-1),Up=t=>ho(t)==="[object Object]",ru=t=>ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pi=tu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ha=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},vv=/-\w/g,Zt=Ha(t=>t.replace(vv,e=>e.slice(1).toUpperCase())),Ev=/\B([A-Z])/g,sr=Ha(t=>t.replace(Ev,"-$1").toLowerCase()),Ka=Ha(t=>t.charAt(0).toUpperCase()+t.slice(1)),xl=Ha(t=>t?`on${Ka(t)}`:""),vs=(t,e)=>!Object.is(t,e),Wo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$p=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},iu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let dd;const Ga=()=>dd||(dd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function za(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ot(s)?Av(s):za(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ot(t)||Ge(t))return t}const Tv=/;(?![^(]*\))/g,Iv=/:([^]+)/,wv=/\/\*[^]*?\*\//g;function Av(t){const e={};return t.replace(wv,"").split(Tv).forEach(n=>{if(n){const s=n.split(Iv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function kr(t){let e="";if(ot(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const s=kr(t[n]);s&&(e+=s+" ")}else if(Ge(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const bv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rv=tu(bv);function Bp(t){return!!t||t===""}function Sv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Nr(t[s],e[s]);return n}function Nr(t,e){if(t===e)return!0;let n=hd(t),s=hd(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=dn(t),s=dn(e),n||s)return t===e;if(n=_e(t),s=_e(e),n||s)return n&&s?Sv(t,e):!1;if(n=Ge(t),s=Ge(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Nr(t[o],e[o]))return!1}}return String(t)===String(e)}function jp(t,e){return t.findIndex(n=>Nr(n,e))}const qp=t=>!!(t&&t.__v_isRef===!0),fe=t=>ot(t)?t:t==null?"":_e(t)||Ge(t)&&(t.toString===Fp||!Te(t.toString))?qp(t)?fe(t.value):JSON.stringify(t,Hp,2):String(t),Hp=(t,e)=>qp(e)?Hp(t,e.value):Ir(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Ll(s,i)+" =>"]=r,n),{})}:qa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ll(n))}:dn(e)?Ll(e):Ge(e)&&!_e(e)&&!Up(e)?String(e):e,Ll=(t,e="")=>{var n;return dn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let St;class Cv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=St,!e&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=St;try{return St=this,e()}finally{St=n}}}on(){++this._on===1&&(this.prevScope=St,St=this)}off(){this._on>0&&--this._on===0&&(St=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Pv(){return St}function kv(t,e=!1){St&&St.cleanups.push(t)}let ze;const Fl=new WeakSet;class Kp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,St&&St.active&&St.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fl.has(this)&&(Fl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fd(this),Wp(this);const e=ze,n=ln;ze=this,ln=!0;try{return this.fn()}finally{Qp(this),ze=e,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)lu(e);this.deps=this.depsTail=void 0,fd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uc(this)&&this.run()}get dirty(){return uc(this)}}let Gp=0,ki,Ni;function zp(t,e=!1){if(t.flags|=8,e){t.next=Ni,Ni=t;return}t.next=ki,ki=t}function ou(){Gp++}function au(){if(--Gp>0)return;if(Ni){let e=Ni;for(Ni=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ki;){let e=ki;for(ki=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Wp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Qp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),lu(s),Nv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function uc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Yp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Yp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Hi)||(t.globalVersion=Hi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!uc(t))))return;t.flags|=2;const e=t.dep,n=ze,s=ln;ze=t,ln=!0;try{Wp(t);const r=t.fn(t._value);(e.version===0||vs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ze=n,ln=s,Qp(t),t.flags&=-3}}function lu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)lu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Nv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ln=!0;const Xp=[];function Hn(){Xp.push(ln),ln=!1}function Kn(){const t=Xp.pop();ln=t===void 0?!0:t}function fd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ze;ze=void 0;try{e()}finally{ze=n}}}let Hi=0;class Dv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class cu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ze||!ln||ze===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ze)n=this.activeLink=new Dv(ze,this),ze.deps?(n.prevDep=ze.depsTail,ze.depsTail.nextDep=n,ze.depsTail=n):ze.deps=ze.depsTail=n,Jp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ze.depsTail,n.nextDep=void 0,ze.depsTail.nextDep=n,ze.depsTail=n,ze.deps===n&&(ze.deps=s)}return n}trigger(e){this.version++,Hi++,this.notify(e)}notify(e){ou();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{au()}}}function Jp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Jp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const hc=new WeakMap,Gs=Symbol(""),dc=Symbol(""),Ki=Symbol("");function Pt(t,e,n){if(ln&&ze){let s=hc.get(t);s||hc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new cu),r.map=s,r.key=n),r.track()}}function xn(t,e,n,s,r,i){const o=hc.get(t);if(!o){Hi++;return}const l=c=>{c&&c.trigger()};if(ou(),e==="clear")o.forEach(l);else{const c=_e(t),h=c&&ru(n);if(c&&n==="length"){const d=Number(s);o.forEach((p,g)=>{(g==="length"||g===Ki||!dn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Ki)),e){case"add":c?h&&l(o.get("length")):(l(o.get(Gs)),Ir(t)&&l(o.get(dc)));break;case"delete":c||(l(o.get(Gs)),Ir(t)&&l(o.get(dc)));break;case"set":Ir(t)&&l(o.get(Gs));break}}au()}function pr(t){const e=xe(t);return e===t?e:(Pt(e,"iterate",Ki),Jt(t)?e:e.map(fn))}function Wa(t){return Pt(t=xe(t),"iterate",Ki),t}function us(t,e){return Gn(t)?zs(t)?Dr(fn(e)):Dr(e):fn(e)}const Ov={__proto__:null,[Symbol.iterator](){return Ul(this,Symbol.iterator,t=>us(this,t))},concat(...t){return pr(this).concat(...t.map(e=>_e(e)?pr(e):e))},entries(){return Ul(this,"entries",t=>(t[1]=us(this,t[1]),t))},every(t,e){return On(this,"every",t,e,void 0,arguments)},filter(t,e){return On(this,"filter",t,e,n=>n.map(s=>us(this,s)),arguments)},find(t,e){return On(this,"find",t,e,n=>us(this,n),arguments)},findIndex(t,e){return On(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return On(this,"findLast",t,e,n=>us(this,n),arguments)},findLastIndex(t,e){return On(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return On(this,"forEach",t,e,void 0,arguments)},includes(...t){return $l(this,"includes",t)},indexOf(...t){return $l(this,"indexOf",t)},join(t){return pr(this).join(t)},lastIndexOf(...t){return $l(this,"lastIndexOf",t)},map(t,e){return On(this,"map",t,e,void 0,arguments)},pop(){return _i(this,"pop")},push(...t){return _i(this,"push",t)},reduce(t,...e){return pd(this,"reduce",t,e)},reduceRight(t,...e){return pd(this,"reduceRight",t,e)},shift(){return _i(this,"shift")},some(t,e){return On(this,"some",t,e,void 0,arguments)},splice(...t){return _i(this,"splice",t)},toReversed(){return pr(this).toReversed()},toSorted(t){return pr(this).toSorted(t)},toSpliced(...t){return pr(this).toSpliced(...t)},unshift(...t){return _i(this,"unshift",t)},values(){return Ul(this,"values",t=>us(this,t))}};function Ul(t,e,n){const s=Wa(t),r=s[e]();return s!==t&&!Jt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Vv=Array.prototype;function On(t,e,n,s,r,i){const o=Wa(t),l=o!==t&&!Jt(t),c=o[e];if(c!==Vv[e]){const p=c.apply(t,i);return l?fn(p):p}let h=n;o!==t&&(l?h=function(p,g){return n.call(this,us(t,p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const d=c.call(o,h,s);return l&&r?r(d):d}function pd(t,e,n,s){const r=Wa(t);let i=n;return r!==t&&(Jt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,us(t,l),c,t)}),r[e](i,...s)}function $l(t,e,n){const s=xe(t);Pt(s,"iterate",Ki);const r=s[e](...n);return(r===-1||r===!1)&&du(n[0])?(n[0]=xe(n[0]),s[e](...n)):r}function _i(t,e,n=[]){Hn(),ou();const s=xe(t)[e].apply(t,n);return au(),Kn(),s}const Mv=tu("__proto__,__v_isRef,__isVue"),Zp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(dn));function xv(t){dn(t)||(t=String(t));const e=xe(this);return Pt(e,"has",t),e.hasOwnProperty(t)}class em{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Gv:rm:i?sm:nm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=_e(e);if(!r){let c;if(o&&(c=Ov[n]))return c;if(n==="hasOwnProperty")return xv}const l=Reflect.get(e,n,Dt(e)?e:s);if((dn(n)?Zp.has(n):Mv(n))||(r||Pt(e,"get",n),i))return l;if(Dt(l)){const c=o&&ru(n)?l:l.value;return r&&Ge(c)?pc(c):c}return Ge(l)?r?pc(l):Qa(l):l}}class tm extends em{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=_e(e)&&ru(n);if(!this._isShallow){const h=Gn(i);if(!Jt(s)&&!Gn(s)&&(i=xe(i),s=xe(s)),!o&&Dt(i)&&!Dt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Le(e,n),c=Reflect.set(e,n,s,Dt(e)?e:r);return e===xe(r)&&(l?vs(s,i)&&xn(e,"set",n,s):xn(e,"add",n,s)),c}deleteProperty(e,n){const s=Le(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&xn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!dn(n)||!Zp.has(n))&&Pt(e,"has",n),s}ownKeys(e){return Pt(e,"iterate",_e(e)?"length":Gs),Reflect.ownKeys(e)}}class Lv extends em{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Fv=new tm,Uv=new Lv,$v=new tm(!0);const fc=t=>t,Lo=t=>Reflect.getPrototypeOf(t);function Bv(t,e,n){return function(...s){const r=this.__v_raw,i=xe(r),o=Ir(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),d=n?fc:e?Dr:fn;return!e&&Pt(i,"iterate",c?dc:Gs),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function Fo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function jv(t,e){const n={get(r){const i=this.__v_raw,o=xe(i),l=xe(r);t||(vs(r,l)&&Pt(o,"get",r),Pt(o,"get",l));const{has:c}=Lo(o),h=e?fc:t?Dr:fn;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Pt(xe(r),"iterate",Gs),r.size},has(r){const i=this.__v_raw,o=xe(i),l=xe(r);return t||(vs(r,l)&&Pt(o,"has",r),Pt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=xe(l),h=e?fc:t?Dr:fn;return!t&&Pt(c,"iterate",Gs),l.forEach((d,p)=>r.call(i,h(d),h(p),o))}};return Vt(n,t?{add:Fo("add"),set:Fo("set"),delete:Fo("delete"),clear:Fo("clear")}:{add(r){!e&&!Jt(r)&&!Gn(r)&&(r=xe(r));const i=xe(this);return Lo(i).has.call(i,r)||(i.add(r),xn(i,"add",r,r)),this},set(r,i){!e&&!Jt(i)&&!Gn(i)&&(i=xe(i));const o=xe(this),{has:l,get:c}=Lo(o);let h=l.call(o,r);h||(r=xe(r),h=l.call(o,r));const d=c.call(o,r);return o.set(r,i),h?vs(i,d)&&xn(o,"set",r,i):xn(o,"add",r,i),this},delete(r){const i=xe(this),{has:o,get:l}=Lo(i);let c=o.call(i,r);c||(r=xe(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&xn(i,"delete",r,void 0),h},clear(){const r=xe(this),i=r.size!==0,o=r.clear();return i&&xn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Bv(r,t,e)}),n}function uu(t,e){const n=jv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Le(n,r)&&r in s?n:s,r,i)}const qv={get:uu(!1,!1)},Hv={get:uu(!1,!0)},Kv={get:uu(!0,!1)};const nm=new WeakMap,sm=new WeakMap,rm=new WeakMap,Gv=new WeakMap;function zv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wv(t){return t.__v_skip||!Object.isExtensible(t)?0:zv(yv(t))}function Qa(t){return Gn(t)?t:hu(t,!1,Fv,qv,nm)}function im(t){return hu(t,!1,$v,Hv,sm)}function pc(t){return hu(t,!0,Uv,Kv,rm)}function hu(t,e,n,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Wv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function zs(t){return Gn(t)?zs(t.__v_raw):!!(t&&t.__v_isReactive)}function Gn(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function du(t){return t?!!t.__v_raw:!1}function xe(t){const e=t&&t.__v_raw;return e?xe(e):t}function Qv(t){return!Le(t,"__v_skip")&&Object.isExtensible(t)&&$p(t,"__v_skip",!0),t}const fn=t=>Ge(t)?Qa(t):t,Dr=t=>Ge(t)?pc(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function Ie(t){return om(t,!1)}function Yv(t){return om(t,!0)}function om(t,e){return Dt(t)?t:new Xv(t,e)}class Xv{constructor(e,n){this.dep=new cu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:xe(e),this._value=n?e:fn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Jt(e)||Gn(e);e=s?e:xe(e),vs(e,n)&&(this._rawValue=e,this._value=s?e:fn(e),this.dep.trigger())}}function Fe(t){return Dt(t)?t.value:t}const Jv={get:(t,e,n)=>e==="__v_raw"?t:Fe(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Dt(r)&&!Dt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function am(t){return zs(t)?t:new Proxy(t,Jv)}class Zv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new cu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ze!==this)return zp(this,!0),!0}get value(){const e=this.dep.track();return Yp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function eE(t,e,n=!1){let s,r;return Te(t)?s=t:(s=t.get,r=t.set),new Zv(s,r,n)}const Uo={},ua=new WeakMap;let $s;function tE(t,e=!1,n=$s){if(n){let s=ua.get(n);s||ua.set(n,s=[]),s.push(t)}}function nE(t,e,n=He){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=C=>r?C:Jt(C)||r===!1||r===0?Ln(C,1):Ln(C);let d,p,g,y,N=!1,O=!1;if(Dt(t)?(p=()=>t.value,N=Jt(t)):zs(t)?(p=()=>h(t),N=!0):_e(t)?(O=!0,N=t.some(C=>zs(C)||Jt(C)),p=()=>t.map(C=>{if(Dt(C))return C.value;if(zs(C))return h(C);if(Te(C))return c?c(C,2):C()})):Te(t)?e?p=c?()=>c(t,2):t:p=()=>{if(g){Hn();try{g()}finally{Kn()}}const C=$s;$s=d;try{return c?c(t,3,[y]):t(y)}finally{$s=C}}:p=Tn,e&&r){const C=p,G=r===!0?1/0:r;p=()=>Ln(C(),G)}const M=Pv(),B=()=>{d.stop(),M&&M.active&&su(M.effects,d)};if(i&&e){const C=e;e=(...G)=>{C(...G),B()}}let q=O?new Array(t.length).fill(Uo):Uo;const V=C=>{if(!(!(d.flags&1)||!d.dirty&&!C))if(e){const G=d.run();if(r||N||(O?G.some((Z,w)=>vs(Z,q[w])):vs(G,q))){g&&g();const Z=$s;$s=d;try{const w=[G,q===Uo?void 0:O&&q[0]===Uo?[]:q,y];q=G,c?c(e,3,w):e(...w)}finally{$s=Z}}}else d.run()};return l&&l(V),d=new Kp(p),d.scheduler=o?()=>o(V,!1):V,y=C=>tE(C,!1,d),g=d.onStop=()=>{const C=ua.get(d);if(C){if(c)c(C,4);else for(const G of C)G();ua.delete(d)}},e?s?V(!0):q=d.run():o?o(V.bind(null,!0),!0):d.run(),B.pause=d.pause.bind(d),B.resume=d.resume.bind(d),B.stop=B,B}function Ln(t,e=1/0,n){if(e<=0||!Ge(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Dt(t))Ln(t.value,e,n);else if(_e(t))for(let s=0;s<t.length;s++)Ln(t[s],e,n);else if(qa(t)||Ir(t))t.forEach(s=>{Ln(s,e,n)});else if(Up(t)){for(const s in t)Ln(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ln(t[s],e,n)}return t}function fo(t,e,n,s){try{return s?t(...s):t()}catch(r){Ya(r,e,n)}}function Cn(t,e,n,s){if(Te(t)){const r=fo(t,e,n,s);return r&&Lp(r)&&r.catch(i=>{Ya(i,e,n)}),r}if(_e(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Cn(t[i],e,n,s));return r}}function Ya(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||He;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,c,h)===!1)return}l=l.parent}if(i){Hn(),fo(i,null,10,[t,c,h]),Kn();return}}sE(t,n,r,s,o)}function sE(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const $t=[];let yn=-1;const wr=[];let hs=null,mr=0;const lm=Promise.resolve();let ha=null;function cm(t){const e=ha||lm;return t?e.then(this?t.bind(this):t):e}function rE(t){let e=yn+1,n=$t.length;for(;e<n;){const s=e+n>>>1,r=$t[s],i=Gi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function fu(t){if(!(t.flags&1)){const e=Gi(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Gi(n)?$t.push(t):$t.splice(rE(e),0,t),t.flags|=1,um()}}function um(){ha||(ha=lm.then(dm))}function iE(t){_e(t)?wr.push(...t):hs&&t.id===-1?hs.splice(mr+1,0,t):t.flags&1||(wr.push(t),t.flags|=1),um()}function md(t,e,n=yn+1){for(;n<$t.length;n++){const s=$t[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;$t.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function hm(t){if(wr.length){const e=[...new Set(wr)].sort((n,s)=>Gi(n)-Gi(s));if(wr.length=0,hs){hs.push(...e);return}for(hs=e,mr=0;mr<hs.length;mr++){const n=hs[mr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hs=null,mr=0}}const Gi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dm(t){try{for(yn=0;yn<$t.length;yn++){const e=$t[yn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),fo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yn<$t.length;yn++){const e=$t[yn];e&&(e.flags&=-2)}yn=-1,$t.length=0,hm(),ha=null,($t.length||wr.length)&&dm()}}let Tt=null,fm=null;function da(t){const e=Tt;return Tt=t,fm=t&&t.type.__scopeId||null,e}function nn(t,e=Tt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ma(-1);const i=da(e);let o;try{o=t(...r)}finally{da(i),s._d&&ma(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function yi(t,e){if(Tt===null)return t;const n=el(Tt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=He]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Ln(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Fs(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Hn(),Cn(c,n,8,[t.el,l,t,e]),Kn())}}function Qo(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=rT();if(s||br){let r=br?br._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Te(e)?e.call(s&&s.proxy):e}}const oE=Symbol.for("v-scx"),aE=()=>cn(oE);function Di(t,e){return pu(t,null,e)}function Bn(t,e,n){return pu(t,e,n)}function pu(t,e,n=He){const{immediate:s,deep:r,flush:i,once:o}=n,l=Vt({},n),c=e&&s||!e&&i!=="post";let h;if(Yi){if(i==="sync"){const y=aE();h=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=Tn,y.resume=Tn,y.pause=Tn,y}}const d=Nt;l.call=(y,N,O)=>Cn(y,d,N,O);let p=!1;i==="post"?l.scheduler=y=>{zt(y,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(y,N)=>{N?y():fu(y)}),l.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,d&&(y.id=d.uid,y.i=d))};const g=nE(t,e,l);return Yi&&(h?h.push(g):c&&g()),g}function lE(t,e,n){const s=this.proxy,r=ot(t)?t.includes(".")?pm(s,t):()=>s[t]:t.bind(s,s);let i;Te(e)?i=e:(i=e.handler,n=e);const o=po(this),l=pu(r,i.bind(s),n);return o(),l}function pm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const cE=Symbol("_vte"),uE=t=>t.__isTeleport,hE=Symbol("_leaveCb");function mu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,mu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mm(t,e){return Te(t)?Vt({name:t.name},e,{setup:t}):t}function gm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const fa=new WeakMap;function Oi(t,e,n,s,r=!1){if(_e(t)){t.forEach((N,O)=>Oi(N,e&&(_e(e)?e[O]:e),n,s,r));return}if(Ar(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Oi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?el(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,d=l.refs===He?l.refs={}:l.refs,p=l.setupState,g=xe(p),y=p===He?xp:N=>Le(g,N);if(h!=null&&h!==c){if(gd(e),ot(h))d[h]=null,y(h)&&(p[h]=null);else if(Dt(h)){h.value=null;const N=e;N.k&&(d[N.k]=null)}}if(Te(c))fo(c,l,12,[o,d]);else{const N=ot(c),O=Dt(c);if(N||O){const M=()=>{if(t.f){const B=N?y(c)?p[c]:d[c]:c.value;if(r)_e(B)&&su(B,i);else if(_e(B))B.includes(i)||B.push(i);else if(N)d[c]=[i],y(c)&&(p[c]=d[c]);else{const q=[i];c.value=q,t.k&&(d[t.k]=q)}}else N?(d[c]=o,y(c)&&(p[c]=o)):O&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const B=()=>{M(),fa.delete(t)};B.id=-1,fa.set(t,B),zt(B,n)}else gd(t),M()}}}function gd(t){const e=fa.get(t);e&&(e.flags|=8,fa.delete(t))}Ga().requestIdleCallback;Ga().cancelIdleCallback;const Ar=t=>!!t.type.__asyncLoader,_m=t=>t.type.__isKeepAlive;function dE(t,e){ym(t,"a",e)}function fE(t,e){ym(t,"da",e)}function ym(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Xa(e,s,n),n){let r=n.parent;for(;r&&r.parent;)_m(r.parent.vnode)&&pE(s,e,n,r),r=r.parent}}function pE(t,e,n,s){const r=Xa(e,t,s,!0);Em(()=>{su(s[e],r)},n)}function Xa(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Hn();const l=po(n),c=Cn(e,n,t,o);return l(),Kn(),c});return s?r.unshift(i):r.push(i),i}}const Zn=t=>(e,n=Nt)=>{(!Yi||t==="sp")&&Xa(t,(...s)=>e(...s),n)},mE=Zn("bm"),gu=Zn("m"),gE=Zn("bu"),_E=Zn("u"),vm=Zn("bum"),Em=Zn("um"),yE=Zn("sp"),vE=Zn("rtg"),EE=Zn("rtc");function TE(t,e=Nt){Xa("ec",t,e)}const IE="components";function zi(t,e){return AE(IE,t,!0,e)||t}const wE=Symbol.for("v-ndc");function AE(t,e,n=!0,s=!1){const r=Tt||Nt;if(r){const i=r.type;{const l=cT(i,!1);if(l&&(l===e||l===Zt(e)||l===Ka(Zt(e))))return i}const o=_d(r[t]||i[t],e)||_d(r.appContext[t],e);return!o&&s?i:o}}function _d(t,e){return t&&(t[e]||t[Zt(e)]||t[Ka(Zt(e))])}function It(t,e,n,s){let r;const i=n,o=_e(t);if(o||ot(t)){const l=o&&zs(t);let c=!1,h=!1;l&&(c=!Jt(t),h=Gn(t),t=Wa(t)),r=new Array(t.length);for(let d=0,p=t.length;d<p;d++)r[d]=e(c?h?Dr(fn(t[d])):fn(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}function yd(t,e,n={},s,r){if(Tt.ce||Tt.parent&&Ar(Tt.parent)&&Tt.parent.ce){const h=Object.keys(n).length>0;return e!=="default"&&(n.name=e),W(),Or(Ve,null,[Ue("slot",n,s)],h?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),W();const o=i&&Tm(i(n)),l=n.key||o&&o.key,c=Or(Ve,{key:(l&&!dn(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function Tm(t){return t.some(e=>Qi(e)?!(e.type===zn||e.type===Ve&&!Tm(e.children)):!0)?t:null}const mc=t=>t?$m(t)?el(t):mc(t.parent):null,Vi=Vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>mc(t.parent),$root:t=>mc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>wm(t),$forceUpdate:t=>t.f||(t.f=()=>{fu(t.update)}),$nextTick:t=>t.n||(t.n=cm.bind(t.proxy)),$watch:t=>lE.bind(t)}),Bl=(t,e)=>t!==He&&!t.__isScriptSetup&&Le(t,e),bE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Bl(s,e))return o[e]=1,s[e];if(r!==He&&Le(r,e))return o[e]=2,r[e];if(Le(i,e))return o[e]=3,i[e];if(n!==He&&Le(n,e))return o[e]=4,n[e];gc&&(o[e]=0)}}const h=Vi[e];let d,p;if(h)return e==="$attrs"&&Pt(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==He&&Le(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Le(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Bl(r,e)?(r[e]=n,!0):s!==He&&Le(s,e)?(s[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==He&&l[0]!=="$"&&Le(t,l)||Bl(e,l)||Le(i,l)||Le(s,l)||Le(Vi,l)||Le(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function vd(t){return _e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let gc=!0;function RE(t){const e=wm(t),n=t.proxy,s=t.ctx;gc=!1,e.beforeCreate&&Ed(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:y,updated:N,activated:O,deactivated:M,beforeDestroy:B,beforeUnmount:q,destroyed:V,unmounted:C,render:G,renderTracked:Z,renderTriggered:w,errorCaptured:v,serverPrefetch:I,expose:R,inheritAttrs:b,components:S,directives:T,filters:ae}=e;if(h&&SE(h,s,null),o)for(const Oe in o){const Ae=o[Oe];Te(Ae)&&(s[Oe]=Ae.bind(n))}if(r){const Oe=r.call(n,n);Ge(Oe)&&(t.data=Qa(Oe))}if(gc=!0,i)for(const Oe in i){const Ae=i[Oe],gt=Te(Ae)?Ae.bind(n,n):Te(Ae.get)?Ae.get.bind(n,n):Tn,Qt=!Te(Ae)&&Te(Ae.set)?Ae.set.bind(n):Tn,xt=he({get:gt,set:Qt});Object.defineProperty(s,Oe,{enumerable:!0,configurable:!0,get:()=>xt.value,set:at=>xt.value=at})}if(l)for(const Oe in l)Im(l[Oe],s,n,Oe);if(c){const Oe=Te(c)?c.call(n):c;Reflect.ownKeys(Oe).forEach(Ae=>{Qo(Ae,Oe[Ae])})}d&&Ed(d,t,"c");function Ne(Oe,Ae){_e(Ae)?Ae.forEach(gt=>Oe(gt.bind(n))):Ae&&Oe(Ae.bind(n))}if(Ne(mE,p),Ne(gu,g),Ne(gE,y),Ne(_E,N),Ne(dE,O),Ne(fE,M),Ne(TE,v),Ne(EE,Z),Ne(vE,w),Ne(vm,q),Ne(Em,C),Ne(yE,I),_e(R))if(R.length){const Oe=t.exposed||(t.exposed={});R.forEach(Ae=>{Object.defineProperty(Oe,Ae,{get:()=>n[Ae],set:gt=>n[Ae]=gt,enumerable:!0})})}else t.exposed||(t.exposed={});G&&t.render===Tn&&(t.render=G),b!=null&&(t.inheritAttrs=b),S&&(t.components=S),T&&(t.directives=T),I&&gm(t)}function SE(t,e,n=Tn){_e(t)&&(t=_c(t));for(const s in t){const r=t[s];let i;Ge(r)?"default"in r?i=cn(r.from||s,r.default,!0):i=cn(r.from||s):i=cn(r),Dt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Ed(t,e,n){Cn(_e(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Im(t,e,n,s){let r=s.includes(".")?pm(n,s):()=>n[s];if(ot(t)){const i=e[t];Te(i)&&Bn(r,i)}else if(Te(t))Bn(r,t.bind(n));else if(Ge(t))if(_e(t))t.forEach(i=>Im(i,e,n,s));else{const i=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(i)&&Bn(r,i,t)}}function wm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>pa(c,h,o,!0)),pa(c,e,o)),Ge(e)&&i.set(e,c),c}function pa(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&pa(t,i,n,!0),r&&r.forEach(o=>pa(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=CE[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const CE={data:Td,props:Id,emits:Id,methods:Ai,computed:Ai,beforeCreate:Ft,created:Ft,beforeMount:Ft,mounted:Ft,beforeUpdate:Ft,updated:Ft,beforeDestroy:Ft,beforeUnmount:Ft,destroyed:Ft,unmounted:Ft,activated:Ft,deactivated:Ft,errorCaptured:Ft,serverPrefetch:Ft,components:Ai,directives:Ai,watch:kE,provide:Td,inject:PE};function Td(t,e){return e?t?function(){return Vt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function PE(t,e){return Ai(_c(t),_c(e))}function _c(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ft(t,e){return t?[...new Set([].concat(t,e))]:e}function Ai(t,e){return t?Vt(Object.create(null),t,e):e}function Id(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:Vt(Object.create(null),vd(t),vd(e??{})):e}function kE(t,e){if(!t)return e;if(!e)return t;const n=Vt(Object.create(null),t);for(const s in e)n[s]=Ft(t[s],e[s]);return n}function Am(){return{app:null,config:{isNativeTag:xp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NE=0;function DE(t,e){return function(s,r=null){Te(s)||(s=Vt({},s)),r!=null&&!Ge(r)&&(r=null);const i=Am(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:NE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:hT,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&Te(d.install)?(o.add(d),d.install(h,...p)):Te(d)&&(o.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const y=h._ceVNode||Ue(s,r);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(y,d,g),c=!0,h._container=d,d.__vue_app__=h,el(y.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Cn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=br;br=h;try{return d()}finally{br=p}}};return h}}let br=null;const OE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Zt(e)}Modifiers`]||t[`${sr(e)}Modifiers`];function VE(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||He;let r=n;const i=e.startsWith("update:"),o=i&&OE(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>ot(d)?d.trim():d)),o.number&&(r=n.map(iu)));let l,c=s[l=xl(e)]||s[l=xl(Zt(e))];!c&&i&&(c=s[l=xl(sr(e))]),c&&Cn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Cn(h,t,6,r)}}const ME=new WeakMap;function bm(t,e,n=!1){const s=n?ME:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Te(t)){const c=h=>{const d=bm(h,e,!0);d&&(l=!0,Vt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Ge(t)&&s.set(t,null),null):(_e(i)?i.forEach(c=>o[c]=null):Vt(o,i),Ge(t)&&s.set(t,o),o)}function Ja(t,e){return!t||!ja(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,sr(e))||Le(t,e))}function wd(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:y,ctx:N,inheritAttrs:O}=t,M=da(t);let B,q;try{if(n.shapeFlag&4){const C=r||s,G=C;B=En(h.call(G,C,d,p,y,g,N)),q=l}else{const C=e;B=En(C.length>1?C(p,{attrs:l,slots:o,emit:c}):C(p,null)),q=e.props?l:xE(l)}}catch(C){Mi.length=0,Ya(C,t,1),B=Ue(zn)}let V=B;if(q&&O!==!1){const C=Object.keys(q),{shapeFlag:G}=V;C.length&&G&7&&(i&&C.some(nu)&&(q=LE(q,i)),V=Vr(V,q,!1,!0))}return n.dirs&&(V=Vr(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&mu(V,n.transition),B=V,da(M),B}const xE=t=>{let e;for(const n in t)(n==="class"||n==="style"||ja(n))&&((e||(e={}))[n]=t[n]);return e},LE=(t,e)=>{const n={};for(const s in t)(!nu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function FE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Ad(s,o,h):!!o;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==s[g]&&!Ja(h,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Ad(s,o,h):!0:!!o;return!1}function Ad(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Ja(n,i))return!0}return!1}function UE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Rm={},Sm=()=>Object.create(Rm),Cm=t=>Object.getPrototypeOf(t)===Rm;function $E(t,e,n,s=!1){const r={},i=Sm();t.propsDefaults=Object.create(null),Pm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:im(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function BE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=xe(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Ja(t.emitsOptions,g))continue;const y=e[g];if(c)if(Le(i,g))y!==i[g]&&(i[g]=y,h=!0);else{const N=Zt(g);r[N]=yc(c,l,N,y,t,!1)}else y!==i[g]&&(i[g]=y,h=!0)}}}else{Pm(t,e,r,i)&&(h=!0);let d;for(const p in l)(!e||!Le(e,p)&&((d=sr(p))===p||!Le(e,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(r[p]=yc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Le(e,p))&&(delete i[p],h=!0)}h&&xn(t.attrs,"set","")}function Pm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Pi(c))continue;const h=e[c];let d;r&&Le(r,d=Zt(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:Ja(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=xe(n),h=l||He;for(let d=0;d<i.length;d++){const p=i[d];n[p]=yc(r,c,p,h[p],t,!Le(h,p))}}return o}function yc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Le(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Te(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const d=po(r);s=h[n]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===sr(n))&&(s=!0))}return s}const jE=new WeakMap;function km(t,e,n=!1){const s=n?jE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Te(t)){const d=p=>{c=!0;const[g,y]=km(p,e,!0);Vt(o,g),y&&l.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return Ge(t)&&s.set(t,Tr),Tr;if(_e(i))for(let d=0;d<i.length;d++){const p=Zt(i[d]);bd(p)&&(o[p]=He)}else if(i)for(const d in i){const p=Zt(d);if(bd(p)){const g=i[d],y=o[p]=_e(g)||Te(g)?{type:g}:Vt({},g),N=y.type;let O=!1,M=!0;if(_e(N))for(let B=0;B<N.length;++B){const q=N[B],V=Te(q)&&q.name;if(V==="Boolean"){O=!0;break}else V==="String"&&(M=!1)}else O=Te(N)&&N.name==="Boolean";y[0]=O,y[1]=M,(O||Le(y,"default"))&&l.push(p)}}const h=[o,l];return Ge(t)&&s.set(t,h),h}function bd(t){return t[0]!=="$"&&!Pi(t)}const _u=t=>t==="_"||t==="_ctx"||t==="$stable",yu=t=>_e(t)?t.map(En):[En(t)],qE=(t,e,n)=>{if(e._n)return e;const s=nn((...r)=>yu(e(...r)),n);return s._c=!1,s},Nm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(_u(r))continue;const i=t[r];if(Te(i))e[r]=qE(r,i,s);else if(i!=null){const o=yu(i);e[r]=()=>o}}},Dm=(t,e)=>{const n=yu(e);t.slots.default=()=>n},Om=(t,e,n)=>{for(const s in e)(n||!_u(s))&&(t[s]=e[s])},HE=(t,e,n)=>{const s=t.slots=Sm();if(t.vnode.shapeFlag&32){const r=e._;r?(Om(s,e,n),n&&$p(s,"_",r,!0)):Nm(e,s)}else e&&Dm(t,e)},KE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=He;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Om(r,e,n):(i=!e.$stable,Nm(e,r)),o=e}else e&&(Dm(t,e),o={default:1});if(i)for(const l in r)!_u(l)&&o[l]==null&&delete r[l]},zt=YE;function GE(t){return zE(t)}function zE(t,e){const n=Ga();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:y=Tn,insertStaticContent:N}=t,O=(E,A,P,x=null,$=null,L=null,J=void 0,z=null,K=!!A.dynamicChildren)=>{if(E===A)return;E&&!vi(E,A)&&(x=F(E),at(E,$,L,!0),E=null),A.patchFlag===-2&&(K=!1,A.dynamicChildren=null);const{type:j,ref:de,shapeFlag:ne}=A;switch(j){case Za:M(E,A,P,x);break;case zn:B(E,A,P,x);break;case Yo:E==null&&q(A,P,x,J);break;case Ve:S(E,A,P,x,$,L,J,z,K);break;default:ne&1?G(E,A,P,x,$,L,J,z,K):ne&6?T(E,A,P,x,$,L,J,z,K):(ne&64||ne&128)&&j.process(E,A,P,x,$,L,J,z,K,ce)}de!=null&&$?Oi(de,E&&E.ref,L,A||E,!A):de==null&&E&&E.ref!=null&&Oi(E.ref,null,L,E,!0)},M=(E,A,P,x)=>{if(E==null)s(A.el=l(A.children),P,x);else{const $=A.el=E.el;A.children!==E.children&&h($,A.children)}},B=(E,A,P,x)=>{E==null?s(A.el=c(A.children||""),P,x):A.el=E.el},q=(E,A,P,x)=>{[E.el,E.anchor]=N(E.children,A,P,x,E.el,E.anchor)},V=({el:E,anchor:A},P,x)=>{let $;for(;E&&E!==A;)$=g(E),s(E,P,x),E=$;s(A,P,x)},C=({el:E,anchor:A})=>{let P;for(;E&&E!==A;)P=g(E),r(E),E=P;r(A)},G=(E,A,P,x,$,L,J,z,K)=>{if(A.type==="svg"?J="svg":A.type==="math"&&(J="mathml"),E==null)Z(A,P,x,$,L,J,z,K);else{const j=E.el&&E.el._isVueCE?E.el:null;try{j&&j._beginPatch(),I(E,A,$,L,J,z,K)}finally{j&&j._endPatch()}}},Z=(E,A,P,x,$,L,J,z)=>{let K,j;const{props:de,shapeFlag:ne,transition:ue,dirs:me}=E;if(K=E.el=o(E.type,L,de&&de.is,de),ne&8?d(K,E.children):ne&16&&v(E.children,K,null,x,$,jl(E,L),J,z),me&&Fs(E,null,x,"created"),w(K,E,E.scopeId,J,x),de){for(const Be in de)Be!=="value"&&!Pi(Be)&&i(K,Be,null,de[Be],L,x);"value"in de&&i(K,"value",null,de.value,L),(j=de.onVnodeBeforeMount)&&_n(j,x,E)}me&&Fs(E,null,x,"beforeMount");const be=WE($,ue);be&&ue.beforeEnter(K),s(K,A,P),((j=de&&de.onVnodeMounted)||be||me)&&zt(()=>{j&&_n(j,x,E),be&&ue.enter(K),me&&Fs(E,null,x,"mounted")},$)},w=(E,A,P,x,$)=>{if(P&&y(E,P),x)for(let L=0;L<x.length;L++)y(E,x[L]);if($){let L=$.subTree;if(A===L||Lm(L.type)&&(L.ssContent===A||L.ssFallback===A)){const J=$.vnode;w(E,J,J.scopeId,J.slotScopeIds,$.parent)}}},v=(E,A,P,x,$,L,J,z,K=0)=>{for(let j=K;j<E.length;j++){const de=E[j]=z?ds(E[j]):En(E[j]);O(null,de,A,P,x,$,L,J,z)}},I=(E,A,P,x,$,L,J)=>{const z=A.el=E.el;let{patchFlag:K,dynamicChildren:j,dirs:de}=A;K|=E.patchFlag&16;const ne=E.props||He,ue=A.props||He;let me;if(P&&Us(P,!1),(me=ue.onVnodeBeforeUpdate)&&_n(me,P,A,E),de&&Fs(A,E,P,"beforeUpdate"),P&&Us(P,!0),(ne.innerHTML&&ue.innerHTML==null||ne.textContent&&ue.textContent==null)&&d(z,""),j?R(E.dynamicChildren,j,z,P,x,jl(A,$),L):J||Ae(E,A,z,null,P,x,jl(A,$),L,!1),K>0){if(K&16)b(z,ne,ue,P,$);else if(K&2&&ne.class!==ue.class&&i(z,"class",null,ue.class,$),K&4&&i(z,"style",ne.style,ue.style,$),K&8){const be=A.dynamicProps;for(let Be=0;Be<be.length;Be++){const De=be[Be],At=ne[De],bt=ue[De];(bt!==At||De==="value")&&i(z,De,At,bt,$,P)}}K&1&&E.children!==A.children&&d(z,A.children)}else!J&&j==null&&b(z,ne,ue,P,$);((me=ue.onVnodeUpdated)||de)&&zt(()=>{me&&_n(me,P,A,E),de&&Fs(A,E,P,"updated")},x)},R=(E,A,P,x,$,L,J)=>{for(let z=0;z<A.length;z++){const K=E[z],j=A[z],de=K.el&&(K.type===Ve||!vi(K,j)||K.shapeFlag&198)?p(K.el):P;O(K,j,de,null,x,$,L,J,!0)}},b=(E,A,P,x,$)=>{if(A!==P){if(A!==He)for(const L in A)!Pi(L)&&!(L in P)&&i(E,L,A[L],null,$,x);for(const L in P){if(Pi(L))continue;const J=P[L],z=A[L];J!==z&&L!=="value"&&i(E,L,z,J,$,x)}"value"in P&&i(E,"value",A.value,P.value,$)}},S=(E,A,P,x,$,L,J,z,K)=>{const j=A.el=E?E.el:l(""),de=A.anchor=E?E.anchor:l("");let{patchFlag:ne,dynamicChildren:ue,slotScopeIds:me}=A;me&&(z=z?z.concat(me):me),E==null?(s(j,P,x),s(de,P,x),v(A.children||[],P,de,$,L,J,z,K)):ne>0&&ne&64&&ue&&E.dynamicChildren&&E.dynamicChildren.length===ue.length?(R(E.dynamicChildren,ue,P,$,L,J,z),(A.key!=null||$&&A===$.subTree)&&Vm(E,A,!0)):Ae(E,A,P,de,$,L,J,z,K)},T=(E,A,P,x,$,L,J,z,K)=>{A.slotScopeIds=z,E==null?A.shapeFlag&512?$.ctx.activate(A,P,x,J,K):ae(A,P,x,$,L,J,K):re(E,A,K)},ae=(E,A,P,x,$,L,J)=>{const z=E.component=sT(E,x,$);if(_m(E)&&(z.ctx.renderer=ce),iT(z,!1,J),z.asyncDep){if($&&$.registerDep(z,Ne,J),!E.el){const K=z.subTree=Ue(zn);B(null,K,A,P),E.placeholder=K.el}}else Ne(z,E,A,P,$,L,J)},re=(E,A,P)=>{const x=A.component=E.component;if(FE(E,A,P))if(x.asyncDep&&!x.asyncResolved){Oe(x,A,P);return}else x.next=A,x.update();else A.el=E.el,x.vnode=A},Ne=(E,A,P,x,$,L,J)=>{const z=()=>{if(E.isMounted){let{next:ne,bu:ue,u:me,parent:be,vnode:Be}=E;{const Kt=Mm(E);if(Kt){ne&&(ne.el=Be.el,Oe(E,ne,J)),Kt.asyncDep.then(()=>{E.isUnmounted||z()});return}}let De=ne,At;Us(E,!1),ne?(ne.el=Be.el,Oe(E,ne,J)):ne=Be,ue&&Wo(ue),(At=ne.props&&ne.props.onVnodeBeforeUpdate)&&_n(At,be,ne,Be),Us(E,!0);const bt=wd(E),Ht=E.subTree;E.subTree=bt,O(Ht,bt,p(Ht.el),F(Ht),E,$,L),ne.el=bt.el,De===null&&UE(E,bt.el),me&&zt(me,$),(At=ne.props&&ne.props.onVnodeUpdated)&&zt(()=>_n(At,be,ne,Be),$)}else{let ne;const{el:ue,props:me}=A,{bm:be,m:Be,parent:De,root:At,type:bt}=E,Ht=Ar(A);Us(E,!1),be&&Wo(be),!Ht&&(ne=me&&me.onVnodeBeforeMount)&&_n(ne,De,A),Us(E,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(bt);const Kt=E.subTree=wd(E);O(null,Kt,P,x,E,$,L),A.el=Kt.el}if(Be&&zt(Be,$),!Ht&&(ne=me&&me.onVnodeMounted)){const Kt=A;zt(()=>_n(ne,De,Kt),$)}(A.shapeFlag&256||De&&Ar(De.vnode)&&De.vnode.shapeFlag&256)&&E.a&&zt(E.a,$),E.isMounted=!0,A=P=x=null}};E.scope.on();const K=E.effect=new Kp(z);E.scope.off();const j=E.update=K.run.bind(K),de=E.job=K.runIfDirty.bind(K);de.i=E,de.id=E.uid,K.scheduler=()=>fu(de),Us(E,!0),j()},Oe=(E,A,P)=>{A.component=E;const x=E.vnode.props;E.vnode=A,E.next=null,BE(E,A.props,x,P),KE(E,A.children,P),Hn(),md(E),Kn()},Ae=(E,A,P,x,$,L,J,z,K=!1)=>{const j=E&&E.children,de=E?E.shapeFlag:0,ne=A.children,{patchFlag:ue,shapeFlag:me}=A;if(ue>0){if(ue&128){Qt(j,ne,P,x,$,L,J,z,K);return}else if(ue&256){gt(j,ne,P,x,$,L,J,z,K);return}}me&8?(de&16&&je(j,$,L),ne!==j&&d(P,ne)):de&16?me&16?Qt(j,ne,P,x,$,L,J,z,K):je(j,$,L,!0):(de&8&&d(P,""),me&16&&v(ne,P,x,$,L,J,z,K))},gt=(E,A,P,x,$,L,J,z,K)=>{E=E||Tr,A=A||Tr;const j=E.length,de=A.length,ne=Math.min(j,de);let ue;for(ue=0;ue<ne;ue++){const me=A[ue]=K?ds(A[ue]):En(A[ue]);O(E[ue],me,P,null,$,L,J,z,K)}j>de?je(E,$,L,!0,!1,ne):v(A,P,x,$,L,J,z,K,ne)},Qt=(E,A,P,x,$,L,J,z,K)=>{let j=0;const de=A.length;let ne=E.length-1,ue=de-1;for(;j<=ne&&j<=ue;){const me=E[j],be=A[j]=K?ds(A[j]):En(A[j]);if(vi(me,be))O(me,be,P,null,$,L,J,z,K);else break;j++}for(;j<=ne&&j<=ue;){const me=E[ne],be=A[ue]=K?ds(A[ue]):En(A[ue]);if(vi(me,be))O(me,be,P,null,$,L,J,z,K);else break;ne--,ue--}if(j>ne){if(j<=ue){const me=ue+1,be=me<de?A[me].el:x;for(;j<=ue;)O(null,A[j]=K?ds(A[j]):En(A[j]),P,be,$,L,J,z,K),j++}}else if(j>ue)for(;j<=ne;)at(E[j],$,L,!0),j++;else{const me=j,be=j,Be=new Map;for(j=be;j<=ue;j++){const _t=A[j]=K?ds(A[j]):En(A[j]);_t.key!=null&&Be.set(_t.key,j)}let De,At=0;const bt=ue-be+1;let Ht=!1,Kt=0;const tn=new Array(bt);for(j=0;j<bt;j++)tn[j]=0;for(j=me;j<=ne;j++){const _t=E[j];if(At>=bt){at(_t,$,L,!0);continue}let dt;if(_t.key!=null)dt=Be.get(_t.key);else for(De=be;De<=ue;De++)if(tn[De-be]===0&&vi(_t,A[De])){dt=De;break}dt===void 0?at(_t,$,L,!0):(tn[dt-be]=j+1,dt>=Kt?Kt=dt:Ht=!0,O(_t,A[dt],P,null,$,L,J,z,K),At++)}const ur=Ht?QE(tn):Tr;for(De=ur.length-1,j=bt-1;j>=0;j--){const _t=be+j,dt=A[_t],ni=A[_t+1],Os=_t+1<de?ni.el||xm(ni):x;tn[j]===0?O(null,dt,P,Os,$,L,J,z,K):Ht&&(De<0||j!==ur[De]?xt(dt,P,Os,2):De--)}}},xt=(E,A,P,x,$=null)=>{const{el:L,type:J,transition:z,children:K,shapeFlag:j}=E;if(j&6){xt(E.component.subTree,A,P,x);return}if(j&128){E.suspense.move(A,P,x);return}if(j&64){J.move(E,A,P,ce);return}if(J===Ve){s(L,A,P);for(let ne=0;ne<K.length;ne++)xt(K[ne],A,P,x);s(E.anchor,A,P);return}if(J===Yo){V(E,A,P);return}if(x!==2&&j&1&&z)if(x===0)z.beforeEnter(L),s(L,A,P),zt(()=>z.enter(L),$);else{const{leave:ne,delayLeave:ue,afterLeave:me}=z,be=()=>{E.ctx.isUnmounted?r(L):s(L,A,P)},Be=()=>{L._isLeaving&&L[hE](!0),ne(L,()=>{be(),me&&me()})};ue?ue(L,be,Be):Be()}else s(L,A,P)},at=(E,A,P,x=!1,$=!1)=>{const{type:L,props:J,ref:z,children:K,dynamicChildren:j,shapeFlag:de,patchFlag:ne,dirs:ue,cacheIndex:me}=E;if(ne===-2&&($=!1),z!=null&&(Hn(),Oi(z,null,P,E,!0),Kn()),me!=null&&(A.renderCache[me]=void 0),de&256){A.ctx.deactivate(E);return}const be=de&1&&ue,Be=!Ar(E);let De;if(Be&&(De=J&&J.onVnodeBeforeUnmount)&&_n(De,A,E),de&6)te(E.component,P,x);else{if(de&128){E.suspense.unmount(P,x);return}be&&Fs(E,null,A,"beforeUnmount"),de&64?E.type.remove(E,A,P,ce,x):j&&!j.hasOnce&&(L!==Ve||ne>0&&ne&64)?je(j,A,P,!1,!0):(L===Ve&&ne&384||!$&&de&16)&&je(K,A,P),x&&se(E)}(Be&&(De=J&&J.onVnodeUnmounted)||be)&&zt(()=>{De&&_n(De,A,E),be&&Fs(E,null,A,"unmounted")},P)},se=E=>{const{type:A,el:P,anchor:x,transition:$}=E;if(A===Ve){X(P,x);return}if(A===Yo){C(E);return}const L=()=>{r(P),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(E.shapeFlag&1&&$&&!$.persisted){const{leave:J,delayLeave:z}=$,K=()=>J(P,L);z?z(E.el,L,K):K()}else L()},X=(E,A)=>{let P;for(;E!==A;)P=g(E),r(E),E=P;r(A)},te=(E,A,P)=>{const{bum:x,scope:$,job:L,subTree:J,um:z,m:K,a:j}=E;Rd(K),Rd(j),x&&Wo(x),$.stop(),L&&(L.flags|=8,at(J,E,A,P)),z&&zt(z,A),zt(()=>{E.isUnmounted=!0},A)},je=(E,A,P,x=!1,$=!1,L=0)=>{for(let J=L;J<E.length;J++)at(E[J],A,P,x,$)},F=E=>{if(E.shapeFlag&6)return F(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=g(E.anchor||E.el),P=A&&A[cE];return P?g(P):A};let ie=!1;const ee=(E,A,P)=>{let x;E==null?A._vnode&&(at(A._vnode,null,null,!0),x=A._vnode.component):O(A._vnode||null,E,A,null,null,null,P),A._vnode=E,ie||(ie=!0,md(x),hm(),ie=!1)},ce={p:O,um:at,m:xt,r:se,mt:ae,mc:v,pc:Ae,pbc:R,n:F,o:t};return{render:ee,hydrate:void 0,createApp:DE(ee)}}function jl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Us({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vm(t,e,n=!1){const s=t.children,r=e.children;if(_e(s)&&_e(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=ds(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Vm(o,l)),l.type===Za&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=i+(t.type===Ve?1:0)),l.type===zn&&!l.el&&(l.el=o.el)}}function QE(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Mm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Mm(e)}function Rd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function xm(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?xm(e.subTree):null}const Lm=t=>t.__isSuspense;function YE(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):iE(t)}const Ve=Symbol.for("v-fgt"),Za=Symbol.for("v-txt"),zn=Symbol.for("v-cmt"),Yo=Symbol.for("v-stc"),Mi=[];let Wt=null;function W(t=!1){Mi.push(Wt=t?null:[])}function XE(){Mi.pop(),Wt=Mi[Mi.length-1]||null}let Wi=1;function ma(t,e=!1){Wi+=t,t<0&&Wt&&e&&(Wt.hasOnce=!0)}function Fm(t){return t.dynamicChildren=Wi>0?Wt||Tr:null,XE(),Wi>0&&Wt&&Wt.push(t),t}function Q(t,e,n,s,r,i){return Fm(m(t,e,n,s,r,i,!0))}function Or(t,e,n,s,r){return Fm(Ue(t,e,n,s,r,!0))}function Qi(t){return t?t.__v_isVNode===!0:!1}function vi(t,e){return t.type===e.type&&t.key===e.key}const Um=({key:t})=>t??null,Xo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ot(t)||Dt(t)||Te(t)?{i:Tt,r:t,k:e,f:!!n}:t:null);function m(t,e=null,n=null,s=0,r=null,i=t===Ve?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Um(e),ref:e&&Xo(e),scopeId:fm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Tt};return l?(vu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ot(n)?8:16),Wi>0&&!o&&Wt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Wt.push(c),c}const Ue=JE;function JE(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===wE)&&(t=zn),Qi(t)){const l=Vr(t,e,!0);return n&&vu(l,n),Wi>0&&!i&&Wt&&(l.shapeFlag&6?Wt[Wt.indexOf(t)]=l:Wt.push(l)),l.patchFlag=-2,l}if(uT(t)&&(t=t.__vccOpts),e){e=ZE(e);let{class:l,style:c}=e;l&&!ot(l)&&(e.class=kr(l)),Ge(c)&&(du(c)&&!_e(c)&&(c=Vt({},c)),e.style=za(c))}const o=ot(t)?1:Lm(t)?128:uE(t)?64:Ge(t)?4:Te(t)?2:0;return m(t,e,n,s,r,o,i,!0)}function ZE(t){return t?du(t)||Cm(t)?Vt({},t):t:null}function Vr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?eT(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Um(h),ref:e&&e.ref?n&&i?_e(i)?i.concat(Xo(e)):[i,Xo(e)]:Xo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ve?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Vr(t.ssContent),ssFallback:t.ssFallback&&Vr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&mu(d,c.clone(d)),d}function vt(t=" ",e=0){return Ue(Za,null,t,e)}function un(t,e){const n=Ue(Yo,null,t);return n.staticCount=e,n}function tt(t="",e=!1){return e?(W(),Or(zn,null,t)):Ue(zn,null,t)}function En(t){return t==null||typeof t=="boolean"?Ue(zn):_e(t)?Ue(Ve,null,t.slice()):Qi(t)?ds(t):Ue(Za,null,String(t))}function ds(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Vr(t)}function vu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),vu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Cm(e)?e._ctx=Tt:r===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Tt},n=32):(e=String(e),s&64?(n=16,e=[vt(e)]):n=8);t.children=e,t.shapeFlag|=n}function eT(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=kr([e.class,s.class]));else if(r==="style")e.style=za([e.style,s.style]);else if(ja(r)){const i=e[r],o=s[r];o&&i!==o&&!(_e(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function _n(t,e,n,s=null){Cn(t,e,7,[n,s])}const tT=Am();let nT=0;function sT(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||tT,i={uid:nT++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Cv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:km(s,r),emitsOptions:bm(s,r),emit:null,emitted:null,propsDefaults:He,inheritAttrs:s.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=VE.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const rT=()=>Nt||Tt;let ga,vc;{const t=Ga(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ga=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),vc=e("__VUE_SSR_SETTERS__",n=>Yi=n)}const po=t=>{const e=Nt;return ga(t),t.scope.on(),()=>{t.scope.off(),ga(e)}},Sd=()=>{Nt&&Nt.scope.off(),ga(null)};function $m(t){return t.vnode.shapeFlag&4}let Yi=!1;function iT(t,e=!1,n=!1){e&&vc(e);const{props:s,children:r}=t.vnode,i=$m(t);$E(t,s,i,e),HE(t,r,n||e);const o=i?oT(t,e):void 0;return e&&vc(!1),o}function oT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,bE);const{setup:s}=n;if(s){Hn();const r=t.setupContext=s.length>1?lT(t):null,i=po(t),o=fo(s,t,0,[t.props,r]),l=Lp(o);if(Kn(),i(),(l||t.sp)&&!Ar(t)&&gm(t),l){if(o.then(Sd,Sd),e)return o.then(c=>{Cd(t,c)}).catch(c=>{Ya(c,t,0)});t.asyncDep=o}else Cd(t,o)}else Bm(t)}function Cd(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=am(e)),Bm(t)}function Bm(t,e,n){const s=t.type;t.render||(t.render=s.render||Tn);{const r=po(t);Hn();try{RE(t)}finally{Kn(),r()}}}const aT={get(t,e){return Pt(t,"get",""),t[e]}};function lT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,aT),slots:t.slots,emit:t.emit,expose:e}}function el(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(am(Qv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Vi)return Vi[n](t)},has(e,n){return n in e||n in Vi}})):t.proxy}function cT(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function uT(t){return Te(t)&&"__vccOpts"in t}const he=(t,e)=>eE(t,e,Yi);function jm(t,e,n){try{ma(-1);const s=arguments.length;return s===2?Ge(e)&&!_e(e)?Qi(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Qi(n)&&(n=[n]),Ue(t,e,n))}finally{ma(1)}}const hT="3.5.26";let Ec;const Pd=typeof window<"u"&&window.trustedTypes;if(Pd)try{Ec=Pd.createPolicy("vue",{createHTML:t=>t})}catch{}const qm=Ec?t=>Ec.createHTML(t):t=>t,dT="http://www.w3.org/2000/svg",fT="http://www.w3.org/1998/Math/MathML",Mn=typeof document<"u"?document:null,kd=Mn&&Mn.createElement("template"),pT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Mn.createElementNS(dT,t):e==="mathml"?Mn.createElementNS(fT,t):n?Mn.createElement(t,{is:n}):Mn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Mn.createTextNode(t),createComment:t=>Mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{kd.innerHTML=qm(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=kd.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},mT=Symbol("_vtc");function gT(t,e,n){const s=t[mT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Nd=Symbol("_vod"),_T=Symbol("_vsh"),yT=Symbol(""),vT=/(?:^|;)\s*display\s*:/;function ET(t,e,n){const s=t.style,r=ot(n);let i=!1;if(n&&!r){if(e)if(ot(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Jo(s,l,"")}else for(const o in e)n[o]==null&&Jo(s,o,"");for(const o in n)o==="display"&&(i=!0),Jo(s,o,n[o])}else if(r){if(e!==n){const o=s[yT];o&&(n+=";"+o),s.cssText=n,i=vT.test(n)}}else e&&t.removeAttribute("style");Nd in t&&(t[Nd]=i?s.display:"",t[_T]&&(s.display="none"))}const Dd=/\s*!important$/;function Jo(t,e,n){if(_e(n))n.forEach(s=>Jo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=TT(t,e);Dd.test(n)?t.setProperty(sr(s),n.replace(Dd,""),"important"):t[s]=n}}const Od=["Webkit","Moz","ms"],ql={};function TT(t,e){const n=ql[e];if(n)return n;let s=Zt(e);if(s!=="filter"&&s in t)return ql[e]=s;s=Ka(s);for(let r=0;r<Od.length;r++){const i=Od[r]+s;if(i in t)return ql[e]=i}return e}const Vd="http://www.w3.org/1999/xlink";function Md(t,e,n,s,r,i=Rv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Vd,e.slice(6,e.length)):t.setAttributeNS(Vd,e,n):n==null||i&&!Bp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":dn(n)?String(n):n)}function xd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?qm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Bp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function ps(t,e,n,s){t.addEventListener(e,n,s)}function IT(t,e,n,s){t.removeEventListener(e,n,s)}const Ld=Symbol("_vei");function wT(t,e,n,s,r=null){const i=t[Ld]||(t[Ld]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=AT(e);if(s){const h=i[e]=ST(s,r);ps(t,l,h,c)}else o&&(IT(t,l,o,c),i[e]=void 0)}}const Fd=/(?:Once|Passive|Capture)$/;function AT(t){let e;if(Fd.test(t)){e={};let s;for(;s=t.match(Fd);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):sr(t.slice(2)),e]}let Hl=0;const bT=Promise.resolve(),RT=()=>Hl||(bT.then(()=>Hl=0),Hl=Date.now());function ST(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Cn(CT(s,n.value),e,5,[s])};return n.value=t,n.attached=RT(),n}function CT(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Ud=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PT=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?gT(t,s,o):e==="style"?ET(t,n,s):ja(e)?nu(e)||wT(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kT(t,e,s,o))?(xd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Md(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ot(s))?xd(t,Zt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Md(t,e,s,o))};function kT(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ud(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ud(e)&&ot(n)?!1:e in t}const Mr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>Wo(e,n):e};function NT(t){t.target.composing=!0}function $d(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const jn=Symbol("_assign");function Bd(t,e,n){return e&&(t=t.trim()),n&&(t=iu(t)),t}const DT={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[jn]=Mr(r);const i=s||r.props&&r.props.type==="number";ps(t,e?"change":"input",o=>{o.target.composing||t[jn](Bd(t.value,n,i))}),(n||i)&&ps(t,"change",()=>{t.value=Bd(t.value,n,i)}),e||(ps(t,"compositionstart",NT),ps(t,"compositionend",$d),ps(t,"change",$d))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[jn]=Mr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?iu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},OT={deep:!0,created(t,e,n){t[jn]=Mr(n),ps(t,"change",()=>{const s=t._modelValue,r=Hm(t),i=t.checked,o=t[jn];if(_e(s)){const l=jp(s,r),c=l!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const h=[...s];h.splice(l,1),o(h)}}else if(qa(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Km(t,i))})},mounted:jd,beforeUpdate(t,e,n){t[jn]=Mr(n),jd(t,e,n)}};function jd(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(_e(e))r=jp(e,s.props.value)>-1;else if(qa(e))r=e.has(s.props.value);else{if(e===n)return;r=Nr(e,Km(t,!0))}t.checked!==r&&(t.checked=r)}const Kl={created(t,{value:e},n){t.checked=Nr(e,n.props.value),t[jn]=Mr(n),ps(t,"change",()=>{t[jn](Hm(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[jn]=Mr(s),e!==n&&(t.checked=Nr(e,s.props.value))}};function Hm(t){return"_value"in t?t._value:t.value}function Km(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const VT=["ctrl","shift","alt","meta"],MT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>VT.some(n=>t[`${n}Key`]&&!e.includes(n))},Gm=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=MT[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},xT=Vt({patchProp:PT},pT);let qd;function LT(){return qd||(qd=GE(xT))}const FT=((...t)=>{const e=LT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=$T(s);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,UT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function UT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function $T(t){return ot(t)?document.querySelector(t):t}const Tc=Ie(null),zm=Ie(""),Ic=Ie(!1);let Hd=null;const $o=t=>String(t).padStart(2,"0"),BT=()=>{const t=new Date,e=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(e+540*60*1e3)},jT=t=>{if(!(t instanceof Date))return"...";const e=t.getFullYear(),n=$o(t.getMonth()+1),s=$o(t.getDate()),r=$o(t.getHours()),i=$o(t.getMinutes());return`${e}. ${n}. ${s}. ${r}:${i}`};function qT(){if(Hd)return;const t=()=>{Tc.value=BT(),zm.value=jT(Tc.value),Ic.value||(Ic.value=!0)};t(),Hd=setInterval(t,1e3)}function Wm(){return{kstDate:Tc,kstString:zm,isKstTimeReady:Ic}}const HT={__name:"App",setup(t){return gu(()=>{qT()}),(e,n)=>{const s=zi("router-view");return W(),Or(s)}}};const gr=typeof document<"u";function Qm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function KT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Qm(t.default)}const Me=Object.assign;function Gl(t,e){const n={};for(const s in e){const r=e[s];n[s]=pn(r)?r.map(t):t(r)}return n}const xi=()=>{},pn=Array.isArray;function Kd(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Ym=/#/g,GT=/&/g,zT=/\//g,WT=/=/g,QT=/\?/g,Xm=/\+/g,YT=/%5B/g,XT=/%5D/g,Jm=/%5E/g,JT=/%60/g,Zm=/%7B/g,ZT=/%7C/g,eg=/%7D/g,eI=/%20/g;function Eu(t){return t==null?"":encodeURI(""+t).replace(ZT,"|").replace(YT,"[").replace(XT,"]")}function tI(t){return Eu(t).replace(Zm,"{").replace(eg,"}").replace(Jm,"^")}function wc(t){return Eu(t).replace(Xm,"%2B").replace(eI,"+").replace(Ym,"%23").replace(GT,"%26").replace(JT,"`").replace(Zm,"{").replace(eg,"}").replace(Jm,"^")}function nI(t){return wc(t).replace(WT,"%3D")}function sI(t){return Eu(t).replace(Ym,"%23").replace(QT,"%3F")}function rI(t){return sI(t).replace(zT,"%2F")}function Xi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const iI=/\/$/,oI=t=>t.replace(iI,"");function zl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=uI(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Xi(o)}}function aI(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Gd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function lI(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&xr(e.matched[s],n.matched[r])&&tg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function xr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function tg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!cI(t[n],e[n]))return!1;return!0}function cI(t,e){return pn(t)?zd(t,e):pn(e)?zd(e,t):t?.valueOf()===e?.valueOf()}function zd(t,e){return pn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function uI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ac=(function(t){return t.pop="pop",t.push="push",t})({}),Wl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function hI(t){if(!t)if(gr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),oI(t)}const dI=/^[^#]+#/;function fI(t,e){return t.replace(dI,"#")+e}function pI(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const tl=()=>({left:window.scrollX,top:window.scrollY});function mI(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=pI(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Wd(t,e){return(history.state?history.state.position-e:-1)+t}const bc=new Map;function gI(t,e){bc.set(t,e)}function _I(t){const e=bc.get(t);return bc.delete(t),e}function yI(t){return typeof t=="string"||t&&typeof t=="object"}function ng(t){return typeof t=="string"||typeof t=="symbol"}let et=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const sg=Symbol("");et.MATCHER_NOT_FOUND+"",et.NAVIGATION_GUARD_REDIRECT+"",et.NAVIGATION_ABORTED+"",et.NAVIGATION_CANCELLED+"",et.NAVIGATION_DUPLICATED+"";function Lr(t,e){return Me(new Error,{type:t,[sg]:!0},e)}function Vn(t,e){return t instanceof Error&&sg in t&&(e==null||!!(t.type&e))}const vI=["params","query","hash"];function EI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of vI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function TI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Xm," "),i=r.indexOf("="),o=Xi(i<0?r:r.slice(0,i)),l=i<0?null:Xi(r.slice(i+1));if(o in e){let c=e[o];pn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Qd(t){let e="";for(let n in t){const s=t[n];if(n=nI(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(pn(s)?s.map(r=>r&&wc(r)):[s&&wc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function II(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=pn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const wI=Symbol(""),Yd=Symbol(""),nl=Symbol(""),Tu=Symbol(""),Rc=Symbol("");function Ei(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(Lr(et.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?c(g):yI(g)?c(Lr(et.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),l())},d=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function Ql(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Qm(c)){const h=(c.__vccOpts||c)[e];h&&i.push(fs(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=KT(d)?d.default:d;o.mods[l]=d,o.components[l]=p;const g=(p.__vccOpts||p)[e];return g&&fs(g,n,s,o,l,r)()}))}}return i}function AI(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>xr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>xr(h,c))||r.push(c))}return[n,s,r]}let bI=()=>location.protocol+"//"+location.host;function rg(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Gd(l,"")}return Gd(n,t)+s+r}function RI(t,e,n,s){let r=[],i=[],o=null;const l=({state:g})=>{const y=rg(t,location),N=n.value,O=e.value;let M=0;if(g){if(n.value=y,e.value=g,o&&o===N){o=null;return}M=O?g.position-O.position:0}else s(y);r.forEach(B=>{B(n.value,N,{delta:M,type:Ac.pop,direction:M?M>0?Wl.forward:Wl.back:Wl.unknown})})};function c(){o=n.value}function h(g){r.push(g);const y=()=>{const N=r.indexOf(g);N>-1&&r.splice(N,1)};return i.push(y),y}function d(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Me({},g.state,{scroll:tl()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:h,destroy:p}}function Xd(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?tl():null}}function SI(t){const{history:e,location:n}=window,s={value:rg(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:bI()+t+c;try{e[d?"replaceState":"pushState"](h,"",g),r.value=h}catch(y){console.error(y),n[d?"replace":"assign"](g)}}function o(c,h){i(c,Me({},e.state,Xd(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const d=Me({},r.value,e.state,{forward:c,scroll:tl()});i(d.current,d,!0),i(c,Me({},Xd(s.value,c,null),{position:d.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function CI(t){t=hI(t);const e=SI(t),n=RI(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Me({location:"",base:t,go:s,createHref:fI.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let js=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ct=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ct||{});const PI={type:js.Static,value:""},kI=/[a-zA-Z0-9_]/;function NI(t){if(!t)return[[]];if(t==="/")return[[PI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=ct.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===ct.Static?i.push({type:js.Static,value:h}):n===ct.Param||n===ct.ParamRegExp||n===ct.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:js.Param,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==ct.ParamRegExp){s=n,n=ct.EscapeNext;continue}switch(n){case ct.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=ct.Param):g();break;case ct.EscapeNext:g(),n=s;break;case ct.Param:c==="("?n=ct.ParamRegExp:kI.test(c)?g():(p(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case ct.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=ct.ParamRegExpEnd:d+=c;break;case ct.ParamRegExpEnd:p(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===ct.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Jd="[^/]+?",DI={sensitive:!1,strict:!1,start:!0,end:!0};var Ut=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ut||{});const OI=/[.+*?^${}()[\]/\\]/g;function VI(t,e){const n=Me({},DI,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[Ut.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const g=h[p];let y=Ut.Segment+(n.sensitive?Ut.BonusCaseSensitive:0);if(g.type===js.Static)p||(r+="/"),r+=g.value.replace(OI,"\\$&"),y+=Ut.Static;else if(g.type===js.Param){const{value:N,repeatable:O,optional:M,regexp:B}=g;i.push({name:N,repeatable:O,optional:M});const q=B||Jd;if(q!==Jd){y+=Ut.BonusCustomRegExp;try{`${q}`}catch(C){throw new Error(`Invalid custom RegExp for param "${N}" (${q}): `+C.message)}}let V=O?`((?:${q})(?:/(?:${q}))*)`:`(${q})`;p||(V=M&&h.length<2?`(?:/${V})`:"/"+V),M&&(V+="?"),r+=V,y+=Ut.Dynamic,M&&(y+=Ut.BonusOptional),O&&(y+=Ut.BonusRepeatable),q===".*"&&(y+=Ut.BonusWildcard)}d.push(y)}s.push(d)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Ut.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const d=h.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const y=d[g]||"",N=i[g-1];p[N.name]=y&&N.repeatable?y.split("/"):y}return p}function c(h){let d="",p=!1;for(const g of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const y of g)if(y.type===js.Static)d+=y.value;else if(y.type===js.Param){const{value:N,repeatable:O,optional:M}=y,B=N in h?h[N]:"";if(pn(B)&&!O)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const q=pn(B)?B.join("/"):B;if(!q)if(M)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${N}"`);d+=q}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function MI(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Ut.Static+Ut.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ut.Static+Ut.Segment?1:-1:0}function ig(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=MI(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Zd(s))return 1;if(Zd(r))return-1}return r.length-s.length}function Zd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const xI={strict:!1,end:!0,sensitive:!1};function LI(t,e,n){const s=VI(NI(t.path),n),r=Me(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function FI(t,e){const n=[],s=new Map;e=Kd(xI,e);function r(p){return s.get(p)}function i(p,g,y){const N=!y,O=tf(p);O.aliasOf=y&&y.record;const M=Kd(e,p),B=[O];if("alias"in p){const C=typeof p.alias=="string"?[p.alias]:p.alias;for(const G of C)B.push(tf(Me({},O,{components:y?y.record.components:O.components,path:G,aliasOf:y?y.record:O})))}let q,V;for(const C of B){const{path:G}=C;if(g&&G[0]!=="/"){const Z=g.record.path,w=Z[Z.length-1]==="/"?"":"/";C.path=g.record.path+(G&&w+G)}if(q=LI(C,g,M),y?y.alias.push(q):(V=V||q,V!==q&&V.alias.push(q),N&&p.name&&!nf(q)&&o(p.name)),og(q)&&c(q),O.children){const Z=O.children;for(let w=0;w<Z.length;w++)i(Z[w],q,y&&y.children[w])}y=y||q}return V?()=>{o(V)}:xi}function o(p){if(ng(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const g=BI(p,n);n.splice(g,0,p),p.record.name&&!nf(p)&&s.set(p.record.name,p)}function h(p,g){let y,N={},O,M;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw Lr(et.MATCHER_NOT_FOUND,{location:p});M=y.record.name,N=Me(ef(g.params,y.keys.filter(V=>!V.optional).concat(y.parent?y.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),p.params&&ef(p.params,y.keys.map(V=>V.name))),O=y.stringify(N)}else if(p.path!=null)O=p.path,y=n.find(V=>V.re.test(O)),y&&(N=y.parse(O),M=y.record.name);else{if(y=g.name?s.get(g.name):n.find(V=>V.re.test(g.path)),!y)throw Lr(et.MATCHER_NOT_FOUND,{location:p,currentLocation:g});M=y.record.name,N=Me({},g.params,p.params),O=y.stringify(N)}const B=[];let q=y;for(;q;)B.unshift(q.record),q=q.parent;return{name:M,path:O,params:N,matched:B,meta:$I(B)}}t.forEach(p=>i(p));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function ef(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function tf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:UI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function UI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function nf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function $I(t){return t.reduce((e,n)=>Me(e,n.meta),{})}function BI(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;ig(t,e[i])<0?s=i:n=i+1}const r=jI(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function jI(t){let e=t;for(;e=e.parent;)if(og(e)&&ig(t,e)===0)return e}function og({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function sf(t){const e=cn(nl),n=cn(Tu),s=he(()=>{const c=Fe(t.to);return e.resolve(c)}),r=he(()=>{const{matched:c}=s.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(xr.bind(null,d));if(g>-1)return g;const y=rf(c[h-2]);return h>1&&rf(d)===y&&p[p.length-1].path!==y?p.findIndex(xr.bind(null,c[h-2])):g}),i=he(()=>r.value>-1&&zI(n.params,s.value.params)),o=he(()=>r.value>-1&&r.value===n.matched.length-1&&tg(n.params,s.value.params));function l(c={}){if(GI(c)){const h=e[Fe(t.replace)?"replace":"push"](Fe(t.to)).catch(xi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:he(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function qI(t){return t.length===1?t[0]:t}const HI=mm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sf,setup(t,{slots:e}){const n=Qa(sf(t)),{options:s}=cn(nl),r=he(()=>({[of(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[of(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&qI(e.default(n));return t.custom?i:jm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),KI=HI;function GI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function zI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!pn(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function rf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const of=(t,e,n)=>t??e??n,WI=mm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=cn(Rc),r=he(()=>t.route||s.value),i=cn(Yd,0),o=he(()=>{let h=Fe(i);const{matched:d}=r.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=he(()=>r.value.matched[o.value]);Qo(Yd,he(()=>o.value+1)),Qo(wI,l),Qo(Rc,r);const c=Ie();return Bn(()=>[c.value,l.value,t.name],([h,d,p],[g,y,N])=>{d&&(d.instances[p]=h,y&&y!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!xr(d,y)||!g)&&(d.enterCallbacks[p]||[]).forEach(O=>O(h))},{flush:"post"}),()=>{const h=r.value,d=t.name,p=l.value,g=p&&p.components[d];if(!g)return af(n.default,{Component:g,route:h});const y=p.props[d],N=y?y===!0?h.params:typeof y=="function"?y(h):y:null,M=jm(g,Me({},N,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return af(n.default,{Component:M,route:h})||M}}});function af(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const QI=WI;function YI(t){const e=FI(t.routes,t),n=t.parseQuery||TI,s=t.stringifyQuery||Qd,r=t.history,i=Ei(),o=Ei(),l=Ei(),c=Yv(as);let h=as;gr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Gl.bind(null,F=>""+F),p=Gl.bind(null,rI),g=Gl.bind(null,Xi);function y(F,ie){let ee,ce;return ng(F)?(ee=e.getRecordMatcher(F),ce=ie):ce=F,e.addRoute(ce,ee)}function N(F){const ie=e.getRecordMatcher(F);ie&&e.removeRoute(ie)}function O(){return e.getRoutes().map(F=>F.record)}function M(F){return!!e.getRecordMatcher(F)}function B(F,ie){if(ie=Me({},ie||c.value),typeof F=="string"){const P=zl(n,F,ie.path),x=e.resolve({path:P.path},ie),$=r.createHref(P.fullPath);return Me(P,x,{params:g(x.params),hash:Xi(P.hash),redirectedFrom:void 0,href:$})}let ee;if(F.path!=null)ee=Me({},F,{path:zl(n,F.path,ie.path).path});else{const P=Me({},F.params);for(const x in P)P[x]==null&&delete P[x];ee=Me({},F,{params:p(P)}),ie.params=p(ie.params)}const ce=e.resolve(ee,ie),Re=F.hash||"";ce.params=d(g(ce.params));const E=aI(s,Me({},F,{hash:tI(Re),path:ce.path})),A=r.createHref(E);return Me({fullPath:E,hash:Re,query:s===Qd?II(F.query):F.query||{}},ce,{redirectedFrom:void 0,href:A})}function q(F){return typeof F=="string"?zl(n,F,c.value.path):Me({},F)}function V(F,ie){if(h!==F)return Lr(et.NAVIGATION_CANCELLED,{from:ie,to:F})}function C(F){return w(F)}function G(F){return C(Me(q(F),{replace:!0}))}function Z(F,ie){const ee=F.matched[F.matched.length-1];if(ee&&ee.redirect){const{redirect:ce}=ee;let Re=typeof ce=="function"?ce(F,ie):ce;return typeof Re=="string"&&(Re=Re.includes("?")||Re.includes("#")?Re=q(Re):{path:Re},Re.params={}),Me({query:F.query,hash:F.hash,params:Re.path!=null?{}:F.params},Re)}}function w(F,ie){const ee=h=B(F),ce=c.value,Re=F.state,E=F.force,A=F.replace===!0,P=Z(ee,ce);if(P)return w(Me(q(P),{state:typeof P=="object"?Me({},Re,P.state):Re,force:E,replace:A}),ie||ee);const x=ee;x.redirectedFrom=ie;let $;return!E&&lI(s,ce,ee)&&($=Lr(et.NAVIGATION_DUPLICATED,{to:x,from:ce}),xt(ce,ce,!0,!1)),($?Promise.resolve($):R(x,ce)).catch(L=>Vn(L)?Vn(L,et.NAVIGATION_GUARD_REDIRECT)?L:Qt(L):Ae(L,x,ce)).then(L=>{if(L){if(Vn(L,et.NAVIGATION_GUARD_REDIRECT))return w(Me({replace:A},q(L.to),{state:typeof L.to=="object"?Me({},Re,L.to.state):Re,force:E}),ie||x)}else L=S(x,ce,!0,A,Re);return b(x,ce,L),L})}function v(F,ie){const ee=V(F,ie);return ee?Promise.reject(ee):Promise.resolve()}function I(F){const ie=X.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(F):F()}function R(F,ie){let ee;const[ce,Re,E]=AI(F,ie);ee=Ql(ce.reverse(),"beforeRouteLeave",F,ie);for(const P of ce)P.leaveGuards.forEach(x=>{ee.push(fs(x,F,ie))});const A=v.bind(null,F,ie);return ee.push(A),je(ee).then(()=>{ee=[];for(const P of i.list())ee.push(fs(P,F,ie));return ee.push(A),je(ee)}).then(()=>{ee=Ql(Re,"beforeRouteUpdate",F,ie);for(const P of Re)P.updateGuards.forEach(x=>{ee.push(fs(x,F,ie))});return ee.push(A),je(ee)}).then(()=>{ee=[];for(const P of E)if(P.beforeEnter)if(pn(P.beforeEnter))for(const x of P.beforeEnter)ee.push(fs(x,F,ie));else ee.push(fs(P.beforeEnter,F,ie));return ee.push(A),je(ee)}).then(()=>(F.matched.forEach(P=>P.enterCallbacks={}),ee=Ql(E,"beforeRouteEnter",F,ie,I),ee.push(A),je(ee))).then(()=>{ee=[];for(const P of o.list())ee.push(fs(P,F,ie));return ee.push(A),je(ee)}).catch(P=>Vn(P,et.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function b(F,ie,ee){l.list().forEach(ce=>I(()=>ce(F,ie,ee)))}function S(F,ie,ee,ce,Re){const E=V(F,ie);if(E)return E;const A=ie===as,P=gr?history.state:{};ee&&(ce||A?r.replace(F.fullPath,Me({scroll:A&&P&&P.scroll},Re)):r.push(F.fullPath,Re)),c.value=F,xt(F,ie,ee,A),Qt()}let T;function ae(){T||(T=r.listen((F,ie,ee)=>{if(!te.listening)return;const ce=B(F),Re=Z(ce,te.currentRoute.value);if(Re){w(Me(Re,{replace:!0,force:!0}),ce).catch(xi);return}h=ce;const E=c.value;gr&&gI(Wd(E.fullPath,ee.delta),tl()),R(ce,E).catch(A=>Vn(A,et.NAVIGATION_ABORTED|et.NAVIGATION_CANCELLED)?A:Vn(A,et.NAVIGATION_GUARD_REDIRECT)?(w(Me(q(A.to),{force:!0}),ce).then(P=>{Vn(P,et.NAVIGATION_ABORTED|et.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===Ac.pop&&r.go(-1,!1)}).catch(xi),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),Ae(A,ce,E))).then(A=>{A=A||S(ce,E,!1),A&&(ee.delta&&!Vn(A,et.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===Ac.pop&&Vn(A,et.NAVIGATION_ABORTED|et.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(ce,E,A)}).catch(xi)}))}let re=Ei(),Ne=Ei(),Oe;function Ae(F,ie,ee){Qt(F);const ce=Ne.list();return ce.length?ce.forEach(Re=>Re(F,ie,ee)):console.error(F),Promise.reject(F)}function gt(){return Oe&&c.value!==as?Promise.resolve():new Promise((F,ie)=>{re.add([F,ie])})}function Qt(F){return Oe||(Oe=!F,ae(),re.list().forEach(([ie,ee])=>F?ee(F):ie()),re.reset()),F}function xt(F,ie,ee,ce){const{scrollBehavior:Re}=t;if(!gr||!Re)return Promise.resolve();const E=!ee&&_I(Wd(F.fullPath,0))||(ce||!ee)&&history.state&&history.state.scroll||null;return cm().then(()=>Re(F,ie,E)).then(A=>A&&mI(A)).catch(A=>Ae(A,F,ie))}const at=F=>r.go(F);let se;const X=new Set,te={currentRoute:c,listening:!0,addRoute:y,removeRoute:N,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:O,resolve:B,options:t,push:C,replace:G,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ne.add,isReady:gt,install(F){F.component("RouterLink",KI),F.component("RouterView",QI),F.config.globalProperties.$router=te,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Fe(c)}),gr&&!se&&c.value===as&&(se=!0,C(r.location).catch(ce=>{}));const ie={};for(const ce in as)Object.defineProperty(ie,ce,{get:()=>c.value[ce],enumerable:!0});F.provide(nl,te),F.provide(Tu,im(ie)),F.provide(Rc,c);const ee=F.unmount;X.add(F),F.unmount=function(){X.delete(F),X.size<1&&(h=as,T&&T(),T=null,c.value=as,se=!1,Oe=!1),ee()}}};function je(F){return F.reduce((ie,ee)=>ie.then(()=>I(ee)),Promise.resolve())}return te}function zr(){return cn(nl)}function XI(t){return cn(Tu)}const JI=()=>{};var lf={};const ag=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ZI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},lg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,y=h&63;c||(y=64,o||(g=64)),s.push(n[d],n[p],n[g],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ag(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new ew;const g=i<<2|l>>4;if(s.push(g),h!==64){const y=l<<4&240|h>>2;if(s.push(y),p!==64){const N=h<<6&192|p;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ew extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tw=function(t){const e=ag(t);return lg.encodeByteArray(e,!0)},_a=function(t){return tw(t).replace(/\./g,"")},cg=function(t){try{return lg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const sw=()=>nw().__FIREBASE_DEFAULTS__,rw=()=>{if(typeof process>"u"||typeof lf>"u")return;const t=lf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cg(t[1]);return e&&JSON.parse(e)},sl=()=>{try{return JI()||sw()||rw()||iw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ug=t=>sl()?.emulatorHosts?.[t],ow=t=>{const e=ug(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},hg=()=>sl()?.config,dg=t=>sl()?.[`_${t}`];class aw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Wr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fg(t){return(await fetch(t,{credentials:"include"})).ok}function lw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_a(JSON.stringify(n)),_a(JSON.stringify(o)),""].join(".")}const Li={};function cw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Li))Li[e]?t.emulator.push(e):t.prod.push(e);return t}function uw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cf=!1;function pg(t,e){if(typeof window>"u"||typeof document>"u"||!Wr(window.location.host)||Li[t]===e||Li[t]||cf)return;Li[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=cw().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{cf=!0,o()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=uw(s),y=n("text"),N=document.getElementById(y)||document.createElement("span"),O=n("learnmore"),M=document.getElementById(O)||document.createElement("a"),B=n("preprendIcon"),q=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const V=g.element;l(V),d(M,O);const C=h();c(q,B),V.append(q,N,M,C),document.body.appendChild(V)}i?(N.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function dw(){const t=sl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gw(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _w(){return!dw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yw(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const Ew="FirebaseError";class es extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ew,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Tw(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new es(r,l,s)}}function Tw(t,e){return t.replace(Iw,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Iw=/\{\$([^}]+)}/g;function ww(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(uf(i)&&uf(o)){if(!Xs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function uf(t){return t!==null&&typeof t=="object"}function go(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Aw(t,e){const n=new bw(t,e);return n.subscribe.bind(n)}class bw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Rw(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Yl),r.error===void 0&&(r.error=Yl),r.complete===void 0&&(r.complete=Yl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yl(){}function en(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bs="[DEFAULT]";class Sw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new aw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pw(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Cw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cw(t){return t===Bs?void 0:t}function Pw(t){return t.instantiationMode==="EAGER"}class kw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const Nw={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Dw=Se.INFO,Ow={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},Vw=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Ow[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Iu{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=Vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const Mw=(t,e)=>e.some(n=>t instanceof n);let hf,df;function xw(){return hf||(hf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lw(){return df||(df=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mg=new WeakMap,Sc=new WeakMap,gg=new WeakMap,Xl=new WeakMap,wu=new WeakMap;function Fw(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mg.set(n,t)}).catch(()=>{}),wu.set(e,t),e}function Uw(t){if(Sc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Sc.set(t,e)}let Cc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $w(t){Cc=t(Cc)}function Bw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Jl(this),e,...n);return gg.set(s,e.sort?e.sort():[e]),Es(s)}:Lw().includes(t)?function(...e){return t.apply(Jl(this),e),Es(mg.get(this))}:function(...e){return Es(t.apply(Jl(this),e))}}function jw(t){return typeof t=="function"?Bw(t):(t instanceof IDBTransaction&&Uw(t),Mw(t,xw())?new Proxy(t,Cc):t)}function Es(t){if(t instanceof IDBRequest)return Fw(t);if(Xl.has(t))return Xl.get(t);const e=jw(t);return e!==t&&(Xl.set(t,e),wu.set(e,t)),e}const Jl=t=>wu.get(t);function qw(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Es(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Es(o.result),c.oldVersion,c.newVersion,Es(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Hw=["get","getKey","getAll","getAllKeys","count"],Kw=["put","add","delete","clear"],Zl=new Map;function ff(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zl.get(e))return Zl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Kw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Hw.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Zl.set(e,i),i}$w(t=>({...t,get:(e,n,s)=>ff(e,n)||t.get(e,n,s),has:(e,n)=>!!ff(e,n)||t.has(e,n)}));class Gw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function zw(t){return t.getComponent()?.type==="VERSION"}const Pc="@firebase/app",pf="0.14.6";const Wn=new Iu("@firebase/app"),Ww="@firebase/app-compat",Qw="@firebase/analytics-compat",Yw="@firebase/analytics",Xw="@firebase/app-check-compat",Jw="@firebase/app-check",Zw="@firebase/auth",eA="@firebase/auth-compat",tA="@firebase/database",nA="@firebase/data-connect",sA="@firebase/database-compat",rA="@firebase/functions",iA="@firebase/functions-compat",oA="@firebase/installations",aA="@firebase/installations-compat",lA="@firebase/messaging",cA="@firebase/messaging-compat",uA="@firebase/performance",hA="@firebase/performance-compat",dA="@firebase/remote-config",fA="@firebase/remote-config-compat",pA="@firebase/storage",mA="@firebase/storage-compat",gA="@firebase/firestore",_A="@firebase/ai",yA="@firebase/firestore-compat",vA="firebase",EA="12.6.0";const kc="[DEFAULT]",TA={[Pc]:"fire-core",[Ww]:"fire-core-compat",[Yw]:"fire-analytics",[Qw]:"fire-analytics-compat",[Jw]:"fire-app-check",[Xw]:"fire-app-check-compat",[Zw]:"fire-auth",[eA]:"fire-auth-compat",[tA]:"fire-rtdb",[nA]:"fire-data-connect",[sA]:"fire-rtdb-compat",[rA]:"fire-fn",[iA]:"fire-fn-compat",[oA]:"fire-iid",[aA]:"fire-iid-compat",[lA]:"fire-fcm",[cA]:"fire-fcm-compat",[uA]:"fire-perf",[hA]:"fire-perf-compat",[dA]:"fire-rc",[fA]:"fire-rc-compat",[pA]:"fire-gcs",[mA]:"fire-gcs-compat",[gA]:"fire-fst",[yA]:"fire-fst-compat",[_A]:"fire-vertex","fire-js":"fire-js",[vA]:"fire-js-all"};const ya=new Map,IA=new Map,Nc=new Map;function mf(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fr(t){const e=t.name;if(Nc.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Nc.set(e,t);for(const n of ya.values())mf(n,t);for(const n of IA.values())mf(n,t);return!0}function Au(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}const wA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new mo("app","Firebase",wA);class AA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}const Qr=EA;function _g(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:kc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ts.create("bad-app-name",{appName:String(r)});if(n||(n=hg()),!n)throw Ts.create("no-options");const i=ya.get(r);if(i){if(Xs(n,i.options)&&Xs(s,i.config))return i;throw Ts.create("duplicate-app",{appName:r})}const o=new kw(r);for(const c of Nc.values())o.addComponent(c);const l=new AA(n,s,o);return ya.set(r,l),l}function yg(t=kc){const e=ya.get(t);if(!e&&t===kc&&hg())return _g();if(!e)throw Ts.create("no-app",{appName:t});return e}function Is(t,e,n){let s=TA[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(o.join(" "));return}Fr(new Js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const bA="firebase-heartbeat-database",RA=1,Ji="firebase-heartbeat-store";let ec=null;function vg(){return ec||(ec=qw(bA,RA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ji)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ts.create("idb-open",{originalErrorMessage:t.message})})),ec}async function SA(t){try{const n=(await vg()).transaction(Ji),s=await n.objectStore(Ji).get(Eg(t));return await n.done,s}catch(e){if(e instanceof es)Wn.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(n.message)}}}async function gf(t,e){try{const s=(await vg()).transaction(Ji,"readwrite");await s.objectStore(Ji).put(e,Eg(t)),await s.done}catch(n){if(n instanceof es)Wn.warn(n.message);else{const s=Ts.create("idb-set",{originalErrorMessage:n?.message});Wn.warn(s.message)}}}function Eg(t){return`${t.name}!${t.options.appId}`}const CA=1024,PA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_f();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>PA){const r=OA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_f(),{heartbeatsToSend:n,unsentEntries:s}=NA(this._heartbeatsCache.heartbeats),r=_a(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Wn.warn(e),""}}}function _f(){return new Date().toISOString().substring(0,10)}function NA(t,e=CA){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),yf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yw()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yf(t){return _a(JSON.stringify({version:2,heartbeats:t})).length}function OA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function VA(t){Fr(new Js("platform-logger",e=>new Gw(e),"PRIVATE")),Fr(new Js("heartbeat",e=>new kA(e),"PRIVATE")),Is(Pc,pf,t),Is(Pc,pf,"esm2020"),Is("fire-js","")}VA("");function Tg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MA=Tg,Ig=new mo("auth","Firebase",Tg());const va=new Iu("@firebase/auth");function xA(t,...e){va.logLevel<=Se.WARN&&va.warn(`Auth (${Qr}): ${t}`,...e)}function Zo(t,...e){va.logLevel<=Se.ERROR&&va.error(`Auth (${Qr}): ${t}`,...e)}function Pn(t,...e){throw Ru(t,...e)}function hn(t,...e){return Ru(t,...e)}function bu(t,e,n){const s={...MA(),[e]:n};return new mo("auth","Firebase",s).create(e,{appName:t.name})}function Ws(t){return bu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Pn(t,"argument-error"),bu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ru(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Ig.create(t,...e)}function ye(t,e,...n){if(!t)throw Ru(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zo(e),new Error(e)}function Qn(t,e){t||Un(e)}function Dc(){return typeof self<"u"&&self.location?.href||""}function FA(){return vf()==="http:"||vf()==="https:"}function vf(){return typeof self<"u"&&self.location?.protocol||null}function UA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FA()||pw()||"connection"in navigator)?navigator.onLine:!0}function $A(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class _o{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=hw()||mw()}get(){return UA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Su(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class wg{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const BA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qA=new _o(3e4,6e4);function Cu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Yr(t,e,n,s,r={}){return Ag(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=go({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return fw()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Wr(t.emulatorConfig.host)&&(h.credentials="include"),wg.fetch()(await bg(t,t.config.apiHost,n,l),h)})}async function Ag(t,e,n){t._canInitEmulator=!1;const s={...BA,...e};try{const r=new KA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Bo(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bu(t,d,h);Pn(t,d)}}catch(r){if(r instanceof es)throw r;Pn(t,"network-request-failed",{message:String(r)})}}async function HA(t,e,n,s,r={}){const i=await Yr(t,e,n,s,r);return"mfaPendingCredential"in i&&Pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function bg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Su(t.config,r):`${t.config.apiScheme}://${r}`;return jA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class KA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hn(this.auth,"network-request-failed")),qA.get())})}}function Bo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=hn(t,e,s);return r.customData._tokenResponse=n,r}async function GA(t,e){return Yr(t,"POST","/v1/accounts:delete",e)}async function Ea(t,e){return Yr(t,"POST","/v1/accounts:lookup",e)}function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zA(t,e=!1){const n=en(t),s=await n.getIdToken(e),r=Pu(s);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Fi(tc(r.auth_time)),issuedAtTime:Fi(tc(r.iat)),expirationTime:Fi(tc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function tc(t){return Number(t)*1e3}function Pu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Zo("JWT malformed, contained fewer than 3 sections"),null;try{const r=cg(n);return r?JSON.parse(r):(Zo("Failed to decode base64 JWT payload"),null)}catch(r){return Zo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Ef(t){const e=Pu(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Zi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof es&&WA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function WA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Oc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ta(t){const e=t.auth,n=await t.getIdToken(),s=await Zi(t,Ea(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Rg(r.providerUserInfo):[],o=XA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Oc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function YA(t){const e=en(t);await Ta(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Rg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function JA(t,e){const n=await Ag(t,{},async()=>{const s=go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await bg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Wr(t.emulatorConfig.host)&&(c.credentials="include"),wg.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZA(t,e){return Yr(t,"POST","/v2/accounts:revokeToken",Cu(t,e))}class Rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ef(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Ef(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await JA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Rr;return s&&(ye(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ye(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rr,this.toJSON())}_performRefresh(){return Un("not implemented")}}function ls(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Oc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Zi(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zA(this,e)}reload(){return YA(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ta(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Zi(this,GA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:N,stsTokenManager:O}=n;ye(p&&O,e,"internal-error");const M=Rr.fromJSON(this.name,O);ye(typeof p=="string",e,"internal-error"),ls(s,e.name),ls(r,e.name),ye(typeof g=="boolean",e,"internal-error"),ye(typeof y=="boolean",e,"internal-error"),ls(i,e.name),ls(o,e.name),ls(l,e.name),ls(c,e.name),ls(h,e.name),ls(d,e.name);const B=new on({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:M,createdAt:h,lastLoginAt:d});return N&&Array.isArray(N)&&(B.providerData=N.map(q=>({...q}))),c&&(B._redirectEventId=c),B}static async _fromIdTokenResponse(e,n,s=!1){const r=new Rr;r.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ta(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Rg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Rr;l.updateFromIdToken(s);const c=new on({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Oc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const Tf=new Map;function $n(t){Qn(t instanceof Function,"Expected a class definition");let e=Tf.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tf.set(t,e),e)}class Sg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sg.type="NONE";const If=Sg;function ea(t,e,n){return`firebase:${t}:${e}:${n}`}class Sr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ea(this.userKey,r.apiKey,i),this.fullPersistenceKey=ea("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ea(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Sr($n(If),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||$n(If);const o=ea(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(o);if(d){let p;if(typeof d=="string"){const g=await Ea(e,{idToken:d}).catch(()=>{});if(!g)break;p=await on._fromGetAccountInfoResponse(e,g,d)}else p=on._fromJSON(e,d);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Sr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Sr(i,e,s))}}function wf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ng(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Og(e))return"Blackberry";if(Vg(e))return"Webos";if(Pg(e))return"Safari";if((e.includes("chrome/")||kg(e))&&!e.includes("edge/"))return"Chrome";if(Dg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Cg(t=Mt()){return/firefox\//i.test(t)}function Pg(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kg(t=Mt()){return/crios\//i.test(t)}function Ng(t=Mt()){return/iemobile/i.test(t)}function Dg(t=Mt()){return/android/i.test(t)}function Og(t=Mt()){return/blackberry/i.test(t)}function Vg(t=Mt()){return/webos/i.test(t)}function ku(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eb(t=Mt()){return ku(t)&&!!window.navigator?.standalone}function tb(){return gw()&&document.documentMode===10}function Mg(t=Mt()){return ku(t)||Dg(t)||Vg(t)||Og(t)||/windows phone/i.test(t)||Ng(t)}function xg(t,e=[]){let n;switch(t){case"Browser":n=wf(Mt());break;case"Worker":n=`${wf(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qr}/${s}`}class nb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function sb(t,e={}){return Yr(t,"GET","/v2/passwordPolicy",Cu(t,e))}const rb=6;class ib{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ob{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Af(this),this.idTokenSubscription=new Af(this),this.beforeStateQueue=new nb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ig,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ea(this,{idToken:e}),s=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ta(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$A()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(Ws(this));const n=e?en(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sb(this),n=new ib(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Sr.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(t){return en(t)}class Af{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aw(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ab(t){Nu=t}function lb(t){return Nu.loadJS(t)}function cb(){return Nu.gapiScript}function ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function hb(t,e){const n=Au(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Xs(i,e??{}))return r;Pn(r,"already-initialized")}return n.initialize({options:e})}function db(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map($n);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function fb(t,e,n){const s=rl(t);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Lg(e),{host:o,port:l}=pb(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(Xs(h,s.config.emulator)&&Xs(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,Wr(o)?(fg(`${i}//${o}${c}`),pg("Auth",!0)):mb()}function Lg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pb(t){const e=Lg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:bf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:bf(o)}}}function bf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function Cr(t,e){return HA(t,"POST","/v1/accounts:signInWithIdp",Cu(t,e))}const gb="http://localhost";class Zs extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Zs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Cr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Cr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cr(e,n)}buildRequest(){const e={requestUri:gb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=go(n)}return e}}class Du{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yo extends Du{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ms extends yo{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";class Fn extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zs._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Fn.credential(n,s)}catch{return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com";Fn.PROVIDER_ID="google.com";class gs extends yo{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";class _s extends yo{constructor(){super("twitter.com")}static credential(e,n){return Zs._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";class Ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await on._fromIdTokenResponse(e,s,r),o=Rf(s);return new Ur({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Rf(s);return new Ur({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Rf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ia extends es{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Ia.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Ia(e,n,s,r)}}function Ug(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ia._fromErrorAndOperation(t,i,e,s):i})}async function _b(t,e,n=!1){const s=await Zi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ur._forOperation(t,"link",s)}async function yb(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(Ws(s));const r="reauthenticate";try{const i=await Zi(t,Ug(s,r,e,t),n);ye(i.idToken,s,"internal-error");const o=Pu(i.idToken);ye(o,s,"internal-error");const{sub:l}=o;return ye(t.uid===l,s,"user-mismatch"),Ur._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Pn(s,"user-mismatch"),i}}async function vb(t,e,n=!1){if(sn(t.app))return Promise.reject(Ws(t));const s="signIn",r=await Ug(t,s,e),i=await Ur._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function Eb(t,e,n,s){return en(t).onIdTokenChanged(e,n,s)}function Tb(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function Ib(t,e,n,s){return en(t).onAuthStateChanged(e,n,s)}function wb(t){return en(t).signOut()}const wa="__sak";class $g{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ab=1e3,bb=10;class Bg extends $g{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);tb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,bb):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ab)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bg.type="LOCAL";const Rb=Bg;class jg extends $g{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jg.type="SESSION";const qg=jg;function Sb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class il{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new il(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await Sb(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}il.receivers=[];function Ou(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class Cb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Ou("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function In(){return window}function Pb(t){In().location.href=t}function Hg(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function kb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nb(){return navigator?.serviceWorker?.controller||null}function Db(){return Hg()?self:null}const Kg="firebaseLocalStorageDb",Ob=1,Aa="firebaseLocalStorage",Gg="fbase_key";class vo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ol(t,e){return t.transaction([Aa],e?"readwrite":"readonly").objectStore(Aa)}function Vb(){const t=indexedDB.deleteDatabase(Kg);return new vo(t).toPromise()}function Vc(){const t=indexedDB.open(Kg,Ob);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Aa,{keyPath:Gg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Aa)?e(s):(s.close(),await Vb(),e(await Vc()))})})}async function Sf(t,e,n){const s=ol(t,!0).put({[Gg]:e,value:n});return new vo(s).toPromise()}async function Mb(t,e){const n=ol(t,!1).get(e),s=await new vo(n).toPromise();return s===void 0?null:s.value}function Cf(t,e){const n=ol(t,!0).delete(e);return new vo(n).toPromise()}const xb=800,Lb=3;class zg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Lb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=il._getInstance(Db()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kb(),!this.activeServiceWorker)return;this.sender=new Cb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vc();return await Sf(e,wa,"1"),await Cf(e,wa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Sf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Mb(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=ol(r,!1).getAll();return new vo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zg.type="LOCAL";const Fb=zg;new _o(3e4,6e4);function Wg(t,e){return e?$n(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Vu extends Fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ub(t){return vb(t.auth,new Vu(t),t.bypassAuthState)}function $b(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),yb(n,new Vu(t),t.bypassAuthState)}async function Bb(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),_b(n,new Vu(t),t.bypassAuthState)}class Qg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ub;case"linkViaPopup":case"linkViaRedirect":return Bb;case"reauthViaPopup":case"reauthViaRedirect":return $b;default:Pn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jb=new _o(2e3,1e4);async function qb(t,e,n){if(sn(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const s=rl(t);LA(t,e,Du);const r=Wg(s,n);return new qs(s,"signInViaPopup",e,r).executeNotNull()}class qs extends Qg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Ou();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jb.get())};e()}}qs.currentPopupAction=null;const Hb="pendingRedirect",ta=new Map;class Kb extends Qg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ta.get(this.auth._key());if(!e){try{const s=await Gb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ta.set(this.auth._key(),e)}return this.bypassAuthState||ta.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gb(t,e){const n=Qb(e),s=Wb(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function zb(t,e){ta.set(t._key(),e)}function Wb(t){return $n(t._redirectPersistence)}function Qb(t){return ea(Hb,t.config.apiKey,t.name)}async function Yb(t,e,n=!1){if(sn(t.app))return Promise.reject(Ws(t));const s=rl(t),r=Wg(s,e),o=await new Kb(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const Xb=600*1e3;class Jb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Yg(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pf(e))}saveEventToCache(e){this.cachedEventUids.add(Pf(e)),this.lastProcessedEventTime=Date.now()}}function Pf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Zb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yg(t);default:return!1}}async function eR(t,e={}){return Yr(t,"GET","/v1/projects",e)}const tR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nR=/^https?/;async function sR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eR(t);for(const n of e)try{if(rR(n))return}catch{}Pn(t,"unauthorized-domain")}function rR(t){const e=Dc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!nR.test(n))return!1;if(tR.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const iR=new _o(3e4,6e4);function kf(){const t=In().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oR(t){return new Promise((e,n)=>{function s(){kf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kf(),n(hn(t,"network-request-failed"))},timeout:iR.get()})}if(In().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(In().gapi?.load)s();else{const r=ub("iframefcb");return In()[r]=()=>{gapi.load?s():n(hn(t,"network-request-failed"))},lb(`${cb()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw na=null,e})}let na=null;function aR(t){return na=na||oR(t),na}const lR=new _o(5e3,15e3),cR="__/auth/iframe",uR="emulator/auth/iframe",hR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Su(e,uR):`https://${t.config.authDomain}/${cR}`,s={apiKey:e.apiKey,appName:t.name,v:Qr},r=dR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${go(s).slice(1)}`}async function pR(t){const e=await aR(t),n=In().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:fR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},lR.get());function c(){In().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const mR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gR=500,_R=600,yR="_blank",vR="http://localhost";class Nf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ER(t,e,n,s=gR,r=_R){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...mR,width:s.toString(),height:r.toString(),top:i,left:o},h=Mt().toLowerCase();n&&(l=kg(h)?yR:n),Cg(h)&&(e=e||vR,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,N])=>`${g}${y}=${N},`,"");if(eb(h)&&l!=="_self")return TR(e||"",l),new Nf(null);const p=window.open(e||"",l,d);ye(p,t,"popup-blocked");try{p.focus()}catch{}return new Nf(p)}function TR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const IR="__/auth/handler",wR="emulator/auth/handler",AR=encodeURIComponent("fac");async function Df(t,e,n,s,r,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Qr,eventId:r};if(e instanceof Du){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ww(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof yo){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),h=c?`#${AR}=${encodeURIComponent(c)}`:"";return`${bR(t)}?${go(l).slice(1)}${h}`}function bR({config:t}){return t.emulator?Su(t,wR):`https://${t.authDomain}/${IR}`}const nc="webStorageSupport";class RR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qg,this._completeRedirectFn=Yb,this._overrideRedirectResult=zb}async _openPopup(e,n,s,r){Qn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Df(e,n,s,Dc(),r);return ER(e,i,Ou())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Df(e,n,s,Dc(),r);return Pb(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Qn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await pR(e),s=new Jb(e);return n.register("authEvent",r=>(ye(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nc,{type:nc},r=>{const i=r?.[0]?.[nc];i!==void 0&&n(!!i),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Mg()||Pg()||ku()}}const SR=RR;var Of="@firebase/auth",Vf="1.12.0";class CR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kR(t){Fr(new Js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xg(t)},h=new ob(s,r,i,c);return db(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Fr(new Js("auth-internal",e=>{const n=rl(e.getProvider("auth").getImmediate());return(s=>new CR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Is(Of,Vf,PR(t)),Is(Of,Vf,"esm2020")}const NR=300,DR=dg("authIdTokenMaxAge")||NR;let Mf=null;const OR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>DR)return;const r=n?.token;Mf!==r&&(Mf=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function VR(t=yg()){const e=Au(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hb(t,{popupRedirectResolver:SR,persistence:[Fb,Rb,qg]}),s=dg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=OR(i.toString());Tb(n,o,()=>o(n.currentUser)),Eb(n,l=>o(l))}}const r=ug("auth");return r&&fb(n,`http://${r}`),n}function MR(){return document.getElementsByTagName("head")?.[0]??document}ab({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=hn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",MR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kR("Browser");var xR="firebase",LR="12.7.0";Is(xR,LR,"app");var xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ws,Xg;(function(){var t;function e(w,v){function I(){}I.prototype=v.prototype,w.F=v.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(R,b,S){for(var T=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)T[ae-2]=arguments[ae];return v.prototype[b].apply(R,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,v,I){I||(I=0);const R=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)R[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;b<16;++b)R[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=w.g[0],I=w.g[1],b=w.g[2];let S=w.g[3],T;T=v+(S^I&(b^S))+R[0]+3614090360&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[1]+3905402710&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[2]+606105819&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[3]+3250441966&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[4]+4118548399&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[5]+1200080426&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[6]+2821735955&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[7]+4249261313&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[8]+1770035416&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[9]+2336552879&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[10]+4294925233&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[11]+2304563134&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[12]+1804603682&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[13]+4254626195&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[14]+2792965006&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[15]+1236535329&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(b^S&(I^b))+R[1]+4129170786&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[6]+3225465664&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[11]+643717713&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[0]+3921069994&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[5]+3593408605&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[10]+38016083&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[15]+3634488961&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[4]+3889429448&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[9]+568446438&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[14]+3275163606&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[3]+4107603335&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[8]+1163531501&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[13]+2850285829&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[2]+4243563512&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[7]+1735328473&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[12]+2368359562&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(I^b^S)+R[5]+4294588738&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[8]+2272392833&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[11]+1839030562&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[14]+4259657740&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[1]+2763975236&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[4]+1272893353&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[7]+4139469664&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[10]+3200236656&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[13]+681279174&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[0]+3936430074&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[3]+3572445317&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[6]+76029189&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[9]+3654602809&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[12]+3873151461&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[15]+530742520&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[2]+3299628645&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(b^(I|~S))+R[0]+4096336452&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[7]+1126891415&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[14]+2878612391&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[5]+4237533241&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[12]+1700485571&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[3]+2399980690&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[10]+4293915773&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[1]+2240044497&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[8]+1873313359&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[15]+4264355552&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[6]+2734768916&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[13]+1309151649&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[4]+4149444226&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[11]+3174756917&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[2]+718787259&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+S&4294967295}s.prototype.v=function(w,v){v===void 0&&(v=w.length);const I=v-this.blockSize,R=this.C;let b=this.h,S=0;for(;S<v;){if(b==0)for(;S<=I;)r(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(R[b++]=w.charCodeAt(S++),b==this.blockSize){r(this,R),b=0;break}}else for(;S<v;)if(R[b++]=w[S++],b==this.blockSize){r(this,R),b=0;break}}this.h=b,this.o+=v},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)w[v++]=this.g[I]>>>R&255;return w};function i(w,v){var I=l;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=v(w)}function o(w,v){this.h=v;const I=[];let R=!0;for(let b=w.length-1;b>=0;b--){const S=w[b]|0;R&&S==v||(I[b]=S,R=!1)}this.g=I}var l={};function c(w){return-128<=w&&w<128?i(w,function(v){return new o([v|0],v<0?-1:0)}):new o([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return M(h(-w));const v=[];let I=1;for(let R=0;w>=I;R++)v[R]=w/I|0,I*=4294967296;return new o(v,0)}function d(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return M(d(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(v,8));let R=p;for(let S=0;S<w.length;S+=8){var b=Math.min(8,w.length-S);const T=parseInt(w.substring(S,S+b),v);b<8?(b=h(Math.pow(v,b)),R=R.j(b).add(h(T))):(R=R.j(I),R=R.add(h(T)))}return R}var p=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(O(this))return-M(this).m();let w=0,v=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);w+=(R>=0?R:4294967296+R)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(O(this))return"-"+M(this).toString(w);const v=h(Math.pow(w,6));var I=this;let R="";for(;;){const b=C(I,v).g;I=B(I,b.j(v));let S=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=b,N(I))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function O(w){return w.h==-1}t.l=function(w){return w=B(this,w),O(w)?-1:N(w)?0:1};function M(w){const v=w.g.length,I=[];for(let R=0;R<v;R++)I[R]=~w.g[R];return new o(I,~w.h).add(g)}t.abs=function(){return O(this)?M(this):this},t.add=function(w){const v=Math.max(this.g.length,w.g.length),I=[];let R=0;for(let b=0;b<=v;b++){let S=R+(this.i(b)&65535)+(w.i(b)&65535),T=(S>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);R=T>>>16,S&=65535,T&=65535,I[b]=T<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function B(w,v){return w.add(M(v))}t.j=function(w){if(N(this)||N(w))return p;if(O(this))return O(w)?M(this).j(M(w)):M(M(this).j(w));if(O(w))return M(this.j(M(w)));if(this.l(y)<0&&w.l(y)<0)return h(this.m()*w.m());const v=this.g.length+w.g.length,I=[];for(var R=0;R<2*v;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let b=0;b<w.g.length;b++){const S=this.i(R)>>>16,T=this.i(R)&65535,ae=w.i(b)>>>16,re=w.i(b)&65535;I[2*R+2*b]+=T*re,q(I,2*R+2*b),I[2*R+2*b+1]+=S*re,q(I,2*R+2*b+1),I[2*R+2*b+1]+=T*ae,q(I,2*R+2*b+1),I[2*R+2*b+2]+=S*ae,q(I,2*R+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new o(I,0)};function q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function V(w,v){this.g=w,this.h=v}function C(w,v){if(N(v))throw Error("division by zero");if(N(w))return new V(p,p);if(O(w))return v=C(M(w),v),new V(M(v.g),M(v.h));if(O(v))return v=C(w,M(v)),new V(M(v.g),v.h);if(w.g.length>30){if(O(w)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=v;R.l(w)<=0;)I=G(I),R=G(R);var b=Z(I,1),S=Z(R,1);for(R=Z(R,2),I=Z(I,2);!N(R);){var T=S.add(R);T.l(w)<=0&&(b=b.add(I),S=T),R=Z(R,1),I=Z(I,1)}return v=B(w,b.j(v)),new V(b,v)}for(b=p;w.l(v)>=0;){for(I=Math.max(1,Math.floor(w.m()/v.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=h(I),T=S.j(v);O(T)||T.l(w)>0;)I-=R,S=h(I),T=S.j(v);N(S)&&(S=g),b=b.add(S),w=B(w,T)}return new V(b,w)}t.B=function(w){return C(this,w).h},t.and=function(w){const v=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)&w.i(R);return new o(I,this.h&w.h)},t.or=function(w){const v=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)|w.i(R);return new o(I,this.h|w.h)},t.xor=function(w){const v=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)^w.i(R);return new o(I,this.h^w.h)};function G(w){const v=w.g.length+1,I=[];for(let R=0;R<v;R++)I[R]=w.i(R)<<1|w.i(R-1)>>>31;return new o(I,w.h)}function Z(w,v){const I=v>>5;v%=32;const R=w.g.length-I,b=[];for(let S=0;S<R;S++)b[S]=v>0?w.i(S+I)>>>v|w.i(S+I+1)<<32-v:w.i(S+I);return new o(b,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Xg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,ws=o}).apply(typeof xf<"u"?xf:typeof self<"u"?self:typeof window<"u"?window:{});var jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Jg,bi,Zg,sa,Mc,e_,t_,n_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof jo=="object"&&jo];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var f=s;a=a.split(".");for(var _=0;_<a.length-1;_++){var k=a[_];if(!(k in f))break e;f=f[k]}a=a[a.length-1],_=f[a],u=u(_),u!=_&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var f=[],_;for(_ in u)Object.prototype.hasOwnProperty.call(u,_)&&f.push([_,u[_]]);return f}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,f){return a.call.apply(a.bind,arguments)}function h(a,u,f){return h=c,h.apply(null,arguments)}function d(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function p(a,u){function f(){}f.prototype=u.prototype,a.Z=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(_,k,D){for(var Y=Array(arguments.length-2),we=2;we<arguments.length;we++)Y[we-2]=arguments[we];return u.prototype[k].apply(_,Y)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const u=a.length;if(u>0){const f=Array(u);for(let _=0;_<u;_++)f[_]=a[_];return f}return[]}function N(a,u){for(let _=1;_<arguments.length;_++){const k=arguments[_];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=a.length||0;const D=k.length||0;a.length=f+D;for(let Y=0;Y<D;Y++)a[f+Y]=k[Y]}else a.push(k)}}class O{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function M(a){o.setTimeout(()=>{throw a},0)}function B(){var a=w;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class q{constructor(){this.h=this.g=null}add(u,f){const _=V.get();_.set(u,f),this.h?this.h.next=_:this.g=_,this.h=_}}var V=new O(()=>new C,a=>a.reset());class C{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Z=!1,w=new q,v=()=>{const a=Promise.resolve(void 0);G=()=>{a.then(I)}};function I(){for(var a;a=B();){try{a.h.call(a.g)}catch(f){M(f)}var u=V;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}Z=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,u),o.removeEventListener("test",f,u)}catch{}return a})();function T(a){return/^[\s\xa0]*$/.test(a)}function ae(a,u){b.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ae,b),ae.prototype.init=function(a,u){const f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Oe(a,u,f,_,k){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!_,this.ha=k,this.key=++Ne,this.da=this.fa=!1}function Ae(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gt(a,u,f){for(const _ in a)u.call(f,a[_],_,a)}function Qt(a,u){for(const f in a)u.call(void 0,a[f],f,a)}function xt(a){const u={};for(const f in a)u[f]=a[f];return u}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(a,u){let f,_;for(let k=1;k<arguments.length;k++){_=arguments[k];for(f in _)a[f]=_[f];for(let D=0;D<at.length;D++)f=at[D],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function X(a){this.src=a,this.g={},this.h=0}X.prototype.add=function(a,u,f,_,k){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const Y=je(a,u,_,k);return Y>-1?(u=a[Y],f||(u.fa=!1)):(u=new Oe(u,this.src,D,!!_,k),u.fa=f,a.push(u)),u};function te(a,u){const f=u.type;if(f in a.g){var _=a.g[f],k=Array.prototype.indexOf.call(_,u,void 0),D;(D=k>=0)&&Array.prototype.splice.call(_,k,1),D&&(Ae(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function je(a,u,f,_){for(let k=0;k<a.length;++k){const D=a[k];if(!D.da&&D.listener==u&&D.capture==!!f&&D.ha==_)return k}return-1}var F="closure_lm_"+(Math.random()*1e6|0),ie={};function ee(a,u,f,_,k){if(Array.isArray(u)){for(let D=0;D<u.length;D++)ee(a,u[D],f,_,k);return null}return f=J(f),a&&a[re]?a.J(u,f,l(_)?!!_.capture:!1,k):ce(a,u,f,!1,_,k)}function ce(a,u,f,_,k,D){if(!u)throw Error("Invalid event type");const Y=l(k)?!!k.capture:!!k;let we=$(a);if(we||(a[F]=we=new X(a)),f=we.add(u,f,_,Y,D),f.proxy)return f;if(_=Re(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)S||(k=Y),k===void 0&&(k=!1),a.addEventListener(u.toString(),_,k);else if(a.attachEvent)a.attachEvent(P(u.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Re(){function a(f){return u.call(a.src,a.listener,f)}const u=x;return a}function E(a,u,f,_,k){if(Array.isArray(u))for(var D=0;D<u.length;D++)E(a,u[D],f,_,k);else _=l(_)?!!_.capture:!!_,f=J(f),a&&a[re]?(a=a.i,D=String(u).toString(),D in a.g&&(u=a.g[D],f=je(u,f,_,k),f>-1&&(Ae(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete a.g[D],a.h--)))):a&&(a=$(a))&&(u=a.g[u.toString()],a=-1,u&&(a=je(u,f,_,k)),(f=a>-1?u[a]:null)&&A(f))}function A(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[re])te(u.i,a);else{var f=a.type,_=a.proxy;u.removeEventListener?u.removeEventListener(f,_,a.capture):u.detachEvent?u.detachEvent(P(f),_):u.addListener&&u.removeListener&&u.removeListener(_),(f=$(u))?(te(f,a),f.h==0&&(f.src=null,u[F]=null)):Ae(a)}}}function P(a){return a in ie?ie[a]:ie[a]="on"+a}function x(a,u){if(a.da)a=!0;else{u=new ae(u,this);const f=a.listener,_=a.ha||a.src;a.fa&&A(a),a=f.call(_,u)}return a}function $(a){return a=a[F],a instanceof X?a:null}var L="__closure_events_fn_"+(Math.random()*1e9>>>0);function J(a){return typeof a=="function"?a:(a[L]||(a[L]=function(u){return a.handleEvent(u)}),a[L])}function z(){R.call(this),this.i=new X(this),this.M=this,this.G=null}p(z,R),z.prototype[re]=!0,z.prototype.removeEventListener=function(a,u,f,_){E(this,a,u,f,_)};function K(a,u){var f,_=a.G;if(_)for(f=[];_;_=_.G)f.push(_);if(a=a.M,_=u.type||u,typeof u=="string")u=new b(u,a);else if(u instanceof b)u.target=u.target||a;else{var k=u;u=new b(_,a),se(u,k)}k=!0;let D,Y;if(f)for(Y=f.length-1;Y>=0;Y--)D=u.g=f[Y],k=j(D,_,!0,u)&&k;if(D=u.g=a,k=j(D,_,!0,u)&&k,k=j(D,_,!1,u)&&k,f)for(Y=0;Y<f.length;Y++)D=u.g=f[Y],k=j(D,_,!1,u)&&k}z.prototype.N=function(){if(z.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const f=a.g[u];for(let _=0;_<f.length;_++)Ae(f[_]);delete a.g[u],a.h--}}this.G=null},z.prototype.J=function(a,u,f,_){return this.i.add(String(a),u,!1,f,_)},z.prototype.K=function(a,u,f,_){return this.i.add(String(a),u,!0,f,_)};function j(a,u,f,_){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let k=!0;for(let D=0;D<u.length;++D){const Y=u[D];if(Y&&!Y.da&&Y.capture==f){const we=Y.listener,lt=Y.ha||Y.src;Y.fa&&te(a.i,Y),k=we.call(lt,_)!==!1&&k}}return k&&!_.defaultPrevented}function de(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function ne(a){a.g=de(()=>{a.g=null,a.i&&(a.i=!1,ne(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class ue extends R{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(a){R.call(this),this.h=a,this.g={}}p(me,R);var be=[];function Be(a){gt(a.g,function(u,f){this.g.hasOwnProperty(f)&&A(u)},a),a.g={}}me.prototype.N=function(){me.Z.N.call(this),Be(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=o.JSON.stringify,At=o.JSON.parse,bt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ht(){}function Kt(){}var tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ur(){b.call(this,"d")}p(ur,b);function _t(){b.call(this,"c")}p(_t,b);var dt={},ni=null;function Os(){return ni=ni||new z}dt.Ia="serverreachability";function wh(a){b.call(this,dt.Ia,a)}p(wh,b);function si(a){const u=Os();K(u,new wh(u))}dt.STAT_EVENT="statevent";function Ah(a,u){b.call(this,dt.STAT_EVENT,a),this.stat=u}p(Ah,b);function Lt(a){const u=Os();K(u,new Ah(u,a))}dt.Ja="timingevent";function bh(a,u){b.call(this,dt.Ja,a),this.size=u}p(bh,b);function ri(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function Qy(a,u,f,_,k,D){a.info(function(){if(a.g)if(D){var Y="",we=D.split("&");for(let qe=0;qe<we.length;qe++){var lt=we[qe].split("=");if(lt.length>1){const ft=lt[0];lt=lt[1];const gn=ft.split("_");Y=gn.length>=2&&gn[1]=="type"?Y+(ft+"="+lt+"&"):Y+(ft+"=redacted&")}}}else Y=null;else Y=D;return"XMLHTTP REQ ("+_+") [attempt "+k+"]: "+u+`
`+f+`
`+Y})}function Yy(a,u,f,_,k,D,Y){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+k+"]: "+u+`
`+f+`
`+D+" "+Y})}function hr(a,u,f,_){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Jy(a,f)+(_?" "+_:"")})}function Xy(a,u){a.info(function(){return"TIMEOUT: "+u})}ii.prototype.info=function(){};function Jy(a,u){if(!a.g)return u;if(!u)return null;try{const D=JSON.parse(u);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var _=f[1];if(Array.isArray(_)&&!(_.length<1)){var k=_[0];if(k!="noop"&&k!="stop"&&k!="close")for(let Y=1;Y<_.length;Y++)_[Y]=""}}}}return De(D)}catch{return u}}var So={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sh;function Il(){}p(Il,Ht),Il.prototype.g=function(){return new XMLHttpRequest},Sh=new Il;function oi(a){return encodeURIComponent(String(a))}function Zy(a){var u=1;a=a.split(":");const f=[];for(;u>0&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function ts(a,u,f,_){this.j=a,this.i=u,this.l=f,this.S=_||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ch}function Ch(){this.i=null,this.g="",this.h=!1}var Ph={},wl={};function Al(a,u,f){a.M=1,a.A=Po(mn(u)),a.u=f,a.R=!0,kh(a,null)}function kh(a,u){a.F=Date.now(),Co(a),a.B=mn(a.A);var f=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),qh(f.i,"t",_),a.C=0,f=a.j.L,a.h=new Ch,a.g=ad(a.j,f?u:null,!a.u),a.P>0&&(a.O=new ue(h(a.Y,a,a.g),a.P)),u=a.V,f=a.g,_=a.ba;var k="readystatechange";Array.isArray(k)||(k&&(be[0]=k.toString()),k=be);for(let D=0;D<k.length;D++){const Y=ee(f,k[D],_||u.handleEvent,!1,u.h||u);if(!Y)break;u.g[Y.key]=Y}u=a.J?xt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),si(),Qy(a.i,a.v,a.B,a.l,a.S,a.u)}ts.prototype.ba=function(a){a=a.target;const u=this.O;u&&rs(a)==3?u.j():this.Y(a)},ts.prototype.Y=function(a){try{if(a==this.g)e:{const we=rs(this.g),lt=this.g.ya(),qe=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Yh(this.g)))){this.K||we!=4||lt==7||(lt==8||qe<=0?si(3):si(2)),bl(this);var u=this.g.ca();this.X=u;var f=ev(this);if(this.o=u==200,Yy(this.i,this.v,this.B,this.l,this.S,we,u),this.o){if(this.U&&!this.L){t:{if(this.g){var _,k=this.g;if((_=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(_)){var D=_;break t}}D=null}if(a=D)hr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rl(this,a);else{this.o=!1,this.m=3,Lt(12),Vs(this),ai(this);break e}}if(this.R){a=!0;let ft;for(;!this.K&&this.C<f.length;)if(ft=tv(this,f),ft==wl){we==4&&(this.m=4,Lt(14),a=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Ph){this.m=4,Lt(15),hr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else hr(this.i,this.l,ft,null),Rl(this,ft);if(Nh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||f.length!=0||this.h.h||(this.m=1,Lt(16),a=!1),this.o=this.o&&a,!a)hr(this.i,this.l,f,"[Invalid Chunked Response]"),Vs(this),ai(this);else if(f.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Vl(Y),Y.P=!0,Lt(11))}}else hr(this.i,this.l,f,null),Rl(this,f);we==4&&Vs(this),this.o&&!this.K&&(we==4?sd(this.j,this):(this.o=!1,Co(this)))}else mv(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Vs(this),ai(this)}}}catch{}};function ev(a){if(!Nh(a))return a.g.la();const u=Yh(a.g);if(u==="")return"";let f="";const _=u.length,k=rs(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Vs(a),ai(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<_;D++)a.h.h=!0,f+=a.h.i.decode(u[D],{stream:!(k&&D==_-1)});return u.length=0,a.h.g+=f,a.C=0,a.h.g}function Nh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function tv(a,u){var f=a.C,_=u.indexOf(`
`,f);return _==-1?wl:(f=Number(u.substring(f,_)),isNaN(f)?Ph:(_+=1,_+f>u.length?wl:(u=u.slice(_,_+f),a.C=_+f,u)))}ts.prototype.cancel=function(){this.K=!0,Vs(this)};function Co(a){a.T=Date.now()+a.H,Dh(a,a.H)}function Dh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ri(h(a.aa,a),u)}function bl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ts.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Xy(this.i,this.B),this.M!=2&&(si(),Lt(17)),Vs(this),this.m=2,ai(this)):Dh(this,this.T-a)};function ai(a){a.j.I==0||a.K||sd(a.j,a)}function Vs(a){bl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Be(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function Rl(a,u){try{var f=a.j;if(f.I!=0&&(f.g==a||Sl(f.h,a))){if(!a.L&&Sl(f.h,a)&&f.I==3){try{var _=f.Ba.g.parse(u)}catch{_=null}if(Array.isArray(_)&&_.length==3){var k=_;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Vo(f),Do(f);else break e;Ol(f),Lt(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ri(h(f.Va,f),6e3));Mh(f.h)<=1&&f.ta&&(f.ta=void 0)}else xs(f,11)}else if((a.L||f.g==a)&&Vo(f),!T(u))for(k=f.Ba.g.parse(u),u=0;u<k.length;u++){let qe=k[u];const ft=qe[0];if(!(ft<=f.K))if(f.K=ft,qe=qe[1],f.I==2)if(qe[0]=="c"){f.M=qe[1],f.ba=qe[2];const gn=qe[3];gn!=null&&(f.ka=gn,f.j.info("VER="+f.ka));const Ls=qe[4];Ls!=null&&(f.za=Ls,f.j.info("SVER="+f.za));const is=qe[5];is!=null&&typeof is=="number"&&is>0&&(_=1.5*is,f.O=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const os=a.g;if(os){const xo=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var D=_.h;D.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Cl(D,D.h),D.h=null))}if(_.G){const Ml=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ml&&(_.wa=Ml,Qe(_.J,_.G,Ml))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),_=f;var Y=a;if(_.na=od(_,_.L?_.ba:null,_.W),Y.L){xh(_.h,Y);var we=Y,lt=_.O;lt&&(we.H=lt),we.D&&(bl(we),Co(we)),_.g=Y}else td(_);f.i.length>0&&Oo(f)}else qe[0]!="stop"&&qe[0]!="close"||xs(f,7);else f.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?xs(f,7):Dl(f):qe[0]!="noop"&&f.l&&f.l.qa(qe),f.A=0)}}si(4)}catch{}}var nv=class{constructor(a,u){this.g=a,this.map=u}};function Oh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mh(a){return a.h?1:a.g?a.g.size:0}function Sl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Cl(a,u){a.g?a.g.add(u):a.h=u}function xh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Oh.prototype.cancel=function(){if(this.i=Lh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Lh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const f of a.g.values())u=u.concat(f.G);return u}return y(a.i)}var Fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sv(a,u){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const _=a[f].indexOf("=");let k,D=null;_>=0?(k=a[f].substring(0,_),D=a[f].substring(_+1)):k=a[f],u(k,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ns(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof ns?(this.l=a.l,li(this,a.j),this.o=a.o,this.g=a.g,ci(this,a.u),this.h=a.h,Pl(this,Hh(a.i)),this.m=a.m):a&&(u=String(a).match(Fh))?(this.l=!1,li(this,u[1]||"",!0),this.o=ui(u[2]||""),this.g=ui(u[3]||"",!0),ci(this,u[4]),this.h=ui(u[5]||"",!0),Pl(this,u[6]||"",!0),this.m=ui(u[7]||"")):(this.l=!1,this.i=new di(null,this.l))}ns.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(hi(u,Uh,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(hi(u,Uh,!0),"@"),a.push(oi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(hi(f,f.charAt(0)=="/"?ov:iv,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",hi(f,lv)),a.join("")},ns.prototype.resolve=function(a){const u=mn(this);let f=!!a.j;f?li(u,a.j):f=!!a.o,f?u.o=a.o:f=!!a.g,f?u.g=a.g:f=a.u!=null;var _=a.h;if(f)ci(u,a.u);else if(f=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var k=u.h.lastIndexOf("/");k!=-1&&(_=u.h.slice(0,k+1)+_)}if(k=_,k==".."||k==".")_="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){_=k.lastIndexOf("/",0)==0,k=k.split("/");const D=[];for(let Y=0;Y<k.length;){const we=k[Y++];we=="."?_&&Y==k.length&&D.push(""):we==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),_&&Y==k.length&&D.push("")):(D.push(we),_=!0)}_=D.join("/")}else _=k}return f?u.h=_:f=a.i.toString()!=="",f?Pl(u,Hh(a.i)):f=!!a.m,f&&(u.m=a.m),u};function mn(a){return new ns(a)}function li(a,u,f){a.j=f?ui(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ci(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Pl(a,u,f){u instanceof di?(a.i=u,cv(a.i,a.l)):(f||(u=hi(u,av)),a.i=new di(u,a.l))}function Qe(a,u,f){a.i.set(u,f)}function Po(a){return Qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ui(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function hi(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,rv),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Uh=/[#\/\?@]/g,iv=/[#\?:]/g,ov=/[#\?]/g,av=/[#\?@]/g,lv=/#/g;function di(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Ms(a){a.g||(a.g=new Map,a.h=0,a.i&&sv(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=di.prototype,t.add=function(a,u){Ms(this),this.i=null,a=dr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function $h(a,u){Ms(a),u=dr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Bh(a,u){return Ms(a),u=dr(a,u),a.g.has(u)}t.forEach=function(a,u){Ms(this),this.g.forEach(function(f,_){f.forEach(function(k){a.call(u,k,_,this)},this)},this)};function jh(a,u){Ms(a);let f=[];if(typeof u=="string")Bh(a,u)&&(f=f.concat(a.g.get(dr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)f=f.concat(a[u]);return f}t.set=function(a,u){return Ms(this),this.i=null,a=dr(this,a),Bh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=jh(this,a),a.length>0?String(a[0]):u):u};function qh(a,u,f){$h(a,u),f.length>0&&(a.i=null,a.g.set(dr(a,u),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let _=0;_<u.length;_++){var f=u[_];const k=oi(f);f=jh(this,f);for(let D=0;D<f.length;D++){let Y=k;f[D]!==""&&(Y+="="+oi(f[D])),a.push(Y)}}return this.i=a.join("&")};function Hh(a){const u=new di;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function dr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function cv(a,u){u&&!a.j&&(Ms(a),a.i=null,a.g.forEach(function(f,_){const k=_.toLowerCase();_!=k&&($h(this,_),qh(this,k,f))},a)),a.j=u}function uv(a,u){const f=new ii;if(o.Image){const _=new Image;_.onload=d(ss,f,"TestLoadImage: loaded",!0,u,_),_.onerror=d(ss,f,"TestLoadImage: error",!1,u,_),_.onabort=d(ss,f,"TestLoadImage: abort",!1,u,_),_.ontimeout=d(ss,f,"TestLoadImage: timeout",!1,u,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else u(!1)}function hv(a,u){const f=new ii,_=new AbortController,k=setTimeout(()=>{_.abort(),ss(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:_.signal}).then(D=>{clearTimeout(k),D.ok?ss(f,"TestPingServer: ok",!0,u):ss(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(k),ss(f,"TestPingServer: error",!1,u)})}function ss(a,u,f,_,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),_(f)}catch{}}function dv(){this.g=new bt}function kl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(kl,Ht),kl.prototype.g=function(){return new ko(this.i,this.h)};function ko(a,u){z.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ko,z),t=ko.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,pi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?fi(this):pi(this),this.readyState==3&&Kh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,fi(this))},t.Na=function(a){this.g&&(this.response=a,fi(this))},t.ga=function(){this.g&&fi(this)};function fi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,pi(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Gh(a){let u="";return gt(a,function(f,_){u+=_,u+=":",u+=f,u+=`\r
`}),u}function Nl(a,u,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Gh(f),typeof a=="string"?f!=null&&oi(f):Qe(a,u,f))}function Ze(a){z.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ze,z);var fv=/^https?$/i,pv=["POST","PUT"];t=Ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sh.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){zh(this,D);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var k in _)f.set(k,_[k]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())f.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),k=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(pv,u,void 0)>=0)||_||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,Y]of f)this.g.setRequestHeader(D,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){zh(this,D)}};function zh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Wh(a),No(a)}function Wh(a){a.A||(a.A=!0,K(a,"complete"),K(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,K(this,"complete"),K(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),Ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Qh(this):this.Xa())},t.Xa=function(){Qh(this)};function Qh(a){if(a.h&&typeof i<"u"){if(a.v&&rs(a)==4)setTimeout(a.Ca.bind(a),0);else if(K(a,"readystatechange"),rs(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var _;if(_=D===0){let Y=String(a.D).match(Fh)[1]||null;!Y&&o.self&&o.self.location&&(Y=o.self.location.protocol.slice(0,-1)),_=!fv.test(Y?Y.toLowerCase():"")}f=_}if(f)K(a,"complete"),K(a,"success");else{a.o=6;try{var k=rs(a)>2?a.g.statusText:""}catch{k=""}a.l=k+" ["+a.ca()+"]",Wh(a)}}finally{No(a)}}}}function No(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,u||K(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(a){return a.g?a.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),At(u)}};function Yh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function mv(a){const u={};a=(a.g&&rs(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(T(a[_]))continue;var f=Zy(a[_]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=u[k]||[];u[k]=D,D.push(f)}Qt(u,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function Xh(a){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,a),this.Za=mi("retryDelaySeedMs",1e4,a),this.Ta=mi("forwardChannelMaxRetries",2,a),this.va=mi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Oh(a&&a.concurrentRequestLimit),this.Ba=new dv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,f,_){Lt(0),this.W=a,this.H=u||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.J=od(this,null,this.W),Oo(this)};function Dl(a){if(Jh(a),a.I==3){var u=a.V++,f=mn(a.J);if(Qe(f,"SID",a.M),Qe(f,"RID",u),Qe(f,"TYPE","terminate"),gi(a,f),u=new ts(a,a.j,u),u.M=2,u.A=Po(mn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=u.A,f=!0),f||(u.g=ad(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Co(u)}id(a)}function Do(a){a.g&&(Vl(a),a.g.cancel(),a.g=null)}function Jh(a){Do(a),a.v&&(o.clearTimeout(a.v),a.v=null),Vo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Oo(a){if(!Vh(a.h)&&!a.m){a.m=!0;var u=a.Ea;G||v(),Z||(G(),Z=!0),w.add(u,a),a.D=0}}function gv(a,u){return Mh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ri(h(a.Ea,a,u),rd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const k=new ts(this,this.j,a);let D=this.o;if(this.U&&(D?(D=xt(D),se(D,this.U)):D=this.U),this.u!==null||this.R||(k.J=D,D=null),this.S)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(u+=_,u>4096){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=ed(this,k,u),f=mn(this.J),Qe(f,"RID",a),Qe(f,"CVER",22),this.G&&Qe(f,"X-HTTP-Session-Id",this.G),gi(this,f),D&&(this.R?u="headers="+oi(Gh(D))+"&"+u:this.u&&Nl(f,this.u,D)),Cl(this.h,k),this.Ra&&Qe(f,"TYPE","init"),this.S?(Qe(f,"$req",u),Qe(f,"SID","null"),k.U=!0,Al(k,f,null)):Al(k,f,u),this.I=2}}else this.I==3&&(a?Zh(this,a):this.i.length==0||Vh(this.h)||Zh(this))};function Zh(a,u){var f;u?f=u.l:f=a.V++;const _=mn(a.J);Qe(_,"SID",a.M),Qe(_,"RID",f),Qe(_,"AID",a.K),gi(a,_),a.u&&a.o&&Nl(_,a.u,a.o),f=new ts(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),u&&(a.i=u.G.concat(a.i)),u=ed(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Cl(a.h,f),Al(f,_,u)}function gi(a,u){a.H&&gt(a.H,function(f,_){Qe(u,_,f)}),a.l&&gt({},function(f,_){Qe(u,_,f)})}function ed(a,u,f){f=Math.min(a.i.length,f);const _=a.l?h(a.l.Ka,a.l,a):null;e:{var k=a.i;let we=-1;for(;;){const lt=["count="+f];we==-1?f>0?(we=k[0].g,lt.push("ofs="+we)):we=0:lt.push("ofs="+we);let qe=!0;for(let ft=0;ft<f;ft++){var D=k[ft].g;const gn=k[ft].map;if(D-=we,D<0)we=Math.max(0,k[ft].g-100),qe=!1;else try{D="req"+D+"_"||"";try{var Y=gn instanceof Map?gn:Object.entries(gn);for(const[Ls,is]of Y){let os=is;l(is)&&(os=De(is)),lt.push(D+Ls+"="+encodeURIComponent(os))}}catch(Ls){throw lt.push(D+"type="+encodeURIComponent("_badmap")),Ls}}catch{_&&_(gn)}}if(qe){Y=lt.join("&");break e}}Y=void 0}return a=a.i.splice(0,f),u.G=a,Y}function td(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;G||v(),Z||(G(),Z=!0),w.add(u,a),a.A=0}}function Ol(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ri(h(a.Da,a),rd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,nd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ri(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Do(this),nd(this))};function Vl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function nd(a){a.g=new ts(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=mn(a.na);Qe(u,"RID","rpc"),Qe(u,"SID",a.M),Qe(u,"AID",a.K),Qe(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&Qe(u,"TO",a.ia),Qe(u,"TYPE","xmlhttp"),gi(a,u),a.u&&a.o&&Nl(u,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Po(mn(u)),f.u=null,f.R=!0,kh(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Do(this),Ol(this),Lt(19))};function Vo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function sd(a,u){var f=null;if(a.g==u){Vo(a),Vl(a),a.g=null;var _=2}else if(Sl(a.h,u))f=u.G,xh(a.h,u),_=1;else return;if(a.I!=0){if(u.o)if(_==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var k=a.D;_=Os(),K(_,new bh(_,f)),Oo(a)}else td(a);else if(k=u.m,k==3||k==0&&u.X>0||!(_==1&&gv(a,u)||_==2&&Ol(a)))switch(f&&f.length>0&&(u=a.h,u.i=u.i.concat(f)),k){case 1:xs(a,5);break;case 4:xs(a,10);break;case 3:xs(a,6);break;default:xs(a,2)}}}function rd(a,u){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*u}function xs(a,u){if(a.j.info("Error code "+u),u==2){var f=h(a.bb,a),_=a.Ua;const k=!_;_=new ns(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||li(_,"https"),Po(_),k?uv(_.toString(),f):hv(_.toString(),f)}else Lt(2);a.I=0,a.l&&a.l.pa(u),id(a),Jh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function id(a){if(a.I=0,a.ja=[],a.l){const u=Lh(a.h);(u.length!=0||a.i.length!=0)&&(N(a.ja,u),N(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function od(a,u,f){var _=f instanceof ns?mn(f):new ns(f);if(_.g!="")u&&(_.g=u+"."+_.g),ci(_,_.u);else{var k=o.location;_=k.protocol,u=u?u+"."+k.hostname:k.hostname,k=+k.port;const D=new ns(null);_&&li(D,_),u&&(D.g=u),k&&ci(D,k),f&&(D.h=f),_=D}return f=a.G,u=a.wa,f&&u&&Qe(_,f,u),Qe(_,"VER",a.ka),gi(a,_),_}function ad(a,u,f){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Ze(new kl({ab:f})):new Ze(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ld(){}t=ld.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(a,u){return new Gt(a,u)};function Gt(a,u){z.call(this),this.g=new Xh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!T(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new fr(this)}p(Gt,z),Gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Dl(this.g)},Gt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=De(a),a=f);u.i.push(new nv(u.Ya++,a)),u.I==3&&Oo(u)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Dl(this.g),delete this.g,Gt.Z.N.call(this)};function cd(a){ur.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(cd,ur);function ud(){_t.call(this),this.status=1}p(ud,_t);function fr(a){this.g=a}p(fr,ld),fr.prototype.ra=function(){K(this.g,"a")},fr.prototype.qa=function(a){K(this.g,new cd(a))},fr.prototype.pa=function(a){K(this.g,new ud)},fr.prototype.oa=function(){K(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,n_=function(){return new Mo},t_=function(){return Os()},e_=dt,Mc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,sa=So,Rh.COMPLETE="complete",Zg=Rh,Kt.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",z.prototype.listen=z.prototype.J,bi=Kt,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,Jg=Ze}).apply(typeof jo<"u"?jo:typeof self<"u"?self:typeof window<"u"?window:{});const Lf="@firebase/firestore",Ff="4.9.3";class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");let Xr="12.7.0";const er=new Iu("@firebase/firestore");function _r(){return er.logLevel}function oe(t,...e){if(er.logLevel<=Se.DEBUG){const n=e.map(Mu);er.debug(`Firestore (${Xr}): ${t}`,...n)}}function Yn(t,...e){if(er.logLevel<=Se.ERROR){const n=e.map(Mu);er.error(`Firestore (${Xr}): ${t}`,...n)}}function $r(t,...e){if(er.logLevel<=Se.WARN){const n=e.map(Mu);er.warn(`Firestore (${Xr}): ${t}`,...n)}}function Mu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ge(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,s_(t,s,n)}function s_(t,e,n){let s=`FIRESTORE (${Xr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yn(s),new Error(s)}function $e(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||s_(e,r,s)}function Ee(t,e){return t}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class As{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class r_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ct.UNAUTHENTICATED)))}shutdown(){}}class UR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $R{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new As;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new As,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new As)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new r_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class BR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new BR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Uf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Uf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Uf(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function HR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class xu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=HR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function xc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return sc(r)===sc(i)?Ce(r,i):sc(r)?1:-1}return Ce(t.length,e.length)}const KR=55296,GR=57343;function sc(t){const e=t.charCodeAt(0);return e>=KR&&e<=GR}function Br(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const $f="__name__";class vn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=vn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=vn.isNumericId(e),r=vn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?vn.extractNumericId(e).compare(vn.extractNumericId(n)):xc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class Xe extends vn{construct(e,n,s){return new Xe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Xe(n)}static emptyPath(){return new Xe([])}}const zR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends vn{construct(e,n,s){return new Et(e,n,s)}static isValidIdentifier(e){return zR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$f}static keyField(){return new Et([$f])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Xe.fromString(e))}static fromName(e){return new pe(Xe.fromString(e).popFirst(5))}static empty(){return new pe(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Xe(e.slice()))}}function WR(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QR(t,e,n,s){if(e===!0&&s===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bf(t){if(!pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function i_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lu(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function it(t,e){const n={typeString:t};return e&&(n.value=e),n}function Eo(t,e){if(!i_(t))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}const jf=-62135596800,qf=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*qf);return new Ye(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jf)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qf}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eo(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:it("string",Ye._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ye(0,0))}static max(){return new ve(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const eo=-1;function YR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(s===1e9?new Ye(n+1,0):new Ye(n,s));return new Rs(r,pe.empty(),e)}function XR(t){return new Rs(t.readTime,t.key,eo)}class Rs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Rs(ve.min(),pe.empty(),eo)}static max(){return new Rs(ve.max(),pe.empty(),eo)}}function JR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}const ZR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Jr(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==ZR)throw t;oe("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,s)=>{n(e)}))}static reject(e){return new U(((n,s)=>{s(e)}))}static waitFor(e){return new U(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=U.resolve(!1);for(const s of e)n=n.next((r=>r?U.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new U(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next((d=>{o[h]=d,++l,l===i&&s(o)}),(d=>r(d)))}}))}static doWhile(e,n){return new U(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function tS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zr(t){return t.name==="IndexedDbTransactionError"}class al{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}al.ce=-1;const Fu=-1;function ll(t){return t==null}function ba(t){return t===0&&1/t==-1/0}function nS(t){return typeof t=="number"&&Number.isInteger(t)&&!ba(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const o_="";function sS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hf(e)),e=rS(t.get(n),e);return Hf(e)}function rS(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case o_:n+="";break;default:n+=i}}return n}function Hf(t){return t+o_+""}function Kf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Je{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}}class qo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??yt.RED,this.left=r??yt.EMPTY,this.right=i??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new yt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return yt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ht{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gf(this.data.getIterator())}getIteratorFrom(e){return new Gf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class Gf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class an{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new an([])}unionWith(e){let n=new ht(Et.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Br(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class l_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new l_("Invalid base64 string: "+i):i}})(e);return new wt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const iS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if($e(!!t,39018),typeof t=="string"){let e=0;const n=iS.exec(t);if($e(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}const c_="server_timestamp",u_="__type__",h_="__previous_value__",d_="__local_write_time__";function Uu(t){return(t?.mapValue?.fields||{})[u_]?.stringValue===c_}function cl(t){const e=t.mapValue.fields[h_];return Uu(e)?cl(e):e}function to(t){const e=Ss(t.mapValue.fields[d_].timestampValue);return new Ye(e.seconds,e.nanos)}class oS{constructor(e,n,s,r,i,o,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const Ra="(default)";class no{constructor(e,n){this.projectId=e,this.database=n||Ra}static empty(){return new no("","")}get isDefaultDatabase(){return this.database===Ra}isEqual(e){return e instanceof no&&e.projectId===this.projectId&&e.database===this.database}}const f_="__type__",aS="__max__",Ho={mapValue:{}},p_="__vector__",Sa="value";function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uu(t)?4:cS(t)?9007199254740991:lS(t)?10:11:ge(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return to(t).isEqual(to(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ss(r.timestampValue),l=Ss(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Cs(r.bytesValue).isEqual(Cs(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return nt(r.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return nt(r.integerValue)===nt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=nt(r.doubleValue),l=nt(i.doubleValue);return o===l?ba(o)===ba(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Br(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Kf(o)!==Kf(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0})(t,e);default:return ge(52216,{left:t})}}function so(t,e){return(t.values||[]).find((n=>kn(n,e)))!==void 0}function qr(t,e){if(t===e)return 0;const n=Ps(t),s=Ps(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=nt(i.integerValue||i.doubleValue),c=nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return zf(t.timestampValue,e.timestampValue);case 4:return zf(to(t),to(e));case 5:return xc(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=Cs(i),c=Cs(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=Ce(l[h],c[h]);if(d!==0)return d}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(nt(i.latitude),nt(o.latitude));return l!==0?l:Ce(nt(i.longitude),nt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Wf(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},h=l[Sa]?.arrayValue,d=c[Sa]?.arrayValue,p=Ce(h?.values?.length||0,d?.values?.length||0);return p!==0?p:Wf(h,d)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Ho.mapValue&&o===Ho.mapValue)return 0;if(i===Ho.mapValue)return 1;if(o===Ho.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=xc(c[p],d[p]);if(g!==0)return g;const y=qr(l[c[p]],h[d[p]]);if(y!==0)return y}return Ce(c.length,d.length)})(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function zf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Ss(t),s=Ss(e),r=Ce(n.seconds,s.seconds);return r!==0?r:Ce(n.nanos,s.nanos)}function Wf(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=qr(n[r],s[r]);if(i)return i}return Ce(n.length,s.length)}function Hr(t){return Lc(t)}function Lc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Ss(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Cs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return pe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Lc(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Lc(n.fields[o])}`;return r+"}"})(t.mapValue):ge(61005,{value:t})}function ra(t){switch(Ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cl(t);return e?16+ra(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+ra(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return rr(s.fields,((i,o)=>{r+=i.length+ra(o)})),r})(t.mapValue);default:throw ge(13486,{value:t})}}function Fc(t){return!!t&&"integerValue"in t}function $u(t){return!!t&&"arrayValue"in t}function Qf(t){return!!t&&"nullValue"in t}function Yf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ia(t){return!!t&&"mapValue"in t}function lS(t){return(t?.mapValue?.fields||{})[f_]?.stringValue===p_}function Ui(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return rr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ui(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ui(t.arrayValue.values[n]);return e}return{...t}}function cS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aS}class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(n)}setAll(e){let n=Et.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Ui(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ia(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){rr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Yt(Ui(this.value))}}function m_(t){const e=[];return rr(t.fields,((n,s)=>{const r=new Et([n]);if(ia(s)){const i=m_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new an(e)}class kt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new kt(e,0,ve.min(),ve.min(),ve.min(),Yt.empty(),0)}static newFoundDocument(e,n,s,r){return new kt(e,1,n,ve.min(),s,r,0)}static newNoDocument(e,n){return new kt(e,2,n,ve.min(),ve.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,ve.min(),ve.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ca{constructor(e,n){this.position=e,this.inclusive=n}}function Xf(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=pe.comparator(pe.fromName(o.referenceValue),n.key):s=qr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}class Pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function uS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class g_{}class ut extends g_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new dS(e,n,s):n==="array-contains"?new mS(e,s):n==="in"?new gS(e,s):n==="not-in"?new _S(e,s):n==="array-contains-any"?new yS(e,s):new ut(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new fS(e,s):new pS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qr(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(qr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends g_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return __(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __(t){return t.op==="and"}function y_(t){return hS(t)&&__(t)}function hS(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function Uc(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Hr(t.value);if(y_(t))return t.filters.map((e=>Uc(e))).join(",");{const e=t.filters.map((n=>Uc(n))).join(",");return`${t.op}(${e})`}}function v_(t,e){return t instanceof ut?(function(s,r){return r instanceof ut&&s.op===r.op&&s.field.isEqual(r.field)&&kn(s.value,r.value)})(t,e):t instanceof Nn?(function(s,r){return r instanceof Nn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&v_(o,r.filters[l])),!0):!1})(t,e):void ge(19439)}function E_(t){return t instanceof ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${Hr(n.value)}`})(t):t instanceof Nn?(function(n){return n.op.toString()+" {"+n.getFilters().map(E_).join(" ,")+"}"})(t):"Filter"}class dS extends ut{constructor(e,n,s){super(e,n,s),this.key=pe.fromName(s.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class fS extends ut{constructor(e,n){super(e,"in",n),this.keys=T_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class pS extends ut{constructor(e,n){super(e,"not-in",n),this.keys=T_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function T_(t,e){return(e.arrayValue?.values||[]).map((n=>pe.fromName(n.referenceValue)))}class mS extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $u(n)&&so(n.arrayValue,this.value)}}class gS extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&so(this.value.arrayValue,n)}}class _S extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(so(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!so(this.value.arrayValue,n)}}class yS extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$u(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>so(this.value.arrayValue,s)))}}class vS{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Zf(t,e=null,n=[],s=[],r=null,i=null,o=null){return new vS(t,e,n,s,r,i,o)}function Bu(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Uc(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Hr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Hr(s))).join(",")),e.Te=n}return e.Te}function ju(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jf(t.startAt,e.startAt)&&Jf(t.endAt,e.endAt)}function $c(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ul{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ES(t,e,n,s,r,i,o,l){return new ul(t,e,n,s,r,i,o,l)}function qu(t){return new ul(t)}function ep(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TS(t){return t.collectionGroup!==null}function $i(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ht(Et.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Pa(i,s))})),n.has(Et.keyField().canonicalString())||e.Ie.push(new Pa(Et.keyField(),s))}return e.Ie}function wn(t){const e=Ee(t);return e.Ee||(e.Ee=IS(e,$i(t))),e.Ee}function IS(t,e){if(t.limitType==="F")return Zf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Pa(r.field,i)}));const n=t.endAt?new Ca(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ca(t.startAt.position,t.startAt.inclusive):null;return Zf(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Bc(t,e,n){return new ul(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hl(t,e){return ju(wn(t),wn(e))&&t.limitType===e.limitType}function I_(t){return`${Bu(wn(t))}|lt:${t.limitType}`}function yr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>E_(r))).join(", ")}]`),ll(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Hr(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Hr(r))).join(",")),`Target(${s})`})(wn(t))}; limitType=${t.limitType})`}function dl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):pe.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of $i(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const h=Xf(o,l,c);return o.inclusive?h<=0:h<0})(s.startAt,$i(s),r)||s.endAt&&!(function(o,l,c){const h=Xf(o,l,c);return o.inclusive?h>=0:h>0})(s.endAt,$i(s),r))})(t,e)}function wS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w_(t){return(e,n)=>{let s=!1;for(const r of $i(t)){const i=AS(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function AS(t,e,n){const s=t.field.isKeyField()?pe.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?qr(c,h):ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ge(19790,{direction:t.dir})}}class ir{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return a_(this.inner)}size(){return this.innerSize}}const bS=new Je(pe.comparator);function Xn(){return bS}const A_=new Je(pe.comparator);function Ri(...t){let e=A_;for(const n of t)e=e.insert(n.key,n);return e}function b_(t){let e=A_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Hs(){return Bi()}function R_(){return Bi()}function Bi(){return new ir((t=>t.toString()),((t,e)=>t.isEqual(e)))}const RS=new Je(pe.comparator),SS=new ht(pe.comparator);function Pe(...t){let e=SS;for(const n of t)e=e.add(n);return e}const CS=new ht(Ce);function PS(){return CS}function Hu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(e)?"-0":e}}function S_(t){return{integerValue:""+t}}function kS(t,e){return nS(e)?S_(e):Hu(t,e)}class fl{constructor(){this._=void 0}}function NS(t,e,n){return t instanceof ro?(function(r,i){const o={fields:{[u_]:{stringValue:c_},[d_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Uu(i)&&(i=cl(i)),i&&(o.fields[h_]=i),{mapValue:o}})(n,e):t instanceof io?P_(t,e):t instanceof oo?k_(t,e):(function(r,i){const o=C_(r,i),l=tp(o)+tp(r.Ae);return Fc(o)&&Fc(r.Ae)?S_(l):Hu(r.serializer,l)})(t,e)}function DS(t,e,n){return t instanceof io?P_(t,e):t instanceof oo?k_(t,e):n}function C_(t,e){return t instanceof ka?(function(s){return Fc(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class ro extends fl{}class io extends fl{constructor(e){super(),this.elements=e}}function P_(t,e){const n=N_(e);for(const s of t.elements)n.some((r=>kn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class oo extends fl{constructor(e){super(),this.elements=e}}function k_(t,e){let n=N_(e);for(const s of t.elements)n=n.filter((r=>!kn(r,s)));return{arrayValue:{values:n}}}class ka extends fl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function tp(t){return nt(t.integerValue||t.doubleValue)}function N_(t){return $u(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class OS{constructor(e,n){this.field=e,this.transform=n}}function VS(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof io&&r instanceof io||s instanceof oo&&r instanceof oo?Br(s.elements,r.elements,kn):s instanceof ka&&r instanceof ka?kn(s.Ae,r.Ae):s instanceof ro&&r instanceof ro})(t.transform,e.transform)}class MS{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pl{}function D_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ku(t.key,An.none()):new To(t.key,t.data,An.none());{const n=t.data,s=Yt.empty();let r=new ht(Et.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new or(t.key,s,new an(r.toArray()),An.none())}}function xS(t,e,n){t instanceof To?(function(r,i,o){const l=r.value.clone(),c=sp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof or?(function(r,i,o){if(!oa(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=sp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(O_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function ji(t,e,n,s){return t instanceof To?(function(i,o,l,c){if(!oa(i.precondition,o))return l;const h=i.value.clone(),d=rp(i.fieldTransforms,c,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof or?(function(i,o,l,c){if(!oa(i.precondition,o))return l;const h=rp(i.fieldTransforms,c,o),d=o.data;return d.setAll(O_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,l){return oa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function LS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=C_(s.transform,r||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(s.field,i))}return n||null}function np(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Br(s,r,((i,o)=>VS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class To extends pl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends pl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function O_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function sp(t,e,n){const s=new Map;$e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,DS(o,l,n[r]))}return s}function rp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,NS(i,o,e))}return s}class Ku extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FS extends pl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class US{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&xS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ji(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ji(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=R_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=D_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Br(this.mutations,e.mutations,((n,s)=>np(n,s)))&&Br(this.baseMutations,e.baseMutations,((n,s)=>np(n,s)))}}class Gu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return RS})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Gu(e,n,s,r)}}class $S{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BS{constructor(e,n){this.count=e,this.unchangedNames=n}}var rt,ke;function jS(t){switch(t){case H.OK:return ge(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function V_(t){if(t===void 0)return Yn("GRPC error has no .code"),H.UNKNOWN;switch(t){case rt.OK:return H.OK;case rt.CANCELLED:return H.CANCELLED;case rt.UNKNOWN:return H.UNKNOWN;case rt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case rt.INTERNAL:return H.INTERNAL;case rt.UNAVAILABLE:return H.UNAVAILABLE;case rt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case rt.NOT_FOUND:return H.NOT_FOUND;case rt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case rt.ABORTED:return H.ABORTED;case rt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case rt.DATA_LOSS:return H.DATA_LOSS;default:return ge(39323,{code:t})}}(ke=rt||(rt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function qS(){return new TextEncoder}const HS=new ws([4294967295,4294967295],0);function ip(t){const e=qS().encode(t),n=new Xg;return n.update(e),new Uint8Array(n.digest())}function op(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ws([n,s],0),new ws([r,i],0)]}class zu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Si(`Invalid padding: ${n}`);if(s<0)throw new Si(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Si(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Si(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ws.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(ws.fromNumber(s)));return r.compare(HS)===1&&(r=new ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ip(e),[s,r]=op(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zu(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=ip(e),[s,r]=op(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Si extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ml{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Io.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ml(ve.min(),r,new Je(Ce),Xn(),Pe())}}class Io{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Io(s,n,Pe(),Pe(),Pe())}}class aa{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class M_{constructor(e,n){this.targetId=e,this.Ce=n}}class x_{constructor(e,n,s=wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class ap{constructor(){this.ve=0,this.Fe=lp(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ge(38017,{changeType:i})}})),new Io(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=lp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.Je=Ko(),this.He=Ko(),this.Ye=new Je(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if($c(i))if(s===0){const o=new pe(i.path);this.et(n,o,kt.newNoDocument(o,ve.min()))}else $e(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Cs(s).toUint8Array()}catch(c){if(c instanceof l_)return $r("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new zu(o,r,i)}catch(c){return $r(c instanceof Si?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&$c(l.target)){const c=new pe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,kt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Pe();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new ml(e,n,this.Ye,this.je,s);return this.je=Xn(),this.Je=Ko(),this.He=Ko(),this.Ye=new Je(Ce),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ap,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ht(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ht(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ap),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ko(){return new Je(pe.comparator)}function lp(){return new Je(pe.comparator)}const GS={asc:"ASCENDING",desc:"DESCENDING"},zS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WS={and:"AND",or:"OR"};class QS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jc(t,e){return t.useProto3Json||ll(e)?e:{value:e}}function Na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YS(t,e){return Na(t,e.toTimestamp())}function bn(t){return $e(!!t,49232),ve.fromTimestamp((function(n){const s=Ss(n);return new Ye(s.seconds,s.nanos)})(t))}function Wu(t,e){return qc(t,e).canonicalString()}function qc(t,e){const n=(function(r){return new Xe(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function F_(t){const e=Xe.fromString(t);return $e(q_(e),10190,{key:e.toString()}),e}function Hc(t,e){return Wu(t.databaseId,e.path)}function rc(t,e){const n=F_(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe($_(n))}function U_(t,e){return Wu(t.databaseId,e)}function XS(t){const e=F_(t);return e.length===4?Xe.emptyPath():$_(e)}function Kc(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $_(t){return $e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cp(t,e,n){return{name:Hc(t,e),fields:n.value.mapValue.fields}}function JS(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ge(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?($e(d===void 0||typeof d=="string",58123),wt.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),wt.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(h){const d=h.code===void 0?H.UNKNOWN:V_(h.code);return new le(d,h.message||"")})(o);n=new x_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=rc(t,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):ve.min(),l=new Yt({mapValue:{fields:s.document.fields}}),c=kt.newFoundDocument(r,i,o,l),h=s.targetIds||[],d=s.removedTargetIds||[];n=new aa(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=rc(t,s.document),i=s.readTime?bn(s.readTime):ve.min(),o=kt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new aa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=rc(t,s.document),i=s.removedTargetIds||[];n=new aa([],i,r,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new BS(r,i),l=s.targetId;n=new M_(l,o)}}return n}function ZS(t,e){let n;if(e instanceof To)n={update:cp(t,e.key,e.value)};else if(e instanceof Ku)n={delete:Hc(t,e.key)};else if(e instanceof or)n={update:cp(t,e.key,e.data),updateMask:l1(e.fieldMask)};else{if(!(e instanceof FS))return ge(16599,{Vt:e.type});n={verify:Hc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof ro)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ka)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:YS(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)})(t,e.precondition)),n}function e1(t,e){return t&&t.length>0?($e(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(ve.min())&&(o=bn(i)),new MS(o,r.transformResults||[])})(n,e)))):[]}function t1(t,e){return{documents:[U_(t,e.path)]}}function n1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=U_(t,r);const i=(function(h){if(h.length!==0)return j_(Nn.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:vr(g.field),direction:i1(g.dir)}})(d)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=jc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function s1(t){let e=XS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){$e(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const g=B_(p);return g instanceof Nn&&y_(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(N){return new Pa(Er(N.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,ll(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){const g=!!p.before,y=p.values||[];return new Ca(y,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,y=p.values||[];return new Ca(y,g)})(n.endAt)),ES(e,r,o,i,l,"F",c,h)}function r1(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Er(n.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Er(n.unaryFilter.field);return ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Er(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Er(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ut.create(Er(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Nn.create(n.compositeFilter.filters.map((s=>B_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(n.compositeFilter.op))})(t):ge(30097,{filter:t})}function i1(t){return GS[t]}function o1(t){return zS[t]}function a1(t){return WS[t]}function vr(t){return{fieldPath:t.canonicalString()}}function Er(t){return Et.fromServerFormat(t.fieldPath)}function j_(t){return t instanceof ut?(function(n){if(n.op==="=="){if(Yf(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NAN"}};if(Qf(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yf(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NAN"}};if(Qf(n.value))return{unaryFilter:{field:vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vr(n.field),op:o1(n.op),value:n.value}}})(t):t instanceof Nn?(function(n){const s=n.getFilters().map((r=>j_(r)));return s.length===1?s[0]:{compositeFilter:{op:a1(n.op),filters:s}}})(t):ge(54877,{filter:t})}function l1(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function q_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ys{constructor(e,n,s,r,i=ve.min(),o=ve.min(),l=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class c1{constructor(e){this.yt=e}}function u1(t){const e=s1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bc(e,e.limit,"L"):e}class h1{constructor(){this.Cn=new d1}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Rs.min())}updateCollectionGroup(e,n,s){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class d1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ht(Xe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ht(Xe.comparator)).toArray()}}const up={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H_=41943040;class jt{static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(H_,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);class Kr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Kr(0)}static cr(){return new Kr(-1)}}const hp="LruGarbageCollector",f1=1048576;function dp([t,e],[n,s]){const r=Ce(t,n);return r===0?Ce(e,s):r}class p1{constructor(e){this.Ir=e,this.buffer=new ht(dp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();dp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class m1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(hp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zr(n)?oe(hp,"Ignoring IndexedDB error during garbage collection: ",n):await Jr(n)}await this.Vr(3e5)}))}}class g1{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(al.ce);const s=new p1(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(up)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),up):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,l=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),_r()<=Se.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function _1(t,e){return new g1(t,e)}class y1{constructor(){this.changes=new ir((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?U.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class v1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class E1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&ji(s.mutation,r,an.empty(),Ye.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const r=Hs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Ri();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Hs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=Xn();const o=Bi(),l=(function(){return Bi()})();return n.forEach(((c,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof or)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),ji(d.mutation,h,d.mutation.getFieldMask(),Ye.now())):o.set(h.key,an.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((h,d)=>o.set(h,d))),n.forEach(((h,d)=>l.set(h,new v1(d,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=Bi();let r=new Je(((o,l)=>o-l)),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let d=s.get(c)||an.empty();d=l.applyToLocalView(h,d),s.set(c,d);const p=(r.get(l.batchId)||Pe()).add(c);r=r.insert(l.batchId,p)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=R_();d.forEach((g=>{if(!i.has(g)){const y=D_(n.get(g),s.get(g));y!==null&&p.set(g,y),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return U.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):U.resolve(Hs());let l=eo,c=i;return o.next((h=>U.forEach(h,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,c,h,Pe()))).next((d=>({batchId:l,changes:b_(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next((s=>{let r=Ri();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ri();return this.indexManager.getCollectionParents(e,i).next((l=>U.forEach(l,(c=>{const h=(function(p,g){return new ul(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,kt.newInvalidDocument(d)))}));let l=Ri();return o.forEach(((c,h)=>{const d=i.get(c);d!==void 0&&ji(d.mutation,h,an.empty(),Ye.now()),dl(n,h)&&(l=l.insert(c,h))})),l}))}}class T1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:u1(r.bundledQuery),readTime:bn(r.readTime)}})(n)),U.resolve()}}class I1{constructor(){this.overlays=new Je(pe.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Hs();return U.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),U.resolve()}getOverlaysForCollection(e,n,s){const r=Hs(),i=n.length+1,o=new pe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Je(((h,d)=>h-d));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=Hs(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Hs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,d)=>l.set(h,d))),!(l.size()>=r)););return U.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new $S(n,s));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class w1{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class Qu{constructor(){this.Qr=new ht(pt.$r),this.Ur=new ht(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new pt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new pe(new Xe([])),s=new pt(n,e),r=new pt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Xe([])),s=new pt(n,e),r=new pt(n,e+1);let i=Pe();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new pt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}class A1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ht(pt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new US(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Fu:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pt(n,0),r=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ht(Ce);return n.forEach((r=>{const i=new pt(r,0),o=new pt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),U.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;pe.isDocumentKey(i)||(i=i.child(""));const o=new pt(new pe(i),0);let l=new ht(Ce);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)}),o),U.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){$e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return U.forEach(n.mutations,(r=>{const i=new pt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new pt(n,0),r=this.Zr.firstAfterOrEqual(s);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class b1{constructor(e){this.ri=e,this.docs=(function(){return new Je(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return U.resolve(s?s.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let s=Xn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():kt.newInvalidDocument(r))})),U.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Xn();const o=n.path,l=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||JR(XR(d),s)<=0||(r.has(d.key)||dl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ge(9500)}ii(e,n){return U.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new R1(this)}getSize(e){return U.resolve(this.size)}}class R1 extends y1{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class S1{constructor(e){this.persistence=e,this.si=new ir((n=>Bu(n)),ju),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Qu,this.targetCount=0,this.ai=Kr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Kr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),U.waitFor(i).next((()=>r))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return U.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),U.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return U.resolve(s)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class K_{constructor(e,n){this.ui={},this.overlays={},this.ci=new al(0),this.li=!1,this.li=!0,this.hi=new w1,this.referenceDelegate=e(this),this.Pi=new S1(this),this.indexManager=new h1,this.remoteDocumentCache=(function(r){return new b1(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new c1(n),this.Ii=new T1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new A1(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){oe("MemoryPersistence","Starting transaction:",e);const r=new C1(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class C1 extends eS{constructor(e){super(),this.currentSequenceNumber=e}}class Yu{constructor(e){this.persistence=e,this.Ri=new Qu,this.Vi=null}static mi(e){return new Yu(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),U.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(s=>{const r=pe.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Da{constructor(e,n){this.persistence=e,this.pi=new ir((s=>sS(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=_1(this,n)}static mi(e,n){return new Da(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?U.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,ve.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ra(e.data.value)),n}br(e,n,s){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return U.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xu(e,n.fromCache,s,r)}}class P1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class k1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _w()?8:tS(Mt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new P1;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(_r()<=Se.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",yr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(_r()<=Se.DEBUG&&oe("QueryEngine","Query:",yr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(_r()<=Se.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",yr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):U.resolve())}ys(e,n){if(ep(n))return U.resolve(null);let s=wn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Bc(n,null,"F"),s=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Pe(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Bc(n,null,"F")):this.vs(e,h,n,c)}))))})))))}ws(e,n,s,r){return ep(n)||r.isEqual(ve.min())?U.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?U.resolve(null):(_r()<=Se.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yr(n)),this.vs(e,o,n,YR(r,eo)).next((l=>l)))}))}Ds(e,n){let s=new ht(w_(e));return n.forEach(((r,i)=>{dl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return _r()<=Se.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",yr(n)),this.ps.getDocumentsMatchingQuery(e,n,Rs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Ju="LocalStore",N1=3e8;class D1{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Je(Ce),this.xs=new ir((i=>Bu(i)),ju),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function O1(t,e,n,s){return new D1(t,e,n,s)}async function G_(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=Pe();for(const h of r){o.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function V1(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,d){const p=h.batch,g=p.keys();let y=U.resolve();return g.forEach((N=>{y=y.next((()=>d.getEntry(c,N))).next((O=>{const M=h.docVersions.get(N);$e(M!==null,48541),O.version.compareTo(M)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))}))})),y.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=Pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function z_(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function M1(t,e){const n=Ee(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((d,p)=>{const g=r.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p))));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,s)),r=r.insert(p,y),(function(O,M,B){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=N1?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(g,y,d)&&l.push(n.Pi.updateTargetData(i,y))}));let c=Xn(),h=Pe();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(x1(i,o,e.documentUpdates).next((d=>{c=d.ks,h=d.qs}))),!s.isEqual(ve.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(d)}return U.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function x1(t,e,n){let s=Pe(),r=Pe();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=Xn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(Ju,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function L1(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Fu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function F1(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,U.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new ys(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Gc(t,e,n){const s=Ee(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Zr(o))throw o;oe(Ju,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function fp(t,e,n){const s=Ee(t);let r=ve.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,d){const p=Ee(c),g=p.xs.get(d);return g!==void 0?U.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)})(s,o,wn(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ve.min(),n?i:Pe()))).next((l=>(U1(s,wS(e),l),{documents:l,Qs:i})))))}function U1(t,e,n){let s=t.Os.get(e)||ve.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class pp{constructor(){this.activeTargetIds=PS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $1{constructor(){this.Mo=new pp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class B1{Oo(e){}shutdown(){}}const mp="ConnectivityMonitor";class gp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(mp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(mp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Go=null;function zc(){return Go===null?Go=(function(){return 268435456+Math.round(2147483648*Math.random())})():Go++,"0x"+Go.toString(16)}const ic="RestConnection",j1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ra?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=zc(),l=this.zo(e,n.toUriEncodedString());oe(ic,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),d=Wr(h);return this.Jo(e,l,c,s,d).then((p=>(oe(ic,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw $r(ic,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=j1[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class H1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Rt="WebChannelConnection";class K1 extends q1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=zc();return new Promise(((l,c)=>{const h=new Jg;h.setWithCredentials(!0),h.listenOnce(Zg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case sa.NO_ERROR:const p=h.getResponseJson();oe(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case sa.TIMEOUT:oe(Rt,`RPC '${e}' ${o} timed out`),c(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case sa.HTTP_ERROR:const g=h.getStatus();if(oe(Rt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y?.error;if(N&&N.status&&N.message){const O=(function(B){const q=B.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(q)>=0?q:H.UNKNOWN})(N.status);c(new le(O,N.message))}else c(new le(H.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new le(H.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{oe(Rt,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(r);oe(Rt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",d,s,15)}))}T_(e,n,s){const r=zc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=n_(),l=t_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");oe(Rt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let g=!1,y=!1;const N=new H1({Yo:M=>{y?oe(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(g||(oe(Rt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),oe(Rt,`RPC '${e}' stream ${r} sending:`,M),p.send(M))},Zo:()=>p.close()}),O=(M,B,q)=>{M.listen(B,(V=>{try{q(V)}catch(C){setTimeout((()=>{throw C}),0)}}))};return O(p,bi.EventType.OPEN,(()=>{y||(oe(Rt,`RPC '${e}' stream ${r} transport opened.`),N.o_())})),O(p,bi.EventType.CLOSE,(()=>{y||(y=!0,oe(Rt,`RPC '${e}' stream ${r} transport closed`),N.a_(),this.E_(p))})),O(p,bi.EventType.ERROR,(M=>{y||(y=!0,$r(Rt,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),N.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))})),O(p,bi.EventType.MESSAGE,(M=>{if(!y){const B=M.data[0];$e(!!B,16349);const q=B,V=q?.error||q[0]?.error;if(V){oe(Rt,`RPC '${e}' stream ${r} received error:`,V);const C=V.status;let G=(function(v){const I=rt[v];if(I!==void 0)return V_(I)})(C),Z=V.message;G===void 0&&(G=H.INTERNAL,Z="Unknown error status: "+C+" with message "+V.message),y=!0,N.a_(new le(G,Z)),p.close()}else oe(Rt,`RPC '${e}' stream ${r} received:`,B),N.u_(B)}})),O(l,e_.STAT_EVENT,(M=>{M.stat===Mc.PROXY?oe(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Mc.NOPROXY&&oe(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function oc(){return typeof document<"u"?document:null}function gl(t){return new QS(t,!0)}class W_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const _p="PersistentStream";class Q_{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new le(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(_p,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(oe(_p,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G1 extends Q_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JS(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?bn(o.readTime):ve.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Kc(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=$c(c)?{documents:t1(i,c)}:{query:n1(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=L_(i,o.resumeToken);const h=jc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=Na(i,o.snapshotVersion.toTimestamp());const h=jc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const s=r1(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Kc(this.serializer),n.removeTarget=e,this.q_(n)}}class z1 extends Q_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=e1(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Kc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>ZS(this.serializer,s)))};this.q_(n)}}class W1{}class Q1 extends W1{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,qc(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,qc(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(H.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Y1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const tr="RemoteStore";class X1{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{ar(this)&&(oe(tr,"Restarting streams for network reachability change."),await(async function(c){const h=Ee(c);h.Ea.add(4),await wo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await _l(h)})(this))}))})),this.Ra=new Y1(s,r)}}async function _l(t){if(ar(t))for(const e of t.da)await e(!0)}async function wo(t){for(const e of t.da)await e(!1)}function Y_(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nh(n)?th(n):ei(n).O_()&&eh(n,e))}function Zu(t,e){const n=Ee(t),s=ei(n);n.Ia.delete(e),s.O_()&&X_(n,e),n.Ia.size===0&&(s.O_()?s.L_():ar(n)&&n.Ra.set("Unknown"))}function eh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ei(t).Y_(e)}function X_(t,e){t.Va.Ue(e),ei(t).Z_(e)}function th(t){t.Va=new KS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ei(t).start(),t.Ra.ua()}function nh(t){return ar(t)&&!ei(t).x_()&&t.Ia.size>0}function ar(t){return Ee(t).Ea.size===0}function J_(t){t.Va=void 0}async function J1(t){t.Ra.set("Online")}async function Z1(t){t.Ia.forEach(((e,n)=>{eh(t,e)}))}async function e0(t,e){J_(t),nh(t)?(t.Ra.ha(e),th(t)):t.Ra.set("Unknown")}async function t0(t,e,n){if(t.Ra.set("Online"),e instanceof x_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){oe(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oa(t,s)}else if(e instanceof aa?t.Va.Ze(e):e instanceof M_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const s=await z_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(wt.EMPTY_BYTE_STRING,d.snapshotVersion)),X_(i,c);const p=new ys(d.target,c,h,d.sequenceNumber);eh(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){oe(tr,"Failed to raise snapshot:",s),await Oa(t,s)}}async function Oa(t,e,n){if(!Zr(e))throw e;t.Ea.add(1),await wo(t),t.Ra.set("Offline"),n||(n=()=>z_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{oe(tr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await _l(t)}))}function Z_(t,e){return e().catch((n=>Oa(t,n,e)))}async function yl(t){const e=Ee(t),n=ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fu;for(;n0(e);)try{const r=await L1(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,s0(e,r)}catch(r){await Oa(e,r)}ey(e)&&ty(e)}function n0(t){return ar(t)&&t.Ta.length<10}function s0(t,e){t.Ta.push(e);const n=ks(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ey(t){return ar(t)&&!ks(t).x_()&&t.Ta.length>0}function ty(t){ks(t).start()}async function r0(t){ks(t).ra()}async function i0(t){const e=ks(t);for(const n of t.Ta)e.ea(n.mutations)}async function o0(t,e,n){const s=t.Ta.shift(),r=Gu.from(s,e,n);await Z_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await yl(t)}async function a0(t,e){e&&ks(t).X_&&await(async function(s,r){if((function(o){return jS(o)&&o!==H.ABORTED})(r.code)){const i=s.Ta.shift();ks(s).B_(),await Z_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await yl(s)}})(t,e),ey(t)&&ty(t)}async function yp(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),oe(tr,"RemoteStore received new credentials");const s=ar(n);n.Ea.add(3),await wo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await _l(n)}async function l0(t,e){const n=Ee(t);e?(n.Ea.delete(2),await _l(n)):e||(n.Ea.add(2),await wo(n),n.Ra.set("Unknown"))}function ei(t){return t.ma||(t.ma=(function(n,s,r){const i=Ee(n);return i.sa(),new G1(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:J1.bind(null,t),t_:Z1.bind(null,t),r_:e0.bind(null,t),H_:t0.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),nh(t)?th(t):t.Ra.set("Unknown")):(await t.ma.stop(),J_(t))}))),t.ma}function ks(t){return t.fa||(t.fa=(function(n,s,r){const i=Ee(n);return i.sa(),new z1(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:r0.bind(null,t),r_:a0.bind(null,t),ta:i0.bind(null,t),na:o0.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await yl(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(tr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class sh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new sh(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rh(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),Zr(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}class Pr{static emptySet(e){return new Pr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||pe.comparator(n.key,s.key):(n,s)=>pe.comparator(n.key,s.key),this.keyedMap=Ri(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Pr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class vp{constructor(){this.ga=new Je(pe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Gr{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new Gr(e,n,Pr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class c0{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class u0{constructor(){this.queries=Ep(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Ee(n),i=r.queries;r.queries=Ep(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new le(H.ABORTED,"Firestore shutting down"))}}function Ep(){return new ir((t=>I_(t)),hl)}async function h0(t,e){const n=Ee(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new c0,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=rh(o,`Initialization of query '${yr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ih(n)}async function d0(t,e){const n=Ee(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function f0(t,e){const n=Ee(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&ih(n)}function p0(t,e,n){const s=Ee(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ih(t){t.Ca.forEach((e=>{e.next()}))}var Wc,Tp;(Tp=Wc||(Wc={})).Ma="default",Tp.Cache="cache";class m0{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Gr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wc.Cache}}class ny{constructor(e){this.key=e}}class sy{constructor(e){this.key=e}}class g0{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=w_(e),this.tu=new Pr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new vp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((d,p)=>{const g=r.get(d),y=dl(this.query,p)?p:null,N=!!g&&this.mutatedKeys.has(g.key),O=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;g&&y?g.data.isEqual(y.data)?N!==O&&(s.track({type:3,doc:y}),M=!0):this.su(g,y)||(s.track({type:2,doc:y}),M=!0,(c&&this.eu(y,c)>0||h&&this.eu(y,h)<0)&&(l=!0)):!g&&y?(s.track({type:0,doc:y}),M=!0):g&&!y&&(s.track({type:1,doc:g}),M=!0,(c||h)&&(l=!0)),M&&(y?(o=o.add(y),i=O?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(y,N){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:M})}};return O(y)-O(N)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Gr(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new sy(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new ny(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const oh="SyncEngine";class _0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class y0{constructor(e){this.key=e,this.hu=!1}}class v0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ir((l=>I_(l)),hl),this.Iu=new Map,this.Eu=new Set,this.du=new Je(pe.comparator),this.Au=new Map,this.Ru=new Qu,this.Vu={},this.mu=new Map,this.fu=Kr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E0(t,e,n=!0){const s=cy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await ry(s,e,n,!0),r}async function T0(t,e){const n=cy(t);await ry(n,e,!0,!1)}async function ry(t,e,n,s){const r=await F1(t.localStore,wn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await I0(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Y_(t.remoteStore,r),l}async function I0(t,e,n,s,r){t.pu=(p,g,y)=>(async function(O,M,B,q){let V=M.view.ru(B);V.Cs&&(V=await fp(O.localStore,M.query,!1).then((({documents:w})=>M.view.ru(w,V))));const C=q&&q.targetChanges.get(M.targetId),G=q&&q.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(V,O.isPrimaryClient,C,G);return wp(O,M.targetId,Z.au),Z.snapshot})(t,p,g,y);const i=await fp(t.localStore,e,!0),o=new g0(e,i.Qs),l=o.ru(i.documents),c=Io.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);wp(t,n,h.au);const d=new _0(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function w0(t,e,n){const s=Ee(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!hl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Gc(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Zu(s.remoteStore,r.targetId),Qc(s,r.targetId)})).catch(Jr)):(Qc(s,r.targetId),await Gc(s.localStore,r.targetId,!0))}async function A0(t,e){const n=Ee(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Zu(n.remoteStore,s.targetId))}async function b0(t,e,n){const s=D0(t);try{const r=await(function(o,l){const c=Ee(o),h=Ye.now(),d=l.reduce(((y,N)=>y.add(N.key)),Pe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let N=Xn(),O=Pe();return c.Ns.getEntries(y,d).next((M=>{N=M,N.forEach(((B,q)=>{q.isValidDocument()||(O=O.add(B))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,N))).next((M=>{p=M;const B=[];for(const q of l){const V=LS(q,p.get(q.key).overlayedDocument);V!=null&&B.push(new or(q.key,V,m_(V.value.mapValue),An.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,B,l)})).next((M=>{g=M;const B=M.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(y,M.batchId,B)}))})).then((()=>({batchId:g.batchId,changes:b_(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Je(Ce)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(s,r.batchId,n),await Ao(s,r.changes),await yl(s.remoteStore)}catch(r){const i=rh(r,"Failed to persist write");n.reject(i)}}async function iy(t,e){const n=Ee(t);try{const s=await M1(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?$e(o.hu,14607):r.removedDocuments.size>0&&($e(o.hu,42227),o.hu=!1))})),await Ao(n,s,e)}catch(s){await Jr(s)}}function Ip(t,e,n){const s=Ee(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=Ee(o);c.onlineState=l;let h=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)})),h&&ih(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function R0(t,e,n){const s=Ee(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Je(pe.comparator);o=o.insert(i,kt.newNoDocument(i,ve.min()));const l=Pe().add(i),c=new ml(ve.min(),new Map,new Je(Ce),o,l);await iy(s,c),s.du=s.du.remove(i),s.Au.delete(e),ah(s)}else await Gc(s.localStore,e,!1).then((()=>Qc(s,e,n))).catch(Jr)}async function S0(t,e){const n=Ee(t),s=e.batch.batchId;try{const r=await V1(n.localStore,e);ay(n,s,null),oy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ao(n,r)}catch(r){await Jr(r)}}async function C0(t,e,n){const s=Ee(t);try{const r=await(function(o,l){const c=Ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>($e(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>c.localDocuments.getDocuments(h,d)))}))})(s.localStore,e);ay(s,e,n),oy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ao(s,r)}catch(r){await Jr(r)}}function oy(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ay(t,e,n){const s=Ee(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Qc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||ly(t,s)}))}function ly(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Zu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ah(t))}function wp(t,e,n){for(const s of n)s instanceof ny?(t.Ru.addReference(s.key,e),P0(t,s)):s instanceof sy?(oe(oh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||ly(t,s.key)):ge(19791,{wu:s})}function P0(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(oe(oh,"New document in limbo: "+n),t.Eu.add(s),ah(t))}function ah(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Xe.fromString(e)),s=t.fu.next();t.Au.set(s,new y0(n)),t.du=t.du.insert(n,s),Y_(t.remoteStore,new ys(wn(qu(n.path)),s,"TargetPurposeLimboResolution",al.ce))}}async function Ao(t,e,n){const s=Ee(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const d=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(h){r.push(h);const d=Xu.As(c.targetId,h);i.push(d)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,h){const d=Ee(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>U.forEach(h,(g=>U.forEach(g.Es,(y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>U.forEach(g.ds,(y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!Zr(p))throw p;oe(Ju,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const y=d.Ms.get(g),N=y.snapshotVersion,O=y.withLastLimboFreeSnapshotVersion(N);d.Ms=d.Ms.insert(g,O)}}})(s.localStore,i))}async function k0(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){oe(oh,"User change. New user:",e.toKey());const s=await G_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new le(H.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ao(n,s.Ls)}}function N0(t,e){const n=Ee(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let r=Pe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function cy(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R0.bind(null,e),e.Pu.H_=f0.bind(null,e.eventManager),e.Pu.yu=p0.bind(null,e.eventManager),e}function D0(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C0.bind(null,e),e}class Va{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return O1(this.persistence,new k1,e.initialUser,this.serializer)}Cu(e){return new K_(Yu.mi,this.serializer)}Du(e){return new $1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Va.provider={build:()=>new Va};class O0 extends Va{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Da,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new m1(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new K_((s=>Da.mi(s,n)),this.serializer)}}class Yc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ip(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=k0.bind(null,this.syncEngine),await l0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new u0})()}createDatastore(e){const n=gl(e.databaseInfo.databaseId),s=(function(i){return new K1(i)})(e.databaseInfo);return(function(i,o,l,c){return new Q1(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new X1(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ip(this.syncEngine,n,0)),(function(){return gp.v()?new gp:new B1})())}createSyncEngine(e,n){return(function(r,i,o,l,c,h,d){const p=new v0(r,i,o,l,c,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ee(n);oe(tr,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yc.provider={build:()=>new Yc};class V0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ns="FirestoreClient";class M0{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{oe(Ns,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(oe(Ns,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=rh(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ac(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Ns,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await G_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ap(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x0(t);oe(Ns,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>yp(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>yp(e.remoteStore,r))),t._onlineComponents=e}async function x0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Ns,"Using user provided OfflineComponentProvider");try{await ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===H.FAILED_PRECONDITION||r.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),await ac(t,new Va)}}else oe(Ns,"Using default OfflineComponentProvider"),await ac(t,new O0(void 0));return t._offlineComponents}async function uy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Ns,"Using user provided OnlineComponentProvider"),await Ap(t,t._uninitializedComponentsProvider._online)):(oe(Ns,"Using default OnlineComponentProvider"),await Ap(t,new Yc))),t._onlineComponents}function L0(t){return uy(t).then((e=>e.syncEngine))}async function F0(t){const e=await uy(t),n=e.eventManager;return n.onListen=E0.bind(null,e.syncEngine),n.onUnlisten=w0.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T0.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A0.bind(null,e.syncEngine),n}function U0(t,e,n={}){const s=new As;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,h){const d=new V0({next:g=>{d.Nu(),o.enqueueAndForget((()=>d0(i,p)));const y=g.docs.has(l);!y&&g.fromCache?h.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?h.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new m0(qu(l.path),d,{includeMetadataChanges:!0,qa:!0});return h0(i,p)})(await F0(t),t.asyncQueue,e,n,s))),s.promise}function hy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const bp=new Map;const dy="firestore.googleapis.com",Rp=!0;class Sp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dy,this.ssl=Rp}else this.host=e.host,this.ssl=e.ssl??Rp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f1)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hy(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FR;switch(s.type){case"firstParty":return new jR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=bp.get(n);s&&(oe("ComponentProvider","Removing Datastore"),bp.delete(n),s.terminate())})(this),Promise.resolve()}}function $0(t,e,n,s={}){t=jr(t,lh);const r=Wr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(fg(`https://${l}`),pg("Firestore",!0)),i.host!==dy&&i.host!==l&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Xs(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=Ct.MOCK_USER;else{h=lw(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ct(p)}t._authCredentials=new UR(new r_(h,d))}}class ch{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ch(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Eo(n,mt._jsonSchema))return new mt(e,s||null,new pe(Xe.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:it("string",mt._jsonSchemaVersion),referencePath:it("string")};class ao extends ch{constructor(e,n,s){super(e,n,qu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new pe(e))}withConverter(e){return new ao(this.firestore,e,this._path)}}function Ma(t,e,...n){if(t=en(t),arguments.length===1&&(e=xu.newId()),WR("doc","path",e),t instanceof lh){const s=Xe.fromString(e,...n);return Bf(s),new mt(t,null,new pe(s))}{if(!(t instanceof mt||t instanceof ao))throw new le(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Xe.fromString(e,...n));return Bf(s),new mt(t.firestore,t instanceof ao?t.converter:null,new pe(s))}}const Cp="AsyncQueue";class Pp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W_(this,"async_queue_retry"),this._c=()=>{const s=oc();s&&oe(Cp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=oc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=oc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new As;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zr(e))throw e;oe(Cp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",kp(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=sh.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:kp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function kp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class vl extends lh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Pp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pp(e),this._firestoreClient=void 0,await e}}}function B0(t,e){const n=typeof t=="object"?t:yg(),s=typeof t=="string"?t:Ra,r=Au(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=ow("firestore");i&&$0(r,...i)}return r}function fy(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j0(t),t._firestoreClient}function j0(t){const e=t._freezeSettings(),n=(function(r,i,o,l){return new oS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,hy(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new M0(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(wt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eo(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:it("string",Xt._jsonSchemaVersion),bytes:it("string")};class uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hh{constructor(e){this._methodName=e}}class Rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(Eo(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:it("string",Rn._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};class Sn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eo(e,Sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sn(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:it("string",Sn._jsonSchemaVersion),vectorValues:it("object")};const q0=/^__.*__$/;class H0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,n,this.fieldTransforms):new To(e,this.data,n,this.fieldTransforms)}}function py(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class dh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(py(this.Ac)&&q0.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||gl(e)}Cc(e,n,s,r=!1){return new dh({Ac:e,methodName:n,Dc:s,path:Et.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function G0(t){const e=t._freezeSettings(),n=gl(t._databaseId);return new K0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function z0(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);yy("Data must be an object, but it was:",o,s);const l=gy(s,o);let c,h;if(i.merge)c=new an(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=W0(e,p,n);if(!o.contains(g))throw new le(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Y0(d,g)||d.push(g)}c=new an(d),h=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=o.fieldTransforms;return new H0(new Yt(l),c,h)}class fh extends hh{_toFieldTransform(e){return new OS(e.path,new ro)}isEqual(e){return e instanceof fh}}function my(t,e){if(_y(t=en(t)))return yy("Unsupported field value:",e,t),gy(t,e);if(t instanceof hh)return(function(s,r){if(!py(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=my(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=en(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ye.fromDate(s);return{timestampValue:Na(r.serializer,i)}}if(s instanceof Ye){const i=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Na(r.serializer,i)}}if(s instanceof Rn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xt)return{bytesValue:L_(r.serializer,s._byteString)};if(s instanceof mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Sn)return(function(o,l){return{mapValue:{fields:{[f_]:{stringValue:p_},[Sa]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Hu(l.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Lu(s)}`)})(t,e)}function gy(t,e){const n={};return a_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(t,((s,r)=>{const i=my(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function _y(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Rn||t instanceof Xt||t instanceof mt||t instanceof hh||t instanceof Sn)}function yy(t,e,n){if(!_y(n)||!i_(n)){const s=Lu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function W0(t,e,n){if((e=en(e))instanceof uh)return e._internalPath;if(typeof e=="string")return vy(t,e);throw xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const Q0=new RegExp("[~\\*/\\[\\]]");function vy(t,e,n){if(e.search(Q0)>=0)throw xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uh(...e.split("."))._internalPath}catch{throw xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xa(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function Y0(t,e){return t.some((n=>n.isEqual(e)))}class Ey{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ty("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X0 extends Ey{data(){return super.data()}}function Ty(t,e){return typeof e=="string"?vy(t,e):e instanceof uh?e._internalPath:e._delegate._internalPath}class J0{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return rr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Sa].arrayValue?.values?.map((s=>nt(s.doubleValue)));return new Sn(n)}convertGeoPoint(e){return new Rn(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=cl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(to(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Xe.fromString(e);$e(q_(s),9688,{name:e});const r=new no(s.get(1),s.get(3)),i=new pe(s.popFirst(5));return r.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function Z0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ci{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends Ey{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new la(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ty("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:it("string",Qs._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class la extends Qs{data(e={}){return super.data(e)}}class qi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ci(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new la(this._firestore,this._userDataWriter,s.key,s,new Ci(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new la(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ci(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new la(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ci(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:eC(l.type),doc:c,oldIndex:h,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}function Iy(t){t=jr(t,mt);const e=jr(t.firestore,vl);return U0(fy(e),t._key).then((n=>rC(e,t,n)))}qi._jsonSchemaVersion="firestore/querySnapshot/1.0",qi._jsonSchema={type:it("string",qi._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class tC extends J0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function nC(t,e,n){t=jr(t,mt);const s=jr(t.firestore,vl),r=Z0(t.converter,e,n);return wy(s,[z0(G0(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,An.none())])}function sC(t){return wy(jr(t.firestore,vl),[new Ku(t._key,An.none())])}function wy(t,e){return(function(s,r){const i=new As;return s.asyncQueue.enqueueAndForget((async()=>b0(await L0(s),r,i))),i.promise})(fy(t),e)}function rC(t,e,n){const s=n.docs.get(e._key),r=new tC(t);return new Qs(t,r,e._key,s,new Ci(n.hasPendingWrites,n.fromCache),e.converter)}function iC(){return new fh("serverTimestamp")}(function(e,n=!0){(function(r){Xr=r})(Qr),Fr(new Js("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new vl(new $R(s.getProvider("auth-internal")),new qR(o,s.getProvider("app-check-internal")),(function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new no(h.options.projectId,d)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Is(Lf,Ff,e),Is(Lf,Ff,"esm2020")})();const oC={apiKey:"AIzaSyDMvSyTEhJGh7a0coyDWCDiAsWCgxE9QsU",authDomain:"realcitytransport.firebaseapp.com",databaseURL:"https://realcitytransport-default-rtdb.firebaseio.com",projectId:"realcitytransport",storageBucket:"realcitytransport.firebasestorage.app",messagingSenderId:"510805652928",appId:"1:510805652928:web:0559bdd8da50af10b7c425",measurementId:"G-JE98MMZMCW"},Ay=_g(oC),Xc=VR(Ay),La=B0(Ay),st=3600,Np=60,Ti=8*st,Ds=[{id:"sys_unlock_vehicle",type:"SYSTEM",domain:"vehicle",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ti,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"vehicle"}]},{id:"sys_unlock_route",type:"SYSTEM",domain:"route",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ti,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"route"}]},{id:"sys_unlock_construction",type:"SYSTEM",domain:"construction",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ti,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"construction"}]},{id:"sys_unlock_finance",type:"SYSTEM",domain:"finance",timePolicy:"FIXED",title:"()  ",desc:"  . (  )",tier:1,durationSec:Ti,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"finance"}]},{id:"sys_unlock_city",type:"SYSTEM",domain:"city",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ti,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"city"}]},{id:"sys_preview_starter_vehicles",type:"REAL",domain:"vehicle",timePolicy:"SCALABLE",title:"  ",desc:' (//)    .   ""  ,     . (30,  )',tier:1,durationSec:30*Np,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_STARTER_FLEET_PREVIEW",transports:["bus","truck","rail"],runTimeMinSec:30*Np,runTimeMaxSec:3*st,countPerTransport:1,mode:"MANUAL"}]},{id:"sys_preview_auto_assign",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"  ",desc:"      . (1,  )",tier:1,durationSec:1*st,requires:["sys_preview_starter_vehicles"],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_FEATURE",featureKey:"preview_auto_assign"},{type:"SET_PREVIEW_RUN_MODE",mode:"AUTO"}]},{id:"city_scale_region",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  .',tier:1,durationSec:4*st,requires:["sys_unlock_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"REGION"}]},{id:"city_scale_city",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  . (  )',tier:1,durationSec:8*st,requires:["city_scale_region"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"CITY"}]},{id:"city_scale_country",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . ( / )',tier:1,durationSec:12*st,requires:["city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"COUNTRY"}]},{id:"city_scale_state",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:16*st,requires:["city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"STATE"}]},{id:"city_scale_planet",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:24*st,requires:["city_scale_state"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"PLANET"}]},{id:"unlock_bus_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*st,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"bus",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"bus",tier:1}]},{id:"unlock_truck_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*st,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"truck",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"truck",tier:1}]},{id:"unlock_rail_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*st,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"rail",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"rail",tier:1}]},{id:"unlock_plane_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*st,requires:["sys_unlock_city","city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"plane",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"plane",tier:1}]},{id:"unlock_ship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*st,requires:["sys_unlock_city","city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"ship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"ship",tier:1}]},{id:"unlock_spaceship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:3*st,requires:["sys_unlock_city","city_scale_planet"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"spaceship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"spaceship",tier:1}]},{id:"rs_1",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  I",desc:"     5% . (SYSTEM  8 )",tier:1,durationSec:1*st,requires:[],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:1}]},{id:"rs_2",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  II",desc:"     10% . (SYSTEM  8 )",tier:1,durationSec:2*st,requires:["rs_1"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:2}]},{id:"rs_3",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  III",desc:"     15% . (SYSTEM  8 )",tier:1,durationSec:4*st,requires:["rs_2"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:3}]},{id:"rs_4",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  IV",desc:"     20% . (SYSTEM  8 )",tier:1,durationSec:8*st,requires:["rs_3"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:4}]},{id:"rs_5",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  V",desc:"     25% . (SYSTEM  8 )",tier:1,durationSec:16*st,requires:["rs_4"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:5}]},{id:"t2_transport_foundation",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:" 2  ()",desc:"2   .   .",tier:2,durationSec:12*st,requires:[],revealAfter:[],enabled:!1,effects:[]}];function ph(t){return Ds.find(e=>e.id===t)||null}function lc(t){return String(Math.max(0,Number(t)||0)).padStart(2,"0")}function Dp(t){const e=Math.max(0,Math.floor(Number(t)||0)),n=Math.floor(e/3600),s=Math.floor(e%3600/60),r=e%60;return{h:n,m:s,sec:r}}function Op({h:t,m:e,sec:n}){return t>0?`${t}h ${lc(e)}m ${lc(n)}s`:e>0?`${e}m ${lc(n)}s`:`${n}s`}function by(){const t=r=>{const i=Math.max(0,Math.floor(Number(r||0)/1e3));return Op(Dp(i))},e=r=>Op(Dp(r));return{formatRemainMs:t,formatRemainSec:e,makeRemainLabelFromMs:r=>he(()=>t(r.value)),makeRemainLabelFromSec:r=>he(()=>e(r.value))}}const Ry="rcts.research.saveEnabled",Sy="rcts.research.autosave.enabled",Cy="rcts.research.autosave.base",mh="rcts.research.autosave.intervalMin",{kstDate:Py,isKstTimeReady:ky}=Wm(),bo=he(()=>ky.value&&Py.value instanceof Date);function El(){return bo.value?Py.value.getTime():Date.now()}const aC=new Set(["sys_unlock_vehicle","sys_unlock_route","sys_unlock_construction","sys_unlock_finance","sys_unlock_city"]);function Fa(t){return!t||!aC.has(t)?!1:ph(t)?.enabled===!1}const Dn=Ie(null),Ot=Ie(new Set),Ke=Ie(null),We=Ie([]),Ny=Ie({}),Dy=Ie(1),gh=Ie(0),lo=Ie(1),nr=Ie(1),Ua=Ie("NONE"),$a=Ie({vehicle:!1,route:!1,construction:!1,finance:!1,city:!1}),Jc=Ie(!1),Zc=Ie(!1),qn=Ie(!1),lr=Ie(null);let Bt=null,bs=!1;const Ys=Ie(Vy(Ry,!0)),co=Ie(Vy(Sy,!1)),_h=Ie(My(Cy,5)),uo=Ie(My(mh,10)),yh=Ie(!1),Oy=Ie(0);let Ks=null;function Vy(t,e){const n=localStorage.getItem(t);return n===null?e:n==="1"}function My(t,e){const n=localStorage.getItem(t),s=n==null?NaN:Number(n);return Number.isFinite(s)?s:e}function xy(t,e){localStorage.setItem(t,e?"1":"0")}function eu(t,e){localStorage.setItem(t,String(e))}function Tl(t){const e=Math.max(1,Math.min(3,Number(t||1)));return e===1?1:e===2?3:5}function lC(t){Ys.value=!!t,xy(Ry,Ys.value),Ys.value?Ro():(Bt&&(clearTimeout(Bt),Bt=null),rn())}function cC(t){co.value=!!t,xy(Sy,co.value),Ro()}function uC(t){const e=Number(t)===10?10:5;_h.value=e,eu(Cy,e);const n=Number(uo.value)||e,s=Math.max(e,Math.round(n/e)*e);uo.value=s,eu(mh,s),Ro(!0)}function hC(t){const e=Number(_h.value)===10?10:5,n=Number(t);if(!Number.isFinite(n)||n<=0)return;const s=Math.max(e,Math.round(n/e)*e);uo.value=s,eu(mh,s),Ro(!0)}function dC(t){const e=Number(t);if(!Number.isFinite(e)||e<=0)return 6e4;const n=e*60*1e3,s=540*60*1e3,r=Date.now()+s,o=(Math.floor(r/n)+1)*n-r;return Math.max(1e3,o)}function rn(){yh.value=!1,Ks&&(clearTimeout(Ks),Ks=null)}function Ly(){if(Ks&&(clearTimeout(Ks),Ks=null),!co.value||!Ys.value||!lr.value||!qn.value||bs)return rn();yh.value=!0;const t=Number(uo.value)||10,e=dC(t);Ks=setTimeout(async()=>{try{await Th({reason:"autosave"}),Oy.value=Date.now()}catch(n){console.error("useResearch:  :",n)}finally{Ly()}},e)}function Ro(t=!1){t&&rn(),co.value&&Ys.value&&lr.value&&qn.value&&!bs?Ly():rn()}function fC(){Bt&&(clearTimeout(Bt),Bt=null),rn(),lr.value=null,qn.value=!1,bs=!1}function pC(t){return(Array.isArray(t?.requires)?t.requires:[]).every(n=>Ot.value.has(n))}function Fy(t){const e=Array.isArray(t?.revealAfter)?t.revealAfter:[];return e.length===0?!0:e.every(n=>Ot.value.has(n))}function vh(t){return Ot.value.has(t)}function mC(t){return!t||Number(t.tier||1)!==1?!1:(t.effects||[]).some(e=>e?.type==="UNLOCK_TRANSPORT_TIER"&&Number(e?.tier||1)===1&&!!e?.transportId)}function Uy(t){return t?t.timePolicy==="FIXED"?!0:t.type==="SYSTEM":!1}function gC(t){return t?t.timePolicy==="SCALABLE"?!0:t.timePolicy==null?!Uy(t):!1:!1}function Ba(t){switch(String(t||"").toUpperCase()){case"REGION":return 1;case"CITY":return 2;case"COUNTRY":return 3;case"STATE":return 4;case"PLANET":return 5;default:return 0}}function ti(){const t={};let e=1,n=0,s=1,r="NONE";const i={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1};for(const c of Ds)if(Ot.value.has(c.id))for(const h of c.effects||[]){if(h.type==="UNLOCK_TRANSPORT_TIER"){const d=h.transportId,p=Number(h.tier||1);if(!d)continue;t[d]=Math.max(Number(t[d]||0),p)}if(h.type==="INCOME_MULTIPLIER"&&(e*=Number(h.value||1)),h.type==="RESEARCH_SPEED_LEVEL"){const d=Number(h.level||0);Number.isFinite(d)&&(n=Math.max(n,d))}if(h.type==="QUEUE_RESERVE_LEVEL"){const d=Number(h.level||1);Number.isFinite(d)&&(s=Math.max(s,d))}if(h.type==="UNLOCK_FEATURE"){const d=String(h.featureKey||"");d&&Object.prototype.hasOwnProperty.call(i,d)&&(i[d]=!0)}if(h.type==="SET_CITY_SCALE"){const d=String(h.scale||"").toUpperCase();Ba(d)>Ba(r)&&(r=d)}}Ny.value=t,Dy.value=e,gh.value=n;const o=1-.05*Math.max(0,n);lo.value=Math.max(.2,o),Ua.value=r,$a.value=i,nr.value=Math.max(1,Math.min(3,s));const l=Tl(nr.value);We.value.length>l&&(We.value=We.value.slice(0,l))}const _C=he(()=>Ds.filter(t=>Number(t?.tier||1)>=2?!0:Fy(t))),yC=he(()=>{const t=new Set;for(const e of Ds)if(Number(e.tier||1)===1)for(const n of e.effects||[])n.type==="UNLOCK_TRANSPORT_TIER"&&Number(n.tier||1)===1&&n.transportId&&t.add(n.transportId);return Array.from(t)}),vC=he(()=>!Dn.value),EC=he(()=>yC.value.map(t=>({id:t})));function TC(){return Ot.value.has("unlock_bus_t1")||Ot.value.has("unlock_truck_t1")||Ot.value.has("unlock_rail_t1")}function Eh(t){const e=ph(t);if(!e)return"unknown";const n=Number(e.tier||1);return n===1&&!Fy(e)?"hidden":vh(t)?"done":Ke.value?.id===t?"active":We.value.includes(t)?"queued":e.enabled===!1?"comingSoon":t==="sys_preview_starter_vehicles"?!Dn.value||!TC()?"locked":"available":n===1&&mC(e)&&Dn.value||pC(e)?"available":"locked"}function $y(t){return Ds.find(n=>n.enabled!==!1&&Number(n.tier||1)===1&&(n.effects||[]).some(s=>s.type==="UNLOCK_TRANSPORT_TIER"&&s.transportId===t&&Number(s.tier||1)===1))?.id??null}function By(){return!(!Ys.value||!lr.value||!qn.value||bs)}function IC(){const t=Tl(nr.value);return{version:10,firstUnlockTransportId:Dn.value??null,completedResearchIds:Array.from(Ot.value),activeResearch:Ke.value?{id:Ke.value.id,startedAtMs:Ke.value.startedAtMs,endsAtMs:Ke.value.endsAtMs}:null,queuedResearchIds:Array.isArray(We.value)?We.value.slice(0,t):[]}}function wC(t){Dn.value=typeof t?.firstUnlockTransportId=="string"?t.firstUnlockTransportId:typeof t?.firstUnlockId=="string"?t.firstUnlockId:null;const e=Array.isArray(t?.completedResearchIds)?t.completedResearchIds:[];Ot.value=new Set(e.filter(o=>typeof o=="string"));const n=t?.activeResearch;n&&typeof n=="object"&&typeof n.id=="string"?Ke.value={id:n.id,startedAtMs:Number(n.startedAtMs||0),endsAtMs:Number(n.endsAtMs||0)}:Ke.value=null;const s=Array.isArray(t?.queuedResearchIds)?t.queuedResearchIds.filter(o=>typeof o=="string"):[],r=typeof t?.queuedResearchId=="string"?t.queuedResearchId:null,i=[];for(const o of s)i.includes(o)||i.push(o);if(r&&!i.includes(r)&&i.push(r),We.value=i,Ot.value.size===0&&Array.isArray(t?.transports)){for(const o of t.transports)if(!(!o||typeof o.id!="string")&&o.locked===!1){const l=$y(o.id);l&&Ot.value.add(l)}}ti()}async function Th({reason:t="manual"}={}){if(By()){Bt&&(clearTimeout(Bt),Bt=null);try{Zc.value=!0;const e={...IC(),updatedAt:iC(),lastSaveReason:t},n=Ma(La,"users",lr.value,"research","state");await nC(n,e,{merge:!0})}catch(e){console.error("useResearch: Firebase  :",e)}finally{Zc.value=!1}}}const Jn=()=>{By()&&(Bt&&clearTimeout(Bt),Bt=setTimeout(async()=>{await Th({reason:"debounced"})},800))};function AC(t){if(!t||Dn.value)return;const e=$y(t);e&&(Dn.value=t,Ot.value.add(e),ti(),Jn())}function jy(t){if(Fa(t))return{ok:!1,reason:"COMING_SOON"};const e=ph(t);if(!e)return{ok:!1,reason:"UNKNOWN_RESEARCH"};if(!Dn.value)return{ok:!1,reason:"FIRST_UNLOCK_REQUIRED"};if(!bo.value)return{ok:!1,reason:"KST_NOT_READY"};if(vh(t))return{ok:!1,reason:"ALREADY_DONE"};if(e.enabled===!1)return{ok:!1,reason:"COMING_SOON"};const n=Eh(t);if(n!=="available")return{ok:!1,reason:n.toUpperCase()};const s=El(),r=Number(e.durationSec||0);let i=0;return r>0&&(Uy(e)?i=Math.ceil(r):(gC(e),i=Math.ceil(r*lo.value))),i<=0?(Ot.value.add(t),ti(),Jn(),{ok:!0,instant:!0}):(Ke.value={id:t,startedAtMs:s,endsAtMs:s+i*1e3},Jn(),{ok:!0,instant:!1})}function bC(t){if(Fa(t))return{ok:!1,reason:"COMING_SOON"};const e=Tl(nr.value);if(vh(t))return{ok:!1,reason:"ALREADY_DONE"};if(Ke.value?.id===t)return{ok:!1,reason:"ALREADY_ACTIVE"};if(We.value.includes(t))return{ok:!0,queued:!0,alreadyQueued:!0};if(Ke.value){if(We.value.length>=e)return{ok:!1,reason:"QUEUE_FULL"};const n=Eh(t);return n!=="available"?{ok:!1,reason:n.toUpperCase()}:(We.value=[...We.value,t].slice(0,e),Jn(),{ok:!0,queued:!0})}return jy(t)}function RC(t){const e=We.value.slice(),n=e.filter(s=>s!==t);n.length!==e.length&&(We.value=n,Jn())}function SC(){We.value.length!==0&&(We.value=[],Jn())}function CC(t){if(!Ke.value||Ke.value.id!==t||!bo.value)return 0;const e=Ke.value.endsAtMs-Ke.value.startedAtMs;if(e<=0)return 0;const n=El()-Ke.value.startedAtMs;return Math.max(0,Math.min(100,n/e*100))}function PC(t){const{formatRemainSec:e}=by();if(!Ke.value||Ke.value.id!==t||!bo.value)return"0s";const n=Math.max(0,Ke.value.endsAtMs-El()),s=Math.floor(n/1e3);return e(s)}async function kC(t){if(t){Bt&&(clearTimeout(Bt),Bt=null),rn(),lr.value=t,Jc.value=!0,qn.value=!1;try{const e=Ma(La,"users",t,"research","state"),n=await Iy(e);bs=!0,n.exists()?(wC(n.data()),console.log("useResearch: Firebase   ")):(console.log("useResearch: Firebase   ( )"),ti()),bs=!1,qn.value=!0,Ro(!0)}catch(e){bs=!1,console.error("useResearch: Firebase  :",e),qn.value=!1,rn()}finally{Jc.value=!1}}}function NC(){fC(),Dn.value=null,Ot.value=new Set,Ke.value=null,We.value=[],Ua.value="NONE",$a.value={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1},gh.value=0,lo.value=1,nr.value=1,ti()}Di(()=>{if(bs)return;let t=!1;if(Ke.value?.id&&Fa(Ke.value.id)&&(Ke.value=null,t=!0),Array.isArray(We.value)&&We.value.length>0){const e=We.value.filter(n=>!Fa(n));e.length!==We.value.length&&(We.value=e,t=!0)}t&&Jn()});Di(()=>{if(!bo.value)return;const t=El();if(Ke.value&&t>=Number(Ke.value.endsAtMs||0)){const e=Ke.value.id;if(Ke.value=null,Ot.value.add(e),ti(),We.value.length>0){const[n,...s]=We.value;We.value=s;const r=jy(n);r?.ok||console.warn("useResearch: queued next start failed:",n,r?.reason)}Jn()}});function cr(){const t=he(()=>!lr.value||qn.value),e=he(()=>Tl(nr.value)),n=he(()=>We.value.length),s=he(()=>n.value>=e.value);return{catalog:Ds,visibleCatalog:_C,firstUnlockTransportId:Dn,needsFirstUnlockSelection:vC,firstUnlockCandidates:EC,setFirstUnlockTransport:AC,completedIds:Ot,activeResearch:Ke,queuedResearchIds:We,queueReserveLevel:nr,queueLimit:e,queueCount:n,isQueueFull:s,unlockedTransportTiers:Ny,incomeMultiplier:Dy,researchSpeedLevel:gh,researchDurationMultiplier:lo,cityScale:Ua,unlockedFeatures:$a,hasFeature:o=>!!$a.value?.[o],cityScaleAtLeast:o=>Ba(Ua.value)>=Ba(o),getStatus:Eh,startResearch:bC,cancelQueuedResearch:RC,cancelAllQueuedResearch:SC,getResearchProgress:CC,getResearchRemainingTime:PC,isKstTimeReady:ky,loadForUser:kC,clearUserState:NC,saveNow:Th,scheduleSave:Jn,saveEnabled:Ys,setSaveEnabled:lC,autoSaveEnabled:co,autoSaveBase:_h,autoSaveIntervalMin:uo,setAutoSaveEnabled:cC,setAutoSaveBase:uC,setAutoSaveIntervalMin:hC,autoSaveRunning:yh,lastAutoSaveAtMs:Oy,isLoadingFirebaseData:Jc,isSavingFirebaseData:Zc,isStateLoaded:qn,isHydrated:t}}const qy=Ie(null),Ii=Ie(null),Hy=Ie(!1);let Vp=!1;if(!Vp){const t=cr();Ib(Xc,async e=>{qy.value=e||null,Hy.value=!0;try{e?.uid?(console.log("   :  ",e.displayName||e.email),await t.loadForUser(e.uid)):(console.log("   :  "),t.clearUserState())}catch(n){console.error("useAuth: research sync failed:",n)}}),Vp=!0}function Ih(){return{user:qy,authError:Ii,authReady:Hy,signInWithGoogle:async()=>{const n=new Fn;try{const s=await qb(Xc,n);return Ii.value=null,console.log("useAuth:  !",s.user.displayName||s.user.email),s.user}catch(s){throw Ii.value=s,console.error("useAuth:  :",s),s}},signOutUser:async()=>{try{return await wb(Xc),Ii.value=null,console.log("useAuth:  !"),!0}catch(n){throw Ii.value=n,console.error("useAuth:  :",n),n}}}}const qt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},DC={class:"top-bar-area"},OC={class:"top-bar-content"},VC={class:"center-area"},MC={class:"time-value"},xC={class:"right-area"},LC={class:"auth-text"},FC={class:"auth-icon"},UC={__name:"TheTopBar",setup(t){const{kstString:e}=Wm(),{user:n,signInWithGoogle:s,signOutUser:r}=Ih();return(i,o)=>(W(),Q("header",DC,[m("div",OC,[o[2]||(o[2]=m("div",{class:"left-area"},[m("h1",{class:"game-title"},"RCTS")],-1)),m("div",VC,[o[1]||(o[1]=m("span",{class:"time-label"},"KST",-1)),m("span",MC,fe(Fe(e)),1)]),m("div",xC,[m("button",{class:"auth-btn",onClick:o[0]||(o[0]=l=>Fe(n)?Fe(r)():Fe(s)())},[m("span",LC,fe(Fe(n)?"":""),1),m("span",FC,fe(Fe(n)?"":""),1)])])])]))}},$C=qt(UC,[["__scopeId","data-v-0953860d"]]),BC=["bus","truck","rail","plane","ship","spaceship"],ca={bus:{name:"",icon:""},truck:{name:"",icon:""},rail:{name:"",icon:""},plane:{name:"",icon:""},ship:{name:"",icon:""},spaceship:{name:"",icon:""}};function zo(t,e=1){const n=Number(e||1);return Ds.find(r=>(r.effects||[]).some(i=>i.type==="UNLOCK_TRANSPORT_TIER"&&i.transportId===t&&Number(i.tier||1)===n))?.id??null}function jC(){return Ds.filter(n=>(n.effects||[]).some(s=>s?.type==="UNLOCK_STARTER_FLEET_PREVIEW")).map(n=>{const s=(n.effects||[]).find(i=>i?.type==="UNLOCK_STARTER_FLEET_PREVIEW")||null,r=s?{transports:Array.isArray(s.transports)?s.transports.filter(Boolean):[],runTimeMinSec:Number(s.runTimeMinSec||0),runTimeMaxSec:Number(s.runTimeMaxSec||0),countPerTransport:Number(s.countPerTransport||1)}:null;return{researchId:n.id,config:r}})}function Ky(){const t=cr(),e=he(()=>jC()),n=he(()=>{const g=t.completedIds.value,y=e.value||[];return!g||y.length===0?!1:y.some(N=>N?.researchId&&g.has(N.researchId))}),s=he(()=>{const g=t.completedIds.value,y=e.value||[];return y.length&&((g?y.find(O=>O?.researchId&&g.has(O.researchId)):null)?.researchId??y[0]?.researchId)||null}),r=he(()=>{const g=t.completedIds.value,y=e.value||[];return y.length?(g?y.find(O=>O?.researchId&&g.has(O.researchId)):null)?.config??y[0]?.config??null:null}),i=he(()=>{const g=r.value;return g?new Set(g.transports||[]):new Set}),o=he(()=>{const g=i.value,y=n.value;return BC.map(N=>{const O=ca[N]||{},M=O.name??N,B=O.icon??"",V=Number(t.unlockedTransportTiers.value?.[N]||0)<1,C=zo(N,1),G=!!C&&t.activeResearch.value?.id===C;let Z=null,w=null;G&&t.activeResearch.value&&(Z=new Date(t.activeResearch.value.startedAtMs),w=new Date(t.activeResearch.value.endsAtMs));const v=g.has(N),I=!!y&&!V&&v;return{id:N,name:M,icon:B,locked:V,isResearching:G,researchStartTime:Z,researchFinishTime:w,unlockResearchId:C,previewEligible:v,previewActive:I,previewLabel:I?"  ":null}})}),l=he(()=>o.value.filter(g=>g.locked)),c=he(()=>o.value.filter(g=>!g.locked));function h(g){const y=zo(g,1);y&&t.startResearch(y)}function d(g){const y=zo(g,1);return y?t.getResearchProgress(y):0}function p(g){const y=zo(g,1);return y?t.getResearchRemainingTime(y):"00h 00m 00s"}return{transportTypes:o,lockedTransports:l,unlockedTransports:c,unlockTransport:h,getResearchProgress:d,getResearchRemainingTime:p,previewResearchId:s,previewConfig:r,previewStarterFleetUnlocked:n}}const Mp=Ie(null);function qC(){return{selectedTransportId:Mp,setSelectedTransportId:e=>{Mp.value=e}}}const Gy="rcts.preview.runs.v2",HC=60,KC=30*HC,GC=3*3600;function zC(t,e){const n=Math.ceil(t),s=Math.floor(e);return Math.floor(Math.random()*(s-n+1))+n}function WC(){try{const t=localStorage.getItem(Gy);if(!t)return null;const e=JSON.parse(t);return!e||typeof e!="object"?null:e}catch{return null}}function wi(t){try{localStorage.setItem(Gy,JSON.stringify(t))}catch{}}function cs(t,e){const n={transportId:t,status:"idle",startedAtMs:null,endsAtMs:null,durationSec:0,routeName:" "};if(!e||typeof e!="object")return n;const s=e.status==="running"||e.status==="idle"||e.status==="ready"?e.status:"idle";return{...n,...e,transportId:e.transportId||t,status:s,routeName:e.routeName||" "}}function QC(){const t=cr(),{transportTypes:e}=Ky(),{formatRemainMs:n}=by(),s=he(()=>!!t.completedIds.value?.has?.("sys_preview_starter_vehicles")),r=he(()=>!!t.completedIds.value?.has?.("sys_preview_auto_assign")),i=he(()=>{const V=e.value||[];return new Set(V.filter(C=>C?.previewActive).map(C=>C.id))}),o=Ie({}),l=Ie(Date.now()),c=WC();c?.runs&&typeof c.runs=="object"&&(o.value=c.runs),Di(()=>{const V=o.value||{};let C=!1;for(const[G,Z]of Object.entries(V)){const w=cs(G,Z);(!Z?.status||Z.status!==w.status||Z.routeName!==w.routeName)&&(V[G]=w,C=!0)}C&&(o.value={...V},wi({runs:o.value}))});function h(V,C=Date.now()){const G=zC(KC,GC),Z=cs(V,o.value?.[V]);o.value[V]={...Z,transportId:V,status:"running",startedAtMs:C,endsAtMs:C+G*1e3,durationSec:G,routeName:" "}}function d(V=Date.now()){if(!s.value||!r.value)return!1;const C=i.value;if(!C||C.size===0)return!1;let G=!1;for(const Z of C){const w=cs(Z,o.value?.[Z]);if(w.status!=="running")h(Z,V),G=!0;else{const v=Number(w.endsAtMs||0);(!v||v<=V)&&(h(Z,V),G=!0)}}return G&&wi({runs:o.value}),G}Di(()=>{if(!s.value)return;const V=i.value;if(!V||V.size===0)return;let C=!1;for(const G of V)o.value?.[G]||(h(G,Date.now()),C=!0);C&&wi({runs:o.value}),d(Date.now())});let p=null;function g(){p||(p=setInterval(()=>{if(l.value=Date.now(),!s.value)return;const V=l.value,C=i.value;let G=!1;r.value&&d(V)&&(G=!0);for(const Z of Object.keys(o.value||{})){if(!C.has(Z))continue;const w=cs(Z,o.value[Z]);if(w.status!=="running")continue;const v=Number(w.endsAtMs||0);v&&V>=v&&(r.value?h(Z,V):o.value[Z]={...w,status:"ready",startedAtMs:null,endsAtMs:v,durationSec:w.durationSec||0,routeName:" "},G=!0)}G&&wi({runs:o.value})},1e3))}function y(){p&&(clearInterval(p),p=null)}Di(()=>{if(!s.value){y();return}g(),kv(()=>{y()})});function N(V){const C=l.value;if(!i.value.has(V))return 0;const G=cs(V,o.value?.[V]);if(G.status!=="running")return 0;const Z=Number(G.endsAtMs||0);return Z?Math.max(0,Z-C):0}function O(V){return n(N(V))}function M(V){return i.value.has(V)?cs(V,o.value?.[V]).status:"idle"}function B(V){return!s.value||!i.value.has(V)||r.value||cs(V,o.value?.[V]).status!=="ready"?!1:(h(V,Date.now()),wi({runs:o.value}),l.value=Date.now(),!0)}const q=he(()=>{const V=i.value;return Object.values(o.value||{}).map(G=>cs(G.transportId,G)).filter(G=>V.has(G.transportId)).sort((G,Z)=>String(G.transportId).localeCompare(String(Z.transportId)))});return{previewUnlocked:s,autoAssignUnlocked:r,runs:o,runList:q,remainingOf:O,statusOf:M,startManualRun:B}}const YC={class:"layout-area left-area"},XC={class:"left-panel-wrapper"},JC={class:"panel transport-list-container"},ZC={class:"panel-head"},eP={class:"panel-meta"},tP={key:0,class:"transport-list"},nP=["onClick"],sP={class:"transport-icon"},rP={class:"transport-name"},iP={key:1,class:"placeholder-box"},oP={class:"panel transport-details-container"},aP={class:"panel-head"},lP={class:"panel-heading"},cP={key:0,class:"panel-meta"},uP={key:0,class:"placeholder-box"},hP={key:1,class:"details-content"},dP={class:"kv"},fP={class:"kv-row"},pP={class:"v"},mP={class:"kv-row"},gP={class:"v"},_P={class:"kv-row"},yP={class:"v"},vP={key:0,class:"lock-box"},EP={key:0,class:"preview-placeholder"},TP={key:1,class:"preview-box"},IP={class:"box-desc"},wP={key:0,class:"preview-placeholder"},AP={key:1,class:"preview-data"},bP={class:"preview-left"},RP={class:"preview-title"},SP={class:"preview-sub"},CP={key:0,class:"preview-right"},PP={class:"preview-remain mono"},kP={key:1,class:"preview-right"},NP={key:0,class:"preview-right"},DP={class:"preview-remain mono"},OP={key:1,class:"preview-right"},VP=["onClick"],MP={class:"details-footnote"},xP={class:"panel resource-container"},LP={class:"panel-head"},FP={class:"panel-meta"},UP={key:0,class:"placeholder-box"},$P={key:1,class:"resource-content"},BP={__name:"TheLeftArea",setup(t){const e=cr(),{transportTypes:n,unlockedTransports:s,previewStarterFleetUnlocked:r,previewConfig:i}=Ky(),o=he(()=>!!e.completedIds.value?.has?.("sys_unlock_finance")),l=he(()=>!!e.completedIds.value?.has?.("sys_unlock_finance")),{selectedTransportId:c,setSelectedTransportId:h}=qC(),d=he(()=>s.value||[]),p=he(()=>c.value&&(n.value||[]).find(V=>V.id===c.value)||null),g=he(()=>{const V=new Set((s.value||[]).map(Z=>Z.id)),C=i.value;return(C&&Array.isArray(C.transports)&&C.transports.length>0?C.transports:["bus","truck","rail"]).some(Z=>V.has(Z))}),{runList:y,remainingOf:N,statusOf:O,startManualRun:M,autoAssignUnlocked:B}=QC();function q(V){return(n.value||[]).find(G=>G.id===V)?.name??V}return(V,C)=>(W(),Q("aside",YC,[m("div",XC,[m("section",JC,[m("div",ZC,[C[0]||(C[0]=m("h3",{class:"panel-heading"},"  ",-1)),m("span",eP,fe(d.value.length)+"",1)]),d.value.length>0?(W(),Q("ul",tP,[(W(!0),Q(Ve,null,It(d.value,G=>(W(),Q("li",{key:G.id,class:kr(["transport-item",{active:Fe(c)===G.id}]),onClick:Z=>Fe(h)(G.id)},[m("span",sP,fe(G.icon),1),m("span",rP,fe(G.name),1),C[1]||(C[1]=m("span",{class:"transport-count"},"0",-1))],10,nP))),128))])):(W(),Q("div",iP,[...C[2]||(C[2]=[m("p",{class:"placeholder-text"},"     .   . ",-1)])]))]),m("section",oP,[m("div",aP,[m("h3",lP,fe(p.value?`${p.value.name} `:"  "),1),p.value?(W(),Q("span",cP,"ID: "+fe(p.value.id),1)):tt("",!0)]),p.value?(W(),Q("div",hP,[m("div",dP,[m("div",fP,[C[4]||(C[4]=m("span",{class:"k"},"",-1)),m("span",pP,fe(p.value.icon),1)]),m("div",mP,[C[5]||(C[5]=m("span",{class:"k"},"",-1)),m("span",gP,fe(p.value.name),1)]),C[7]||(C[7]=m("div",{class:"kv-row"},[m("span",{class:"k"}," "),m("span",{class:"v"},"0")],-1)),m("div",_P,[C[6]||(C[6]=m("span",{class:"k"}," ",-1)),m("span",yP,fe(p.value.locked?"":""),1)])]),C[19]||(C[19]=m("hr",{class:"divider"},null,-1)),Fe(r)?(W(),Q("div",TP,[C[18]||(C[18]=m("p",{class:"box-title"},"   ",-1)),m("p",IP,[C[12]||(C[12]=vt(" (): ",-1)),m("strong",null,fe(l.value?"":""),1)]),Fe(y).length===0?(W(),Q("div",wP,[...C[13]||(C[13]=[m("p",{class:"placeholder-text"},"      . (/   ) ",-1)])])):(W(),Q("div",AP,[(W(!0),Q(Ve,null,It(Fe(y),G=>(W(),Q("div",{class:"preview-row",key:G.transportId},[m("div",bP,[m("div",RP,fe(q(G.transportId)),1),m("div",SP,fe(G.routeName),1)]),Fe(B)?(W(),Q(Ve,{key:0},[Fe(O)(G.transportId)==="running"?(W(),Q("div",CP,[C[14]||(C[14]=m("div",{class:"preview-pill"},"",-1)),m("div",PP,fe(Fe(N)(G.transportId)),1)])):(W(),Q("div",kP,[...C[15]||(C[15]=[m("div",{class:"preview-idle-text"}," ",-1),m("div",{class:"preview-remain mono"},"00:00",-1)])]))],64)):(W(),Q(Ve,{key:1},[Fe(O)(G.transportId)==="running"?(W(),Q("div",NP,[C[16]||(C[16]=m("div",{class:"preview-pill"},"",-1)),m("div",DP,fe(Fe(N)(G.transportId)),1)])):(W(),Q("div",OP,[C[17]||(C[17]=m("div",{class:"preview-idle-text"},"",-1)),m("button",{class:"preview-btn",type:"button",onClick:Z=>Fe(M)(G.transportId)},"    ",8,VP)]))],64))]))),128))]))])):(W(),Q("div",vP,[C[9]||(C[9]=m("p",{class:"box-title"},"    ",-1)),C[10]||(C[10]=m("p",{class:"box-desc"},[vt("  "),m("strong",null,"  "),vt("  ,  "),m("strong",null," / "),vt(" . ")],-1)),C[11]||(C[11]=m("p",{class:"box-desc subtle"}," (    .) ",-1)),g.value?tt("",!0):(W(),Q("div",EP,[...C[8]||(C[8]=[m("p",{class:"placeholder-text"}," :           . ",-1)])]))])),m("p",MP,"  "+fe(p.value.name)+"       . ",1)])):(W(),Q("div",uP,[...C[3]||(C[3]=[m("p",{class:"placeholder-text"},"     .",-1)])]))]),m("section",xP,[m("div",LP,[C[20]||(C[20]=m("h3",{class:"panel-heading"},"  ",-1)),m("span",FP,fe(o.value?"":""),1)]),o.value?(W(),Q("div",$P,[...C[22]||(C[22]=[m("div",{class:"kv"},[m("div",{class:"kv-row"},[m("span",{class:"k"},""),m("span",{class:"v"},"$10,000")])],-1)])])):(W(),Q("div",UP,[...C[21]||(C[21]=[m("p",{class:"placeholder-text"}," .",-1)])]))])])]))}},zy=qt(BP,[["__scopeId","data-v-c2ac4b92"]]),jP={class:"layout-area center-area"},qP={class:"center-content-wrapper"},HP={class:"main-content-nav desktop-only","aria-label":"Main navigation"},KP={class:"nav-list"},GP={class:"nav-item"},zP={class:"nav-item"},WP={class:"nav-item"},QP={class:"nav-item"},YP={class:"nav-item"},XP={class:"nav-item"},JP={class:"nav-item"},ZP={class:"mobile-nav mobile-only","aria-label":"Mobile navigation header"},ek=["aria-expanded"],tk={class:"mobile-title"},nk={class:"mobile-title-text"},sk={class:"drawer",role:"dialog","aria-modal":"true","aria-label":"Main menu"},rk={class:"drawer-body"},ik={class:"main-content-display"},ok={__name:"TheCenterArea",setup(t){const e=zr(),n=XI(),s=Ie(!1);function r(){s.value=!1}function i(){s.value=!s.value}function o(h){r(),e.push(h)}const l=he(()=>{const h=n.path||"";return h.includes("/home/preview")?" ":h.includes("/home/research")?"":h.includes("/home/vehicles")?"":h.includes("/home/line")?"":h.includes("/home/construction")?"":h.includes("/home/finance")?"":h.includes("/home/city")?"":h.includes("/home/settings")?"":""});Bn(()=>n.fullPath,()=>{r()});function c(h){h.key==="Escape"&&r()}return Bn(s,h=>{document.body.style.overflow=h?"hidden":""}),gu(()=>{window.addEventListener("keydown",c)}),vm(()=>{window.removeEventListener("keydown",c),document.body.style.overflow=""}),(h,d)=>{const p=zi("router-link"),g=zi("router-view");return W(),Q("div",jP,[m("div",qP,[m("nav",HP,[m("ul",KP,[m("li",GP,[Ue(p,{to:"/home/research"},{default:nn(()=>[...d[8]||(d[8]=[vt("",-1)])]),_:1})]),m("li",zP,[Ue(p,{to:"/home/vehicles"},{default:nn(()=>[...d[9]||(d[9]=[vt("",-1)])]),_:1})]),m("li",WP,[Ue(p,{to:"/home/line"},{default:nn(()=>[...d[10]||(d[10]=[vt("",-1)])]),_:1})]),m("li",QP,[Ue(p,{to:"/home/construction"},{default:nn(()=>[...d[11]||(d[11]=[vt("",-1)])]),_:1})]),m("li",YP,[Ue(p,{to:"/home/finance"},{default:nn(()=>[...d[12]||(d[12]=[vt("",-1)])]),_:1})]),m("li",XP,[Ue(p,{to:"/home/city"},{default:nn(()=>[...d[13]||(d[13]=[vt("",-1)])]),_:1})]),m("li",JP,[Ue(p,{to:"/home/settings"},{default:nn(()=>[...d[14]||(d[14]=[vt("",-1)])]),_:1})])])]),m("div",ZP,[m("button",{class:"hamburger-btn",type:"button","aria-label":"Open menu","aria-expanded":s.value?"true":"false",onClick:i},[...d[15]||(d[15]=[m("span",{class:"hamburger-icon"},"",-1),m("span",{class:"hamburger-label"},"",-1)])],8,ek),m("div",tk,[m("span",nk,fe(l.value),1)])]),s.value?(W(),Q("div",{key:0,class:"drawer-overlay mobile-only",role:"presentation",onClick:Gm(r,["self"])},[m("aside",sk,[m("div",{class:"drawer-head"},[d[16]||(d[16]=m("div",{class:"drawer-title"},"RCTS ",-1)),m("button",{class:"drawer-close",type:"button","aria-label":"Close menu",onClick:r},"  ")]),m("div",rk,[m("button",{class:"drawer-item drawer-item-preview",type:"button",onClick:d[0]||(d[0]=y=>o("/home/preview"))},"   "),m("button",{class:"drawer-item",type:"button",onClick:d[1]||(d[1]=y=>o("/home/research"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[2]||(d[2]=y=>o("/home/vehicles"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[3]||(d[3]=y=>o("/home/line"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[4]||(d[4]=y=>o("/home/construction"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[5]||(d[5]=y=>o("/home/finance"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[6]||(d[6]=y=>o("/home/city"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[7]||(d[7]=y=>o("/home/settings"))},"")]),d[17]||(d[17]=m("div",{class:"drawer-foot"},[m("div",{class:"drawer-hint"},"     . ")],-1))])])):tt("",!0),m("div",ik,[Ue(g)])])])}}},ak=qt(ok,[["__scopeId","data-v-6101d703"]]),lk={class:"game-wrapper"},ck={class:"main-layout"},uk={__name:"HomeView",setup(t){return(e,n)=>(W(),Q("div",lk,[Ue($C),m("div",ck,[Ue(zy,{class:"layout-area left-area desktop-only"}),Ue(ak,{class:"layout-area center-area"})])]))}},hk=qt(uk,[["__scopeId","data-v-baa77003"]]),dk={class:"research-page"},fk={class:"research-header"},pk={class:"status-row"},mk={key:0,class:"badge ok"},gk={class:"badge"},_k={class:"panel"},yk={class:"panel-head"},vk={class:"panel-actions"},Ek=["disabled"],Tk={key:0,class:"empty"},Ik={key:1,class:"empty"},wk={key:2,class:"list"},Ak={class:"card"},bk={class:"card-mid"},Rk={class:"name-row"},Sk={class:"name"},Ck={class:"meta"},Pk={class:"pill time"},kk={key:0,class:"pill fixed"},Nk={key:0,class:"hint2"},Dk={class:"progress-area"},Ok={class:"progress-bar"},Vk={class:"progress-info"},Mk={class:"mono"},xk={key:1,class:"queue-row"},Lk={class:"queue-title"},Fk={key:2,class:"queue-list"},Uk={class:"mono"},$k=["onClick"],Bk={class:"panel"},jk={key:0,class:"empty"},qk={key:1,class:"empty"},Hk={key:2,class:"list"},Kk={class:"card-left"},Gk={class:"icon"},zk={class:"card-mid"},Wk={class:"name-row"},Qk={class:"name"},Yk={class:"meta"},Xk={key:0,class:"pill"},Jk={key:0,class:"hint2"},Zk={class:"card-right"},eN=["disabled","onClick"],tN={class:"card-left"},nN={class:"icon"},sN={class:"card-mid"},rN={class:"name-row"},iN={class:"name"},oN={class:"meta"},aN={class:"pill time"},lN={key:0,class:"pill fixed"},cN={key:1,class:"pill"},uN={key:2,class:"pill"},hN={key:0,class:"hint2"},dN={key:1,class:"hint2"},fN={class:"card-right"},pN=["disabled","onClick"],mN={class:"panel"},gN={key:0,class:"empty"},_N={key:1,class:"empty"},yN={key:2,class:"list"},vN={class:"card-mid"},EN={class:"name-row"},TN={class:"name"},IN={class:"meta"},wN={class:"pill lock"},AN={class:"pill time"},bN={key:0,class:"pill fixed"},RN={key:0,class:"hint2"},SN={key:1,class:"hint2"},CN={key:2,class:"hint2"},PN={__name:"ResearchView",setup(t){const e=cr(),n=he(()=>e.isHydrated.value),s=e.firstUnlockTransportId,r=e.needsFirstUnlockSelection,i=e.firstUnlockCandidates,o=he(()=>e.activeResearch.value),l=he(()=>e.queuedResearchIds.value||[]),c=he(()=>e.queueReserveLevel.value||1),h=he(()=>e.queueLimit.value||1),d=he(()=>e.queueCount.value||0),p=he(()=>e.isQueueFull.value),g=he(()=>!!e.saveEnabled.value&&!!e.isStateLoaded.value&&!e.isSavingFirebaseData.value);function y(se){return ca[se]?.name??se}function N(se){return e.catalog.find(X=>X.id===se)||null}function O(se){return N(se)?.title??se}function M(se){return se?se.timePolicy==="FIXED"?!0:se.type==="SYSTEM":!1}function B(se){return M(N(se))}function q(se){const X=Math.max(0,Number(se||0));if(!X)return"";if(X<3600)return`${Math.max(1,Math.round(X/60))}`;const te=Math.floor(X/3600),je=Math.round(X%3600/60);return je>0?`${te} ${je}`:`${te}`}function V(se){const X=Number(se?.durationSec||0),te=M(se),je=q(X);return je===""?"":te?`: ${je}`:`: ${je}`}function C(se){return V(N(se))}function G(se){return(se.effects||[]).find(te=>te?.type==="UNLOCK_TRANSPORT_TIER"&&Number(te?.tier||1)===1)?.transportId||null}function Z(se,X){const te=G(se);return!te||!X.has(te)?null:{key:`first-${te}`,transportId:te,icon:ca[te]?.icon??"",title:`${ca[te]?.name??te}  `,desc:" 1  ."}}const w=he(()=>{const se=e.visibleCatalog.value||[];if(s.value)return[];const X=new Set((i.value||[]).map(te=>te.id));return se.map(te=>Z(te,X)).filter(Boolean)});function v(se,X){const te=String(se?.title??"").trim(),je=String(X?.title??"").trim();return te.localeCompare(je,"ko")}function I(se){return{id:se.id,title:se.title??se.id,desc:se.desc??"",durationLabel:V(se),fixed:M(se),type:se.type,domain:se.domain}}const R=he(()=>(e.visibleCatalog.value||[]).filter(X=>e.getStatus(X.id)==="available").map(I).sort(v)),b=he(()=>(e.visibleCatalog.value||[]).map(X=>{const te=e.getStatus(X.id);return te!=="locked"&&te!=="comingSoon"?null:{...I(X),status:te,statusLabel:te==="comingSoon"?"":"",lockReason:"  ."}}).filter(Boolean).sort(v));function S(se){const X=String(se?.type||"");return X==="SYSTEM"?"":X==="CITY"?"":X==="TRANSPORT"?"":X==="EFFICIENCY"?"":String(se?.id||"").startsWith("sys_preview_")?"":""}function T(se){return l.value.includes(se)}function ae(se){return o.value?T(se)?"":p.value?" ":"":" "}function re(se){e.setFirstUnlockTransport(se)}function Ne(se){e.startResearch(se)}function Oe(se){e.cancelQueuedResearch(se)}function Ae(){e.cancelAllQueuedResearch()}function gt(se){return e.getResearchProgress(se)}function Qt(se){return e.getResearchRemainingTime(se)}function xt(se){e.saveNow(se)}function at(){console.log("[ResearchView Debug]"),console.log("queueReserveLevel:",c.value),console.log("queueLimit:",h.value),console.log("queuedResearchIds:",l.value);const se=(e.visibleCatalog.value||[]).filter(X=>String(X?.id||"").startsWith("sys_preview_"));console.log("[Preview durations]",se.map(X=>({id:X.id,sec:X.durationSec,label:V(X)})))}return(se,X)=>(W(),Q("div",dk,[m("header",fk,[X[1]||(X[1]=m("h1",{class:"title"},"",-1)),X[2]||(X[2]=m("p",{class:"desc"},"    1 .        . ",-1)),m("div",pk,[m("span",{class:kr(["badge",{ok:n.value}])},fe(n.value?"  ":"  "),3),m("span",{class:kr(["badge",{warn:Fe(r)}])},fe(Fe(r)?"  ()":"  "),3),Fe(s)?(W(),Q("span",mk,"  : "+fe(y(Fe(s))),1)):tt("",!0),m("span",gk," : "+fe(d.value)+"/"+fe(h.value)+" (Lv"+fe(c.value)+") ",1)])]),m("section",_k,[m("div",yk,[X[3]||(X[3]=m("h2",{class:"panel-title"}," ",-1)),m("div",vk,[m("button",{class:"btn",disabled:!g.value,onClick:X[0]||(X[0]=te=>xt({reason:"manual"}))},"   ",8,Ek),m("button",{class:"btn ghost",onClick:at},"   ")])]),n.value?o.value?(W(),Q("div",wk,[m("article",Ak,[X[6]||(X[6]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",bk,[m("div",Rk,[m("div",Sk,fe(O(o.value.id)),1),m("div",Ck,[X[4]||(X[4]=m("span",{class:"pill"},"",-1)),m("span",Pk,fe(C(o.value.id)),1),B(o.value.id)?(W(),Q("span",kk,"")):tt("",!0)])]),B(o.value.id)?(W(),Q("div",Nk,"    ,     . ")):tt("",!0),m("div",Dk,[m("div",Ok,[m("div",{class:"progress-fill",style:za({transform:`scaleX(${Math.max(0,Math.min(100,gt(o.value.id)))/100})`})},null,4)]),m("div",Vk,[m("span",null,fe(gt(o.value.id).toFixed(1))+"%",1),m("span",Mk,": "+fe(Qt(o.value.id)),1)])]),l.value.length>0?(W(),Q("div",xk,[X[5]||(X[5]=m("span",{class:"pill"},"",-1)),m("span",Lk,fe(l.value.length)+" ",1),m("button",{class:"btn small ghost",onClick:Ae}," ")])):tt("",!0),l.value.length>0?(W(),Q("div",Fk,[(W(!0),Q(Ve,null,It(l.value,te=>(W(),Q("div",{key:te,class:"queue-item"},[m("span",Uk,fe(O(te)),1),m("button",{class:"btn small ghost",onClick:je=>Oe(te)},"",8,$k)]))),128))])):tt("",!0)]),X[7]||(X[7]=m("div",{class:"card-right"},[m("button",{class:"btn primary",disabled:""},"")],-1))])])):(W(),Q("div",Ik,"    .     . ")):(W(),Q("div",Tk," "))]),m("section",Bk,[X[9]||(X[9]=m("h2",{class:"panel-title"}," ( )",-1)),X[10]||(X[10]=m("p",{class:"panel-desc"},"     (  )   .       . ",-1)),n.value?R.value.length===0&&w.value.length===0?(W(),Q("div",qk,"     . ")):(W(),Q("div",Hk,[(W(!0),Q(Ve,null,It(w.value,te=>(W(),Q("article",{key:te.key,class:"card"},[m("div",Kk,[m("div",Gk,fe(te.icon),1)]),m("div",zk,[m("div",Wk,[m("div",Qk,fe(te.title),1),m("div",Yk,[X[8]||(X[8]=m("span",{class:"pill time"},"",-1)),Fe(r)?(W(),Q("span",Xk,"")):tt("",!0)])]),te.desc?(W(),Q("div",Jk,fe(te.desc),1)):tt("",!0)]),m("div",Zk,[m("button",{class:"btn primary",disabled:!!o.value||!n.value,onClick:je=>re(te.transportId)},"   ",8,eN)])]))),128)),(W(!0),Q(Ve,null,It(R.value,te=>(W(),Q("article",{key:te.id,class:"card"},[m("div",tN,[m("div",nN,fe(S(te)),1)]),m("div",sN,[m("div",rN,[m("div",iN,fe(te.title),1),m("div",oN,[m("span",aN,fe(te.durationLabel),1),te.fixed?(W(),Q("span",lN,"")):tt("",!0),o.value?(W(),Q("span",cN,"")):(W(),Q("span",uN,""))])]),te.desc?(W(),Q("div",hN,fe(te.desc),1)):tt("",!0),te.fixed?(W(),Q("div",dN,"        .")):tt("",!0)]),m("div",fN,[m("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!T(te.id),onClick:je=>Ne(te.id)},fe(ae(te.id)),9,pN)])]))),128))])):(W(),Q("div",jk," "))]),m("section",mN,[X[13]||(X[13]=m("h2",{class:"panel-title"},"  ",-1)),X[14]||(X[14]=m("p",{class:"panel-desc"},"     .        . ",-1)),n.value?b.value.length===0?(W(),Q("div",_N,"/  .")):(W(),Q("div",yN,[(W(!0),Q(Ve,null,It(b.value,te=>(W(),Q("article",{key:te.id,class:"card"},[X[11]||(X[11]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",vN,[m("div",EN,[m("div",TN,fe(te.title),1),m("div",IN,[m("span",wN,fe(te.statusLabel),1),m("span",AN,fe(te.durationLabel),1),te.fixed?(W(),Q("span",bN,"")):tt("",!0)])]),te.desc?(W(),Q("div",RN,fe(te.desc),1)):tt("",!0),te.status==="comingSoon"?(W(),Q("div",SN,".")):te.status==="locked"?(W(),Q("div",CN,fe(te.lockReason||"  ."),1)):tt("",!0)]),X[12]||(X[12]=m("div",{class:"card-right"},[m("button",{class:"btn primary",disabled:""},"")],-1))]))),128))])):(W(),Q("div",gN," "))])]))}},kN=qt(PN,[["__scopeId","data-v-b9cdda19"]]),NN={class:"page"},DN={class:"panel"},ON={class:"list"},VN={class:"panel"},MN={class:"grid"},xN={class:"table"},LN={__name:"VehiclesView",setup(t){const e=zr();function n(){e.push("/home/research")}return(s,r)=>(W(),Q("div",NN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"     .      .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",DN,[r[5]||(r[5]=un('<div class="panel-head" data-v-e2a4d6c8><h2 class="panel-title" data-v-e2a4d6c8> </h2><div class="panel-actions" data-v-e2a4d6c8><button class="btn" disabled data-v-e2a4d6c8> </button><button class="btn" disabled data-v-e2a4d6c8></button><button class="btn ghost" disabled data-v-e2a4d6c8></button></div></div><div class="empty" data-v-e2a4d6c8>   . <span class="mono" data-v-e2a4d6c8> ( 8)</span>     . </div>',2)),m("div",ON,[(W(),Q(Ve,null,It(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-e2a4d6c8><div class="icon" data-v-e2a4d6c8></div></div><div class="card-mid" data-v-e2a4d6c8><div class="name-row" data-v-e2a4d6c8><div class="name" data-v-e2a4d6c8>  </div><div class="meta" data-v-e2a4d6c8><span class="pill lock" data-v-e2a4d6c8></span><span class="pill time" data-v-e2a4d6c8></span></div></div><div class="hint2" data-v-e2a4d6c8>  :  ////  UI . </div></div><div class="card-right" data-v-e2a4d6c8><button class="btn primary" disabled data-v-e2a4d6c8></button></div>',3)])])),64))])]),m("section",VN,[r[9]||(r[9]=m("h2",{class:"panel-title"},"",-1)),r[10]||(r[10]=m("p",{class:"panel-desc"},"      .",-1)),m("div",MN,[(W(),Q(Ve,null,It(4,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))]),m("div",xN,[r[8]||(r[8]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(W(),Q(Ve,null,It(6,i=>m("div",{class:"table-row",key:i},[...r[7]||(r[7]=[un('<span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span>',5)])])),64))])])]))}},FN=qt(LN,[["__scopeId","data-v-e2a4d6c8"]]),UN={class:"page"},$N={class:"panel"},BN={class:"list"},jN={class:"panel"},qN={class:"table"},HN={__name:"LineView",setup(t){const e=zr();function n(){e.push("/home/research")}return(s,r)=>(W(),Q("div",UN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"//     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",$N,[r[5]||(r[5]=un('<div class="panel-head" data-v-58d6af1b><h2 class="panel-title" data-v-58d6af1b> </h2><div class="panel-actions" data-v-58d6af1b><button class="btn" disabled data-v-58d6af1b> </button><button class="btn" disabled data-v-58d6af1b> </button><button class="btn ghost" disabled data-v-58d6af1b> </button></div></div><div class="empty" data-v-58d6af1b>   .       . </div>',2)),m("div",BN,[(W(),Q(Ve,null,It(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-58d6af1b><div class="icon" data-v-58d6af1b></div></div><div class="card-mid" data-v-58d6af1b><div class="name-row" data-v-58d6af1b><div class="name" data-v-58d6af1b>  </div><div class="meta" data-v-58d6af1b><span class="pill lock" data-v-58d6af1b></span><span class="pill time" data-v-58d6af1b></span></div></div><div class="hint2" data-v-58d6af1b>  : ,  , , /  . </div></div><div class="card-right" data-v-58d6af1b><button class="btn primary" disabled data-v-58d6af1b></button></div>',3)])])),64))])]),m("section",jN,[r[8]||(r[8]=m("h2",{class:"panel-title"},"",-1)),r[9]||(r[9]=m("p",{class:"panel-desc"},"    / .",-1)),m("div",qN,[r[7]||(r[7]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(W(),Q(Ve,null,It(8,i=>m("div",{class:"table-row",key:i},[...r[6]||(r[6]=[un('<span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span>',5)])])),64))])])]))}},KN=qt(HN,[["__scopeId","data-v-58d6af1b"]]),GN={class:"page"},zN={class:"panel"},WN={class:"list"},QN={class:"panel"},YN={class:"grid"},XN={__name:"ConstructionView",setup(t){const e=zr();function n(){e.push("/home/research")}return(s,r)=>(W(),Q("div",GN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"}," /     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",zN,[r[5]||(r[5]=un('<div class="panel-head" data-v-f1dc01af><h2 class="panel-title" data-v-f1dc01af> </h2><div class="panel-actions" data-v-f1dc01af><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button></div></div><div class="empty" data-v-f1dc01af>   .       . </div>',2)),m("div",WN,[(W(),Q(Ve,null,It(10,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-f1dc01af><div class="icon" data-v-f1dc01af></div></div><div class="card-mid" data-v-f1dc01af><div class="name-row" data-v-f1dc01af><div class="name" data-v-f1dc01af>  </div><div class="meta" data-v-f1dc01af><span class="pill lock" data-v-f1dc01af></span><span class="pill time" data-v-f1dc01af></span></div></div><div class="hint2" data-v-f1dc01af>  : //,  ,    UI . </div></div><div class="card-right" data-v-f1dc01af><button class="btn primary" disabled data-v-f1dc01af></button></div>',3)])])),64))])]),m("section",QN,[r[7]||(r[7]=m("h2",{class:"panel-title"},"",-1)),r[8]||(r[8]=m("p",{class:"panel-desc"},"     /   /   .",-1)),m("div",YN,[(W(),Q(Ve,null,It(3,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))])])]))}},JN=qt(XN,[["__scopeId","data-v-f1dc01af"]]),ZN={class:"page"},eD={class:"panel"},tD={class:"grid"},nD={class:"table"},sD={__name:"FinanceView",setup(t){const e=zr();function n(){e.push("/home/research")}return(s,r)=>(W(),Q("div",ZN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"//    .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",eD,[r[7]||(r[7]=un('<div class="panel-head" data-v-d1892e60><h2 class="panel-title" data-v-d1892e60> </h2><div class="panel-actions" data-v-d1892e60><button class="btn" disabled data-v-d1892e60></button><button class="btn" disabled data-v-d1892e60></button><button class="btn" disabled data-v-d1892e60></button><button class="btn ghost" disabled data-v-d1892e60></button></div></div><div class="empty" data-v-d1892e60>   .       . </div>',2)),m("div",tD,[(W(),Q(Ve,null,It(4,i=>m("div",{class:"mini-card",key:i},[...r[4]||(r[4]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))]),m("div",nD,[r[6]||(r[6]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(W(),Q(Ve,null,It(8,i=>m("div",{class:"table-row",key:i},[...r[5]||(r[5]=[m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1)])])),64))])])]))}},rD=qt(sD,[["__scopeId","data-v-d1892e60"]]),iD={class:"page"},oD={class:"panel"},aD={class:"list"},lD={class:"panel"},cD={class:"grid"},uD={__name:"CityView",setup(t){const e=zr();function n(){e.push("/home/research")}return(s,r)=>(W(),Q("div",iD,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"}," //     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",oD,[r[5]||(r[5]=un('<div class="panel-head" data-v-370df6f4><h2 class="panel-title" data-v-370df6f4> </h2><div class="panel-actions" data-v-370df6f4><button class="btn" disabled data-v-370df6f4></button><button class="btn" disabled data-v-370df6f4></button><button class="btn" disabled data-v-370df6f4></button><button class="btn ghost" disabled data-v-370df6f4></button></div></div><div class="empty" data-v-370df6f4>   .  /     . </div>',2)),m("div",aD,[(W(),Q(Ve,null,It(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-370df6f4><div class="icon" data-v-370df6f4></div></div><div class="card-mid" data-v-370df6f4><div class="name-row" data-v-370df6f4><div class="name" data-v-370df6f4>  </div><div class="meta" data-v-370df6f4><span class="pill lock" data-v-370df6f4></span><span class="pill time" data-v-370df6f4></span></div></div><div class="hint2" data-v-370df6f4>  : /// ,  , ,   . </div></div><div class="card-right" data-v-370df6f4><button class="btn primary" disabled data-v-370df6f4></button></div>',3)])])),64))])]),m("section",lD,[r[7]||(r[7]=m("h2",{class:"panel-title"},"",-1)),r[8]||(r[8]=m("p",{class:"panel-desc"},"     /  /  .",-1)),m("div",cD,[(W(),Q(Ve,null,It(3,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))])])]))}},hD=qt(uD,[["__scopeId","data-v-370df6f4"]]),dD={},fD={class:"settings-shell"},pD={class:"settings-nav"},mD={class:"settings-content"};function gD(t,e){return W(),Q("div",fD,[m("aside",pD,[yd(t.$slots,"nav",{},void 0)]),m("section",mD,[yd(t.$slots,"content",{},void 0)])])}const _D=qt(dD,[["render",gD],["__scopeId","data-v-e20a5156"]]),yD={},vD={class:"settings-nav-inner"},ED={class:"menu"};function TD(t,e){const n=zi("router-link");return W(),Q("nav",vD,[e[1]||(e[1]=m("h3",{class:"title"},"",-1)),m("ul",ED,[m("li",null,[Ue(n,{to:{name:"DataManager"}},{default:nn(()=>[...e[0]||(e[0]=[vt("   ",-1)])]),_:1})])])])}const ID=qt(yD,[["render",TD],["__scopeId","data-v-0036c63e"]]),wD={__name:"SettingsView",setup(t){return(e,n)=>{const s=zi("router-view");return W(),Or(_D,null,{nav:nn(()=>[Ue(ID)]),content:nn(()=>[Ue(s)]),_:1})}}},AD={class:"data-manager"},bD={class:"card"},RD={class:"kv"},SD={class:"v"},CD={key:0,class:"hint"},PD={class:"card"},kD={class:"row"},ND=["disabled"],DD=["disabled"],OD=["disabled"],VD={class:"autosave"},MD={class:"autosave-controls"},xD={class:"radio"},LD=["disabled"],FD={class:"radio"},UD=["disabled"],$D={class:"radio"},BD=["disabled"],jD={key:0,class:"hint"},qD={key:0,class:"message"},HD={key:1,class:"preview"},KD={class:"preview-head"},GD={class:"summary"},zD={class:"summary-item"},WD={class:"summary-v"},QD={class:"summary-item"},YD={class:"summary-v"},XD={class:"summary-item"},JD={class:"summary-v"},ZD={key:0,class:"pre"},eO={key:2,class:"hint"},tO={class:"modal"},nO={class:"check"},sO={class:"row"},rO=["disabled"],iO=["disabled"],oO={__name:"DataManagerPanel",setup(t){const e=Ih(),n=he(()=>(e?.user?.value??e?.currentUser?.value??e?.firebaseUser?.value??e?.user??e?.currentUser??null)?.uid??null),{saveNow:s,isSavingFirebaseData:r,autoSaveEnabled:i,autoSaveBase:o,autoSaveIntervalMin:l,setAutoSaveEnabled:c,setAutoSaveBase:h,setAutoSaveIntervalMin:d,autoSaveRunning:p}=cr(),g=he(()=>r.value),y=Ie(!1),N=Ie(""),O=Ie(!1),M=Ie(null),B=Ie(!1);function q(ae){return JSON.stringify(ae,null,2)}function V(ae){if(!ae)return"-";try{return typeof ae?.toDate=="function"?ae.toDate().toLocaleString():ae instanceof Date?ae.toLocaleString():typeof ae=="number"?new Date(ae).toLocaleString():String(ae)}catch{return String(ae)}}const C=Ie("off");function G(){if(!i.value){C.value="off";return}const ae=Number(o.value),re=Number(l.value);ae===10&&re===10?C.value="10":ae===5&&re===5?C.value="5":ae===10?C.value="10":C.value="5"}Bn([i,o,l],()=>G(),{immediate:!0}),Bn(C,ae=>{if(n.value){if(ae==="off"){c(!1);return}if(ae==="5"){h(5),d(5),c(!0);return}ae==="10"&&(h(10),d(10),c(!0))}});async function Z(){if(n.value){N.value="";try{await s({reason:"manual-ui"}),N.value=" ."}catch(ae){console.error("DataManager: save failed",ae),N.value=` : ${String(ae?.message??ae)}`}}}async function w(){if(n.value){y.value=!0,N.value="",O.value=!1,M.value=null,B.value=!1;try{const ae=Ma(La,"users",n.value,"research","state"),re=await Iy(ae);re.exists()?(M.value=re.data(),O.value=!0,N.value="  ."):N.value="  . ( )"}catch(ae){console.error("DataManager: load failed",ae),N.value=` : ${String(ae?.message??ae)}`}finally{y.value=!1}}}const v=Ie(!1),I=Ie(!1),R=Ie("");function b(){v.value=!0,I.value=!1,R.value=""}function S(){v.value=!1}async function T(){if(n.value){y.value=!0,N.value="";try{const ae=Ma(La,"users",n.value,"research","state");await sC(ae),O.value=!1,M.value=null,B.value=!1,N.value=" .   .",S()}catch(ae){console.error("DataManager: delete failed",ae),N.value=` : ${String(ae?.message??ae)}`}finally{y.value=!1}}}return(ae,re)=>(W(),Q("div",AD,[re[22]||(re[22]=m("header",{class:"header"},[m("div",null,[m("h1",{class:"title"}," "),m("p",{class:"desc"},"   ,        . ")])],-1)),m("section",bD,[re[7]||(re[7]=m("h2",{class:"card-title"}," ",-1)),m("div",RD,[re[6]||(re[6]=m("div",{class:"k"}," ",-1)),m("div",SD,fe(n.value?"":"()"),1)]),n.value?tt("",!0):(W(),Q("p",CD," Firestore  /   . "))]),m("section",PD,[re[16]||(re[16]=m("h2",{class:"card-title"}," ",-1)),m("div",kD,[m("button",{class:"btn",onClick:Z,disabled:!n.value||y.value||g.value},"  ",8,ND),m("button",{class:"btn",onClick:w,disabled:!n.value||y.value},"   ",8,DD),m("button",{class:"btn danger",onClick:b,disabled:!n.value||y.value},"   ",8,OD)]),m("div",VD,[re[11]||(re[11]=m("div",{class:"autosave-title"},"",-1)),m("div",MD,[m("label",xD,[yi(m("input",{type:"radio",name:"autosave",value:"off","onUpdate:modelValue":re[0]||(re[0]=Ne=>C.value=Ne),disabled:!n.value||y.value},null,8,LD),[[Kl,C.value]]),re[8]||(re[8]=m("span",null,"",-1))]),m("label",FD,[yi(m("input",{type:"radio",name:"autosave",value:"5","onUpdate:modelValue":re[1]||(re[1]=Ne=>C.value=Ne),disabled:!n.value||y.value},null,8,UD),[[Kl,C.value]]),re[9]||(re[9]=m("span",null,"5",-1))]),m("label",$D,[yi(m("input",{type:"radio",name:"autosave",value:"10","onUpdate:modelValue":re[2]||(re[2]=Ne=>C.value=Ne),disabled:!n.value||y.value},null,8,BD),[[Kl,C.value]]),re[10]||(re[10]=m("span",null,"10",-1))])]),n.value&&Fe(i)&&Fe(p)?(W(),Q("p",jD,"    (KST   ) ")):tt("",!0)]),N.value?(W(),Q("p",qD,fe(N.value),1)):tt("",!0),O.value?(W(),Q("div",HD,[m("div",KD,[re[12]||(re[12]=m("h3",{class:"preview-title"},"    ",-1)),m("button",{class:"btn small",onClick:re[3]||(re[3]=Ne=>B.value=!B.value)},fe(B.value?"":""),1)]),m("div",GD,[m("div",zD,[re[13]||(re[13]=m("div",{class:"summary-k"},"",-1)),m("div",WD,fe(M.value?.version??"-"),1)]),m("div",QD,[re[14]||(re[14]=m("div",{class:"summary-k"},"  ",-1)),m("div",YD,fe(M.value?.transports?.length??0),1)]),m("div",XD,[re[15]||(re[15]=m("div",{class:"summary-k"},"",-1)),m("div",JD,fe(V(M.value?.updatedAt)),1)])]),B.value?(W(),Q("pre",ZD,fe(q(M.value)),1)):tt("",!0)])):(W(),Q("p",eO,"   ."))]),v.value?(W(),Q("div",{key:0,class:"modal-backdrop",onClick:Gm(S,["self"])},[m("div",tO,[re[18]||(re[18]=m("h2",{class:"modal-title"}," ?",-1)),re[19]||(re[19]=m("p",{class:"modal-desc danger-text"},"     .  ? ",-1)),re[20]||(re[20]=m("p",{class:"modal-desc"},[vt("   ,  "),m("b",null," "),vt(". ")],-1)),m("label",nO,[yi(m("input",{type:"checkbox","onUpdate:modelValue":re[4]||(re[4]=Ne=>I.value=Ne)},null,512),[[OT,I.value]]),re[17]||(re[17]=m("span",null,"      .",-1))]),re[21]||(re[21]=m("p",{class:"modal-desc"},[vt("   "),m("b",null,"DELETE"),vt(" . ")],-1)),yi(m("input",{class:"input","onUpdate:modelValue":re[5]||(re[5]=Ne=>R.value=Ne),placeholder:"DELETE"},null,512),[[DT,R.value]]),m("div",sO,[m("button",{class:"btn",onClick:S,disabled:y.value},"",8,rO),m("button",{class:"btn danger",onClick:T,disabled:y.value||!I.value||R.value!=="DELETE"},"   ",8,iO)])])])):tt("",!0)]))}},aO=qt(oO,[["__scopeId","data-v-a8ca5a4d"]]),lO={__name:"DataManagerView",setup(t){return(e,n)=>(W(),Or(aO))}},cO={class:"preview-page"},uO={__name:"PreviewRunsView",setup(t){return(e,n)=>(W(),Q("div",cO,[Ue(zy,{class:"preview-left-as-main"})]))}},hO=qt(uO,[["__scopeId","data-v-3aa6340f"]]),dO=[{path:"/",redirect:"/home/research"},{path:"/home",component:hk,children:[{path:"",redirect:"/home/research"},{path:"preview",name:"PreviewRuns",component:hO},{path:"research",name:"Research",component:kN},{path:"vehicles",name:"Vehicles",component:FN},{path:"line",name:"Line",component:KN},{path:"construction",name:"Construction",component:JN},{path:"finance",name:"Finance",component:rD},{path:"city",name:"City",component:hD},{path:"settings",component:wD,children:[{path:"",redirect:{name:"DataManager"}},{path:"data",name:"DataManager",component:lO}]}]}],fO=YI({history:CI(),routes:dO,scrollBehavior(){return{top:0}}}),{user:pO,authReady:mO}=Ih(),{loadForUser:gO,clearUserState:_O}=cr();let cc=null;Bn([mO,pO],async([t,e])=>{if(!t)return;if(!e){cc=null,_O();return}const n=e.uid;n&&n!==cc&&(cc=n,await gO(n))},{immediate:!0});const Wy=FT(HT);Wy.use(fO);Wy.mount("#app");
