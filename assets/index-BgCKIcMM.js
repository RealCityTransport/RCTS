(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ol(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},hr=[],pn=()=>{},up=()=>!1,wa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),xl=t=>t.startsWith("onUpdate:"),wt=Object.assign,Ml=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xy=Object.prototype.hasOwnProperty,De=(t,e)=>xy.call(t,e),ce=Array.isArray,fr=t=>Ji(t)==="[object Map]",Aa=t=>Ji(t)==="[object Set]",$h=t=>Ji(t)==="[object Date]",pe=t=>typeof t=="function",Xe=t=>typeof t=="string",tn=t=>typeof t=="symbol",Ue=t=>t!==null&&typeof t=="object",hp=t=>(Ue(t)||pe(t))&&pe(t.then)&&pe(t.catch),fp=Object.prototype.toString,Ji=t=>fp.call(t),My=t=>Ji(t).slice(8,-1),dp=t=>Ji(t)==="[object Object]",Ll=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gi=Ol(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ra=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Ly=/-\w/g,jt=Ra(t=>t.replace(Ly,e=>e.slice(1).toUpperCase())),Fy=/\B([A-Z])/g,Qs=Ra(t=>t.replace(Fy,"-$1").toLowerCase()),ba=Ra(t=>t.charAt(0).toUpperCase()+t.slice(1)),mc=Ra(t=>t?`on${ba(t)}`:""),us=(t,e)=>!Object.is(t,e),Vo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},pp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Fl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let jh;const Sa=()=>jh||(jh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ca(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Xe(s)?jy(s):Ca(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xe(t)||Ue(t))return t}const Uy=/;(?![^(]*\))/g,By=/:([^]+)/,$y=/\/\*[^]*?\*\//g;function jy(t){const e={};return t.replace($y,"").split(Uy).forEach(n=>{if(n){const s=n.split(By);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Er(t){let e="";if(Xe(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const s=Er(t[n]);s&&(e+=s+" ")}else if(Ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Hy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qy=Ol(Hy);function mp(t){return!!t||t===""}function zy(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Tr(t[s],e[s]);return n}function Tr(t,e){if(t===e)return!0;let n=$h(t),s=$h(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=tn(t),s=tn(e),n||s)return t===e;if(n=ce(t),s=ce(e),n||s)return n&&s?zy(t,e):!1;if(n=Ue(t),s=Ue(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!Tr(t[o],e[o]))return!1}}return String(t)===String(e)}function gp(t,e){return t.findIndex(n=>Tr(n,e))}const _p=t=>!!(t&&t.__v_isRef===!0),xe=t=>Xe(t)?t:t==null?"":ce(t)||Ue(t)&&(t.toString===fp||!pe(t.toString))?_p(t)?xe(t.value):JSON.stringify(t,yp,2):String(t),yp=(t,e)=>_p(e)?yp(t,e.value):fr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[gc(s,i)+" =>"]=r,n),{})}:Aa(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>gc(n))}:tn(e)?gc(e):Ue(e)&&!ce(e)&&!dp(e)?String(e):e,gc=(t,e="")=>{var n;return tn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Dt;class Gy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dt,!e&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dt;try{return Dt=this,e()}finally{Dt=n}}}on(){++this._on===1&&(this.prevScope=Dt,Dt=this)}off(){this._on>0&&--this._on===0&&(Dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ky(){return Dt}let Be;const _c=new WeakSet;class vp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dt&&Dt.active&&Dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_c.has(this)&&(_c.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hh(this),Ip(this);const e=Be,n=Zt;Be=this,Zt=!0;try{return this.fn()}finally{wp(this),Be=e,Zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$l(e);this.deps=this.depsTail=void 0,Hh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qc(this)&&this.run()}get dirty(){return qc(this)}}let Ep=0,_i,yi;function Tp(t,e=!1){if(t.flags|=8,e){t.next=yi,yi=t;return}t.next=_i,_i=t}function Ul(){Ep++}function Bl(){if(--Ep>0)return;if(yi){let e=yi;for(yi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;_i;){let e=_i;for(_i=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Ip(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function wp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),$l(s),Wy(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function qc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ap(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ap(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ki)||(t.globalVersion=ki,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!qc(t))))return;t.flags|=2;const e=t.dep,n=Be,s=Zt;Be=t,Zt=!0;try{Ip(t);const r=t.fn(t._value);(e.version===0||us(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Be=n,Zt=s,wp(t),t.flags&=-3}}function $l(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)$l(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Wy(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Zt=!0;const Rp=[];function Ln(){Rp.push(Zt),Zt=!1}function Fn(){const t=Rp.pop();Zt=t===void 0?!0:t}function Hh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Be;Be=void 0;try{e()}finally{Be=n}}}let ki=0;class Qy{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Be||!Zt||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new Qy(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,bp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=s)}return n}trigger(e){this.version++,ki++,this.notify(e)}notify(e){Ul();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Bl()}}}function bp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)bp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const zc=new WeakMap,Ms=Symbol(""),Gc=Symbol(""),Di=Symbol("");function vt(t,e,n){if(Zt&&Be){let s=zc.get(t);s||zc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new jl),r.map=s,r.key=n),r.track()}}function Pn(t,e,n,s,r,i){const o=zc.get(t);if(!o){ki++;return}const c=l=>{l&&l.trigger()};if(Ul(),e==="clear")o.forEach(c);else{const l=ce(t),h=l&&Ll(n);if(l&&n==="length"){const f=Number(s);o.forEach((p,g)=>{(g==="length"||g===Di||!tn(g)&&g>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),h&&c(o.get(Di)),e){case"add":l?h&&c(o.get("length")):(c(o.get(Ms)),fr(t)&&c(o.get(Gc)));break;case"delete":l||(c(o.get(Ms)),fr(t)&&c(o.get(Gc)));break;case"set":fr(t)&&c(o.get(Ms));break}}Bl()}function rr(t){const e=ke(t);return e===t?e:(vt(e,"iterate",Di),$t(t)?e:e.map(nn))}function Pa(t){return vt(t=ke(t),"iterate",Di),t}function ts(t,e){return Un(t)?Ls(t)?Ir(nn(e)):Ir(e):nn(e)}const Jy={__proto__:null,[Symbol.iterator](){return yc(this,Symbol.iterator,t=>ts(this,t))},concat(...t){return rr(this).concat(...t.map(e=>ce(e)?rr(e):e))},entries(){return yc(this,"entries",t=>(t[1]=ts(this,t[1]),t))},every(t,e){return bn(this,"every",t,e,void 0,arguments)},filter(t,e){return bn(this,"filter",t,e,n=>n.map(s=>ts(this,s)),arguments)},find(t,e){return bn(this,"find",t,e,n=>ts(this,n),arguments)},findIndex(t,e){return bn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return bn(this,"findLast",t,e,n=>ts(this,n),arguments)},findLastIndex(t,e){return bn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return bn(this,"forEach",t,e,void 0,arguments)},includes(...t){return vc(this,"includes",t)},indexOf(...t){return vc(this,"indexOf",t)},join(t){return rr(this).join(t)},lastIndexOf(...t){return vc(this,"lastIndexOf",t)},map(t,e){return bn(this,"map",t,e,void 0,arguments)},pop(){return ii(this,"pop")},push(...t){return ii(this,"push",t)},reduce(t,...e){return qh(this,"reduce",t,e)},reduceRight(t,...e){return qh(this,"reduceRight",t,e)},shift(){return ii(this,"shift")},some(t,e){return bn(this,"some",t,e,void 0,arguments)},splice(...t){return ii(this,"splice",t)},toReversed(){return rr(this).toReversed()},toSorted(t){return rr(this).toSorted(t)},toSpliced(...t){return rr(this).toSpliced(...t)},unshift(...t){return ii(this,"unshift",t)},values(){return yc(this,"values",t=>ts(this,t))}};function yc(t,e,n){const s=Pa(t),r=s[e]();return s!==t&&!$t(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Xy=Array.prototype;function bn(t,e,n,s,r,i){const o=Pa(t),c=o!==t&&!$t(t),l=o[e];if(l!==Xy[e]){const p=l.apply(t,i);return c?nn(p):p}let h=n;o!==t&&(c?h=function(p,g){return n.call(this,ts(t,p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const f=l.call(o,h,s);return c&&r?r(f):f}function qh(t,e,n,s){const r=Pa(t);let i=n;return r!==t&&($t(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,ts(t,c),l,t)}),r[e](i,...s)}function vc(t,e,n){const s=ke(t);vt(s,"iterate",Di);const r=s[e](...n);return(r===-1||r===!1)&&zl(n[0])?(n[0]=ke(n[0]),s[e](...n)):r}function ii(t,e,n=[]){Ln(),Ul();const s=ke(t)[e].apply(t,n);return Bl(),Fn(),s}const Yy=Ol("__proto__,__v_isRef,__isVue"),Sp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(tn));function Zy(t){tn(t)||(t=String(t));const e=ke(this);return vt(e,"has",t),e.hasOwnProperty(t)}class Cp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?lv:Np:i?Dp:kp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ce(e);if(!r){let l;if(o&&(l=Jy[n]))return l;if(n==="hasOwnProperty")return Zy}const c=Reflect.get(e,n,It(e)?e:s);if((tn(n)?Sp.has(n):Yy(n))||(r||vt(e,"get",n),i))return c;if(It(c)){const l=o&&Ll(n)?c:c.value;return r&&Ue(l)?Wc(l):l}return Ue(c)?r?Wc(c):ka(c):c}}class Pp extends Cp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ce(e)&&Ll(n);if(!this._isShallow){const h=Un(i);if(!$t(s)&&!Un(s)&&(i=ke(i),s=ke(s)),!o&&It(i)&&!It(s))return h||(i.value=s),!0}const c=o?Number(n)<e.length:De(e,n),l=Reflect.set(e,n,s,It(e)?e:r);return e===ke(r)&&(c?us(s,i)&&Pn(e,"set",n,s):Pn(e,"add",n,s)),l}deleteProperty(e,n){const s=De(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Pn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!tn(n)||!Sp.has(n))&&vt(e,"has",n),s}ownKeys(e){return vt(e,"iterate",ce(e)?"length":Ms),Reflect.ownKeys(e)}}class ev extends Cp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const tv=new Pp,nv=new ev,sv=new Pp(!0);const Kc=t=>t,To=t=>Reflect.getPrototypeOf(t);function rv(t,e,n){return function(...s){const r=this.__v_raw,i=ke(r),o=fr(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=r[t](...s),f=n?Kc:e?Ir:nn;return!e&&vt(i,"iterate",l?Gc:Ms),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:c?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function Io(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function iv(t,e){const n={get(r){const i=this.__v_raw,o=ke(i),c=ke(r);t||(us(r,c)&&vt(o,"get",r),vt(o,"get",c));const{has:l}=To(o),h=e?Kc:t?Ir:nn;if(l.call(o,r))return h(i.get(r));if(l.call(o,c))return h(i.get(c));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&vt(ke(r),"iterate",Ms),r.size},has(r){const i=this.__v_raw,o=ke(i),c=ke(r);return t||(us(r,c)&&vt(o,"has",r),vt(o,"has",c)),r===c?i.has(r):i.has(r)||i.has(c)},forEach(r,i){const o=this,c=o.__v_raw,l=ke(c),h=e?Kc:t?Ir:nn;return!t&&vt(l,"iterate",Ms),c.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return wt(n,t?{add:Io("add"),set:Io("set"),delete:Io("delete"),clear:Io("clear")}:{add(r){!e&&!$t(r)&&!Un(r)&&(r=ke(r));const i=ke(this);return To(i).has.call(i,r)||(i.add(r),Pn(i,"add",r,r)),this},set(r,i){!e&&!$t(i)&&!Un(i)&&(i=ke(i));const o=ke(this),{has:c,get:l}=To(o);let h=c.call(o,r);h||(r=ke(r),h=c.call(o,r));const f=l.call(o,r);return o.set(r,i),h?us(i,f)&&Pn(o,"set",r,i):Pn(o,"add",r,i),this},delete(r){const i=ke(this),{has:o,get:c}=To(i);let l=o.call(i,r);l||(r=ke(r),l=o.call(i,r)),c&&c.call(i,r);const h=i.delete(r);return l&&Pn(i,"delete",r,void 0),h},clear(){const r=ke(this),i=r.size!==0,o=r.clear();return i&&Pn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=rv(r,t,e)}),n}function Hl(t,e){const n=iv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(De(n,r)&&r in s?n:s,r,i)}const ov={get:Hl(!1,!1)},av={get:Hl(!1,!0)},cv={get:Hl(!0,!1)};const kp=new WeakMap,Dp=new WeakMap,Np=new WeakMap,lv=new WeakMap;function uv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hv(t){return t.__v_skip||!Object.isExtensible(t)?0:uv(My(t))}function ka(t){return Un(t)?t:ql(t,!1,tv,ov,kp)}function Vp(t){return ql(t,!1,sv,av,Dp)}function Wc(t){return ql(t,!0,nv,cv,Np)}function ql(t,e,n,s,r){if(!Ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=hv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const c=new Proxy(t,i===2?s:n);return r.set(t,c),c}function Ls(t){return Un(t)?Ls(t.__v_raw):!!(t&&t.__v_isReactive)}function Un(t){return!!(t&&t.__v_isReadonly)}function $t(t){return!!(t&&t.__v_isShallow)}function zl(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function fv(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&pp(t,"__v_skip",!0),t}const nn=t=>Ue(t)?ka(t):t,Ir=t=>Ue(t)?Wc(t):t;function It(t){return t?t.__v_isRef===!0:!1}function Ne(t){return Op(t,!1)}function dv(t){return Op(t,!0)}function Op(t,e){return It(t)?t:new pv(t,e)}class pv{constructor(e,n){this.dep=new jl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:nn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||$t(e)||Un(e);e=s?e:ke(e),us(e,n)&&(this._rawValue=e,this._value=s?e:nn(e),this.dep.trigger())}}function be(t){return It(t)?t.value:t}const mv={get:(t,e,n)=>e==="__v_raw"?t:be(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return It(r)&&!It(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function xp(t){return Ls(t)?t:new Proxy(t,mv)}class gv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new jl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ki-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Tp(this,!0),!0}get value(){const e=this.dep.track();return Ap(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _v(t,e,n=!1){let s,r;return pe(t)?s=t:(s=t.get,r=t.set),new gv(s,r,n)}const wo={},Wo=new WeakMap;let Ps;function yv(t,e=!1,n=Ps){if(n){let s=Wo.get(n);s||Wo.set(n,s=[]),s.push(t)}}function vv(t,e,n=Le){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:c,call:l}=n,h=z=>r?z:$t(z)||r===!1||r===0?kn(z,1):kn(z);let f,p,g,y,k=!1,N=!1;if(It(t)?(p=()=>t.value,k=$t(t)):Ls(t)?(p=()=>h(t),k=!0):ce(t)?(N=!0,k=t.some(z=>Ls(z)||$t(z)),p=()=>t.map(z=>{if(It(z))return z.value;if(Ls(z))return h(z);if(pe(z))return l?l(z,2):z()})):pe(t)?e?p=l?()=>l(t,2):t:p=()=>{if(g){Ln();try{g()}finally{Fn()}}const z=Ps;Ps=f;try{return l?l(t,3,[y]):t(y)}finally{Ps=z}}:p=pn,e&&r){const z=p,he=r===!0?1/0:r;p=()=>kn(z(),he)}const V=Ky(),$=()=>{f.stop(),V&&V.active&&Ml(V.effects,f)};if(i&&e){const z=e;e=(...he)=>{z(...he),$()}}let H=N?new Array(t.length).fill(wo):wo;const G=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const he=f.run();if(r||k||(N?he.some((ge,I)=>us(ge,H[I])):us(he,H))){g&&g();const ge=Ps;Ps=f;try{const I=[he,H===wo?void 0:N&&H[0]===wo?[]:H,y];H=he,l?l(e,3,I):e(...I)}finally{Ps=ge}}}else f.run()};return c&&c(G),f=new vp(p),f.scheduler=o?()=>o(G,!1):G,y=z=>yv(z,!1,f),g=f.onStop=()=>{const z=Wo.get(f);if(z){if(l)l(z,4);else for(const he of z)he();Wo.delete(f)}},e?s?G(!0):H=f.run():o?o(G.bind(null,!0),!0):f.run(),$.pause=f.pause.bind(f),$.resume=f.resume.bind(f),$.stop=$,$}function kn(t,e=1/0,n){if(e<=0||!Ue(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,It(t))kn(t.value,e,n);else if(ce(t))for(let s=0;s<t.length;s++)kn(t[s],e,n);else if(Aa(t)||fr(t))t.forEach(s=>{kn(s,e,n)});else if(dp(t)){for(const s in t)kn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&kn(t[s],e,n)}return t}function Xi(t,e,n,s){try{return s?t(...s):t()}catch(r){Da(r,e,n)}}function Tn(t,e,n,s){if(pe(t)){const r=Xi(t,e,n,s);return r&&hp(r)&&r.catch(i=>{Da(i,e,n)}),r}if(ce(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Tn(t[i],e,n,s));return r}}function Da(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,h)===!1)return}c=c.parent}if(i){Ln(),Xi(i,null,10,[t,l,h]),Fn();return}}Ev(t,n,r,s,o)}function Ev(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Ct=[];let ln=-1;const dr=[];let ns=null,ir=0;const Mp=Promise.resolve();let Qo=null;function Lp(t){const e=Qo||Mp;return t?e.then(this?t.bind(this):t):e}function Tv(t){let e=ln+1,n=Ct.length;for(;e<n;){const s=e+n>>>1,r=Ct[s],i=Ni(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Gl(t){if(!(t.flags&1)){const e=Ni(t),n=Ct[Ct.length-1];!n||!(t.flags&2)&&e>=Ni(n)?Ct.push(t):Ct.splice(Tv(e),0,t),t.flags|=1,Fp()}}function Fp(){Qo||(Qo=Mp.then(Bp))}function Iv(t){ce(t)?dr.push(...t):ns&&t.id===-1?ns.splice(ir+1,0,t):t.flags&1||(dr.push(t),t.flags|=1),Fp()}function zh(t,e,n=ln+1){for(;n<Ct.length;n++){const s=Ct[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ct.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Up(t){if(dr.length){const e=[...new Set(dr)].sort((n,s)=>Ni(n)-Ni(s));if(dr.length=0,ns){ns.push(...e);return}for(ns=e,ir=0;ir<ns.length;ir++){const n=ns[ir];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ns=null,ir=0}}const Ni=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Bp(t){try{for(ln=0;ln<Ct.length;ln++){const e=Ct[ln];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ln<Ct.length;ln++){const e=Ct[ln];e&&(e.flags&=-2)}ln=-1,Ct.length=0,Up(),Qo=null,(Ct.length||dr.length)&&Bp()}}let ft=null,$p=null;function Jo(t){const e=ft;return ft=t,$p=t&&t.type.__scopeId||null,e}function hn(t,e=ft,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Zo(-1);const i=Jo(e);let o;try{o=t(...r)}finally{Jo(i),s._d&&Zo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function oi(t,e){if(ft===null)return t;const n=xa(ft),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,c,l=Le]=e[r];i&&(pe(i)&&(i={mounted:i,updated:i}),i.deep&&kn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Ss(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const c=r[o];i&&(c.oldValue=i[o].value);let l=c.dir[s];l&&(Ln(),Tn(l,n,8,[t.el,c,t,e]),Fn())}}function Oo(t,e){if(Tt){let n=Tt.provides;const s=Tt.parent&&Tt.parent.provides;s===n&&(n=Tt.provides=Object.create(s)),n[t]=e}}function xn(t,e,n=!1){const s=wE();if(s||mr){let r=mr?mr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&pe(e)?e.call(s&&s.proxy):e}}const wv=Symbol.for("v-scx"),Av=()=>xn(wv);function Rv(t,e){return Kl(t,null,e)}function Fs(t,e,n){return Kl(t,e,n)}function Kl(t,e,n=Le){const{immediate:s,deep:r,flush:i,once:o}=n,c=wt({},n),l=e&&s||!e&&i!=="post";let h;if(Mi){if(i==="sync"){const y=Av();h=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=pn,y.resume=pn,y.pause=pn,y}}const f=Tt;c.call=(y,k,N)=>Tn(y,f,k,N);let p=!1;i==="post"?c.scheduler=y=>{Lt(y,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(y,k)=>{k?y():Gl(y)}),c.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,f&&(y.id=f.uid,y.i=f))};const g=vv(t,e,c);return Mi&&(h?h.push(g):l&&g()),g}function bv(t,e,n){const s=this.proxy,r=Xe(t)?t.includes(".")?jp(s,t):()=>s[t]:t.bind(s,s);let i;pe(e)?i=e:(i=e.handler,n=e);const o=Yi(this),c=Kl(r,i.bind(s),n);return o(),c}function jp(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Sv=Symbol("_vte"),Cv=t=>t.__isTeleport,Pv=Symbol("_leaveCb");function Wl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Wl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hp(t,e){return pe(t)?wt({name:t.name},e,{setup:t}):t}function qp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Xo=new WeakMap;function vi(t,e,n,s,r=!1){if(ce(t)){t.forEach((k,N)=>vi(k,e&&(ce(e)?e[N]:e),n,s,r));return}if(pr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&vi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?xa(s.component):s.el,o=r?null:i,{i:c,r:l}=t,h=e&&e.r,f=c.refs===Le?c.refs={}:c.refs,p=c.setupState,g=ke(p),y=p===Le?up:k=>De(g,k);if(h!=null&&h!==l){if(Gh(e),Xe(h))f[h]=null,y(h)&&(p[h]=null);else if(It(h)){h.value=null;const k=e;k.k&&(f[k.k]=null)}}if(pe(l))Xi(l,c,12,[o,f]);else{const k=Xe(l),N=It(l);if(k||N){const V=()=>{if(t.f){const $=k?y(l)?p[l]:f[l]:l.value;if(r)ce($)&&Ml($,i);else if(ce($))$.includes(i)||$.push(i);else if(k)f[l]=[i],y(l)&&(p[l]=f[l]);else{const H=[i];l.value=H,t.k&&(f[t.k]=H)}}else k?(f[l]=o,y(l)&&(p[l]=o)):N&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const $=()=>{V(),Xo.delete(t)};$.id=-1,Xo.set(t,$),Lt($,n)}else Gh(t),V()}}}function Gh(t){const e=Xo.get(t);e&&(e.flags|=8,Xo.delete(t))}Sa().requestIdleCallback;Sa().cancelIdleCallback;const pr=t=>!!t.type.__asyncLoader,zp=t=>t.type.__isKeepAlive;function kv(t,e){Gp(t,"a",e)}function Dv(t,e){Gp(t,"da",e)}function Gp(t,e,n=Tt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Na(e,s,n),n){let r=n.parent;for(;r&&r.parent;)zp(r.parent.vnode)&&Nv(s,e,n,r),r=r.parent}}function Nv(t,e,n,s){const r=Na(e,t,s,!0);Wp(()=>{Ml(s[e],r)},n)}function Na(t,e,n=Tt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ln();const c=Yi(n),l=Tn(e,n,t,o);return c(),Fn(),l});return s?r.unshift(i):r.push(i),i}}const zn=t=>(e,n=Tt)=>{(!Mi||t==="sp")&&Na(t,(...s)=>e(...s),n)},Vv=zn("bm"),Kp=zn("m"),Ov=zn("bu"),xv=zn("u"),Mv=zn("bum"),Wp=zn("um"),Lv=zn("sp"),Fv=zn("rtg"),Uv=zn("rtc");function Bv(t,e=Tt){Na("ec",t,e)}const $v="components";function Vi(t,e){return Hv($v,t,!0,e)||t}const jv=Symbol.for("v-ndc");function Hv(t,e,n=!0,s=!1){const r=ft||Tt;if(r){const i=r.type;{const c=CE(i,!1);if(c&&(c===e||c===jt(e)||c===ba(jt(e))))return i}const o=Kh(r[t]||i[t],e)||Kh(r.appContext[t],e);return!o&&s?i:o}}function Kh(t,e){return t&&(t[e]||t[jt(e)]||t[ba(jt(e))])}function xo(t,e,n,s){let r;const i=n,o=ce(t);if(o||Xe(t)){const c=o&&Ls(t);let l=!1,h=!1;c&&(l=!$t(t),h=Un(t),t=Pa(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(l?h?Ir(nn(t[f])):nn(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,i)}else if(Ue(t))if(t[Symbol.iterator])r=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);r=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const f=c[l];r[l]=e(t[f],f,l,i)}}else r=[];return r}function Wh(t,e,n={},s,r){if(ft.ce||ft.parent&&pr(ft.parent)&&ft.parent.ce){const h=Object.keys(n).length>0;return e!=="default"&&(n.name=e),le(),wr(lt,null,[Fe("slot",n,s)],h?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),le();const o=i&&Qp(i(n)),c=n.key||o&&o.key,l=wr(lt,{key:(c&&!tn(c)?c:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function Qp(t){return t.some(e=>xi(e)?!(e.type===Bn||e.type===lt&&!Qp(e.children)):!0)?t:null}const Qc=t=>t?pm(t)?xa(t):Qc(t.parent):null,Ei=wt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qc(t.parent),$root:t=>Qc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xp(t),$forceUpdate:t=>t.f||(t.f=()=>{Gl(t.update)}),$nextTick:t=>t.n||(t.n=Lp.bind(t.proxy)),$watch:t=>bv.bind(t)}),Ec=(t,e)=>t!==Le&&!t.__isScriptSetup&&De(t,e),qv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Ec(s,e))return o[e]=1,s[e];if(r!==Le&&De(r,e))return o[e]=2,r[e];if(De(i,e))return o[e]=3,i[e];if(n!==Le&&De(n,e))return o[e]=4,n[e];Jc&&(o[e]=0)}}const h=Ei[e];let f,p;if(h)return e==="$attrs"&&vt(t.attrs,"get",""),h(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==Le&&De(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,De(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Ec(r,e)?(r[e]=n,!0):s!==Le&&De(s,e)?(s[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},c){let l;return!!(n[c]||t!==Le&&c[0]!=="$"&&De(t,c)||Ec(e,c)||De(i,c)||De(s,c)||De(Ei,c)||De(r.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Qh(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Jc=!0;function zv(t){const e=Xp(t),n=t.proxy,s=t.ctx;Jc=!1,e.beforeCreate&&Jh(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:c,provide:l,inject:h,created:f,beforeMount:p,mounted:g,beforeUpdate:y,updated:k,activated:N,deactivated:V,beforeDestroy:$,beforeUnmount:H,destroyed:G,unmounted:z,render:he,renderTracked:ge,renderTriggered:I,errorCaptured:_,serverPrefetch:v,expose:R,inheritAttrs:A,components:b,directives:T,filters:ee}=e;if(h&&Gv(h,s,null),o)for(const Ce in o){const we=o[Ce];pe(we)&&(s[Ce]=we.bind(n))}if(r){const Ce=r.call(n,n);Ue(Ce)&&(t.data=ka(Ce))}if(Jc=!0,i)for(const Ce in i){const we=i[Ce],kt=pe(we)?we.bind(n,n):pe(we.get)?we.get.bind(n,n):pn,rn=!pe(we)&&pe(we.set)?we.set.bind(n):pn,Vt=Ke({get:kt,set:rn});Object.defineProperty(s,Ce,{enumerable:!0,configurable:!0,get:()=>Vt.value,set:ot=>Vt.value=ot})}if(c)for(const Ce in c)Jp(c[Ce],s,n,Ce);if(l){const Ce=pe(l)?l.call(n):l;Reflect.ownKeys(Ce).forEach(we=>{Oo(we,Ce[we])})}f&&Jh(f,t,"c");function Se(Ce,we){ce(we)?we.forEach(kt=>Ce(kt.bind(n))):we&&Ce(we.bind(n))}if(Se(Vv,p),Se(Kp,g),Se(Ov,y),Se(xv,k),Se(kv,N),Se(Dv,V),Se(Bv,_),Se(Uv,ge),Se(Fv,I),Se(Mv,H),Se(Wp,z),Se(Lv,v),ce(R))if(R.length){const Ce=t.exposed||(t.exposed={});R.forEach(we=>{Object.defineProperty(Ce,we,{get:()=>n[we],set:kt=>n[we]=kt,enumerable:!0})})}else t.exposed||(t.exposed={});he&&t.render===pn&&(t.render=he),A!=null&&(t.inheritAttrs=A),b&&(t.components=b),T&&(t.directives=T),v&&qp(t)}function Gv(t,e,n=pn){ce(t)&&(t=Xc(t));for(const s in t){const r=t[s];let i;Ue(r)?"default"in r?i=xn(r.from||s,r.default,!0):i=xn(r.from||s):i=xn(r),It(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Jh(t,e,n){Tn(ce(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Jp(t,e,n,s){let r=s.includes(".")?jp(n,s):()=>n[s];if(Xe(t)){const i=e[t];pe(i)&&Fs(r,i)}else if(pe(t))Fs(r,t.bind(n));else if(Ue(t))if(ce(t))t.forEach(i=>Jp(i,e,n,s));else{const i=pe(t.handler)?t.handler.bind(n):e[t.handler];pe(i)&&Fs(r,i,t)}}function Xp(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(h=>Yo(l,h,o,!0)),Yo(l,e,o)),Ue(e)&&i.set(e,l),l}function Yo(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Yo(t,i,n,!0),r&&r.forEach(o=>Yo(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const c=Kv[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const Kv={data:Xh,props:Yh,emits:Yh,methods:ui,computed:ui,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:ui,directives:ui,watch:Qv,provide:Xh,inject:Wv};function Xh(t,e){return e?t?function(){return wt(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function Wv(t,e){return ui(Xc(t),Xc(e))}function Xc(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function bt(t,e){return t?[...new Set([].concat(t,e))]:e}function ui(t,e){return t?wt(Object.create(null),t,e):e}function Yh(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:wt(Object.create(null),Qh(t),Qh(e??{})):e}function Qv(t,e){if(!t)return e;if(!e)return t;const n=wt(Object.create(null),t);for(const s in e)n[s]=bt(t[s],e[s]);return n}function Yp(){return{app:null,config:{isNativeTag:up,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jv=0;function Xv(t,e){return function(s,r=null){pe(s)||(s=wt({},s)),r!=null&&!Ue(r)&&(r=null);const i=Yp(),o=new WeakSet,c=[];let l=!1;const h=i.app={_uid:Jv++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:kE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&pe(f.install)?(o.add(f),f.install(h,...p)):pe(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,g){if(!l){const y=h._ceVNode||Fe(s,r);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(y,f,g),l=!0,h._container=f,f.__vue_app__=h,xa(y.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Tn(c,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=mr;mr=h;try{return f()}finally{mr=p}}};return h}}let mr=null;const Yv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jt(e)}Modifiers`]||t[`${Qs(e)}Modifiers`];function Zv(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Le;let r=n;const i=e.startsWith("update:"),o=i&&Yv(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>Xe(f)?f.trim():f)),o.number&&(r=n.map(Fl)));let c,l=s[c=mc(e)]||s[c=mc(jt(e))];!l&&i&&(l=s[c=mc(Qs(e))]),l&&Tn(l,t,6,r);const h=s[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Tn(h,t,6,r)}}const eE=new WeakMap;function Zp(t,e,n=!1){const s=n?eE:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},c=!1;if(!pe(t)){const l=h=>{const f=Zp(h,e,!0);f&&(c=!0,wt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Ue(t)&&s.set(t,null),null):(ce(i)?i.forEach(l=>o[l]=null):wt(o,i),Ue(t)&&s.set(t,o),o)}function Va(t,e){return!t||!wa(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,Qs(e))||De(t,e))}function Zh(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:c,emit:l,render:h,renderCache:f,props:p,data:g,setupState:y,ctx:k,inheritAttrs:N}=t,V=Jo(t);let $,H;try{if(n.shapeFlag&4){const z=r||s,he=z;$=fn(h.call(he,z,f,p,y,g,k)),H=c}else{const z=e;$=fn(z.length>1?z(p,{attrs:c,slots:o,emit:l}):z(p,null)),H=e.props?c:tE(c)}}catch(z){Ti.length=0,Da(z,t,1),$=Fe(Bn)}let G=$;if(H&&N!==!1){const z=Object.keys(H),{shapeFlag:he}=G;z.length&&he&7&&(i&&z.some(xl)&&(H=nE(H,i)),G=Ar(G,H,!1,!0))}return n.dirs&&(G=Ar(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(n.dirs):n.dirs),n.transition&&Wl(G,n.transition),$=G,Jo(V),$}const tE=t=>{let e;for(const n in t)(n==="class"||n==="style"||wa(n))&&((e||(e={}))[n]=t[n]);return e},nE=(t,e)=>{const n={};for(const s in t)(!xl(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function sE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?ef(s,o,h):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(o[g]!==s[g]&&!Va(h,g))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:s===o?!1:s?o?ef(s,o,h):!0:!!o;return!1}function ef(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Va(n,i))return!0}return!1}function rE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const em={},tm=()=>Object.create(em),nm=t=>Object.getPrototypeOf(t)===em;function iE(t,e,n,s=!1){const r={},i=tm();t.propsDefaults=Object.create(null),sm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Vp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function oE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,c=ke(r),[l]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(Va(t.emitsOptions,g))continue;const y=e[g];if(l)if(De(i,g))y!==i[g]&&(i[g]=y,h=!0);else{const k=jt(g);r[k]=Yc(l,c,k,y,t,!1)}else y!==i[g]&&(i[g]=y,h=!0)}}}else{sm(t,e,r,i)&&(h=!0);let f;for(const p in c)(!e||!De(e,p)&&((f=Qs(p))===p||!De(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=Yc(l,c,p,void 0,t,!0)):delete r[p]);if(i!==c)for(const p in i)(!e||!De(e,p))&&(delete i[p],h=!0)}h&&Pn(t.attrs,"set","")}function sm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(gi(l))continue;const h=e[l];let f;r&&De(r,f=jt(l))?!i||!i.includes(f)?n[f]=h:(c||(c={}))[f]=h:Va(t.emitsOptions,l)||(!(l in s)||h!==s[l])&&(s[l]=h,o=!0)}if(i){const l=ke(n),h=c||Le;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Yc(r,l,p,h[p],t,!De(h,p))}}return o}function Yc(t,e,n,s,r,i){const o=t[n];if(o!=null){const c=De(o,"default");if(c&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pe(l)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=Yi(r);s=h[n]=l.call(null,e),f()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!c?s=!1:o[1]&&(s===""||s===Qs(n))&&(s=!0))}return s}const aE=new WeakMap;function rm(t,e,n=!1){const s=n?aE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},c=[];let l=!1;if(!pe(t)){const f=p=>{l=!0;const[g,y]=rm(p,e,!0);wt(o,g),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Ue(t)&&s.set(t,hr),hr;if(ce(i))for(let f=0;f<i.length;f++){const p=jt(i[f]);tf(p)&&(o[p]=Le)}else if(i)for(const f in i){const p=jt(f);if(tf(p)){const g=i[f],y=o[p]=ce(g)||pe(g)?{type:g}:wt({},g),k=y.type;let N=!1,V=!0;if(ce(k))for(let $=0;$<k.length;++$){const H=k[$],G=pe(H)&&H.name;if(G==="Boolean"){N=!0;break}else G==="String"&&(V=!1)}else N=pe(k)&&k.name==="Boolean";y[0]=N,y[1]=V,(N||De(y,"default"))&&c.push(p)}}const h=[o,c];return Ue(t)&&s.set(t,h),h}function tf(t){return t[0]!=="$"&&!gi(t)}const Ql=t=>t==="_"||t==="_ctx"||t==="$stable",Jl=t=>ce(t)?t.map(fn):[fn(t)],cE=(t,e,n)=>{if(e._n)return e;const s=hn((...r)=>Jl(e(...r)),n);return s._c=!1,s},im=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Ql(r))continue;const i=t[r];if(pe(i))e[r]=cE(r,i,s);else if(i!=null){const o=Jl(i);e[r]=()=>o}}},om=(t,e)=>{const n=Jl(e);t.slots.default=()=>n},am=(t,e,n)=>{for(const s in e)(n||!Ql(s))&&(t[s]=e[s])},lE=(t,e,n)=>{const s=t.slots=tm();if(t.vnode.shapeFlag&32){const r=e._;r?(am(s,e,n),n&&pp(s,"_",r,!0)):im(e,s)}else e&&om(t,e)},uE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Le;if(s.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:am(r,e,n):(i=!e.$stable,im(e,r)),o=e}else e&&(om(t,e),o={default:1});if(i)for(const c in r)!Ql(c)&&o[c]==null&&delete r[c]},Lt=mE;function hE(t){return fE(t)}function fE(t,e){const n=Sa();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:c,createComment:l,setText:h,setElementText:f,parentNode:p,nextSibling:g,setScopeId:y=pn,insertStaticContent:k}=t,N=(E,w,S,O=null,F=null,x=null,W=void 0,q=null,j=!!w.dynamicChildren)=>{if(E===w)return;E&&!ai(E,w)&&(O=M(E),ot(E,F,x,!0),E=null),w.patchFlag===-2&&(j=!1,w.dynamicChildren=null);const{type:U,ref:re,shapeFlag:J}=w;switch(U){case Oa:V(E,w,S,O);break;case Bn:$(E,w,S,O);break;case Ic:E==null&&H(w,S,O,W);break;case lt:b(E,w,S,O,F,x,W,q,j);break;default:J&1?he(E,w,S,O,F,x,W,q,j):J&6?T(E,w,S,O,F,x,W,q,j):(J&64||J&128)&&U.process(E,w,S,O,F,x,W,q,j,ne)}re!=null&&F?vi(re,E&&E.ref,x,w||E,!w):re==null&&E&&E.ref!=null&&vi(E.ref,null,x,E,!0)},V=(E,w,S,O)=>{if(E==null)s(w.el=c(w.children),S,O);else{const F=w.el=E.el;w.children!==E.children&&h(F,w.children)}},$=(E,w,S,O)=>{E==null?s(w.el=l(w.children||""),S,O):w.el=E.el},H=(E,w,S,O)=>{[E.el,E.anchor]=k(E.children,w,S,O,E.el,E.anchor)},G=({el:E,anchor:w},S,O)=>{let F;for(;E&&E!==w;)F=g(E),s(E,S,O),E=F;s(w,S,O)},z=({el:E,anchor:w})=>{let S;for(;E&&E!==w;)S=g(E),r(E),E=S;r(w)},he=(E,w,S,O,F,x,W,q,j)=>{if(w.type==="svg"?W="svg":w.type==="math"&&(W="mathml"),E==null)ge(w,S,O,F,x,W,q,j);else{const U=E.el&&E.el._isVueCE?E.el:null;try{U&&U._beginPatch(),v(E,w,F,x,W,q,j)}finally{U&&U._endPatch()}}},ge=(E,w,S,O,F,x,W,q)=>{let j,U;const{props:re,shapeFlag:J,transition:se,dirs:oe}=E;if(j=E.el=o(E.type,x,re&&re.is,re),J&8?f(j,E.children):J&16&&_(E.children,j,null,O,F,Tc(E,x),W,q),oe&&Ss(E,null,O,"created"),I(j,E,E.scopeId,W,O),re){for(const Oe in re)Oe!=="value"&&!gi(Oe)&&i(j,Oe,null,re[Oe],x,O);"value"in re&&i(j,"value",null,re.value,x),(U=re.onVnodeBeforeMount)&&cn(U,O,E)}oe&&Ss(E,null,O,"beforeMount");const ye=dE(F,se);ye&&se.beforeEnter(j),s(j,w,S),((U=re&&re.onVnodeMounted)||ye||oe)&&Lt(()=>{U&&cn(U,O,E),ye&&se.enter(j),oe&&Ss(E,null,O,"mounted")},F)},I=(E,w,S,O,F)=>{if(S&&y(E,S),O)for(let x=0;x<O.length;x++)y(E,O[x]);if(F){let x=F.subTree;if(w===x||hm(x.type)&&(x.ssContent===w||x.ssFallback===w)){const W=F.vnode;I(E,W,W.scopeId,W.slotScopeIds,F.parent)}}},_=(E,w,S,O,F,x,W,q,j=0)=>{for(let U=j;U<E.length;U++){const re=E[U]=q?ss(E[U]):fn(E[U]);N(null,re,w,S,O,F,x,W,q)}},v=(E,w,S,O,F,x,W)=>{const q=w.el=E.el;let{patchFlag:j,dynamicChildren:U,dirs:re}=w;j|=E.patchFlag&16;const J=E.props||Le,se=w.props||Le;let oe;if(S&&Cs(S,!1),(oe=se.onVnodeBeforeUpdate)&&cn(oe,S,w,E),re&&Ss(w,E,S,"beforeUpdate"),S&&Cs(S,!0),(J.innerHTML&&se.innerHTML==null||J.textContent&&se.textContent==null)&&f(q,""),U?R(E.dynamicChildren,U,q,S,O,Tc(w,F),x):W||we(E,w,q,null,S,O,Tc(w,F),x,!1),j>0){if(j&16)A(q,J,se,S,F);else if(j&2&&J.class!==se.class&&i(q,"class",null,se.class,F),j&4&&i(q,"style",J.style,se.style,F),j&8){const ye=w.dynamicProps;for(let Oe=0;Oe<ye.length;Oe++){const Re=ye[Oe],mt=J[Re],gt=se[Re];(gt!==mt||Re==="value")&&i(q,Re,mt,gt,F,S)}}j&1&&E.children!==w.children&&f(q,w.children)}else!W&&U==null&&A(q,J,se,S,F);((oe=se.onVnodeUpdated)||re)&&Lt(()=>{oe&&cn(oe,S,w,E),re&&Ss(w,E,S,"updated")},O)},R=(E,w,S,O,F,x,W)=>{for(let q=0;q<w.length;q++){const j=E[q],U=w[q],re=j.el&&(j.type===lt||!ai(j,U)||j.shapeFlag&198)?p(j.el):S;N(j,U,re,null,O,F,x,W,!0)}},A=(E,w,S,O,F)=>{if(w!==S){if(w!==Le)for(const x in w)!gi(x)&&!(x in S)&&i(E,x,w[x],null,F,O);for(const x in S){if(gi(x))continue;const W=S[x],q=w[x];W!==q&&x!=="value"&&i(E,x,q,W,F,O)}"value"in S&&i(E,"value",w.value,S.value,F)}},b=(E,w,S,O,F,x,W,q,j)=>{const U=w.el=E?E.el:c(""),re=w.anchor=E?E.anchor:c("");let{patchFlag:J,dynamicChildren:se,slotScopeIds:oe}=w;oe&&(q=q?q.concat(oe):oe),E==null?(s(U,S,O),s(re,S,O),_(w.children||[],S,re,F,x,W,q,j)):J>0&&J&64&&se&&E.dynamicChildren&&E.dynamicChildren.length===se.length?(R(E.dynamicChildren,se,S,F,x,W,q),(w.key!=null||F&&w===F.subTree)&&cm(E,w,!0)):we(E,w,S,re,F,x,W,q,j)},T=(E,w,S,O,F,x,W,q,j)=>{w.slotScopeIds=q,E==null?w.shapeFlag&512?F.ctx.activate(w,S,O,W,j):ee(w,S,O,F,x,W,j):Z(E,w,j)},ee=(E,w,S,O,F,x,W)=>{const q=E.component=IE(E,O,F);if(zp(E)&&(q.ctx.renderer=ne),AE(q,!1,W),q.asyncDep){if(F&&F.registerDep(q,Se,W),!E.el){const j=q.subTree=Fe(Bn);$(null,j,w,S),E.placeholder=j.el}}else Se(q,E,w,S,F,x,W)},Z=(E,w,S)=>{const O=w.component=E.component;if(sE(E,w,S))if(O.asyncDep&&!O.asyncResolved){Ce(O,w,S);return}else O.next=w,O.update();else w.el=E.el,O.vnode=w},Se=(E,w,S,O,F,x,W)=>{const q=()=>{if(E.isMounted){let{next:J,bu:se,u:oe,parent:ye,vnode:Oe}=E;{const xt=lm(E);if(xt){J&&(J.el=Oe.el,Ce(E,J,W)),xt.asyncDep.then(()=>{E.isUnmounted||q()});return}}let Re=J,mt;Cs(E,!1),J?(J.el=Oe.el,Ce(E,J,W)):J=Oe,se&&Vo(se),(mt=J.props&&J.props.onVnodeBeforeUpdate)&&cn(mt,ye,J,Oe),Cs(E,!0);const gt=Zh(E),Ot=E.subTree;E.subTree=gt,N(Ot,gt,p(Ot.el),M(Ot),E,F,x),J.el=gt.el,Re===null&&rE(E,gt.el),oe&&Lt(oe,F),(mt=J.props&&J.props.onVnodeUpdated)&&Lt(()=>cn(mt,ye,J,Oe),F)}else{let J;const{el:se,props:oe}=w,{bm:ye,m:Oe,parent:Re,root:mt,type:gt}=E,Ot=pr(w);Cs(E,!1),ye&&Vo(ye),!Ot&&(J=oe&&oe.onVnodeBeforeMount)&&cn(J,Re,w),Cs(E,!0);{mt.ce&&mt.ce._def.shadowRoot!==!1&&mt.ce._injectChildStyle(gt);const xt=E.subTree=Zh(E);N(null,xt,S,O,E,F,x),w.el=xt.el}if(Oe&&Lt(Oe,F),!Ot&&(J=oe&&oe.onVnodeMounted)){const xt=w;Lt(()=>cn(J,Re,xt),F)}(w.shapeFlag&256||Re&&pr(Re.vnode)&&Re.vnode.shapeFlag&256)&&E.a&&Lt(E.a,F),E.isMounted=!0,w=S=O=null}};E.scope.on();const j=E.effect=new vp(q);E.scope.off();const U=E.update=j.run.bind(j),re=E.job=j.runIfDirty.bind(j);re.i=E,re.id=E.uid,j.scheduler=()=>Gl(re),Cs(E,!0),U()},Ce=(E,w,S)=>{w.component=E;const O=E.vnode.props;E.vnode=w,E.next=null,oE(E,w.props,O,S),uE(E,w.children,S),Ln(),zh(E),Fn()},we=(E,w,S,O,F,x,W,q,j=!1)=>{const U=E&&E.children,re=E?E.shapeFlag:0,J=w.children,{patchFlag:se,shapeFlag:oe}=w;if(se>0){if(se&128){rn(U,J,S,O,F,x,W,q,j);return}else if(se&256){kt(U,J,S,O,F,x,W,q,j);return}}oe&8?(re&16&&pt(U,F,x),J!==U&&f(S,J)):re&16?oe&16?rn(U,J,S,O,F,x,W,q,j):pt(U,F,x,!0):(re&8&&f(S,""),oe&16&&_(J,S,O,F,x,W,q,j))},kt=(E,w,S,O,F,x,W,q,j)=>{E=E||hr,w=w||hr;const U=E.length,re=w.length,J=Math.min(U,re);let se;for(se=0;se<J;se++){const oe=w[se]=j?ss(w[se]):fn(w[se]);N(E[se],oe,S,null,F,x,W,q,j)}U>re?pt(E,F,x,!0,!1,J):_(w,S,O,F,x,W,q,j,J)},rn=(E,w,S,O,F,x,W,q,j)=>{let U=0;const re=w.length;let J=E.length-1,se=re-1;for(;U<=J&&U<=se;){const oe=E[U],ye=w[U]=j?ss(w[U]):fn(w[U]);if(ai(oe,ye))N(oe,ye,S,null,F,x,W,q,j);else break;U++}for(;U<=J&&U<=se;){const oe=E[J],ye=w[se]=j?ss(w[se]):fn(w[se]);if(ai(oe,ye))N(oe,ye,S,null,F,x,W,q,j);else break;J--,se--}if(U>J){if(U<=se){const oe=se+1,ye=oe<re?w[oe].el:O;for(;U<=se;)N(null,w[U]=j?ss(w[U]):fn(w[U]),S,ye,F,x,W,q,j),U++}}else if(U>se)for(;U<=J;)ot(E[U],F,x,!0),U++;else{const oe=U,ye=U,Oe=new Map;for(U=ye;U<=se;U++){const at=w[U]=j?ss(w[U]):fn(w[U]);at.key!=null&&Oe.set(at.key,U)}let Re,mt=0;const gt=se-ye+1;let Ot=!1,xt=0;const Kt=new Array(gt);for(U=0;U<gt;U++)Kt[U]=0;for(U=oe;U<=J;U++){const at=E[U];if(mt>=gt){ot(at,F,x,!0);continue}let nt;if(at.key!=null)nt=Oe.get(at.key);else for(Re=ye;Re<=se;Re++)if(Kt[Re-ye]===0&&ai(at,w[Re])){nt=Re;break}nt===void 0?ot(at,F,x,!0):(Kt[nt-ye]=U+1,nt>=xt?xt=nt:Ot=!0,N(at,w[nt],S,null,F,x,W,q,j),mt++)}const er=Ot?pE(Kt):hr;for(Re=er.length-1,U=gt-1;U>=0;U--){const at=ye+U,nt=w[at],qr=w[at+1],Is=at+1<re?qr.el||um(qr):O;Kt[U]===0?N(null,nt,S,Is,F,x,W,q,j):Ot&&(Re<0||U!==er[Re]?Vt(nt,S,Is,2):Re--)}}},Vt=(E,w,S,O,F=null)=>{const{el:x,type:W,transition:q,children:j,shapeFlag:U}=E;if(U&6){Vt(E.component.subTree,w,S,O);return}if(U&128){E.suspense.move(w,S,O);return}if(U&64){W.move(E,w,S,ne);return}if(W===lt){s(x,w,S);for(let J=0;J<j.length;J++)Vt(j[J],w,S,O);s(E.anchor,w,S);return}if(W===Ic){G(E,w,S);return}if(O!==2&&U&1&&q)if(O===0)q.beforeEnter(x),s(x,w,S),Lt(()=>q.enter(x),F);else{const{leave:J,delayLeave:se,afterLeave:oe}=q,ye=()=>{E.ctx.isUnmounted?r(x):s(x,w,S)},Oe=()=>{x._isLeaving&&x[Pv](!0),J(x,()=>{ye(),oe&&oe()})};se?se(x,ye,Oe):Oe()}else s(x,w,S)},ot=(E,w,S,O=!1,F=!1)=>{const{type:x,props:W,ref:q,children:j,dynamicChildren:U,shapeFlag:re,patchFlag:J,dirs:se,cacheIndex:oe}=E;if(J===-2&&(F=!1),q!=null&&(Ln(),vi(q,null,S,E,!0),Fn()),oe!=null&&(w.renderCache[oe]=void 0),re&256){w.ctx.deactivate(E);return}const ye=re&1&&se,Oe=!pr(E);let Re;if(Oe&&(Re=W&&W.onVnodeBeforeUnmount)&&cn(Re,w,E),re&6)Gt(E.component,S,O);else{if(re&128){E.suspense.unmount(S,O);return}ye&&Ss(E,null,w,"beforeUnmount"),re&64?E.type.remove(E,w,S,ne,O):U&&!U.hasOnce&&(x!==lt||J>0&&J&64)?pt(U,w,S,!1,!0):(x===lt&&J&384||!F&&re&16)&&pt(j,w,S),O&&Rn(E)}(Oe&&(Re=W&&W.onVnodeUnmounted)||ye)&&Lt(()=>{Re&&cn(Re,w,E),ye&&Ss(E,null,w,"unmounted")},S)},Rn=E=>{const{type:w,el:S,anchor:O,transition:F}=E;if(w===lt){zt(S,O);return}if(w===Ic){z(E);return}const x=()=>{r(S),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(E.shapeFlag&1&&F&&!F.persisted){const{leave:W,delayLeave:q}=F,j=()=>W(S,x);q?q(E.el,x,j):j()}else x()},zt=(E,w)=>{let S;for(;E!==w;)S=g(E),r(E),E=S;r(w)},Gt=(E,w,S)=>{const{bum:O,scope:F,job:x,subTree:W,um:q,m:j,a:U}=E;nf(j),nf(U),O&&Vo(O),F.stop(),x&&(x.flags|=8,ot(W,E,w,S)),q&&Lt(q,w),Lt(()=>{E.isUnmounted=!0},w)},pt=(E,w,S,O=!1,F=!1,x=0)=>{for(let W=x;W<E.length;W++)ot(E[W],w,S,O,F)},M=E=>{if(E.shapeFlag&6)return M(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const w=g(E.anchor||E.el),S=w&&w[Sv];return S?g(S):w};let X=!1;const Q=(E,w,S)=>{let O;E==null?w._vnode&&(ot(w._vnode,null,null,!0),O=w._vnode.component):N(w._vnode||null,E,w,null,null,null,S),w._vnode=E,X||(X=!0,zh(O),Up(),X=!1)},ne={p:N,um:ot,m:Vt,r:Rn,mt:ee,mc:_,pc:we,pbc:R,n:M,o:t};return{render:Q,hydrate:void 0,createApp:Xv(Q)}}function Tc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Cs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function cm(t,e,n=!1){const s=t.children,r=e.children;if(ce(s)&&ce(r))for(let i=0;i<s.length;i++){const o=s[i];let c=r[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[i]=ss(r[i]),c.el=o.el),!n&&c.patchFlag!==-2&&cm(o,c)),c.type===Oa&&(c.patchFlag!==-1?c.el=o.el:c.__elIndex=i+(t.type===lt?1:0)),c.type===Bn&&!c.el&&(c.el=o.el)}}function pE(t){const e=t.slice(),n=[0];let s,r,i,o,c;const l=t.length;for(s=0;s<l;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<h?i=c+1:o=c;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function lm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:lm(e)}function nf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function um(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?um(e.subTree):null}const hm=t=>t.__isSuspense;function mE(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):Iv(t)}const lt=Symbol.for("v-fgt"),Oa=Symbol.for("v-txt"),Bn=Symbol.for("v-cmt"),Ic=Symbol.for("v-stc"),Ti=[];let Ft=null;function le(t=!1){Ti.push(Ft=t?null:[])}function gE(){Ti.pop(),Ft=Ti[Ti.length-1]||null}let Oi=1;function Zo(t,e=!1){Oi+=t,t<0&&Ft&&e&&(Ft.hasOnce=!0)}function fm(t){return t.dynamicChildren=Oi>0?Ft||hr:null,gE(),Oi>0&&Ft&&Ft.push(t),t}function me(t,e,n,s,r,i){return fm(P(t,e,n,s,r,i,!0))}function wr(t,e,n,s,r){return fm(Fe(t,e,n,s,r,!0))}function xi(t){return t?t.__v_isVNode===!0:!1}function ai(t,e){return t.type===e.type&&t.key===e.key}const dm=({key:t})=>t??null,Mo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||It(t)||pe(t)?{i:ft,r:t,k:e,f:!!n}:t:null);function P(t,e=null,n=null,s=0,r=null,i=t===lt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&dm(e),ref:e&&Mo(e),scopeId:$p,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ft};return c?(Xl(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Xe(n)?8:16),Oi>0&&!o&&Ft&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ft.push(l),l}const Fe=_E;function _E(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===jv)&&(t=Bn),xi(t)){const c=Ar(t,e,!0);return n&&Xl(c,n),Oi>0&&!i&&Ft&&(c.shapeFlag&6?Ft[Ft.indexOf(t)]=c:Ft.push(c)),c.patchFlag=-2,c}if(PE(t)&&(t=t.__vccOpts),e){e=yE(e);let{class:c,style:l}=e;c&&!Xe(c)&&(e.class=Er(c)),Ue(l)&&(zl(l)&&!ce(l)&&(l=wt({},l)),e.style=Ca(l))}const o=Xe(t)?1:hm(t)?128:Cv(t)?64:Ue(t)?4:pe(t)?2:0;return P(t,e,n,s,r,o,i,!0)}function yE(t){return t?zl(t)||nm(t)?wt({},t):t:null}function Ar(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:c,transition:l}=t,h=e?vE(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&dm(h),ref:e&&e.ref?n&&i?ce(i)?i.concat(Mo(e)):[i,Mo(e)]:Mo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==lt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ar(t.ssContent),ssFallback:t.ssFallback&&Ar(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Wl(f,l.clone(f)),f}function ut(t=" ",e=0){return Fe(Oa,null,t,e)}function Ds(t="",e=!1){return e?(le(),wr(Bn,null,t)):Fe(Bn,null,t)}function fn(t){return t==null||typeof t=="boolean"?Fe(Bn):ce(t)?Fe(lt,null,t.slice()):xi(t)?ss(t):Fe(Oa,null,String(t))}function ss(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ar(t)}function Xl(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Xl(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!nm(e)?e._ctx=ft:r===3&&ft&&(ft.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:ft},n=32):(e=String(e),s&64?(n=16,e=[ut(e)]):n=8);t.children=e,t.shapeFlag|=n}function vE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Er([e.class,s.class]));else if(r==="style")e.style=Ca([e.style,s.style]);else if(wa(r)){const i=e[r],o=s[r];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function cn(t,e,n,s=null){Tn(t,e,7,[n,s])}const EE=Yp();let TE=0;function IE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||EE,i={uid:TE++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rm(s,r),emitsOptions:Zp(s,r),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:s.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Zv.bind(null,i),t.ce&&t.ce(i),i}let Tt=null;const wE=()=>Tt||ft;let ea,Zc;{const t=Sa(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ea=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),Zc=e("__VUE_SSR_SETTERS__",n=>Mi=n)}const Yi=t=>{const e=Tt;return ea(t),t.scope.on(),()=>{t.scope.off(),ea(e)}},sf=()=>{Tt&&Tt.scope.off(),ea(null)};function pm(t){return t.vnode.shapeFlag&4}let Mi=!1;function AE(t,e=!1,n=!1){e&&Zc(e);const{props:s,children:r}=t.vnode,i=pm(t);iE(t,s,i,e),lE(t,r,n||e);const o=i?RE(t,e):void 0;return e&&Zc(!1),o}function RE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qv);const{setup:s}=n;if(s){Ln();const r=t.setupContext=s.length>1?SE(t):null,i=Yi(t),o=Xi(s,t,0,[t.props,r]),c=hp(o);if(Fn(),i(),(c||t.sp)&&!pr(t)&&qp(t),c){if(o.then(sf,sf),e)return o.then(l=>{rf(t,l)}).catch(l=>{Da(l,t,0)});t.asyncDep=o}else rf(t,o)}else mm(t)}function rf(t,e,n){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ue(e)&&(t.setupState=xp(e)),mm(t)}function mm(t,e,n){const s=t.type;t.render||(t.render=s.render||pn);{const r=Yi(t);Ln();try{zv(t)}finally{Fn(),r()}}}const bE={get(t,e){return vt(t,"get",""),t[e]}};function SE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,bE),slots:t.slots,emit:t.emit,expose:e}}function xa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(xp(fv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ei)return Ei[n](t)},has(e,n){return n in e||n in Ei}})):t.proxy}function CE(t,e=!0){return pe(t)?t.displayName||t.name:t.name||e&&t.__name}function PE(t){return pe(t)&&"__vccOpts"in t}const Ke=(t,e)=>_v(t,e,Mi);function gm(t,e,n){try{Zo(-1);const s=arguments.length;return s===2?Ue(e)&&!ce(e)?xi(e)?Fe(t,null,[e]):Fe(t,e):Fe(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&xi(n)&&(n=[n]),Fe(t,e,n))}finally{Zo(1)}}const kE="3.5.26";let el;const of=typeof window<"u"&&window.trustedTypes;if(of)try{el=of.createPolicy("vue",{createHTML:t=>t})}catch{}const _m=el?t=>el.createHTML(t):t=>t,DE="http://www.w3.org/2000/svg",NE="http://www.w3.org/1998/Math/MathML",Cn=typeof document<"u"?document:null,af=Cn&&Cn.createElement("template"),VE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Cn.createElementNS(DE,t):e==="mathml"?Cn.createElementNS(NE,t):n?Cn.createElement(t,{is:n}):Cn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Cn.createTextNode(t),createComment:t=>Cn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Cn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{af.innerHTML=_m(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const c=af.content;if(s==="svg"||s==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},OE=Symbol("_vtc");function xE(t,e,n){const s=t[OE];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const cf=Symbol("_vod"),ME=Symbol("_vsh"),LE=Symbol(""),FE=/(?:^|;)\s*display\s*:/;function UE(t,e,n){const s=t.style,r=Xe(n);let i=!1;if(n&&!r){if(e)if(Xe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&Lo(s,c,"")}else for(const o in e)n[o]==null&&Lo(s,o,"");for(const o in n)o==="display"&&(i=!0),Lo(s,o,n[o])}else if(r){if(e!==n){const o=s[LE];o&&(n+=";"+o),s.cssText=n,i=FE.test(n)}}else e&&t.removeAttribute("style");cf in t&&(t[cf]=i?s.display:"",t[ME]&&(s.display="none"))}const lf=/\s*!important$/;function Lo(t,e,n){if(ce(n))n.forEach(s=>Lo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=BE(t,e);lf.test(n)?t.setProperty(Qs(s),n.replace(lf,""),"important"):t[s]=n}}const uf=["Webkit","Moz","ms"],wc={};function BE(t,e){const n=wc[e];if(n)return n;let s=jt(e);if(s!=="filter"&&s in t)return wc[e]=s;s=ba(s);for(let r=0;r<uf.length;r++){const i=uf[r]+s;if(i in t)return wc[e]=i}return e}const hf="http://www.w3.org/1999/xlink";function ff(t,e,n,s,r,i=qy(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hf,e.slice(6,e.length)):t.setAttributeNS(hf,e,n):n==null||i&&!mp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":tn(n)?String(n):n)}function df(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?_m(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=mp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function is(t,e,n,s){t.addEventListener(e,n,s)}function $E(t,e,n,s){t.removeEventListener(e,n,s)}const pf=Symbol("_vei");function jE(t,e,n,s,r=null){const i=t[pf]||(t[pf]={}),o=i[e];if(s&&o)o.value=s;else{const[c,l]=HE(e);if(s){const h=i[e]=GE(s,r);is(t,c,h,l)}else o&&($E(t,c,o,l),i[e]=void 0)}}const mf=/(?:Once|Passive|Capture)$/;function HE(t){let e;if(mf.test(t)){e={};let s;for(;s=t.match(mf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Qs(t.slice(2)),e]}let Ac=0;const qE=Promise.resolve(),zE=()=>Ac||(qE.then(()=>Ac=0),Ac=Date.now());function GE(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Tn(KE(s,n.value),e,5,[s])};return n.value=t,n.attached=zE(),n}function KE(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const gf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,WE=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?xE(t,s,o):e==="style"?UE(t,n,s):wa(e)?xl(e)||jE(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QE(t,e,s,o))?(df(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ff(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xe(s))?df(t,jt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),ff(t,e,s,o))};function QE(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&gf(e)&&pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return gf(e)&&Xe(n)?!1:e in t}const Rr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>Vo(e,n):e};function JE(t){t.target.composing=!0}function _f(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mn=Symbol("_assign");function yf(t,e,n){return e&&(t=t.trim()),n&&(t=Fl(t)),t}const XE={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Mn]=Rr(r);const i=s||r.props&&r.props.type==="number";is(t,e?"change":"input",o=>{o.target.composing||t[Mn](yf(t.value,n,i))}),(n||i)&&is(t,"change",()=>{t.value=yf(t.value,n,i)}),e||(is(t,"compositionstart",JE),is(t,"compositionend",_f),is(t,"change",_f))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Mn]=Rr(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?Fl(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},YE={deep:!0,created(t,e,n){t[Mn]=Rr(n),is(t,"change",()=>{const s=t._modelValue,r=ym(t),i=t.checked,o=t[Mn];if(ce(s)){const c=gp(s,r),l=c!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const h=[...s];h.splice(c,1),o(h)}}else if(Aa(s)){const c=new Set(s);i?c.add(r):c.delete(r),o(c)}else o(vm(t,i))})},mounted:vf,beforeUpdate(t,e,n){t[Mn]=Rr(n),vf(t,e,n)}};function vf(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ce(e))r=gp(e,s.props.value)>-1;else if(Aa(e))r=e.has(s.props.value);else{if(e===n)return;r=Tr(e,vm(t,!0))}t.checked!==r&&(t.checked=r)}const Rc={created(t,{value:e},n){t.checked=Tr(e,n.props.value),t[Mn]=Rr(n),is(t,"change",()=>{t[Mn](ym(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Mn]=Rr(s),e!==n&&(t.checked=Tr(e,s.props.value))}};function ym(t){return"_value"in t?t._value:t.value}function vm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ZE=["ctrl","shift","alt","meta"],eT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZE.some(n=>t[`${n}Key`]&&!e.includes(n))},tT=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const c=eT[e[o]];if(c&&c(r,e))return}return t(r,...i)}))},nT=wt({patchProp:WE},VE);let Ef;function sT(){return Ef||(Ef=hE(nT))}const rT=((...t)=>{const e=sT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=oT(s);if(!r)return;const i=e._component;!pe(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,iT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function iT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function oT(t){return Xe(t)?document.querySelector(t):t}const tl=Ne(null),Em=Ne(""),nl=Ne(!1);let Tf=null;const Ao=t=>String(t).padStart(2,"0"),aT=()=>{const t=new Date,e=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(e+540*60*1e3)},cT=t=>{if(!(t instanceof Date))return"...";const e=t.getFullYear(),n=Ao(t.getMonth()+1),s=Ao(t.getDate()),r=Ao(t.getHours()),i=Ao(t.getMinutes());return`${e}. ${n}. ${s}. ${r}:${i}`};function lT(){if(Tf)return;const t=()=>{tl.value=aT(),Em.value=cT(tl.value),nl.value||(nl.value=!0)};t(),Tf=setInterval(t,1e3)}function Tm(){return{kstDate:tl,kstString:Em,isKstTimeReady:nl}}const uT={__name:"App",setup(t){return Kp(()=>{lT()}),(e,n)=>{const s=Vi("router-view");return le(),wr(s)}}};const or=typeof document<"u";function Im(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Im(t.default)}const Pe=Object.assign;function bc(t,e){const n={};for(const s in e){const r=e[s];n[s]=sn(r)?r.map(t):t(r)}return n}const Ii=()=>{},sn=Array.isArray;function If(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const wm=/#/g,fT=/&/g,dT=/\//g,pT=/=/g,mT=/\?/g,Am=/\+/g,gT=/%5B/g,_T=/%5D/g,Rm=/%5E/g,yT=/%60/g,bm=/%7B/g,vT=/%7C/g,Sm=/%7D/g,ET=/%20/g;function Yl(t){return t==null?"":encodeURI(""+t).replace(vT,"|").replace(gT,"[").replace(_T,"]")}function TT(t){return Yl(t).replace(bm,"{").replace(Sm,"}").replace(Rm,"^")}function sl(t){return Yl(t).replace(Am,"%2B").replace(ET,"+").replace(wm,"%23").replace(fT,"%26").replace(yT,"`").replace(bm,"{").replace(Sm,"}").replace(Rm,"^")}function IT(t){return sl(t).replace(pT,"%3D")}function wT(t){return Yl(t).replace(wm,"%23").replace(mT,"%3F")}function AT(t){return wT(t).replace(dT,"%2F")}function Li(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const RT=/\/$/,bT=t=>t.replace(RT,"");function Sc(t,e,n="/"){let s,r={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,c>0?c:e.length),r=t(i.slice(1))),c>=0&&(s=s||e.slice(0,c),o=e.slice(c,e.length)),s=kT(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Li(o)}}function ST(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function wf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function CT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&br(e.matched[s],n.matched[r])&&Cm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function br(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Cm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!PT(t[n],e[n]))return!1;return!0}function PT(t,e){return sn(t)?Af(t,e):sn(e)?Af(e,t):t?.valueOf()===e?.valueOf()}function Af(t,e){return sn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function kT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,c;for(o=0;o<s.length;o++)if(c=s[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Zn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let rl=(function(t){return t.pop="pop",t.push="push",t})({}),Cc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function DT(t){if(!t)if(or){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),bT(t)}const NT=/^[^#]+#/;function VT(t,e){return t.replace(NT,"#")+e}function OT(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Ma=()=>({left:window.scrollX,top:window.scrollY});function xT(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=OT(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rf(t,e){return(history.state?history.state.position-e:-1)+t}const il=new Map;function MT(t,e){il.set(t,e)}function LT(t){const e=il.get(t);return il.delete(t),e}function FT(t){return typeof t=="string"||t&&typeof t=="object"}function Pm(t){return typeof t=="string"||typeof t=="symbol"}let Ge=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const km=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function Sr(t,e){return Pe(new Error,{type:t,[km]:!0},e)}function Sn(t,e){return t instanceof Error&&km in t&&(e==null||!!(t.type&e))}const UT=["params","query","hash"];function BT(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of UT)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function $T(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Am," "),i=r.indexOf("="),o=Li(i<0?r:r.slice(0,i)),c=i<0?null:Li(r.slice(i+1));if(o in e){let l=e[o];sn(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function bf(t){let e="";for(let n in t){const s=t[n];if(n=IT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(sn(s)?s.map(r=>r&&sl(r)):[s&&sl(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function jT(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=sn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const HT=Symbol(""),Sf=Symbol(""),Zl=Symbol(""),Dm=Symbol(""),ol=Symbol("");function ci(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function rs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((c,l)=>{const h=g=>{g===!1?l(Sr(Ge.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?l(g):FT(g)?l(Sr(Ge.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),c())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(g=>l(g))})}function Pc(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Im(l)){const h=(l.__vccOpts||l)[e];h&&i.push(rs(h,n,s,o,c,r))}else{let h=l();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=hT(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const g=(p.__vccOpts||p)[e];return g&&rs(g,n,s,o,c,r)()}))}}return i}function qT(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(h=>br(h,c))?s.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(h=>br(h,l))||r.push(l))}return[n,s,r]}let zT=()=>location.protocol+"//"+location.host;function Nm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(o);return c[0]!=="/"&&(c="/"+c),wf(c,"")}return wf(n,t)+s+r}function GT(t,e,n,s){let r=[],i=[],o=null;const c=({state:g})=>{const y=Nm(t,location),k=n.value,N=e.value;let V=0;if(g){if(n.value=y,e.value=g,o&&o===k){o=null;return}V=N?g.position-N.position:0}else s(y);r.forEach($=>{$(n.value,k,{delta:V,type:rl.pop,direction:V?V>0?Cc.forward:Cc.back:Cc.unknown})})};function l(){o=n.value}function h(g){r.push(g);const y=()=>{const k=r.indexOf(g);k>-1&&r.splice(k,1)};return i.push(y),y}function f(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Pe({},g.state,{scroll:Ma()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:h,destroy:p}}function Cf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Ma():null}}function KT(t){const{history:e,location:n}=window,s={value:Nm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,h,f){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:zT()+t+l;try{e[f?"replaceState":"pushState"](h,"",g),r.value=h}catch(y){console.error(y),n[f?"replace":"assign"](g)}}function o(l,h){i(l,Pe({},e.state,Cf(r.value.back,l,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=l}function c(l,h){const f=Pe({},r.value,e.state,{forward:l,scroll:Ma()});i(f.current,f,!0),i(l,Pe({},Cf(s.value,l,null),{position:f.position+1},h),!1),s.value=l}return{location:s,state:r,push:c,replace:o}}function WT(t){t=DT(t);const e=KT(t),n=GT(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Pe({location:"",base:t,go:s,createHref:VT.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Ns=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ze=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ze||{});const QT={type:Ns.Static,value:""},JT=/[a-zA-Z0-9_]/;function XT(t){if(!t)return[[]];if(t==="/")return[[QT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=Ze.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let c=0,l,h="",f="";function p(){h&&(n===Ze.Static?i.push({type:Ns.Static,value:h}):n===Ze.Param||n===Ze.ParamRegExp||n===Ze.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ns.Param,value:h,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Ze.ParamRegExp){s=n,n=Ze.EscapeNext;continue}switch(n){case Ze.Static:l==="/"?(h&&p(),o()):l===":"?(p(),n=Ze.Param):g();break;case Ze.EscapeNext:g(),n=s;break;case Ze.Param:l==="("?n=Ze.ParamRegExp:JT.test(l)?g():(p(),n=Ze.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Ze.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Ze.ParamRegExpEnd:f+=l;break;case Ze.ParamRegExpEnd:p(),n=Ze.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Ze.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Pf="[^/]+?",YT={sensitive:!1,strict:!1,start:!0,end:!0};var St=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(St||{});const ZT=/[.+*?^${}()[\]/\\]/g;function eI(t,e){const n=Pe({},YT,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[St.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const g=h[p];let y=St.Segment+(n.sensitive?St.BonusCaseSensitive:0);if(g.type===Ns.Static)p||(r+="/"),r+=g.value.replace(ZT,"\\$&"),y+=St.Static;else if(g.type===Ns.Param){const{value:k,repeatable:N,optional:V,regexp:$}=g;i.push({name:k,repeatable:N,optional:V});const H=$||Pf;if(H!==Pf){y+=St.BonusCustomRegExp;try{`${H}`}catch(z){throw new Error(`Invalid custom RegExp for param "${k}" (${H}): `+z.message)}}let G=N?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;p||(G=V&&h.length<2?`(?:/${G})`:"/"+G),V&&(G+="?"),r+=G,y+=St.Dynamic,V&&(y+=St.BonusOptional),N&&(y+=St.BonusRepeatable),H===".*"&&(y+=St.BonusWildcard)}f.push(y)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=St.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function c(h){const f=h.match(o),p={};if(!f)return null;for(let g=1;g<f.length;g++){const y=f[g]||"",k=i[g-1];p[k.name]=y&&k.repeatable?y.split("/"):y}return p}function l(h){let f="",p=!1;for(const g of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const y of g)if(y.type===Ns.Static)f+=y.value;else if(y.type===Ns.Param){const{value:k,repeatable:N,optional:V}=y,$=k in h?h[k]:"";if(sn($)&&!N)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const H=sn($)?$.join("/"):$;if(!H)if(V)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${k}"`);f+=H}}return f||"/"}return{re:o,score:s,keys:i,parse:c,stringify:l}}function tI(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===St.Static+St.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===St.Static+St.Segment?1:-1:0}function Vm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=tI(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(kf(s))return 1;if(kf(r))return-1}return r.length-s.length}function kf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const nI={strict:!1,end:!0,sensitive:!1};function sI(t,e,n){const s=eI(XT(t.path),n),r=Pe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function rI(t,e){const n=[],s=new Map;e=If(nI,e);function r(p){return s.get(p)}function i(p,g,y){const k=!y,N=Nf(p);N.aliasOf=y&&y.record;const V=If(e,p),$=[N];if("alias"in p){const z=typeof p.alias=="string"?[p.alias]:p.alias;for(const he of z)$.push(Nf(Pe({},N,{components:y?y.record.components:N.components,path:he,aliasOf:y?y.record:N})))}let H,G;for(const z of $){const{path:he}=z;if(g&&he[0]!=="/"){const ge=g.record.path,I=ge[ge.length-1]==="/"?"":"/";z.path=g.record.path+(he&&I+he)}if(H=sI(z,g,V),y?y.alias.push(H):(G=G||H,G!==H&&G.alias.push(H),k&&p.name&&!Vf(H)&&o(p.name)),Om(H)&&l(H),N.children){const ge=N.children;for(let I=0;I<ge.length;I++)i(ge[I],H,y&&y.children[I])}y=y||H}return G?()=>{o(G)}:Ii}function o(p){if(Pm(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const g=aI(p,n);n.splice(g,0,p),p.record.name&&!Vf(p)&&s.set(p.record.name,p)}function h(p,g){let y,k={},N,V;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw Sr(Ge.MATCHER_NOT_FOUND,{location:p});V=y.record.name,k=Pe(Df(g.params,y.keys.filter(G=>!G.optional).concat(y.parent?y.parent.keys.filter(G=>G.optional):[]).map(G=>G.name)),p.params&&Df(p.params,y.keys.map(G=>G.name))),N=y.stringify(k)}else if(p.path!=null)N=p.path,y=n.find(G=>G.re.test(N)),y&&(k=y.parse(N),V=y.record.name);else{if(y=g.name?s.get(g.name):n.find(G=>G.re.test(g.path)),!y)throw Sr(Ge.MATCHER_NOT_FOUND,{location:p,currentLocation:g});V=y.record.name,k=Pe({},g.params,p.params),N=y.stringify(k)}const $=[];let H=y;for(;H;)$.unshift(H.record),H=H.parent;return{name:V,path:N,params:k,matched:$,meta:oI($)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:r}}function Df(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Nf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:iI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function iI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Vf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function oI(t){return t.reduce((e,n)=>Pe(e,n.meta),{})}function aI(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Vm(t,e[i])<0?s=i:n=i+1}const r=cI(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function cI(t){let e=t;for(;e=e.parent;)if(Om(e)&&Vm(t,e)===0)return e}function Om({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Of(t){const e=xn(Zl),n=xn(Dm),s=Ke(()=>{const l=be(t.to);return e.resolve(l)}),r=Ke(()=>{const{matched:l}=s.value,{length:h}=l,f=l[h-1],p=n.matched;if(!f||!p.length)return-1;const g=p.findIndex(br.bind(null,f));if(g>-1)return g;const y=xf(l[h-2]);return h>1&&xf(f)===y&&p[p.length-1].path!==y?p.findIndex(br.bind(null,l[h-2])):g}),i=Ke(()=>r.value>-1&&dI(n.params,s.value.params)),o=Ke(()=>r.value>-1&&r.value===n.matched.length-1&&Cm(n.params,s.value.params));function c(l={}){if(fI(l)){const h=e[be(t.replace)?"replace":"push"](be(t.to)).catch(Ii);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Ke(()=>s.value.href),isActive:i,isExactActive:o,navigate:c}}function lI(t){return t.length===1?t[0]:t}const uI=Hp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Of,setup(t,{slots:e}){const n=ka(Of(t)),{options:s}=xn(Zl),r=Ke(()=>({[Mf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Mf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&lI(e.default(n));return t.custom?i:gm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),hI=uI;function fI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function dI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!sn(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function xf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Mf=(t,e,n)=>t??e??n,pI=Hp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=xn(ol),r=Ke(()=>t.route||s.value),i=xn(Sf,0),o=Ke(()=>{let h=be(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),c=Ke(()=>r.value.matched[o.value]);Oo(Sf,Ke(()=>o.value+1)),Oo(HT,c),Oo(ol,r);const l=Ne();return Fs(()=>[l.value,c.value,t.name],([h,f,p],[g,y,k])=>{f&&(f.instances[p]=h,y&&y!==f&&h&&h===g&&(f.leaveGuards.size||(f.leaveGuards=y.leaveGuards),f.updateGuards.size||(f.updateGuards=y.updateGuards))),h&&f&&(!y||!br(f,y)||!g)&&(f.enterCallbacks[p]||[]).forEach(N=>N(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=c.value,g=p&&p.components[f];if(!g)return Lf(n.default,{Component:g,route:h});const y=p.props[f],k=y?y===!0?h.params:typeof y=="function"?y(h):y:null,V=gm(g,Pe({},k,e,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return Lf(n.default,{Component:V,route:h})||V}}});function Lf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const mI=pI;function gI(t){const e=rI(t.routes,t),n=t.parseQuery||$T,s=t.stringifyQuery||bf,r=t.history,i=ci(),o=ci(),c=ci(),l=dv(Zn);let h=Zn;or&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=bc.bind(null,M=>""+M),p=bc.bind(null,AT),g=bc.bind(null,Li);function y(M,X){let Q,ne;return Pm(M)?(Q=e.getRecordMatcher(M),ne=X):ne=M,e.addRoute(ne,Q)}function k(M){const X=e.getRecordMatcher(M);X&&e.removeRoute(X)}function N(){return e.getRoutes().map(M=>M.record)}function V(M){return!!e.getRecordMatcher(M)}function $(M,X){if(X=Pe({},X||l.value),typeof M=="string"){const S=Sc(n,M,X.path),O=e.resolve({path:S.path},X),F=r.createHref(S.fullPath);return Pe(S,O,{params:g(O.params),hash:Li(S.hash),redirectedFrom:void 0,href:F})}let Q;if(M.path!=null)Q=Pe({},M,{path:Sc(n,M.path,X.path).path});else{const S=Pe({},M.params);for(const O in S)S[O]==null&&delete S[O];Q=Pe({},M,{params:p(S)}),X.params=p(X.params)}const ne=e.resolve(Q,X),ve=M.hash||"";ne.params=f(g(ne.params));const E=ST(s,Pe({},M,{hash:TT(ve),path:ne.path})),w=r.createHref(E);return Pe({fullPath:E,hash:ve,query:s===bf?jT(M.query):M.query||{}},ne,{redirectedFrom:void 0,href:w})}function H(M){return typeof M=="string"?Sc(n,M,l.value.path):Pe({},M)}function G(M,X){if(h!==M)return Sr(Ge.NAVIGATION_CANCELLED,{from:X,to:M})}function z(M){return I(M)}function he(M){return z(Pe(H(M),{replace:!0}))}function ge(M,X){const Q=M.matched[M.matched.length-1];if(Q&&Q.redirect){const{redirect:ne}=Q;let ve=typeof ne=="function"?ne(M,X):ne;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=H(ve):{path:ve},ve.params={}),Pe({query:M.query,hash:M.hash,params:ve.path!=null?{}:M.params},ve)}}function I(M,X){const Q=h=$(M),ne=l.value,ve=M.state,E=M.force,w=M.replace===!0,S=ge(Q,ne);if(S)return I(Pe(H(S),{state:typeof S=="object"?Pe({},ve,S.state):ve,force:E,replace:w}),X||Q);const O=Q;O.redirectedFrom=X;let F;return!E&&CT(s,ne,Q)&&(F=Sr(Ge.NAVIGATION_DUPLICATED,{to:O,from:ne}),Vt(ne,ne,!0,!1)),(F?Promise.resolve(F):R(O,ne)).catch(x=>Sn(x)?Sn(x,Ge.NAVIGATION_GUARD_REDIRECT)?x:rn(x):we(x,O,ne)).then(x=>{if(x){if(Sn(x,Ge.NAVIGATION_GUARD_REDIRECT))return I(Pe({replace:w},H(x.to),{state:typeof x.to=="object"?Pe({},ve,x.to.state):ve,force:E}),X||O)}else x=b(O,ne,!0,w,ve);return A(O,ne,x),x})}function _(M,X){const Q=G(M,X);return Q?Promise.reject(Q):Promise.resolve()}function v(M){const X=zt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(M):M()}function R(M,X){let Q;const[ne,ve,E]=qT(M,X);Q=Pc(ne.reverse(),"beforeRouteLeave",M,X);for(const S of ne)S.leaveGuards.forEach(O=>{Q.push(rs(O,M,X))});const w=_.bind(null,M,X);return Q.push(w),pt(Q).then(()=>{Q=[];for(const S of i.list())Q.push(rs(S,M,X));return Q.push(w),pt(Q)}).then(()=>{Q=Pc(ve,"beforeRouteUpdate",M,X);for(const S of ve)S.updateGuards.forEach(O=>{Q.push(rs(O,M,X))});return Q.push(w),pt(Q)}).then(()=>{Q=[];for(const S of E)if(S.beforeEnter)if(sn(S.beforeEnter))for(const O of S.beforeEnter)Q.push(rs(O,M,X));else Q.push(rs(S.beforeEnter,M,X));return Q.push(w),pt(Q)}).then(()=>(M.matched.forEach(S=>S.enterCallbacks={}),Q=Pc(E,"beforeRouteEnter",M,X,v),Q.push(w),pt(Q))).then(()=>{Q=[];for(const S of o.list())Q.push(rs(S,M,X));return Q.push(w),pt(Q)}).catch(S=>Sn(S,Ge.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function A(M,X,Q){c.list().forEach(ne=>v(()=>ne(M,X,Q)))}function b(M,X,Q,ne,ve){const E=G(M,X);if(E)return E;const w=X===Zn,S=or?history.state:{};Q&&(ne||w?r.replace(M.fullPath,Pe({scroll:w&&S&&S.scroll},ve)):r.push(M.fullPath,ve)),l.value=M,Vt(M,X,Q,w),rn()}let T;function ee(){T||(T=r.listen((M,X,Q)=>{if(!Gt.listening)return;const ne=$(M),ve=ge(ne,Gt.currentRoute.value);if(ve){I(Pe(ve,{replace:!0,force:!0}),ne).catch(Ii);return}h=ne;const E=l.value;or&&MT(Rf(E.fullPath,Q.delta),Ma()),R(ne,E).catch(w=>Sn(w,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?w:Sn(w,Ge.NAVIGATION_GUARD_REDIRECT)?(I(Pe(H(w.to),{force:!0}),ne).then(S=>{Sn(S,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===rl.pop&&r.go(-1,!1)}).catch(Ii),Promise.reject()):(Q.delta&&r.go(-Q.delta,!1),we(w,ne,E))).then(w=>{w=w||b(ne,E,!1),w&&(Q.delta&&!Sn(w,Ge.NAVIGATION_CANCELLED)?r.go(-Q.delta,!1):Q.type===rl.pop&&Sn(w,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(ne,E,w)}).catch(Ii)}))}let Z=ci(),Se=ci(),Ce;function we(M,X,Q){rn(M);const ne=Se.list();return ne.length?ne.forEach(ve=>ve(M,X,Q)):console.error(M),Promise.reject(M)}function kt(){return Ce&&l.value!==Zn?Promise.resolve():new Promise((M,X)=>{Z.add([M,X])})}function rn(M){return Ce||(Ce=!M,ee(),Z.list().forEach(([X,Q])=>M?Q(M):X()),Z.reset()),M}function Vt(M,X,Q,ne){const{scrollBehavior:ve}=t;if(!or||!ve)return Promise.resolve();const E=!Q&&LT(Rf(M.fullPath,0))||(ne||!Q)&&history.state&&history.state.scroll||null;return Lp().then(()=>ve(M,X,E)).then(w=>w&&xT(w)).catch(w=>we(w,M,X))}const ot=M=>r.go(M);let Rn;const zt=new Set,Gt={currentRoute:l,listening:!0,addRoute:y,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:N,resolve:$,options:t,push:z,replace:he,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Se.add,isReady:kt,install(M){M.component("RouterLink",hI),M.component("RouterView",mI),M.config.globalProperties.$router=Gt,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>be(l)}),or&&!Rn&&l.value===Zn&&(Rn=!0,z(r.location).catch(ne=>{}));const X={};for(const ne in Zn)Object.defineProperty(X,ne,{get:()=>l.value[ne],enumerable:!0});M.provide(Zl,Gt),M.provide(Dm,Vp(X)),M.provide(ol,l);const Q=M.unmount;zt.add(M),M.unmount=function(){zt.delete(M),zt.size<1&&(h=Zn,T&&T(),T=null,l.value=Zn,Rn=!1,Ce=!1),Q()}}};function pt(M){return M.reduce((X,Q)=>X.then(()=>v(Q)),Promise.resolve())}return Gt}const _I=()=>{};var Ff={};const xm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},yI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],c=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,c=o?t[r+1]:0,l=r+2<t.length,h=l?t[r+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,y=h&63;l||(y=64,o||(g=64)),s.push(n[f],n[p],n[g],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||c==null||h==null||p==null)throw new vI;const g=i<<2|c>>4;if(s.push(g),h!==64){const y=c<<4&240|h>>2;if(s.push(y),p!==64){const k=h<<6&192|p;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EI=function(t){const e=xm(t);return Mm.encodeByteArray(e,!0)},ta=function(t){return EI(t).replace(/\./g,"")},Lm=function(t){try{return Mm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const II=()=>TI().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof Ff>"u")return;const t=Ff.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lm(t[1]);return e&&JSON.parse(e)},La=()=>{try{return _I()||II()||wI()||AI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fm=t=>La()?.emulatorHosts?.[t],RI=t=>{const e=Fm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Um=()=>La()?.config,Bm=t=>La()?.[`_${t}`];class bI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $m(t){return(await fetch(t,{credentials:"include"})).ok}function SI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ta(JSON.stringify(n)),ta(JSON.stringify(o)),""].join(".")}const wi={};function CI(){const t={prod:[],emulator:[]};for(const e of Object.keys(wi))wi[e]?t.emulator.push(e):t.prod.push(e);return t}function PI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Uf=!1;function jm(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||wi[t]===e||wi[t]||Uf)return;wi[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=CI().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Uf=!0,o()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=PI(s),y=n("text"),k=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),V=document.getElementById(N)||document.createElement("a"),$=n("preprendIcon"),H=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const G=g.element;c(G),f(V,N);const z=h();l(H,$),G.append(H,k,V,z),document.body.appendChild(G)}i?(k.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function DI(){const t=La()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xI(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MI(){return!DI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const UI="FirebaseError";class Gn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=UI,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zi.prototype.create)}}class Zi{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?BI(i,s):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Gn(r,c,s)}}function BI(t,e){return t.replace($I,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const $I=/\{\$([^}]+)}/g;function jI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Bf(i)&&Bf(o)){if(!Hs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Bf(t){return t!==null&&typeof t=="object"}function eo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function HI(t,e){const n=new qI(t,e);return n.subscribe.bind(n)}class qI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");zI(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=kc),r.error===void 0&&(r.error=kc),r.complete===void 0&&(r.complete=kc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kc(){}function Ht(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ks="[DEFAULT]";class GI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new bI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WI(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);s===c&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:KI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KI(t){return t===ks?void 0:t}function WI(t){return t.instantiationMode==="EAGER"}class QI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const JI={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},XI=Ee.INFO,YI={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},ZI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=YI[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eu{constructor(e){this.name=e,this._logLevel=XI,this._logHandler=ZI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const ew=(t,e)=>e.some(n=>t instanceof n);let $f,jf;function tw(){return $f||($f=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nw(){return jf||(jf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hm=new WeakMap,al=new WeakMap,qm=new WeakMap,Dc=new WeakMap,tu=new WeakMap;function sw(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hm.set(n,t)}).catch(()=>{}),tu.set(e,t),e}function rw(t){if(al.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});al.set(t,e)}let cl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return al.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iw(t){cl=t(cl)}function ow(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Nc(this),e,...n);return qm.set(s,e.sort?e.sort():[e]),hs(s)}:nw().includes(t)?function(...e){return t.apply(Nc(this),e),hs(Hm.get(this))}:function(...e){return hs(t.apply(Nc(this),e))}}function aw(t){return typeof t=="function"?ow(t):(t instanceof IDBTransaction&&rw(t),ew(t,tw())?new Proxy(t,cl):t)}function hs(t){if(t instanceof IDBRequest)return sw(t);if(Dc.has(t))return Dc.get(t);const e=aw(t);return e!==t&&(Dc.set(t,e),tu.set(e,t)),e}const Nc=t=>tu.get(t);function cw(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),c=hs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const lw=["get","getKey","getAll","getAllKeys","count"],uw=["put","add","delete","clear"],Vc=new Map;function Hf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vc.get(e))return Vc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=uw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||lw.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,r?"readwrite":"readonly");let h=l.store;return s&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),r&&l.done]))[0]};return Vc.set(e,i),i}iw(t=>({...t,get:(e,n,s)=>Hf(e,n)||t.get(e,n,s),has:(e,n)=>!!Hf(e,n)||t.has(e,n)}));class hw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fw(t){return t.getComponent()?.type==="VERSION"}const ll="@firebase/app",qf="0.14.6";const $n=new eu("@firebase/app"),dw="@firebase/app-compat",pw="@firebase/analytics-compat",mw="@firebase/analytics",gw="@firebase/app-check-compat",_w="@firebase/app-check",yw="@firebase/auth",vw="@firebase/auth-compat",Ew="@firebase/database",Tw="@firebase/data-connect",Iw="@firebase/database-compat",ww="@firebase/functions",Aw="@firebase/functions-compat",Rw="@firebase/installations",bw="@firebase/installations-compat",Sw="@firebase/messaging",Cw="@firebase/messaging-compat",Pw="@firebase/performance",kw="@firebase/performance-compat",Dw="@firebase/remote-config",Nw="@firebase/remote-config-compat",Vw="@firebase/storage",Ow="@firebase/storage-compat",xw="@firebase/firestore",Mw="@firebase/ai",Lw="@firebase/firestore-compat",Fw="firebase",Uw="12.6.0";const ul="[DEFAULT]",Bw={[ll]:"fire-core",[dw]:"fire-core-compat",[mw]:"fire-analytics",[pw]:"fire-analytics-compat",[_w]:"fire-app-check",[gw]:"fire-app-check-compat",[yw]:"fire-auth",[vw]:"fire-auth-compat",[Ew]:"fire-rtdb",[Tw]:"fire-data-connect",[Iw]:"fire-rtdb-compat",[ww]:"fire-fn",[Aw]:"fire-fn-compat",[Rw]:"fire-iid",[bw]:"fire-iid-compat",[Sw]:"fire-fcm",[Cw]:"fire-fcm-compat",[Pw]:"fire-perf",[kw]:"fire-perf-compat",[Dw]:"fire-rc",[Nw]:"fire-rc-compat",[Vw]:"fire-gcs",[Ow]:"fire-gcs-compat",[xw]:"fire-fst",[Lw]:"fire-fst-compat",[Mw]:"fire-vertex","fire-js":"fire-js",[Fw]:"fire-js-all"};const na=new Map,$w=new Map,hl=new Map;function zf(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cr(t){const e=t.name;if(hl.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;hl.set(e,t);for(const n of na.values())zf(n,t);for(const n of $w.values())zf(n,t);return!0}function nu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t==null?!1:t.settings!==void 0}const jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Zi("app","Firebase",jw);class Hw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}const Fr=Uw;function zm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ul,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw fs.create("bad-app-name",{appName:String(r)});if(n||(n=Um()),!n)throw fs.create("no-options");const i=na.get(r);if(i){if(Hs(n,i.options)&&Hs(s,i.config))return i;throw fs.create("duplicate-app",{appName:r})}const o=new QI(r);for(const l of hl.values())o.addComponent(l);const c=new Hw(n,s,o);return na.set(r,c),c}function Gm(t=ul){const e=na.get(t);if(!e&&t===ul&&Um())return zm();if(!e)throw fs.create("no-app",{appName:t});return e}function ds(t,e,n){let s=Bw[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(o.join(" "));return}Cr(new qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const qw="firebase-heartbeat-database",zw=1,Fi="firebase-heartbeat-store";let Oc=null;function Km(){return Oc||(Oc=cw(qw,zw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fi)}catch(n){console.warn(n)}}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),Oc}async function Gw(t){try{const n=(await Km()).transaction(Fi),s=await n.objectStore(Fi).get(Wm(t));return await n.done,s}catch(e){if(e instanceof Gn)$n.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e?.message});$n.warn(n.message)}}}async function Gf(t,e){try{const s=(await Km()).transaction(Fi,"readwrite");await s.objectStore(Fi).put(e,Wm(t)),await s.done}catch(n){if(n instanceof Gn)$n.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n?.message});$n.warn(s.message)}}}function Wm(t){return`${t.name}!${t.options.appId}`}const Kw=1024,Ww=30;class Qw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Ww){const r=Yw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$n.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kf(),{heartbeatsToSend:n,unsentEntries:s}=Jw(this._heartbeatsCache.heartbeats),r=ta(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return $n.warn(e),""}}}function Kf(){return new Date().toISOString().substring(0,10)}function Jw(t,e=Kw){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Wf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Wf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Xw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wf(t){return ta(JSON.stringify({version:2,heartbeats:t})).length}function Yw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Zw(t){Cr(new qs("platform-logger",e=>new hw(e),"PRIVATE")),Cr(new qs("heartbeat",e=>new Qw(e),"PRIVATE")),ds(ll,qf,t),ds(ll,qf,"esm2020"),ds("fire-js","")}Zw("");function Qm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eA=Qm,Jm=new Zi("auth","Firebase",Qm());const sa=new eu("@firebase/auth");function tA(t,...e){sa.logLevel<=Ee.WARN&&sa.warn(`Auth (${Fr}): ${t}`,...e)}function Fo(t,...e){sa.logLevel<=Ee.ERROR&&sa.error(`Auth (${Fr}): ${t}`,...e)}function In(t,...e){throw ru(t,...e)}function en(t,...e){return ru(t,...e)}function su(t,e,n){const s={...eA(),[e]:n};return new Zi("auth","Firebase",s).create(e,{appName:t.name})}function Us(t){return su(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&In(t,"argument-error"),su(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ru(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Jm.create(t,...e)}function ue(t,e,...n){if(!t)throw ru(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fo(e),new Error(e)}function jn(t,e){t||Vn(e)}function fl(){return typeof self<"u"&&self.location?.href||""}function sA(){return Qf()==="http:"||Qf()==="https:"}function Qf(){return typeof self<"u"&&self.location?.protocol||null}function rA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sA()||VI()||"connection"in navigator)?navigator.onLine:!0}function iA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class to{constructor(e,n){this.shortDelay=e,this.longDelay=n,jn(n>e,"Short delay should be less than long delay!"),this.isMobile=kI()||OI()}get(){return rA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function iu(t,e){jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Xm{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cA=new to(3e4,6e4);function ou(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ur(t,e,n,s,r={}){return Ym(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const c=eo({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:l,...i};return NI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(h.credentials="include"),Xm.fetch()(await Zm(t,t.config.apiHost,n,c),h)})}async function Ym(t,e,n){t._canInitEmulator=!1;const s={...oA,...e};try{const r=new uA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ro(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ro(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ro(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ro(t,"user-disabled",o);const f=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw su(t,f,h);In(t,f)}}catch(r){if(r instanceof Gn)throw r;In(t,"network-request-failed",{message:String(r)})}}async function lA(t,e,n,s,r={}){const i=await Ur(t,e,n,s,r);return"mfaPendingCredential"in i&&In(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Zm(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?iu(t.config,r):`${t.config.apiScheme}://${r}`;return aA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class uA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(en(this.auth,"network-request-failed")),cA.get())})}}function Ro(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=en(t,e,s);return r.customData._tokenResponse=n,r}async function hA(t,e){return Ur(t,"POST","/v1/accounts:delete",e)}async function ra(t,e){return Ur(t,"POST","/v1/accounts:lookup",e)}function Ai(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fA(t,e=!1){const n=Ht(t),s=await n.getIdToken(e),r=au(s);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Ai(xc(r.auth_time)),issuedAtTime:Ai(xc(r.iat)),expirationTime:Ai(xc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function xc(t){return Number(t)*1e3}function au(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Fo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Lm(n);return r?JSON.parse(r):(Fo("Failed to decode base64 JWT payload"),null)}catch(r){return Fo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Jf(t){const e=au(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Gn&&dA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function dA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class pA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class dl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ia(t){const e=t.auth,n=await t.getIdToken(),s=await Ui(t,ra(e,{idToken:n}));ue(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?eg(r.providerUserInfo):[],o=gA(t.providerData,i),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,h=c?l:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new dl(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function mA(t){const e=Ht(t);await ia(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function eg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _A(t,e){const n=await Ym(t,{},async()=>{const s=eo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Zm(t,r,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:s};return t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(l.credentials="include"),Xm.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yA(t,e){return Ur(t,"POST","/v2/accounts:revokeToken",ou(t,e))}class gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=Jf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await _A(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new gr;return s&&(ue(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gr,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function es(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xt{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new pA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new dl(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fA(this,e)}reload(){return mA(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ia(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await Ui(this,hA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:k,stsTokenManager:N}=n;ue(p&&N,e,"internal-error");const V=gr.fromJSON(this.name,N);ue(typeof p=="string",e,"internal-error"),es(s,e.name),es(r,e.name),ue(typeof g=="boolean",e,"internal-error"),ue(typeof y=="boolean",e,"internal-error"),es(i,e.name),es(o,e.name),es(c,e.name),es(l,e.name),es(h,e.name),es(f,e.name);const $=new Xt({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:V,createdAt:h,lastLoginAt:f});return k&&Array.isArray(k)&&($.providerData=k.map(H=>({...H}))),l&&($._redirectEventId=l),$}static async _fromIdTokenResponse(e,n,s=!1){const r=new gr;r.updateFromServerResponse(n);const i=new Xt({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ia(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?eg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,c=new gr;c.updateFromIdToken(s);const l=new Xt({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new dl(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,h),l}}const Xf=new Map;function On(t){jn(t instanceof Function,"Expected a class definition");let e=Xf.get(t);return e?(jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xf.set(t,e),e)}class tg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tg.type="NONE";const Yf=tg;function Uo(t,e,n){return`firebase:${t}:${e}:${n}`}class _r{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Uo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Uo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ra(this.auth,{idToken:e}).catch(()=>{});return n?Xt._fromGetAccountInfoResponse(this.auth,n,e):null}return Xt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new _r(On(Yf),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||On(Yf);const o=Uo(s,e.config.apiKey,e.name);let c=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const g=await ra(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Xt._fromGetAccountInfoResponse(e,g,f)}else p=Xt._fromJSON(e,f);h!==i&&(c=p),i=h;break}}catch{}const l=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new _r(i,e,s):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new _r(i,e,s))}}function Zf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ig(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ng(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ag(e))return"Blackberry";if(cg(e))return"Webos";if(sg(e))return"Safari";if((e.includes("chrome/")||rg(e))&&!e.includes("edge/"))return"Chrome";if(og(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function ng(t=At()){return/firefox\//i.test(t)}function sg(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rg(t=At()){return/crios\//i.test(t)}function ig(t=At()){return/iemobile/i.test(t)}function og(t=At()){return/android/i.test(t)}function ag(t=At()){return/blackberry/i.test(t)}function cg(t=At()){return/webos/i.test(t)}function cu(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vA(t=At()){return cu(t)&&!!window.navigator?.standalone}function EA(){return xI()&&document.documentMode===10}function lg(t=At()){return cu(t)||og(t)||cg(t)||ag(t)||/windows phone/i.test(t)||ig(t)}function ug(t,e=[]){let n;switch(t){case"Browser":n=Zf(At());break;case"Worker":n=`${Zf(At())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fr}/${s}`}class TA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function IA(t,e={}){return Ur(t,"GET","/v2/passwordPolicy",ou(t,e))}const wA=6;class AA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class RA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ed(this),this.idTokenSubscription=new ed(this),this.beforeStateQueue=new TA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _r.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ra(this,{idToken:e}),s=await Xt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ia(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(Us(this));const n=e?Ht(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IA(this),n=new AA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zi("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await _r.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ug(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fa(t){return Ht(t)}class ed{constructor(e){this.auth=e,this.observer=null,this.addObserver=HI(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bA(t){lu=t}function SA(t){return lu.loadJS(t)}function CA(){return lu.gapiScript}function PA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function kA(t,e){const n=nu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Hs(i,e??{}))return r;In(r,"already-initialized")}return n.initialize({options:e})}function DA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(On);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function NA(t,e,n){const s=Fa(t);ue(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=hg(e),{host:o,port:c}=VA(e),l=c===null?"":`:${c}`,h={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ue(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ue(Hs(h,s.config.emulator)&&Hs(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Lr(o)?($m(`${i}//${o}${l}`),jm("Auth",!0)):OA()}function hg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VA(t){const e=hg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:td(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:td(o)}}}function td(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function yr(t,e){return lA(t,"POST","/v1/accounts:signInWithIdp",ou(t,e))}const xA="http://localhost";class zs extends fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new zs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,yr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}buildRequest(){const e={requestUri:xA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eo(n)}return e}}class uu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class no extends uu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class os extends no{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";class Dn extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Dn.credential(n,s)}catch{return null}}}Dn.GOOGLE_SIGN_IN_METHOD="google.com";Dn.PROVIDER_ID="google.com";class as extends no{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";class cs extends no{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Xt._fromIdTokenResponse(e,s,r),o=nd(s);return new Pr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=nd(s);return new Pr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function nd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class oa extends Gn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,oa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new oa(e,n,s,r)}}function dg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?oa._fromErrorAndOperation(t,i,e,s):i})}async function MA(t,e,n=!1){const s=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pr._forOperation(t,"link",s)}async function LA(t,e,n=!1){const{auth:s}=t;if(Qt(s.app))return Promise.reject(Us(s));const r="reauthenticate";try{const i=await Ui(t,dg(s,r,e,t),n);ue(i.idToken,s,"internal-error");const o=au(i.idToken);ue(o,s,"internal-error");const{sub:c}=o;return ue(t.uid===c,s,"user-mismatch"),Pr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&In(s,"user-mismatch"),i}}async function FA(t,e,n=!1){if(Qt(t.app))return Promise.reject(Us(t));const s="signIn",r=await dg(t,s,e),i=await Pr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function UA(t,e,n,s){return Ht(t).onIdTokenChanged(e,n,s)}function BA(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function $A(t,e,n,s){return Ht(t).onAuthStateChanged(e,n,s)}function jA(t){return Ht(t).signOut()}const aa="__sak";class pg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HA=1e3,qA=10;class mg extends pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);EA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,qA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mg.type="LOCAL";const zA=mg;class gg extends pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gg.type="SESSION";const _g=gg;function GA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ua(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(o).map(async h=>h(n.origin,i)),l=await GA(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ua.receivers=[];function hu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class KA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const h=hu("",20);r.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function mn(){return window}function WA(t){mn().location.href=t}function yg(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function QA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JA(){return navigator?.serviceWorker?.controller||null}function XA(){return yg()?self:null}const vg="firebaseLocalStorageDb",YA=1,ca="firebaseLocalStorage",Eg="fbase_key";class so{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ba(t,e){return t.transaction([ca],e?"readwrite":"readonly").objectStore(ca)}function ZA(){const t=indexedDB.deleteDatabase(vg);return new so(t).toPromise()}function pl(){const t=indexedDB.open(vg,YA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ca,{keyPath:Eg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ca)?e(s):(s.close(),await ZA(),e(await pl()))})})}async function sd(t,e,n){const s=Ba(t,!0).put({[Eg]:e,value:n});return new so(s).toPromise()}async function eR(t,e){const n=Ba(t,!1).get(e),s=await new so(n).toPromise();return s===void 0?null:s.value}function rd(t,e){const n=Ba(t,!0).delete(e);return new so(n).toPromise()}const tR=800,nR=3;class Tg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>nR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ua._getInstance(XA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QA(),!this.activeServiceWorker)return;this.sender=new KA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pl();return await sd(e,aa,"1"),await rd(e,aa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>sd(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>eR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Ba(r,!1).getAll();return new so(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tg.type="LOCAL";const sR=Tg;new to(3e4,6e4);function Ig(t,e){return e?On(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class fu extends fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rR(t){return FA(t.auth,new fu(t),t.bypassAuthState)}function iR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),LA(n,new fu(t),t.bypassAuthState)}async function oR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),MA(n,new fu(t),t.bypassAuthState)}class wg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rR;case"linkViaPopup":case"linkViaRedirect":return oR;case"reauthViaPopup":case"reauthViaRedirect":return iR;default:In(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aR=new to(2e3,1e4);async function cR(t,e,n){if(Qt(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));const s=Fa(t);nA(t,e,uu);const r=Ig(s,n);return new Vs(s,"signInViaPopup",e,r).executeNotNull()}class Vs extends wg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){jn(this.filter.length===1,"Popup operations only handle one event");const e=hu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aR.get())};e()}}Vs.currentPopupAction=null;const lR="pendingRedirect",Bo=new Map;class uR extends wg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bo.get(this.auth._key());if(!e){try{const s=await hR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bo.set(this.auth._key(),e)}return this.bypassAuthState||Bo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hR(t,e){const n=pR(e),s=dR(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function fR(t,e){Bo.set(t._key(),e)}function dR(t){return On(t._redirectPersistence)}function pR(t){return Uo(lR,t.config.apiKey,t.name)}async function mR(t,e,n=!1){if(Qt(t.app))return Promise.reject(Us(t));const s=Fa(t),r=Ig(s,e),o=await new uR(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const gR=600*1e3;class _R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ag(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(en(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gR&&this.cachedEventUids.clear(),this.cachedEventUids.has(id(e))}saveEventToCache(e){this.cachedEventUids.add(id(e)),this.lastProcessedEventTime=Date.now()}}function id(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ag({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function yR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ag(t);default:return!1}}async function vR(t,e={}){return Ur(t,"GET","/v1/projects",e)}const ER=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TR=/^https?/;async function IR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vR(t);for(const n of e)try{if(wR(n))return}catch{}In(t,"unauthorized-domain")}function wR(t){const e=fl(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!TR.test(n))return!1;if(ER.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const AR=new to(3e4,6e4);function od(){const t=mn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RR(t){return new Promise((e,n)=>{function s(){od(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{od(),n(en(t,"network-request-failed"))},timeout:AR.get()})}if(mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mn().gapi?.load)s();else{const r=PA("iframefcb");return mn()[r]=()=>{gapi.load?s():n(en(t,"network-request-failed"))},SA(`${CA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw $o=null,e})}let $o=null;function bR(t){return $o=$o||RR(t),$o}const SR=new to(5e3,15e3),CR="__/auth/iframe",PR="emulator/auth/iframe",kR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NR(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?iu(e,PR):`https://${t.config.authDomain}/${CR}`,s={apiKey:e.apiKey,appName:t.name,v:Fr},r=DR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${eo(s).slice(1)}`}async function VR(t){const e=await bR(t),n=mn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:NR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=en(t,"network-request-failed"),c=mn().setTimeout(()=>{i(o)},SR.get());function l(){mn().clearTimeout(c),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const OR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,MR=600,LR="_blank",FR="http://localhost";class ad{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UR(t,e,n,s=xR,r=MR){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l={...OR,width:s.toString(),height:r.toString(),top:i,left:o},h=At().toLowerCase();n&&(c=rg(h)?LR:n),ng(h)&&(e=e||FR,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[y,k])=>`${g}${y}=${k},`,"");if(vA(h)&&c!=="_self")return BR(e||"",c),new ad(null);const p=window.open(e||"",c,f);ue(p,t,"popup-blocked");try{p.focus()}catch{}return new ad(p)}function BR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const $R="__/auth/handler",jR="emulator/auth/handler",HR=encodeURIComponent("fac");async function cd(t,e,n,s,r,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Fr,eventId:r};if(e instanceof uu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof no){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),h=l?`#${HR}=${encodeURIComponent(l)}`:"";return`${qR(t)}?${eo(c).slice(1)}${h}`}function qR({config:t}){return t.emulator?iu(t,jR):`https://${t.authDomain}/${$R}`}const Mc="webStorageSupport";class zR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_g,this._completeRedirectFn=mR,this._overrideRedirectResult=fR}async _openPopup(e,n,s,r){jn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await cd(e,n,s,fl(),r);return UR(e,i,hu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await cd(e,n,s,fl(),r);return WA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(jn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await VR(e),s=new _R(e);return n.register("authEvent",r=>(ue(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mc,{type:Mc},r=>{const i=r?.[0]?.[Mc];i!==void 0&&n(!!i),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lg()||sg()||cu()}}const GR=zR;var ld="@firebase/auth",ud="1.12.0";class KR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function WR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QR(t){Cr(new qs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ug(t)},h=new RA(s,r,i,l);return DA(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Cr(new qs("auth-internal",e=>{const n=Fa(e.getProvider("auth").getImmediate());return(s=>new KR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(ld,ud,WR(t)),ds(ld,ud,"esm2020")}const JR=300,XR=Bm("authIdTokenMaxAge")||JR;let hd=null;const YR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>XR)return;const r=n?.token;hd!==r&&(hd=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ZR(t=Gm()){const e=nu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kA(t,{popupRedirectResolver:GR,persistence:[sR,zA,_g]}),s=Bm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=YR(i.toString());BA(n,o,()=>o(n.currentUser)),UA(n,c=>o(c))}}const r=Fm("auth");return r&&NA(n,`http://${r}`),n}function eb(){return document.getElementsByTagName("head")?.[0]??document}bA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=en("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",eb().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QR("Browser");var tb="firebase",nb="12.7.0";ds(tb,nb,"app");var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ps,Rg;(function(){var t;function e(I,_){function v(){}v.prototype=_.prototype,I.F=_.prototype,I.prototype=new v,I.prototype.constructor=I,I.D=function(R,A,b){for(var T=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)T[ee-2]=arguments[ee];return _.prototype[A].apply(R,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,v){v||(v=0);const R=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)R[A]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(A=0;A<16;++A)R[A]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=I.g[0],v=I.g[1],A=I.g[2];let b=I.g[3],T;T=_+(b^v&(A^b))+R[0]+3614090360&4294967295,_=v+(T<<7&4294967295|T>>>25),T=b+(A^_&(v^A))+R[1]+3905402710&4294967295,b=_+(T<<12&4294967295|T>>>20),T=A+(v^b&(_^v))+R[2]+606105819&4294967295,A=b+(T<<17&4294967295|T>>>15),T=v+(_^A&(b^_))+R[3]+3250441966&4294967295,v=A+(T<<22&4294967295|T>>>10),T=_+(b^v&(A^b))+R[4]+4118548399&4294967295,_=v+(T<<7&4294967295|T>>>25),T=b+(A^_&(v^A))+R[5]+1200080426&4294967295,b=_+(T<<12&4294967295|T>>>20),T=A+(v^b&(_^v))+R[6]+2821735955&4294967295,A=b+(T<<17&4294967295|T>>>15),T=v+(_^A&(b^_))+R[7]+4249261313&4294967295,v=A+(T<<22&4294967295|T>>>10),T=_+(b^v&(A^b))+R[8]+1770035416&4294967295,_=v+(T<<7&4294967295|T>>>25),T=b+(A^_&(v^A))+R[9]+2336552879&4294967295,b=_+(T<<12&4294967295|T>>>20),T=A+(v^b&(_^v))+R[10]+4294925233&4294967295,A=b+(T<<17&4294967295|T>>>15),T=v+(_^A&(b^_))+R[11]+2304563134&4294967295,v=A+(T<<22&4294967295|T>>>10),T=_+(b^v&(A^b))+R[12]+1804603682&4294967295,_=v+(T<<7&4294967295|T>>>25),T=b+(A^_&(v^A))+R[13]+4254626195&4294967295,b=_+(T<<12&4294967295|T>>>20),T=A+(v^b&(_^v))+R[14]+2792965006&4294967295,A=b+(T<<17&4294967295|T>>>15),T=v+(_^A&(b^_))+R[15]+1236535329&4294967295,v=A+(T<<22&4294967295|T>>>10),T=_+(A^b&(v^A))+R[1]+4129170786&4294967295,_=v+(T<<5&4294967295|T>>>27),T=b+(v^A&(_^v))+R[6]+3225465664&4294967295,b=_+(T<<9&4294967295|T>>>23),T=A+(_^v&(b^_))+R[11]+643717713&4294967295,A=b+(T<<14&4294967295|T>>>18),T=v+(b^_&(A^b))+R[0]+3921069994&4294967295,v=A+(T<<20&4294967295|T>>>12),T=_+(A^b&(v^A))+R[5]+3593408605&4294967295,_=v+(T<<5&4294967295|T>>>27),T=b+(v^A&(_^v))+R[10]+38016083&4294967295,b=_+(T<<9&4294967295|T>>>23),T=A+(_^v&(b^_))+R[15]+3634488961&4294967295,A=b+(T<<14&4294967295|T>>>18),T=v+(b^_&(A^b))+R[4]+3889429448&4294967295,v=A+(T<<20&4294967295|T>>>12),T=_+(A^b&(v^A))+R[9]+568446438&4294967295,_=v+(T<<5&4294967295|T>>>27),T=b+(v^A&(_^v))+R[14]+3275163606&4294967295,b=_+(T<<9&4294967295|T>>>23),T=A+(_^v&(b^_))+R[3]+4107603335&4294967295,A=b+(T<<14&4294967295|T>>>18),T=v+(b^_&(A^b))+R[8]+1163531501&4294967295,v=A+(T<<20&4294967295|T>>>12),T=_+(A^b&(v^A))+R[13]+2850285829&4294967295,_=v+(T<<5&4294967295|T>>>27),T=b+(v^A&(_^v))+R[2]+4243563512&4294967295,b=_+(T<<9&4294967295|T>>>23),T=A+(_^v&(b^_))+R[7]+1735328473&4294967295,A=b+(T<<14&4294967295|T>>>18),T=v+(b^_&(A^b))+R[12]+2368359562&4294967295,v=A+(T<<20&4294967295|T>>>12),T=_+(v^A^b)+R[5]+4294588738&4294967295,_=v+(T<<4&4294967295|T>>>28),T=b+(_^v^A)+R[8]+2272392833&4294967295,b=_+(T<<11&4294967295|T>>>21),T=A+(b^_^v)+R[11]+1839030562&4294967295,A=b+(T<<16&4294967295|T>>>16),T=v+(A^b^_)+R[14]+4259657740&4294967295,v=A+(T<<23&4294967295|T>>>9),T=_+(v^A^b)+R[1]+2763975236&4294967295,_=v+(T<<4&4294967295|T>>>28),T=b+(_^v^A)+R[4]+1272893353&4294967295,b=_+(T<<11&4294967295|T>>>21),T=A+(b^_^v)+R[7]+4139469664&4294967295,A=b+(T<<16&4294967295|T>>>16),T=v+(A^b^_)+R[10]+3200236656&4294967295,v=A+(T<<23&4294967295|T>>>9),T=_+(v^A^b)+R[13]+681279174&4294967295,_=v+(T<<4&4294967295|T>>>28),T=b+(_^v^A)+R[0]+3936430074&4294967295,b=_+(T<<11&4294967295|T>>>21),T=A+(b^_^v)+R[3]+3572445317&4294967295,A=b+(T<<16&4294967295|T>>>16),T=v+(A^b^_)+R[6]+76029189&4294967295,v=A+(T<<23&4294967295|T>>>9),T=_+(v^A^b)+R[9]+3654602809&4294967295,_=v+(T<<4&4294967295|T>>>28),T=b+(_^v^A)+R[12]+3873151461&4294967295,b=_+(T<<11&4294967295|T>>>21),T=A+(b^_^v)+R[15]+530742520&4294967295,A=b+(T<<16&4294967295|T>>>16),T=v+(A^b^_)+R[2]+3299628645&4294967295,v=A+(T<<23&4294967295|T>>>9),T=_+(A^(v|~b))+R[0]+4096336452&4294967295,_=v+(T<<6&4294967295|T>>>26),T=b+(v^(_|~A))+R[7]+1126891415&4294967295,b=_+(T<<10&4294967295|T>>>22),T=A+(_^(b|~v))+R[14]+2878612391&4294967295,A=b+(T<<15&4294967295|T>>>17),T=v+(b^(A|~_))+R[5]+4237533241&4294967295,v=A+(T<<21&4294967295|T>>>11),T=_+(A^(v|~b))+R[12]+1700485571&4294967295,_=v+(T<<6&4294967295|T>>>26),T=b+(v^(_|~A))+R[3]+2399980690&4294967295,b=_+(T<<10&4294967295|T>>>22),T=A+(_^(b|~v))+R[10]+4293915773&4294967295,A=b+(T<<15&4294967295|T>>>17),T=v+(b^(A|~_))+R[1]+2240044497&4294967295,v=A+(T<<21&4294967295|T>>>11),T=_+(A^(v|~b))+R[8]+1873313359&4294967295,_=v+(T<<6&4294967295|T>>>26),T=b+(v^(_|~A))+R[15]+4264355552&4294967295,b=_+(T<<10&4294967295|T>>>22),T=A+(_^(b|~v))+R[6]+2734768916&4294967295,A=b+(T<<15&4294967295|T>>>17),T=v+(b^(A|~_))+R[13]+1309151649&4294967295,v=A+(T<<21&4294967295|T>>>11),T=_+(A^(v|~b))+R[4]+4149444226&4294967295,_=v+(T<<6&4294967295|T>>>26),T=b+(v^(_|~A))+R[11]+3174756917&4294967295,b=_+(T<<10&4294967295|T>>>22),T=A+(_^(b|~v))+R[2]+718787259&4294967295,A=b+(T<<15&4294967295|T>>>17),T=v+(b^(A|~_))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+b&4294967295}s.prototype.v=function(I,_){_===void 0&&(_=I.length);const v=_-this.blockSize,R=this.C;let A=this.h,b=0;for(;b<_;){if(A==0)for(;b<=v;)r(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<_;)if(R[A++]=I.charCodeAt(b++),A==this.blockSize){r(this,R),A=0;break}}else for(;b<_;)if(R[A++]=I[b++],A==this.blockSize){r(this,R),A=0;break}}this.h=A,this.o+=_},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,v=0;v<4;++v)for(let R=0;R<32;R+=8)I[_++]=this.g[v]>>>R&255;return I};function i(I,_){var v=c;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=_(I)}function o(I,_){this.h=_;const v=[];let R=!0;for(let A=I.length-1;A>=0;A--){const b=I[A]|0;R&&b==_||(v[A]=b,R=!1)}this.g=v}var c={};function l(I){return-128<=I&&I<128?i(I,function(_){return new o([_|0],_<0?-1:0)}):new o([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return V(h(-I));const _=[];let v=1;for(let R=0;I>=v;R++)_[R]=I/v|0,v*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return V(f(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(_,8));let R=p;for(let b=0;b<I.length;b+=8){var A=Math.min(8,I.length-b);const T=parseInt(I.substring(b,b+A),_);A<8?(A=h(Math.pow(_,A)),R=R.j(A).add(h(T))):(R=R.j(v),R=R.add(h(T)))}return R}var p=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-V(this).m();let I=0,_=1;for(let v=0;v<this.g.length;v++){const R=this.i(v);I+=(R>=0?R:4294967296+R)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(N(this))return"-"+V(this).toString(I);const _=h(Math.pow(I,6));var v=this;let R="";for(;;){const A=z(v,_).g;v=$(v,A.j(_));let b=((v.g.length>0?v.g[0]:v.h)>>>0).toString(I);if(v=A,k(v))return b+R;for(;b.length<6;)b="0"+b;R=b+R}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=$(this,I),N(I)?-1:k(I)?0:1};function V(I){const _=I.g.length,v=[];for(let R=0;R<_;R++)v[R]=~I.g[R];return new o(v,~I.h).add(g)}t.abs=function(){return N(this)?V(this):this},t.add=function(I){const _=Math.max(this.g.length,I.g.length),v=[];let R=0;for(let A=0;A<=_;A++){let b=R+(this.i(A)&65535)+(I.i(A)&65535),T=(b>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);R=T>>>16,b&=65535,T&=65535,v[A]=T<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function $(I,_){return I.add(V(_))}t.j=function(I){if(k(this)||k(I))return p;if(N(this))return N(I)?V(this).j(V(I)):V(V(this).j(I));if(N(I))return V(this.j(V(I)));if(this.l(y)<0&&I.l(y)<0)return h(this.m()*I.m());const _=this.g.length+I.g.length,v=[];for(var R=0;R<2*_;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<I.g.length;A++){const b=this.i(R)>>>16,T=this.i(R)&65535,ee=I.i(A)>>>16,Z=I.i(A)&65535;v[2*R+2*A]+=T*Z,H(v,2*R+2*A),v[2*R+2*A+1]+=b*Z,H(v,2*R+2*A+1),v[2*R+2*A+1]+=T*ee,H(v,2*R+2*A+1),v[2*R+2*A+2]+=b*ee,H(v,2*R+2*A+2)}for(I=0;I<_;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=_;I<2*_;I++)v[I]=0;return new o(v,0)};function H(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function G(I,_){this.g=I,this.h=_}function z(I,_){if(k(_))throw Error("division by zero");if(k(I))return new G(p,p);if(N(I))return _=z(V(I),_),new G(V(_.g),V(_.h));if(N(_))return _=z(I,V(_)),new G(V(_.g),_.h);if(I.g.length>30){if(N(I)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var v=g,R=_;R.l(I)<=0;)v=he(v),R=he(R);var A=ge(v,1),b=ge(R,1);for(R=ge(R,2),v=ge(v,2);!k(R);){var T=b.add(R);T.l(I)<=0&&(A=A.add(v),b=T),R=ge(R,1),v=ge(v,1)}return _=$(I,A.j(_)),new G(A,_)}for(A=p;I.l(_)>=0;){for(v=Math.max(1,Math.floor(I.m()/_.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),b=h(v),T=b.j(_);N(T)||T.l(I)>0;)v-=R,b=h(v),T=b.j(_);k(b)&&(b=g),A=A.add(b),I=$(I,T)}return new G(A,I)}t.B=function(I){return z(this,I).h},t.and=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)&I.i(R);return new o(v,this.h&I.h)},t.or=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)|I.i(R);return new o(v,this.h|I.h)},t.xor=function(I){const _=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)^I.i(R);return new o(v,this.h^I.h)};function he(I){const _=I.g.length+1,v=[];for(let R=0;R<_;R++)v[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(v,I.h)}function ge(I,_){const v=_>>5;_%=32;const R=I.g.length-v,A=[];for(let b=0;b<R;b++)A[b]=_>0?I.i(b+v)>>>_|I.i(b+v+1)<<32-_:I.i(b+v);return new o(A,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Rg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,ps=o}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bg,hi,Sg,jo,ml,Cg,Pg,kg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof bo=="object"&&bo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in d))break e;d=d[C]}a=a[a.length-1],m=d[a],u=u(m),u!=m&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.push([m,u[m]]);return d}});var i=i||{},o=this||self;function c(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function l(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=l,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,C,D){for(var K=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)K[_e-2]=arguments[_e];return u.prototype[C].apply(m,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const u=a.length;if(u>0){const d=Array(u);for(let m=0;m<u;m++)d[m]=a[m];return d}return[]}function k(a,u){for(let m=1;m<arguments.length;m++){const C=arguments[m];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const D=C.length||0;a.length=d+D;for(let K=0;K<D;K++)a[d+K]=C[K]}else a.push(C)}}class N{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function V(a){o.setTimeout(()=>{throw a},0)}function $(){var a=I;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class H{constructor(){this.h=this.g=null}add(u,d){const m=G.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var G=new N(()=>new z,a=>a.reset());class z{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ge=!1,I=new H,_=()=>{const a=Promise.resolve(void 0);he=()=>{a.then(v)}};function v(){for(var a;a=$();){try{a.h.call(a.g)}catch(d){V(d)}var u=G;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}ge=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a})();function T(a){return/^[\s\xa0]*$/.test(a)}function ee(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ee,A),ee.prototype.init=function(a,u){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Ce(a,u,d,m,C){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=C,this.key=++Se,this.da=this.fa=!1}function we(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function kt(a,u,d){for(const m in a)u.call(d,a[m],m,a)}function rn(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function Vt(a){const u={};for(const d in a)u[d]=a[d];return u}const ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rn(a,u){let d,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(d in m)a[d]=m[d];for(let D=0;D<ot.length;D++)d=ot[D],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function zt(a){this.src=a,this.g={},this.h=0}zt.prototype.add=function(a,u,d,m,C){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const K=pt(a,u,m,C);return K>-1?(u=a[K],d||(u.fa=!1)):(u=new Ce(u,this.src,D,!!m,C),u.fa=d,a.push(u)),u};function Gt(a,u){const d=u.type;if(d in a.g){var m=a.g[d],C=Array.prototype.indexOf.call(m,u,void 0),D;(D=C>=0)&&Array.prototype.splice.call(m,C,1),D&&(we(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function pt(a,u,d,m){for(let C=0;C<a.length;++C){const D=a[C];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==m)return C}return-1}var M="closure_lm_"+(Math.random()*1e6|0),X={};function Q(a,u,d,m,C){if(Array.isArray(u)){for(let D=0;D<u.length;D++)Q(a,u[D],d,m,C);return null}return d=W(d),a&&a[Z]?a.J(u,d,c(m)?!!m.capture:!1,C):ne(a,u,d,!1,m,C)}function ne(a,u,d,m,C,D){if(!u)throw Error("Invalid event type");const K=c(C)?!!C.capture:!!C;let _e=F(a);if(_e||(a[M]=_e=new zt(a)),d=_e.add(u,d,m,K,D),d.proxy)return d;if(m=ve(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)b||(C=K),C===void 0&&(C=!1),a.addEventListener(u.toString(),m,C);else if(a.attachEvent)a.attachEvent(S(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ve(){function a(d){return u.call(a.src,a.listener,d)}const u=O;return a}function E(a,u,d,m,C){if(Array.isArray(u))for(var D=0;D<u.length;D++)E(a,u[D],d,m,C);else m=c(m)?!!m.capture:!!m,d=W(d),a&&a[Z]?(a=a.i,D=String(u).toString(),D in a.g&&(u=a.g[D],d=pt(u,d,m,C),d>-1&&(we(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[D],a.h--)))):a&&(a=F(a))&&(u=a.g[u.toString()],a=-1,u&&(a=pt(u,d,m,C)),(d=a>-1?u[a]:null)&&w(d))}function w(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Z])Gt(u.i,a);else{var d=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(d,m,a.capture):u.detachEvent?u.detachEvent(S(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=F(u))?(Gt(d,a),d.h==0&&(d.src=null,u[M]=null)):we(a)}}}function S(a){return a in X?X[a]:X[a]="on"+a}function O(a,u){if(a.da)a=!0;else{u=new ee(u,this);const d=a.listener,m=a.ha||a.src;a.fa&&w(a),a=d.call(m,u)}return a}function F(a){return a=a[M],a instanceof zt?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(a){return typeof a=="function"?a:(a[x]||(a[x]=function(u){return a.handleEvent(u)}),a[x])}function q(){R.call(this),this.i=new zt(this),this.M=this,this.G=null}p(q,R),q.prototype[Z]=!0,q.prototype.removeEventListener=function(a,u,d,m){E(this,a,u,d,m)};function j(a,u){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var C=u;u=new A(m,a),Rn(u,C)}C=!0;let D,K;if(d)for(K=d.length-1;K>=0;K--)D=u.g=d[K],C=U(D,m,!0,u)&&C;if(D=u.g=a,C=U(D,m,!0,u)&&C,C=U(D,m,!1,u)&&C,d)for(K=0;K<d.length;K++)D=u.g=d[K],C=U(D,m,!1,u)&&C}q.prototype.N=function(){if(q.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let m=0;m<d.length;m++)we(d[m]);delete a.g[u],a.h--}}this.G=null},q.prototype.J=function(a,u,d,m){return this.i.add(String(a),u,!1,d,m)},q.prototype.K=function(a,u,d,m){return this.i.add(String(a),u,!0,d,m)};function U(a,u,d,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let C=!0;for(let D=0;D<u.length;++D){const K=u[D];if(K&&!K.da&&K.capture==d){const _e=K.listener,Ye=K.ha||K.src;K.fa&&Gt(a.i,K),C=_e.call(Ye,m)!==!1&&C}}return C&&!m.defaultPrevented}function re(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function J(a){a.g=re(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class se extends R{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(a){R.call(this),this.h=a,this.g={}}p(oe,R);var ye=[];function Oe(a){kt(a.g,function(u,d){this.g.hasOwnProperty(d)&&w(u)},a),a.g={}}oe.prototype.N=function(){oe.Z.N.call(this),Oe(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=o.JSON.stringify,mt=o.JSON.parse,gt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ot(){}function xt(){}var Kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function er(){A.call(this,"d")}p(er,A);function at(){A.call(this,"c")}p(at,A);var nt={},qr=null;function Is(){return qr=qr||new q}nt.Ia="serverreachability";function Zu(a){A.call(this,nt.Ia,a)}p(Zu,A);function zr(a){const u=Is();j(u,new Zu(u))}nt.STAT_EVENT="statevent";function eh(a,u){A.call(this,nt.STAT_EVENT,a),this.stat=u}p(eh,A);function Rt(a){const u=Is();j(u,new eh(u,a))}nt.Ja="timingevent";function th(a,u){A.call(this,nt.Ja,a),this.size=u}p(th,A);function Gr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function dy(a,u,d,m,C,D){a.info(function(){if(a.g)if(D){var K="",_e=D.split("&");for(let Me=0;Me<_e.length;Me++){var Ye=_e[Me].split("=");if(Ye.length>1){const st=Ye[0];Ye=Ye[1];const an=st.split("_");K=an.length>=2&&an[1]=="type"?K+(st+"="+Ye+"&"):K+(st+"=redacted&")}}}else K=null;else K=D;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+u+`
`+d+`
`+K})}function py(a,u,d,m,C,D,K){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+u+`
`+d+`
`+D+" "+K})}function tr(a,u,d,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+gy(a,d)+(m?" "+m:"")})}function my(a,u){a.info(function(){return"TIMEOUT: "+u})}Kr.prototype.info=function(){};function gy(a,u){if(!a.g)return u;if(!u)return null;try{const D=JSON.parse(u);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var d=D[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var C=m[0];if(C!="noop"&&C!="stop"&&C!="close")for(let K=1;K<m.length;K++)m[K]=""}}}}return Re(D)}catch{return u}}var uo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sh;function tc(){}p(tc,Ot),tc.prototype.g=function(){return new XMLHttpRequest},sh=new tc;function Wr(a){return encodeURIComponent(String(a))}function _y(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Kn(a,u,d,m){this.j=a,this.i=u,this.l=d,this.S=m||1,this.V=new oe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rh}function rh(){this.i=null,this.g="",this.h=!1}var ih={},nc={};function sc(a,u,d){a.M=1,a.A=fo(on(u)),a.u=d,a.R=!0,oh(a,null)}function oh(a,u){a.F=Date.now(),ho(a),a.B=on(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),vh(d.i,"t",m),a.C=0,d=a.j.L,a.h=new rh,a.g=Lh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new se(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,m=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(ye[0]=C.toString()),C=ye);for(let D=0;D<C.length;D++){const K=Q(d,C[D],m||u.handleEvent,!1,u.h||u);if(!K)break;u.g[K.key]=K}u=a.J?Vt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),zr(),dy(a.i,a.v,a.B,a.l,a.S,a.u)}Kn.prototype.ba=function(a){a=a.target;const u=this.O;u&&Jn(a)==3?u.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{const _e=Jn(this.g),Ye=this.g.ya(),Me=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||bh(this.g)))){this.K||_e!=4||Ye==7||(Ye==8||Me<=0?zr(3):zr(2)),rc(this);var u=this.g.ca();this.X=u;var d=yy(this);if(this.o=u==200,py(this.i,this.v,this.B,this.l,this.S,_e,u),this.o){if(this.U&&!this.L){t:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(m)){var D=m;break t}}D=null}if(a=D)tr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ic(this,a);else{this.o=!1,this.m=3,Rt(12),ws(this),Qr(this);break e}}if(this.R){a=!0;let st;for(;!this.K&&this.C<d.length;)if(st=vy(this,d),st==nc){_e==4&&(this.m=4,Rt(14),a=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(st==ih){this.m=4,Rt(15),tr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else tr(this.i,this.l,st,null),ic(this,st);if(ah(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||d.length!=0||this.h.h||(this.m=1,Rt(16),a=!1),this.o=this.o&&a,!a)tr(this.i,this.l,d,"[Invalid Chunked Response]"),ws(this),Qr(this);else if(d.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),dc(K),K.P=!0,Rt(11))}}else tr(this.i,this.l,d,null),ic(this,d);_e==4&&ws(this),this.o&&!this.K&&(_e==4?Vh(this.j,this):(this.o=!1,ho(this)))}else Vy(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),ws(this),Qr(this)}}}catch{}};function yy(a){if(!ah(a))return a.g.la();const u=bh(a.g);if(u==="")return"";let d="";const m=u.length,C=Jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ws(a),Qr(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<m;D++)a.h.h=!0,d+=a.h.i.decode(u[D],{stream:!(C&&D==m-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function ah(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function vy(a,u){var d=a.C,m=u.indexOf(`
`,d);return m==-1?nc:(d=Number(u.substring(d,m)),isNaN(d)?ih:(m+=1,m+d>u.length?nc:(u=u.slice(m,m+d),a.C=m+d,u)))}Kn.prototype.cancel=function(){this.K=!0,ws(this)};function ho(a){a.T=Date.now()+a.H,ch(a,a.H)}function ch(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Gr(h(a.aa,a),u)}function rc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Kn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(my(this.i,this.B),this.M!=2&&(zr(),Rt(17)),ws(this),this.m=2,Qr(this)):ch(this,this.T-a)};function Qr(a){a.j.I==0||a.K||Vh(a.j,a)}function ws(a){rc(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Oe(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function ic(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||oc(d.h,a))){if(!a.L&&oc(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)yo(d),go(d);else break e;fc(d),Rt(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Gr(h(d.Va,d),6e3));hh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Rs(d,11)}else if((a.L||d.g==a)&&yo(d),!T(u))for(C=d.Ba.g.parse(u),u=0;u<C.length;u++){let Me=C[u];const st=Me[0];if(!(st<=d.K))if(d.K=st,Me=Me[1],d.I==2)if(Me[0]=="c"){d.M=Me[1],d.ba=Me[2];const an=Me[3];an!=null&&(d.ka=an,d.j.info("VER="+d.ka));const bs=Me[4];bs!=null&&(d.za=bs,d.j.info("SVER="+d.za));const Xn=Me[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(m=1.5*Xn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Yn=a.g;if(Yn){const Eo=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var D=m.h;D.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(ac(D,D.h),D.h=null))}if(m.G){const pc=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;pc&&(m.wa=pc,$e(m.J,m.G,pc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var K=a;if(m.na=Mh(m,m.L?m.ba:null,m.W),K.L){fh(m.h,K);var _e=K,Ye=m.O;Ye&&(_e.H=Ye),_e.D&&(rc(_e),ho(_e)),m.g=K}else Dh(m);d.i.length>0&&_o(d)}else Me[0]!="stop"&&Me[0]!="close"||Rs(d,7);else d.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Rs(d,7):hc(d):Me[0]!="noop"&&d.l&&d.l.qa(Me),d.A=0)}}zr(4)}catch{}}var Ey=class{constructor(a,u){this.g=a,this.map=u}};function lh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hh(a){return a.h?1:a.g?a.g.size:0}function oc(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function ac(a,u){a.g?a.g.add(u):a.h=u}function fh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}lh.prototype.cancel=function(){if(this.i=dh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function dh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return y(a.i)}var ph=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ty(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let C,D=null;m>=0?(C=a[d].substring(0,m),D=a[d].substring(m+1)):C=a[d],u(C,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Wn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Wn?(this.l=a.l,Jr(this,a.j),this.o=a.o,this.g=a.g,Xr(this,a.u),this.h=a.h,cc(this,Eh(a.i)),this.m=a.m):a&&(u=String(a).match(ph))?(this.l=!1,Jr(this,u[1]||"",!0),this.o=Yr(u[2]||""),this.g=Yr(u[3]||"",!0),Xr(this,u[4]),this.h=Yr(u[5]||"",!0),cc(this,u[6]||"",!0),this.m=Yr(u[7]||"")):(this.l=!1,this.i=new ei(null,this.l))}Wn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(Zr(u,mh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Zr(u,mh,!0),"@"),a.push(Wr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Zr(d,d.charAt(0)=="/"?Ay:wy,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Zr(d,by)),a.join("")},Wn.prototype.resolve=function(a){const u=on(this);let d=!!a.j;d?Jr(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var m=a.h;if(d)Xr(u,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var C=u.h.lastIndexOf("/");C!=-1&&(m=u.h.slice(0,C+1)+m)}if(C=m,C==".."||C==".")m="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){m=C.lastIndexOf("/",0)==0,C=C.split("/");const D=[];for(let K=0;K<C.length;){const _e=C[K++];_e=="."?m&&K==C.length&&D.push(""):_e==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),m&&K==C.length&&D.push("")):(D.push(_e),m=!0)}m=D.join("/")}else m=C}return d?u.h=m:d=a.i.toString()!=="",d?cc(u,Eh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function on(a){return new Wn(a)}function Jr(a,u,d){a.j=d?Yr(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Xr(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function cc(a,u,d){u instanceof ei?(a.i=u,Sy(a.i,a.l)):(d||(u=Zr(u,Ry)),a.i=new ei(u,a.l))}function $e(a,u,d){a.i.set(u,d)}function fo(a){return $e(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Yr(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zr(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,Iy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Iy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mh=/[#\/\?@]/g,wy=/[#\?:]/g,Ay=/[#\?]/g,Ry=/[#\?@]/g,by=/#/g;function ei(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function As(a){a.g||(a.g=new Map,a.h=0,a.i&&Ty(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ei.prototype,t.add=function(a,u){As(this),this.i=null,a=nr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function gh(a,u){As(a),u=nr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function _h(a,u){return As(a),u=nr(a,u),a.g.has(u)}t.forEach=function(a,u){As(this),this.g.forEach(function(d,m){d.forEach(function(C){a.call(u,C,m,this)},this)},this)};function yh(a,u){As(a);let d=[];if(typeof u=="string")_h(a,u)&&(d=d.concat(a.g.get(nr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return As(this),this.i=null,a=nr(this,a),_h(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=yh(this,a),a.length>0?String(a[0]):u):u};function vh(a,u,d){gh(a,u),d.length>0&&(a.i=null,a.g.set(nr(a,u),y(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var d=u[m];const C=Wr(d);d=yh(this,d);for(let D=0;D<d.length;D++){let K=C;d[D]!==""&&(K+="="+Wr(d[D])),a.push(K)}}return this.i=a.join("&")};function Eh(a){const u=new ei;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function nr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Sy(a,u){u&&!a.j&&(As(a),a.i=null,a.g.forEach(function(d,m){const C=m.toLowerCase();m!=C&&(gh(this,m),vh(this,C,d))},a)),a.j=u}function Cy(a,u){const d=new Kr;if(o.Image){const m=new Image;m.onload=f(Qn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=f(Qn,d,"TestLoadImage: error",!1,u,m),m.onabort=f(Qn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=f(Qn,d,"TestLoadImage: timeout",!1,u,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function Py(a,u){const d=new Kr,m=new AbortController,C=setTimeout(()=>{m.abort(),Qn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(C),D.ok?Qn(d,"TestPingServer: ok",!0,u):Qn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Qn(d,"TestPingServer: error",!1,u)})}function Qn(a,u,d,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(d)}catch{}}function ky(){this.g=new gt}function lc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(lc,Ot),lc.prototype.g=function(){return new po(this.i,this.h)};function po(a,u){q.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(po,q),t=po.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,ni(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Th(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Th(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ti(this):ni(this),this.readyState==3&&Th(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ti(this))},t.Na=function(a){this.g&&(this.response=a,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ni(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function ni(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ih(a){let u="";return kt(a,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function uc(a,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Ih(d),typeof a=="string"?d!=null&&Wr(d):$e(a,u,d))}function ze(a){q.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,q);var Dy=/^https?$/i,Ny=["POST","PUT"];t=ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sh.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){wh(this,D);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)d.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())d.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Ny,u,void 0)>=0)||m||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,K]of d)this.g.setRequestHeader(D,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){wh(this,D)}};function wh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Ah(a),mo(a)}function Ah(a){a.A||(a.A=!0,j(a,"complete"),j(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,j(this,"complete"),j(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Rh(this):this.Xa())},t.Xa=function(){Rh(this)};function Rh(a){if(a.h&&typeof i<"u"){if(a.v&&Jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(j(a,"readystatechange"),Jn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=D===0){let K=String(a.D).match(ph)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),m=!Dy.test(K?K.toLowerCase():"")}d=m}if(d)j(a,"complete"),j(a,"success");else{a.o=6;try{var C=Jn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Ah(a)}}finally{mo(a)}}}}function mo(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||j(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),mt(u)}};function bh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Vy(a){const u={};a=(a.g&&Jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(T(a[m]))continue;var d=_y(a[m]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=u[C]||[];u[C]=D,D.push(d)}rn(u,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function si(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Sh(a){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=si("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=si("baseRetryDelayMs",5e3,a),this.Za=si("retryDelaySeedMs",1e4,a),this.Ta=si("forwardChannelMaxRetries",2,a),this.va=si("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new lh(a&&a.concurrentRequestLimit),this.Ba=new ky,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,m){Rt(0),this.W=a,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=Mh(this,null,this.W),_o(this)};function hc(a){if(Ch(a),a.I==3){var u=a.V++,d=on(a.J);if($e(d,"SID",a.M),$e(d,"RID",u),$e(d,"TYPE","terminate"),ri(a,d),u=new Kn(a,a.j,u),u.M=2,u.A=fo(on(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=Lh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),ho(u)}xh(a)}function go(a){a.g&&(dc(a),a.g.cancel(),a.g=null)}function Ch(a){go(a),a.v&&(o.clearTimeout(a.v),a.v=null),yo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function _o(a){if(!uh(a.h)&&!a.m){a.m=!0;var u=a.Ea;he||_(),ge||(he(),ge=!0),I.add(u,a),a.D=0}}function Oy(a,u){return hh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Gr(h(a.Ea,a,u),Oh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Kn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=Vt(D),Rn(D,this.U)):D=this.U),this.u!==null||this.R||(C.J=D,D=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=kh(this,C,u),d=on(this.J),$e(d,"RID",a),$e(d,"CVER",22),this.G&&$e(d,"X-HTTP-Session-Id",this.G),ri(this,d),D&&(this.R?u="headers="+Wr(Ih(D))+"&"+u:this.u&&uc(d,this.u,D)),ac(this.h,C),this.Ra&&$e(d,"TYPE","init"),this.S?($e(d,"$req",u),$e(d,"SID","null"),C.U=!0,sc(C,d,null)):sc(C,d,u),this.I=2}}else this.I==3&&(a?Ph(this,a):this.i.length==0||uh(this.h)||Ph(this))};function Ph(a,u){var d;u?d=u.l:d=a.V++;const m=on(a.J);$e(m,"SID",a.M),$e(m,"RID",d),$e(m,"AID",a.K),ri(a,m),a.u&&a.o&&uc(m,a.u,a.o),d=new Kn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=kh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ac(a.h,d),sc(d,m,u)}function ri(a,u){a.H&&kt(a.H,function(d,m){$e(u,m,d)}),a.l&&kt({},function(d,m){$e(u,m,d)})}function kh(a,u,d){d=Math.min(a.i.length,d);const m=a.l?h(a.l.Ka,a.l,a):null;e:{var C=a.i;let _e=-1;for(;;){const Ye=["count="+d];_e==-1?d>0?(_e=C[0].g,Ye.push("ofs="+_e)):_e=0:Ye.push("ofs="+_e);let Me=!0;for(let st=0;st<d;st++){var D=C[st].g;const an=C[st].map;if(D-=_e,D<0)_e=Math.max(0,C[st].g-100),Me=!1;else try{D="req"+D+"_"||"";try{var K=an instanceof Map?an:Object.entries(an);for(const[bs,Xn]of K){let Yn=Xn;c(Xn)&&(Yn=Re(Xn)),Ye.push(D+bs+"="+encodeURIComponent(Yn))}}catch(bs){throw Ye.push(D+"type="+encodeURIComponent("_badmap")),bs}}catch{m&&m(an)}}if(Me){K=Ye.join("&");break e}}K=void 0}return a=a.i.splice(0,d),u.G=a,K}function Dh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;he||_(),ge||(he(),ge=!0),I.add(u,a),a.A=0}}function fc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Gr(h(a.Da,a),Oh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Gr(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),go(this),Nh(this))};function dc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nh(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=on(a.na);$e(u,"RID","rpc"),$e(u,"SID",a.M),$e(u,"AID",a.K),$e(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&$e(u,"TO",a.ia),$e(u,"TYPE","xmlhttp"),ri(a,u),a.u&&a.o&&uc(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=fo(on(u)),d.u=null,d.R=!0,oh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,go(this),fc(this),Rt(19))};function yo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Vh(a,u){var d=null;if(a.g==u){yo(a),dc(a),a.g=null;var m=2}else if(oc(a.h,u))d=u.G,fh(a.h,u),m=1;else return;if(a.I!=0){if(u.o)if(m==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var C=a.D;m=Is(),j(m,new th(m,d)),_o(a)}else Dh(a);else if(C=u.m,C==3||C==0&&u.X>0||!(m==1&&Oy(a,u)||m==2&&fc(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),C){case 1:Rs(a,5);break;case 4:Rs(a,10);break;case 3:Rs(a,6);break;default:Rs(a,2)}}}function Oh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function Rs(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),m=a.Ua;const C=!m;m=new Wn(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Jr(m,"https"),fo(m),C?Cy(m.toString(),d):Py(m.toString(),d)}else Rt(2);a.I=0,a.l&&a.l.pa(u),xh(a),Ch(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function xh(a){if(a.I=0,a.ja=[],a.l){const u=dh(a.h);(u.length!=0||a.i.length!=0)&&(k(a.ja,u),k(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function Mh(a,u,d){var m=d instanceof Wn?on(d):new Wn(d);if(m.g!="")u&&(m.g=u+"."+m.g),Xr(m,m.u);else{var C=o.location;m=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;const D=new Wn(null);m&&Jr(D,m),u&&(D.g=u),C&&Xr(D,C),d&&(D.h=d),m=D}return d=a.G,u=a.wa,d&&u&&$e(m,d,u),$e(m,"VER",a.ka),ri(a,m),m}function Lh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new ze(new lc({ab:d})):new ze(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fh(){}t=Fh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function vo(){}vo.prototype.g=function(a,u){return new Mt(a,u)};function Mt(a,u){q.call(this),this.g=new Sh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!T(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new sr(this)}p(Mt,q),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){hc(this.g)},Mt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Re(a),a=d);u.i.push(new Ey(u.Ya++,a)),u.I==3&&_o(u)},Mt.prototype.N=function(){this.g.l=null,delete this.j,hc(this.g),delete this.g,Mt.Z.N.call(this)};function Uh(a){er.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(Uh,er);function Bh(){at.call(this),this.status=1}p(Bh,at);function sr(a){this.g=a}p(sr,Fh),sr.prototype.ra=function(){j(this.g,"a")},sr.prototype.qa=function(a){j(this.g,new Uh(a))},sr.prototype.pa=function(a){j(this.g,new Bh)},sr.prototype.oa=function(){j(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,kg=function(){return new vo},Pg=function(){return Is()},Cg=nt,ml={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,jo=uo,nh.COMPLETE="complete",Sg=nh,xt.EventType=Kt,Kt.OPEN="a",Kt.CLOSE="b",Kt.ERROR="c",Kt.MESSAGE="d",q.prototype.listen=q.prototype.J,hi=xt,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,bg=ze}).apply(typeof bo<"u"?bo:typeof self<"u"?self:typeof window<"u"?window:{});const dd="@firebase/firestore",pd="4.9.3";class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");let Br="12.7.0";const Gs=new eu("@firebase/firestore");function ar(){return Gs.logLevel}function Y(t,...e){if(Gs.logLevel<=Ee.DEBUG){const n=e.map(du);Gs.debug(`Firestore (${Br}): ${t}`,...n)}}function Hn(t,...e){if(Gs.logLevel<=Ee.ERROR){const n=e.map(du);Gs.error(`Firestore (${Br}): ${t}`,...n)}}function kr(t,...e){if(Gs.logLevel<=Ee.WARN){const n=e.map(du);Gs.warn(`Firestore (${Br}): ${t}`,...n)}}function du(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ae(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Dg(t,s,n)}function Dg(t,e,n){let s=`FIRESTORE (${Br}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Hn(s),new Error(s)}function Ve(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Dg(e,r,s)}function de(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ms{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Ng{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yt.UNAUTHENTICATED)))}shutdown(){}}class rb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ib{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ms,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},c=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ms)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new Ng(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class ob{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ab{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new ob(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class md{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const s=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new md(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new md(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class pu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=lb(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Te(t,e){return t<e?-1:t>e?1:0}function gl(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Lc(r)===Lc(i)?Te(r,i):Lc(r)?1:-1}return Te(t.length,e.length)}const ub=55296,hb=57343;function Lc(t){const e=t.charCodeAt(0);return e>=ub&&e<=hb}function Dr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const gd="__name__";class un{constructor(e,n,s){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=un.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const s=un.isNumericId(e),r=un.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?un.extractNumericId(e).compare(un.extractNumericId(n)):gl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class He extends un{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends un{construct(e,n,s){return new ht(e,n,s)}static isValidIdentifier(e){return fb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gd}static keyField(){return new ht([gd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(s+=c,r++):(i(),r++)}if(i(),o)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(He.fromString(e))}static fromName(e){return new ie(He.fromString(e).popFirst(5))}static empty(){return new ie(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new He(e.slice()))}}function db(t,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pb(t,e,n,s){if(e===!0&&s===!0)throw new te(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _d(t){if(!ie.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function Nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mu(t);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Je(t,e){const n={typeString:t};return e&&(n.value=e),n}function ro(t,e){if(!Vg(t))throw new te(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new te(B.INVALID_ARGUMENT,n);return!0}const yd=-62135596800,vd=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*vd);return new je(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yd)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vd}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ro(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:Je("string",je._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new je(0,0))}static max(){return new fe(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Bi=-1;function mb(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(s===1e9?new je(n+1,0):new je(n,s));return new gs(r,ie.empty(),e)}function gb(t){return new gs(t.readTime,t.key,Bi)}class gs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new gs(fe.min(),ie.empty(),Bi)}static max(){return new gs(fe.max(),ie.empty(),Bi)}}function _b(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}const yb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $r(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==yb)throw t;Y("LocalStore","Unexpectedly lost primary lease")}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):L.reject(n)}static resolve(e){return new L(((n,s)=>{n(e)}))}static reject(e){return new L(((n,s)=>{s(e)}))}static waitFor(e){return new L(((n,s)=>{let r=0,i=0,o=!1;e.forEach((c=>{++r,c.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=L.resolve(!1);for(const s of e)n=n.next((r=>r?L.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new L(((s,r)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;n(e[h]).next((f=>{o[h]=f,++c,c===i&&s(o)}),(f=>r(f)))}}))}static doWhile(e,n){return new L(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function Eb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jr(t){return t.name==="IndexedDbTransactionError"}class $a{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$a.ce=-1;const gu=-1;function ja(t){return t==null}function la(t){return t===0&&1/t==-1/0}function Tb(t){return typeof t=="number"&&Number.isInteger(t)&&!la(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Og="";function Ib(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ed(e)),e=wb(t.get(n),e);return Ed(e)}function wb(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Og:n+="";break;default:n+=i}}return n}function Ed(t){return t+Og+""}function Td(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qe{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new So(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new So(this.root,e,this.comparator,!1)}getReverseIterator(){return new So(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new So(this.root,e,this.comparator,!0)}}class So{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ct.RED,this.left=r??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new ct(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ct.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Id(this.data.getIterator())}getIteratorFrom(e){return new Id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Id{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new tt(ht.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class Mg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Mg("Invalid base64 string: "+i):i}})(e);return new dt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const Ab=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=Ab.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}const Lg="server_timestamp",Fg="__type__",Ug="__previous_value__",Bg="__local_write_time__";function _u(t){return(t?.mapValue?.fields||{})[Fg]?.stringValue===Lg}function Ha(t){const e=t.mapValue.fields[Ug];return _u(e)?Ha(e):e}function $i(t){const e=_s(t.mapValue.fields[Bg].timestampValue);return new je(e.seconds,e.nanos)}class Rb{constructor(e,n,s,r,i,o,c,l,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=f}}const ua="(default)";class ji{constructor(e,n){this.projectId=e,this.database=n||ua}static empty(){return new ji("","")}get isDefaultDatabase(){return this.database===ua}isEqual(e){return e instanceof ji&&e.projectId===this.projectId&&e.database===this.database}}const $g="__type__",bb="__max__",Co={mapValue:{}},jg="__vector__",ha="value";function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_u(t)?4:Cb(t)?9007199254740991:Sb(t)?10:11:ae(28295,{value:t})}function wn(t,e){if(t===e)return!0;const n=vs(t);if(n!==vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $i(t).isEqual($i(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=_s(r.timestampValue),c=_s(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return ys(r.bytesValue).isEqual(ys(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return We(r.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(r.geoPointValue.longitude)===We(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return We(r.integerValue)===We(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=We(r.doubleValue),c=We(i.doubleValue);return o===c?la(o)===la(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Dr(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Td(o)!==Td(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!wn(o[l],c[l])))return!1;return!0})(t,e);default:return ae(52216,{left:t})}}function Hi(t,e){return(t.values||[]).find((n=>wn(n,e)))!==void 0}function Vr(t,e){if(t===e)return 0;const n=vs(t),s=vs(e);if(n!==s)return Te(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=We(i.integerValue||i.doubleValue),l=We(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return wd(t.timestampValue,e.timestampValue);case 4:return wd($i(t),$i(e));case 5:return gl(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=ys(i),l=ys(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){const f=Te(c[h],l[h]);if(f!==0)return f}return Te(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Te(We(i.latitude),We(o.latitude));return c!==0?c:Te(We(i.longitude),We(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ad(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},h=c[ha]?.arrayValue,f=l[ha]?.arrayValue,p=Te(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Ad(h,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Co.mapValue&&o===Co.mapValue)return 0;if(i===Co.mapValue)return 1;if(o===Co.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const g=gl(l[p],f[p]);if(g!==0)return g;const y=Vr(c[l[p]],h[f[p]]);if(y!==0)return y}return Te(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ae(23264,{he:n})}}function wd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=_s(t),s=_s(e),r=Te(n.seconds,s.seconds);return r!==0?r:Te(n.nanos,s.nanos)}function Ad(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Vr(n[r],s[r]);if(i)return i}return Te(n.length,s.length)}function Or(t){return _l(t)}function _l(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=_s(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ys(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=_l(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${_l(n.fields[o])}`;return r+"}"})(t.mapValue):ae(61005,{value:t})}function Ho(t){switch(vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ha(t);return e?16+Ho(e):16;case 5:return 2*t.stringValue.length;case 6:return ys(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Ho(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return Js(s.fields,((i,o)=>{r+=i.length+Ho(o)})),r})(t.mapValue);default:throw ae(13486,{value:t})}}function yl(t){return!!t&&"integerValue"in t}function yu(t){return!!t&&"arrayValue"in t}function Rd(t){return!!t&&"nullValue"in t}function bd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qo(t){return!!t&&"mapValue"in t}function Sb(t){return(t?.mapValue?.fields||{})[$g]?.stringValue===jg}function Ri(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ri(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ri(t.arrayValue.values[n]);return e}return{...t}}function Cb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bb}class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!qo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ri(n)}setAll(e){let n=ht.emptyPath(),s={},r=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=c.popLast()}o?s[c.lastSegment()]=Ri(o):r.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());qo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];qo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Js(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Ut(Ri(this.value))}}function Hg(t){const e=[];return Js(t.fields,((n,s)=>{const r=new ht([n]);if(qo(s)){const i=Hg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Yt(e)}class Et{constructor(e,n,s,r,i,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Et(e,0,fe.min(),fe.min(),fe.min(),Ut.empty(),0)}static newFoundDocument(e,n,s,r){return new Et(e,1,n,fe.min(),s,r,0)}static newNoDocument(e,n){return new Et(e,2,n,fe.min(),fe.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,fe.min(),fe.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fa{constructor(e,n){this.position=e,this.inclusive=n}}function Sd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ie.comparator(ie.fromName(o.referenceValue),n.key):s=Vr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Cd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}class da{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class qg{}class et extends qg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Db(e,n,s):n==="array-contains"?new Ob(e,s):n==="in"?new xb(e,s):n==="not-in"?new Mb(e,s):n==="array-contains-any"?new Lb(e,s):new et(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Nb(e,s):new Vb(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vr(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends qg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new An(e,n)}matches(e){return zg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zg(t){return t.op==="and"}function Gg(t){return kb(t)&&zg(t)}function kb(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function vl(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Or(t.value);if(Gg(t))return t.filters.map((e=>vl(e))).join(",");{const e=t.filters.map((n=>vl(n))).join(",");return`${t.op}(${e})`}}function Kg(t,e){return t instanceof et?(function(s,r){return r instanceof et&&s.op===r.op&&s.field.isEqual(r.field)&&wn(s.value,r.value)})(t,e):t instanceof An?(function(s,r){return r instanceof An&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,c)=>i&&Kg(o,r.filters[c])),!0):!1})(t,e):void ae(19439)}function Wg(t){return t instanceof et?(function(n){return`${n.field.canonicalString()} ${n.op} ${Or(n.value)}`})(t):t instanceof An?(function(n){return n.op.toString()+" {"+n.getFilters().map(Wg).join(" ,")+"}"})(t):"Filter"}class Db extends et{constructor(e,n,s){super(e,n,s),this.key=ie.fromName(s.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nb extends et{constructor(e,n){super(e,"in",n),this.keys=Qg("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Vb extends et{constructor(e,n){super(e,"not-in",n),this.keys=Qg("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Qg(t,e){return(e.arrayValue?.values||[]).map((n=>ie.fromName(n.referenceValue)))}class Ob extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yu(n)&&Hi(n.arrayValue,this.value)}}class xb extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hi(this.value.arrayValue,n)}}class Mb extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hi(this.value.arrayValue,n)}}class Lb extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Hi(this.value.arrayValue,s)))}}class Fb{constructor(e,n=null,s=[],r=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Pd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Fb(t,e,n,s,r,i,o)}function vu(t){const e=de(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>vl(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),ja(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Or(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Or(s))).join(",")),e.Te=n}return e.Te}function Eu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Kg(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cd(t.startAt,e.startAt)&&Cd(t.endAt,e.endAt)}function El(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class qa{constructor(e,n=null,s=[],r=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ub(t,e,n,s,r,i,o,c){return new qa(t,e,n,s,r,i,o,c)}function Tu(t){return new qa(t)}function kd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Bb(t){return t.collectionGroup!==null}function bi(t){const e=de(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(ht.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new da(i,s))})),n.has(ht.keyField().canonicalString())||e.Ie.push(new da(ht.keyField(),s))}return e.Ie}function gn(t){const e=de(t);return e.Ee||(e.Ee=$b(e,bi(t))),e.Ee}function $b(t,e){if(t.limitType==="F")return Pd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new da(r.field,i)}));const n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return Pd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Tl(t,e,n){return new qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function za(t,e){return Eu(gn(t),gn(e))&&t.limitType===e.limitType}function Jg(t){return`${vu(gn(t))}|lt:${t.limitType}`}function cr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>Wg(r))).join(", ")}]`),ja(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Or(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Or(r))).join(",")),`Target(${s})`})(gn(t))}; limitType=${t.limitType})`}function Ga(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ie.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of bi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,c,l){const h=Sd(o,c,l);return o.inclusive?h<=0:h<0})(s.startAt,bi(s),r)||s.endAt&&!(function(o,c,l){const h=Sd(o,c,l);return o.inclusive?h>=0:h>0})(s.endAt,bi(s),r))})(t,e)}function jb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xg(t){return(e,n)=>{let s=!1;for(const r of bi(t)){const i=Hb(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Hb(t,e,n){const s=t.field.isKeyField()?ie.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),h=c.data.field(i);return l!==null&&h!==null?Vr(l,h):ae(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ae(19790,{direction:t.dir})}}class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return xg(this.inner)}size(){return this.innerSize}}const qb=new qe(ie.comparator);function qn(){return qb}const Yg=new qe(ie.comparator);function fi(...t){let e=Yg;for(const n of t)e=e.insert(n.key,n);return e}function Zg(t){let e=Yg;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Os(){return Si()}function e_(){return Si()}function Si(){return new Xs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const zb=new qe(ie.comparator),Gb=new tt(ie.comparator);function Ie(...t){let e=Gb;for(const n of t)e=e.add(n);return e}const Kb=new tt(Te);function Wb(){return Kb}function Iu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:la(e)?"-0":e}}function t_(t){return{integerValue:""+t}}function Qb(t,e){return Tb(e)?t_(e):Iu(t,e)}class Ka{constructor(){this._=void 0}}function Jb(t,e,n){return t instanceof qi?(function(r,i){const o={fields:{[Fg]:{stringValue:Lg},[Bg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_u(i)&&(i=Ha(i)),i&&(o.fields[Ug]=i),{mapValue:o}})(n,e):t instanceof zi?s_(t,e):t instanceof Gi?r_(t,e):(function(r,i){const o=n_(r,i),c=Dd(o)+Dd(r.Ae);return yl(o)&&yl(r.Ae)?t_(c):Iu(r.serializer,c)})(t,e)}function Xb(t,e,n){return t instanceof zi?s_(t,e):t instanceof Gi?r_(t,e):n}function n_(t,e){return t instanceof pa?(function(s){return yl(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class qi extends Ka{}class zi extends Ka{constructor(e){super(),this.elements=e}}function s_(t,e){const n=i_(e);for(const s of t.elements)n.some((r=>wn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class Gi extends Ka{constructor(e){super(),this.elements=e}}function r_(t,e){let n=i_(e);for(const s of t.elements)n=n.filter((r=>!wn(r,s)));return{arrayValue:{values:n}}}class pa extends Ka{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Dd(t){return We(t.integerValue||t.doubleValue)}function i_(t){return yu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Yb{constructor(e,n){this.field=e,this.transform=n}}function Zb(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof zi&&r instanceof zi||s instanceof Gi&&r instanceof Gi?Dr(s.elements,r.elements,wn):s instanceof pa&&r instanceof pa?wn(s.Ae,r.Ae):s instanceof qi&&r instanceof qi})(t.transform,e.transform)}class eS{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wa{}function o_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wu(t.key,_n.none()):new io(t.key,t.data,_n.none());{const n=t.data,s=Ut.empty();let r=new tt(ht.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ys(t.key,s,new Yt(r.toArray()),_n.none())}}function tS(t,e,n){t instanceof io?(function(r,i,o){const c=r.value.clone(),l=Vd(r.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Ys?(function(r,i,o){if(!zo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Vd(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(a_(r)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ci(t,e,n,s){return t instanceof io?(function(i,o,c,l){if(!zo(i.precondition,o))return c;const h=i.value.clone(),f=Od(i.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof Ys?(function(i,o,c,l){if(!zo(i.precondition,o))return c;const h=Od(i.fieldTransforms,l,o),f=o.data;return f.setAll(a_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,c){return zo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function nS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=n_(s.transform,r||null);i!=null&&(n===null&&(n=Ut.empty()),n.set(s.field,i))}return n||null}function Nd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Dr(s,r,((i,o)=>Zb(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class io extends Wa{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ys extends Wa{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function a_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Vd(t,e,n){const s=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,c=e.data.field(i.field);s.set(i.field,Xb(o,c,n[r]))}return s}function Od(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Jb(i,o,e))}return s}class wu extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends Wa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rS{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&tS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ci(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ci(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=e_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(r.key)?null:c;const l=o_(o,c);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ie())}isEqual(e){return this.batchId===e.batchId&&Dr(this.mutations,e.mutations,((n,s)=>Nd(n,s)))&&Dr(this.baseMutations,e.baseMutations,((n,s)=>Nd(n,s)))}}class Au{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ve(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return zb})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Au(e,n,s,r)}}class iS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oS{constructor(e,n){this.count=e,this.unchangedNames=n}}var Qe,Ae;function aS(t){switch(t){case B.OK:return ae(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function c_(t){if(t===void 0)return Hn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Qe.OK:return B.OK;case Qe.CANCELLED:return B.CANCELLED;case Qe.UNKNOWN:return B.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return B.INTERNAL;case Qe.UNAVAILABLE:return B.UNAVAILABLE;case Qe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Qe.NOT_FOUND:return B.NOT_FOUND;case Qe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Qe.ABORTED:return B.ABORTED;case Qe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Qe.DATA_LOSS:return B.DATA_LOSS;default:return ae(39323,{code:t})}}(Ae=Qe||(Qe={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";function cS(){return new TextEncoder}const lS=new ps([4294967295,4294967295],0);function xd(t){const e=cS().encode(t),n=new Rg;return n.update(e),new Uint8Array(n.digest())}function Md(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ps([n,s],0),new ps([r,i],0)]}class Ru{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new di(`Invalid padding: ${n}`);if(s<0)throw new di(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new di(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new di(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(ps.fromNumber(s)));return r.compare(lS)===1&&(r=new ps([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xd(e),[s,r]=Md(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ru(i,r,n);return s.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=xd(e),[s,r]=Md(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class di extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qa{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,oo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Qa(fe.min(),r,new qe(Te),qn(),Ie())}}class oo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new oo(s,n,Ie(),Ie(),Ie())}}class Go{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class l_{constructor(e,n){this.targetId=e,this.Ce=n}}class u_{constructor(e,n,s=dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Ld{constructor(){this.ve=0,this.Fe=Fd(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),s=Ie();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ae(38017,{changeType:i})}})),new oo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Fd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uS{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Po(),this.He=Po(),this.Ye=new qe(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(El(i))if(s===0){const o=new ie(i.path);this.et(n,o,Et.newNoDocument(o,fe.min()))}else Ve(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,c;try{o=ys(s).toUint8Array()}catch(l){if(l instanceof Mg)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Ru(o,r,i)}catch(l){return kr(l instanceof di?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&El(c.target)){const l=new ie(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Et.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Ie();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Qa(e,n,this.Ye,this.je,s);return this.je=qn(),this.Je=Po(),this.He=Po(),this.Ye=new qe(Te),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ld,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tt(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tt(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ld),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Po(){return new qe(ie.comparator)}function Fd(){return new qe(ie.comparator)}const hS={asc:"ASCENDING",desc:"DESCENDING"},fS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dS={and:"AND",or:"OR"};class pS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Il(t,e){return t.useProto3Json||ja(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mS(t,e){return ma(t,e.toTimestamp())}function yn(t){return Ve(!!t,49232),fe.fromTimestamp((function(n){const s=_s(n);return new je(s.seconds,s.nanos)})(t))}function bu(t,e){return wl(t,e).canonicalString()}function wl(t,e){const n=(function(r){return new He(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function f_(t){const e=He.fromString(t);return Ve(__(e),10190,{key:e.toString()}),e}function Al(t,e){return bu(t.databaseId,e.path)}function Fc(t,e){const n=f_(e);if(n.get(1)!==t.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(p_(n))}function d_(t,e){return bu(t.databaseId,e)}function gS(t){const e=f_(t);return e.length===4?He.emptyPath():p_(e)}function Rl(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function p_(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ud(t,e,n){return{name:Al(t,e),fields:n.value.mapValue.fields}}function _S(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Ve(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(Ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const f=h.code===void 0?B.UNKNOWN:c_(h.code);return new te(f,h.message||"")})(o);n=new u_(s,r,i,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Fc(t,s.document.name),i=yn(s.document.updateTime),o=s.document.createTime?yn(s.document.createTime):fe.min(),c=new Ut({mapValue:{fields:s.document.fields}}),l=Et.newFoundDocument(r,i,o,c),h=s.targetIds||[],f=s.removedTargetIds||[];n=new Go(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Fc(t,s.document),i=s.readTime?yn(s.readTime):fe.min(),o=Et.newNoDocument(r,i),c=s.removedTargetIds||[];n=new Go([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Fc(t,s.document),i=s.removedTargetIds||[];n=new Go([],i,r,null)}else{if(!("filter"in e))return ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new oS(r,i),c=s.targetId;n=new l_(c,o)}}return n}function yS(t,e){let n;if(e instanceof io)n={update:Ud(t,e.key,e.value)};else if(e instanceof wu)n={delete:Al(t,e.key)};else if(e instanceof Ys)n={update:Ud(t,e.key,e.data),updateMask:SS(e.fieldMask)};else{if(!(e instanceof sS))return ae(16599,{Vt:e.type});n={verify:Al(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const c=o.transform;if(c instanceof qi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof pa)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ae(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:mS(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)})(t,e.precondition)),n}function vS(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?yn(r.updateTime):yn(i);return o.isEqual(fe.min())&&(o=yn(i)),new eS(o,r.transformResults||[])})(n,e)))):[]}function ES(t,e){return{documents:[d_(t,e.path)]}}function TS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=d_(t,r);const i=(function(h){if(h.length!==0)return g_(An.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(g){return{field:lr(g.field),direction:AS(g.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Il(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function IS(t){let e=gS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ve(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const g=m_(p);return g instanceof An&&Gg(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(k){return new da(ur(k.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(g)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,ja(g)?null:g})(n.limit));let l=null;n.startAt&&(l=(function(p){const g=!!p.before,y=p.values||[];return new fa(y,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,y=p.values||[];return new fa(y,g)})(n.endAt)),Ub(e,r,o,i,c,"F",l,h)}function wS(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ur(n.unaryFilter.field);return et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ur(n.unaryFilter.field);return et.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ur(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ur(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(t):t.fieldFilter!==void 0?(function(n){return et.create(ur(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return An.create(n.compositeFilter.filters.map((s=>m_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(n.compositeFilter.op))})(t):ae(30097,{filter:t})}function AS(t){return hS[t]}function RS(t){return fS[t]}function bS(t){return dS[t]}function lr(t){return{fieldPath:t.canonicalString()}}function ur(t){return ht.fromServerFormat(t.fieldPath)}function g_(t){return t instanceof et?(function(n){if(n.op==="=="){if(bd(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NAN"}};if(Rd(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bd(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NAN"}};if(Rd(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lr(n.field),op:RS(n.op),value:n.value}}})(t):t instanceof An?(function(n){const s=n.getFilters().map((r=>g_(r)));return s.length===1?s[0]:{compositeFilter:{op:bS(n.op),filters:s}}})(t):ae(54877,{filter:t})}function SS(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function __(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ls{constructor(e,n,s,r,i=fe.min(),o=fe.min(),c=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CS{constructor(e){this.yt=e}}function PS(t){const e=IS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tl(e,e.limit,"L"):e}class kS{constructor(){this.Cn=new DS}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(gs.min())}updateCollectionGroup(e,n,s){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class DS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new tt(He.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new tt(He.comparator)).toArray()}}const Bd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y_=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(y_,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class xr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xr(0)}static cr(){return new xr(-1)}}const $d="LruGarbageCollector",NS=1048576;function jd([t,e],[n,s]){const r=Te(t,n);return r===0?Te(e,s):r}class VS{constructor(e){this.Ir=e,this.buffer=new tt(jd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();jd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y($d,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jr(n)?Y($d,"Ignoring IndexedDB error during garbage collection: ",n):await $r(n)}await this.Vr(3e5)}))}}class xS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return L.resolve($a.ce);const s=new VS(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Bd)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,c,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,c=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),ar()<=Ee.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function MS(t,e){return new xS(t,e)}class LS{constructor(){this.changes=new Xs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?L.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class US{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Ci(s.mutation,r,Yt.empty(),je.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ie()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ie()){const r=Os();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=fi();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Os();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ie())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,s,r){let i=qn();const o=Si(),c=(function(){return Si()})();return n.forEach(((l,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Ys)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Ci(f.mutation,h,f.mutation.getFieldMask(),je.now())):o.set(h.key,Yt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((h,f)=>o.set(h,f))),n.forEach(((h,f)=>c.set(h,new FS(f,o.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,n){const s=Si();let r=new qe(((o,c)=>o-c)),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const h=n.get(l);if(h===null)return;let f=s.get(l)||Yt.empty();f=c.applyToLocalView(h,f),s.set(l,f);const p=(r.get(c.batchId)||Ie()).add(l);r=r.insert(c.batchId,p)}))})).next((()=>{const o=[],c=r.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,f=l.value,p=e_();f.forEach((g=>{if(!i.has(g)){const y=o_(n.get(g),s.get(g));y!==null&&p.set(g,y),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return L.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):L.resolve(Os());let c=Bi,l=i;return o.next((h=>L.forEach(h,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,l,h,Ie()))).next((f=>({batchId:c,changes:Zg(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next((s=>{let r=fi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=fi();return this.indexManager.getCollectionParents(e,i).next((c=>L.forEach(c,(l=>{const h=(function(p,g){return new qa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((f=>{f.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Et.newInvalidDocument(f)))}));let c=fi();return o.forEach(((l,h)=>{const f=i.get(l);f!==void 0&&Ci(f.mutation,h,Yt.empty(),je.now()),Ga(n,h)&&(c=c.insert(l,h))})),c}))}}class BS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:yn(r.createTime)}})(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:PS(r.bundledQuery),readTime:yn(r.readTime)}})(n)),L.resolve()}}class $S{constructor(){this.overlays=new qe(ie.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Os();return L.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),L.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),L.resolve()}getOverlaysForCollection(e,n,s){const r=Os(),i=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return L.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new qe(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=Os(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=Os(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((h,f)=>c.set(h,f))),!(c.size()>=r)););return L.resolve(c)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new iS(n,s));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class jS{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}class Su{constructor(){this.Qr=new tt(rt.$r),this.Ur=new tt(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new rt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ie(new He([])),s=new rt(n,e),r=new rt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ie(new He([])),s=new rt(n,e),r=new rt(n,e+1);let i=Ie();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new rt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ie.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||ie.comparator(e.key,n.key)}}class HS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tt(rt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rS(i,n,s,r);this.mutationQueue.push(o);for(const c of r)this.Zr=this.Zr.add(new rt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?gu:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rt(n,0),r=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const c=this.Xr(o.Yr);i.push(c)})),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new tt(Te);return n.forEach((r=>{const i=new rt(r,0),o=new rt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{s=s.add(c.Yr)}))})),L.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ie.isDocumentKey(i)||(i=i.child(""));const o=new rt(new ie(i),0);let c=new tt(Te);return this.Zr.forEachWhile((l=>{const h=l.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(c=c.add(l.Yr)),!0)}),o),L.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return L.forEach(n.mutations,(r=>{const i=new rt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new rt(n,0),r=this.Zr.firstAfterOrEqual(s);return L.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class qS{constructor(e){this.ri=e,this.docs=(function(){return new qe(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return L.resolve(s?s.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let s=qn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Et.newInvalidDocument(r))})),L.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=qn();const o=n.path,c=new ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_b(gb(f),s)<=0||(r.has(f.key)||Ga(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ae(9500)}ii(e,n){return L.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new zS(this)}getSize(e){return L.resolve(this.size)}}class zS extends LS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class GS{constructor(e){this.persistence=e,this.si=new Xs((n=>vu(n)),Eu),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Su,this.targetCount=0,this.ai=xr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),L.waitFor(i).next((()=>r))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return L.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),L.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return L.resolve(s)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}class v_{constructor(e,n){this.ui={},this.overlays={},this.ci=new $a(0),this.li=!1,this.li=!0,this.hi=new jS,this.referenceDelegate=e(this),this.Pi=new GS(this),this.indexManager=new kS,this.remoteDocumentCache=(function(r){return new qS(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new CS(n),this.Ii=new BS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $S,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new HS(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Y("MemoryPersistence","Starting transaction:",e);const r=new KS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return L.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class KS extends vb{constructor(e){super(),this.currentSequenceNumber=e}}class Cu{constructor(e){this.persistence=e,this.Ri=new Su,this.Vi=null}static mi(e){return new Cu(e)}get fi(){if(this.Vi)return this.Vi;throw ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),L.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(s=>{const r=ie.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,fe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ga{constructor(e,n){this.persistence=e,this.pi=new Xs((s=>Ib(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=MS(this,n)}static mi(e,n){return new ga(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return L.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?L.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((c=>{c||(s++,i.removeEntry(o,fe.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),L.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ho(e.data.value)),n}br(e,n,s){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return L.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ie(),r=Ie();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pu(e,n.fromCache,s,r)}}class WS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MI()?8:Eb(At())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new WS;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(ar()<=Ee.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ar()<=Ee.DEBUG&&Y("QueryEngine","Query:",cr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(ar()<=Ee.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):L.resolve())}ys(e,n){if(kd(n))return L.resolve(null);let s=gn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Tl(n,null,"F"),s=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Ie(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,s).next((l=>{const h=this.Ds(n,c);return this.Cs(n,h,o,l.readTime)?this.ys(e,Tl(n,null,"F")):this.vs(e,h,n,l)}))))})))))}ws(e,n,s,r){return kd(n)||r.isEqual(fe.min())?L.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?L.resolve(null):(ar()<=Ee.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cr(n)),this.vs(e,o,n,mb(r,Bi)).next((c=>c)))}))}Ds(e,n){let s=new tt(Xg(e));return n.forEach(((r,i)=>{Ga(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return ar()<=Ee.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",cr(n)),this.ps.getDocumentsMatchingQuery(e,n,gs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const ku="LocalStore",JS=3e8;class XS{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new qe(Te),this.xs=new Xs((i=>vu(i)),Eu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new US(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YS(t,e,n,s){return new XS(t,e,n,s)}async function E_(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],c=[];let l=Ie();for(const h of r){o.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of i){c.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(s,l).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function ZS(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,f){const p=h.batch,g=p.keys();let y=L.resolve();return g.forEach((k=>{y=y.next((()=>f.getEntry(l,k))).next((N=>{const V=h.docVersions.get(k);Ve(V!==null,48541),N.version.compareTo(V)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let l=Ie();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function T_(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function e0(t,e){const n=de(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const g=r.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(dt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,s)),r=r.insert(p,y),(function(N,V,$){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=JS?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(g,y,f)&&c.push(n.Pi.updateTargetData(i,y))}));let l=qn(),h=Ie();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(t0(i,o,e.documentUpdates).next((f=>{l=f.ks,h=f.qs}))),!s.isEqual(fe.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));c.push(f)}return L.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,h))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function t0(t,e,n){let s=Ie(),r=Ie();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=qn();return n.forEach(((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Y(ku,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function n0(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function s0(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,L.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new ls(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function bl(t,e,n){const s=de(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!jr(o))throw o;Y(ku,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Hd(t,e,n){const s=de(t);let r=fe.min(),i=Ie();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,h,f){const p=de(l),g=p.xs.get(f);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,f)})(s,o,gn(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:fe.min(),n?i:Ie()))).next((c=>(r0(s,jb(e),c),{documents:c,Qs:i})))))}function r0(t,e,n){let s=t.Os.get(e)||fe.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class qd{constructor(){this.activeTargetIds=Wb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i0{constructor(){this.Mo=new qd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qd,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o0{Oo(e){}shutdown(){}}const zd="ConnectivityMonitor";class Gd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(zd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(zd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ko=null;function Sl(){return ko===null?ko=(function(){return 268435456+Math.round(2147483648*Math.random())})():ko++,"0x"+ko.toString(16)}const Uc="RestConnection",a0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c0{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ua?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Sl(),c=this.zo(e,n.toUriEncodedString());Y(Uc,`Sending RPC '${e}' ${o}:`,c,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:h}=new URL(c),f=Lr(h);return this.Jo(e,c,l,s,f).then((p=>(Y(Uc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw kr(Uc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Br})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=a0[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class l0{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const _t="WebChannelConnection";class u0 extends c0{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Sl();return new Promise(((c,l)=>{const h=new bg;h.setWithCredentials(!0),h.listenOnce(Sg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case jo.NO_ERROR:const p=h.getResponseJson();Y(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case jo.TIMEOUT:Y(_t,`RPC '${e}' ${o} timed out`),l(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case jo.HTTP_ERROR:const g=h.getStatus();if(Y(_t,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const k=y?.error;if(k&&k.status&&k.message){const N=(function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(H)>=0?H:B.UNKNOWN})(k.status);l(new te(N,k.message))}else l(new te(B.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new te(B.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Y(_t,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);Y(_t,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=Sl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kg(),c=Pg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const f=i.join("");Y(_t,`Creating RPC '${e}' stream ${r}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let g=!1,y=!1;const k=new l0({Yo:V=>{y?Y(_t,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(g||(Y(_t,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),Y(_t,`RPC '${e}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),N=(V,$,H)=>{V.listen($,(G=>{try{H(G)}catch(z){setTimeout((()=>{throw z}),0)}}))};return N(p,hi.EventType.OPEN,(()=>{y||(Y(_t,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),N(p,hi.EventType.CLOSE,(()=>{y||(y=!0,Y(_t,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(p))})),N(p,hi.EventType.ERROR,(V=>{y||(y=!0,kr(_t,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),k.a_(new te(B.UNAVAILABLE,"The operation could not be completed")))})),N(p,hi.EventType.MESSAGE,(V=>{if(!y){const $=V.data[0];Ve(!!$,16349);const H=$,G=H?.error||H[0]?.error;if(G){Y(_t,`RPC '${e}' stream ${r} received error:`,G);const z=G.status;let he=(function(_){const v=Qe[_];if(v!==void 0)return c_(v)})(z),ge=G.message;he===void 0&&(he=B.INTERNAL,ge="Unknown error status: "+z+" with message "+G.message),y=!0,k.a_(new te(he,ge)),p.close()}else Y(_t,`RPC '${e}' stream ${r} received:`,$),k.u_($)}})),N(c,Cg.STAT_EVENT,(V=>{V.stat===ml.PROXY?Y(_t,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===ml.NOPROXY&&Y(_t,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Bc(){return typeof document<"u"?document:null}function Ja(t){return new pS(t,!0)}class I_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Kd="PersistentStream";class w_{constructor(e,n,s,r,i,o,c,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new te(B.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Y(Kd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Y(Kd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h0 extends w_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_S(this.serializer,e),s=(function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?yn(o.readTime):fe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Rl(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=El(l)?{documents:ES(i,l)}:{query:TS(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=h_(i,o.resumeToken);const h=Il(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(fe.min())>0){c.readTime=ma(i,o.snapshotVersion.toTimestamp());const h=Il(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const s=wS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Rl(this.serializer),n.removeTarget=e,this.q_(n)}}class f0 extends w_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vS(e.writeResults,e.commitTime),s=yn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Rl(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>yS(this.serializer,s)))};this.q_(n)}}class d0{}class p0 extends d0{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,wl(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(B.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,wl(n,s),r,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(B.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class m0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ks="RemoteStore";class g0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{Zs(this)&&(Y(Ks,"Restarting streams for network reachability change."),await(async function(l){const h=de(l);h.Ea.add(4),await ao(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Xa(h)})(this))}))})),this.Ra=new m0(s,r)}}async function Xa(t){if(Zs(t))for(const e of t.da)await e(!0)}async function ao(t){for(const e of t.da)await e(!1)}function A_(t,e){const n=de(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ou(n)?Vu(n):Hr(n).O_()&&Nu(n,e))}function Du(t,e){const n=de(t),s=Hr(n);n.Ia.delete(e),s.O_()&&R_(n,e),n.Ia.size===0&&(s.O_()?s.L_():Zs(n)&&n.Ra.set("Unknown"))}function Nu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hr(t).Y_(e)}function R_(t,e){t.Va.Ue(e),Hr(t).Z_(e)}function Vu(t){t.Va=new uS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hr(t).start(),t.Ra.ua()}function Ou(t){return Zs(t)&&!Hr(t).x_()&&t.Ia.size>0}function Zs(t){return de(t).Ea.size===0}function b_(t){t.Va=void 0}async function _0(t){t.Ra.set("Online")}async function y0(t){t.Ia.forEach(((e,n)=>{Nu(t,e)}))}async function v0(t,e){b_(t),Ou(t)?(t.Ra.ha(e),Vu(t)):t.Ra.set("Unknown")}async function E0(t,e,n){if(t.Ra.set("Online"),e instanceof u_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const c of i.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,o),r.Ia.delete(c),r.Va.removeTarget(c))})(t,e)}catch(s){Y(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _a(t,s)}else if(e instanceof Go?t.Va.Ze(e):e instanceof l_?t.Va.st(e):t.Va.tt(e),!n.isEqual(fe.min()))try{const s=await T_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,h)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),R_(i,l);const p=new ls(f.target,l,h,f.sequenceNumber);Nu(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(s){Y(Ks,"Failed to raise snapshot:",s),await _a(t,s)}}async function _a(t,e,n){if(!jr(e))throw e;t.Ea.add(1),await ao(t),t.Ra.set("Offline"),n||(n=()=>T_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Y(Ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xa(t)}))}function S_(t,e){return e().catch((n=>_a(t,n,e)))}async function Ya(t){const e=de(t),n=Es(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gu;for(;T0(e);)try{const r=await n0(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,I0(e,r)}catch(r){await _a(e,r)}C_(e)&&P_(e)}function T0(t){return Zs(t)&&t.Ta.length<10}function I0(t,e){t.Ta.push(e);const n=Es(t);n.O_()&&n.X_&&n.ea(e.mutations)}function C_(t){return Zs(t)&&!Es(t).x_()&&t.Ta.length>0}function P_(t){Es(t).start()}async function w0(t){Es(t).ra()}async function A0(t){const e=Es(t);for(const n of t.Ta)e.ea(n.mutations)}async function R0(t,e,n){const s=t.Ta.shift(),r=Au.from(s,e,n);await S_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Ya(t)}async function b0(t,e){e&&Es(t).X_&&await(async function(s,r){if((function(o){return aS(o)&&o!==B.ABORTED})(r.code)){const i=s.Ta.shift();Es(s).B_(),await S_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Ya(s)}})(t,e),C_(t)&&P_(t)}async function Wd(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Y(Ks,"RemoteStore received new credentials");const s=Zs(n);n.Ea.add(3),await ao(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xa(n)}async function S0(t,e){const n=de(t);e?(n.Ea.delete(2),await Xa(n)):e||(n.Ea.add(2),await ao(n),n.Ra.set("Unknown"))}function Hr(t){return t.ma||(t.ma=(function(n,s,r){const i=de(n);return i.sa(),new h0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:_0.bind(null,t),t_:y0.bind(null,t),r_:v0.bind(null,t),H_:E0.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Ou(t)?Vu(t):t.Ra.set("Unknown")):(await t.ma.stop(),b_(t))}))),t.ma}function Es(t){return t.fa||(t.fa=(function(n,s,r){const i=de(n);return i.sa(),new f0(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:w0.bind(null,t),r_:b0.bind(null,t),ta:A0.bind(null,t),na:R0.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ya(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class xu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,c=new xu(e,n,o,r,i);return c.start(s),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mu(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),jr(t))return new te(B.UNAVAILABLE,`${e}: ${t}`);throw t}class vr{static emptySet(e){return new vr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ie.comparator(n.key,s.key):(n,s)=>ie.comparator(n.key,s.key),this.keyedMap=fi(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Qd{constructor(){this.ga=new qe(ie.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Mr{constructor(e,n,s,r,i,o,c,l,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Mr(e,n,vr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class C0{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class P0{constructor(){this.queries=Jd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=de(n),i=r.queries;r.queries=Jd(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(s)}))})(this,new te(B.ABORTED,"Firestore shutting down"))}}function Jd(){return new Xs((t=>Jg(t)),za)}async function k0(t,e){const n=de(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new C0,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const c=Mu(o,`Initialization of query '${cr(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Lu(n)}async function D0(t,e){const n=de(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function N0(t,e){const n=de(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(r)&&(s=!0);o.wa=r}}s&&Lu(n)}function V0(t,e,n){const s=de(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Lu(t){t.Ca.forEach((e=>{e.next()}))}var Cl,Xd;(Xd=Cl||(Cl={})).Ma="default",Xd.Cache="cache";class O0{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Mr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cl.Cache}}class k_{constructor(e){this.key=e}}class D_{constructor(e){this.key=e}}class x0{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=Xg(e),this.tu=new vr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Qd,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,p)=>{const g=r.get(f),y=Ga(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let V=!1;g&&y?g.data.isEqual(y.data)?k!==N&&(s.track({type:3,doc:y}),V=!0):this.su(g,y)||(s.track({type:2,doc:y}),V=!0,(l&&this.eu(y,l)>0||h&&this.eu(y,h)<0)&&(c=!0)):!g&&y?(s.track({type:0,doc:y}),V=!0):g&&!y&&(s.track({type:1,doc:g}),V=!0,(l||h)&&(c=!0)),V&&(y?(o=o.add(y),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(y,k){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Rt:V})}};return N(y)-N(k)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(s),r=r??!1;const c=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,h=l!==this.Za;return this.Za=l,o.length!==0||h?{snapshot:new Mr(this.query,e.tu,i,o,e.mutatedKeys,l===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new D_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new k_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fu="SyncEngine";class M0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class L0{constructor(e){this.key=e,this.hu=!1}}class F0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xs((c=>Jg(c)),za),this.Iu=new Map,this.Eu=new Set,this.du=new qe(ie.comparator),this.Au=new Map,this.Ru=new Su,this.Vu={},this.mu=new Map,this.fu=xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U0(t,e,n=!0){const s=L_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await N_(s,e,n,!0),r}async function B0(t,e){const n=L_(t);await N_(n,e,!0,!1)}async function N_(t,e,n,s){const r=await s0(t.localStore,gn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return s&&(c=await $0(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&A_(t.remoteStore,r),c}async function $0(t,e,n,s,r){t.pu=(p,g,y)=>(async function(N,V,$,H){let G=V.view.ru($);G.Cs&&(G=await Hd(N.localStore,V.query,!1).then((({documents:I})=>V.view.ru(I,G))));const z=H&&H.targetChanges.get(V.targetId),he=H&&H.targetMismatches.get(V.targetId)!=null,ge=V.view.applyChanges(G,N.isPrimaryClient,z,he);return Zd(N,V.targetId,ge.au),ge.snapshot})(t,p,g,y);const i=await Hd(t.localStore,e,!0),o=new x0(e,i.Qs),c=o.ru(i.documents),l=oo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(c,t.isPrimaryClient,l);Zd(t,n,h.au);const f=new M0(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function j0(t,e,n){const s=de(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!za(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await bl(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Du(s.remoteStore,r.targetId),Pl(s,r.targetId)})).catch($r)):(Pl(s,r.targetId),await bl(s.localStore,r.targetId,!0))}async function H0(t,e){const n=de(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Du(n.remoteStore,s.targetId))}async function q0(t,e,n){const s=X0(t);try{const r=await(function(o,c){const l=de(o),h=je.now(),f=c.reduce(((y,k)=>y.add(k.key)),Ie());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let k=qn(),N=Ie();return l.Ns.getEntries(y,f).next((V=>{k=V,k.forEach((($,H)=>{H.isValidDocument()||(N=N.add($))}))})).next((()=>l.localDocuments.getOverlayedDocuments(y,k))).next((V=>{p=V;const $=[];for(const H of c){const G=nS(H,p.get(H.key).overlayedDocument);G!=null&&$.push(new Ys(H.key,G,Hg(G.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(y,h,$,c)})).next((V=>{g=V;const $=V.applyToLocalDocumentSet(p,N);return l.documentOverlayCache.saveOverlays(y,V.batchId,$)}))})).then((()=>({batchId:g.batchId,changes:Zg(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,c,l){let h=o.Vu[o.currentUser.toKey()];h||(h=new qe(Te)),h=h.insert(c,l),o.Vu[o.currentUser.toKey()]=h})(s,r.batchId,n),await co(s,r.changes),await Ya(s.remoteStore)}catch(r){const i=Mu(r,"Failed to persist write");n.reject(i)}}async function V_(t,e){const n=de(t);try{const s=await e0(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ve(o.hu,14607):r.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))})),await co(n,s,e)}catch(s){await $r(s)}}function Yd(t,e,n){const s=de(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(o,c){const l=de(o);l.onlineState=c;let h=!1;l.queries.forEach(((f,p)=>{for(const g of p.Sa)g.va(c)&&(h=!0)})),h&&Lu(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function z0(t,e,n){const s=de(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new qe(ie.comparator);o=o.insert(i,Et.newNoDocument(i,fe.min()));const c=Ie().add(i),l=new Qa(fe.min(),new Map,new qe(Te),o,c);await V_(s,l),s.du=s.du.remove(i),s.Au.delete(e),Uu(s)}else await bl(s.localStore,e,!1).then((()=>Pl(s,e,n))).catch($r)}async function G0(t,e){const n=de(t),s=e.batch.batchId;try{const r=await ZS(n.localStore,e);x_(n,s,null),O_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await co(n,r)}catch(r){await $r(r)}}async function K0(t,e,n){const s=de(t);try{const r=await(function(o,c){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next((p=>(Ve(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(h,p)))).next((()=>l.mutationQueue.performConsistencyCheck(h))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>l.localDocuments.getDocuments(h,f)))}))})(s.localStore,e);x_(s,e,n),O_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await co(s,r)}catch(r){await $r(r)}}function O_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function x_(t,e,n){const s=de(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Pl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||M_(t,s)}))}function M_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Du(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Uu(t))}function Zd(t,e,n){for(const s of n)s instanceof k_?(t.Ru.addReference(s.key,e),W0(t,s)):s instanceof D_?(Y(Fu,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||M_(t,s.key)):ae(19791,{wu:s})}function W0(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Y(Fu,"New document in limbo: "+n),t.Eu.add(s),Uu(t))}function Uu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(He.fromString(e)),s=t.fu.next();t.Au.set(s,new L0(n)),t.du=t.du.insert(n,s),A_(t.remoteStore,new ls(gn(Tu(n.path)),s,"TargetPurposeLimboResolution",$a.ce))}}async function co(t,e,n){const s=de(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((c,l)=>{o.push(s.pu(l,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){r.push(h);const f=Pu.As(l.targetId,h);i.push(f)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,h){const f=de(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>L.forEach(h,(g=>L.forEach(g.Es,(y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>L.forEach(g.ds,(y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!jr(p))throw p;Y(ku,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const y=f.Ms.get(g),k=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(k);f.Ms=f.Ms.insert(g,N)}}})(s.localStore,i))}async function Q0(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Y(Fu,"User change. New user:",e.toKey());const s=await E_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new te(B.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await co(n,s.Ls)}}function J0(t,e){const n=de(t),s=n.Au.get(e);if(s&&s.hu)return Ie().add(s.key);{let r=Ie();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const c=n.Tu.get(o);r=r.unionWith(c.view.nu)}return r}}function L_(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z0.bind(null,e),e.Pu.H_=N0.bind(null,e.eventManager),e.Pu.yu=V0.bind(null,e.eventManager),e}function X0(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K0.bind(null,e),e}class ya{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ja(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YS(this.persistence,new QS,e.initialUser,this.serializer)}Cu(e){return new v_(Cu.mi,this.serializer)}Du(e){return new i0}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ya.provider={build:()=>new ya};class Y0 extends ya{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof ga,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OS(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new v_((s=>ga.mi(s,n)),this.serializer)}}class kl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Yd(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q0.bind(null,this.syncEngine),await S0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P0})()}createDatastore(e){const n=Ja(e.databaseInfo.databaseId),s=(function(i){return new u0(i)})(e.databaseInfo);return(function(i,o,c,l){return new p0(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,c){return new g0(s,r,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Yd(this.syncEngine,n,0)),(function(){return Gd.v()?new Gd:new o0})())}createSyncEngine(e,n){return(function(r,i,o,c,l,h,f){const p=new F0(r,i,o,c,l,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=de(n);Y(Ks,"RemoteStore shutting down."),s.Ea.add(5),await ao(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kl.provider={build:()=>new kl};class Z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ts="FirestoreClient";class eC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=pu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{Y(Ts,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(Y(Ts,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Mu(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function $c(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await E_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ep(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tC(t);Y(Ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Wd(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Wd(e.remoteStore,r))),t._onlineComponents=e}async function tC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Ts,"Using user provided OfflineComponentProvider");try{await $c(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await $c(t,new ya)}}else Y(Ts,"Using default OfflineComponentProvider"),await $c(t,new Y0(void 0));return t._offlineComponents}async function F_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Ts,"Using user provided OnlineComponentProvider"),await ep(t,t._uninitializedComponentsProvider._online)):(Y(Ts,"Using default OnlineComponentProvider"),await ep(t,new kl))),t._onlineComponents}function nC(t){return F_(t).then((e=>e.syncEngine))}async function sC(t){const e=await F_(t),n=e.eventManager;return n.onListen=U0.bind(null,e.syncEngine),n.onUnlisten=j0.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=B0.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H0.bind(null,e.syncEngine),n}function rC(t,e,n={}){const s=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,h){const f=new Z0({next:g=>{f.Nu(),o.enqueueAndForget((()=>D0(i,p)));const y=g.docs.has(c);!y&&g.fromCache?h.reject(new te(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?h.reject(new te(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new O0(Tu(c.path),f,{includeMetadataChanges:!0,qa:!0});return k0(i,p)})(await sC(t),t.asyncQueue,e,n,s))),s.promise}function U_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const tp=new Map;const B_="firestore.googleapis.com",np=!0;class sp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B_,this.ssl=np}else this.host=e.host,this.ssl=e.ssl??np;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NS)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new sb;switch(s.type){case"firstParty":return new ab(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=tp.get(n);s&&(Y("ComponentProvider","Removing Datastore"),tp.delete(n),s.terminate())})(this),Promise.resolve()}}function iC(t,e,n,s={}){t=Nr(t,Bu);const r=Lr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;r&&($m(`https://${c}`),jm("Firestore",!0)),i.host!==B_&&i.host!==c&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:r,emulatorOptions:s};if(!Hs(l,o)&&(t._setSettings(l),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=yt.MOCK_USER;else{h=SI(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new yt(p)}t._authCredentials=new rb(new Ng(h,f))}}class $u{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $u(this.firestore,e,this._query)}}class it{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ro(n,it._jsonSchema))return new it(e,s||null,new ie(He.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Je("string",it._jsonSchemaVersion),referencePath:Je("string")};class Ki extends $u{constructor(e,n,s){super(e,n,Tu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ie(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function va(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=pu.newId()),db("doc","path",e),t instanceof Bu){const s=He.fromString(e,...n);return _d(s),new it(t,null,new ie(s))}{if(!(t instanceof it||t instanceof Ki))throw new te(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return _d(s),new it(t.firestore,t instanceof Ki?t.converter:null,new ie(s))}}const rp="AsyncQueue";class ip{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I_(this,"async_queue_retry"),this._c=()=>{const s=Bc();s&&Y(rp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Bc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jr(e))throw e;Y(rp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Hn("INTERNAL UNHANDLED ERROR: ",op(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=xu.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&ae(47125,{Pc:op(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function op(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Za extends Bu{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new ip,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ip(e),this._firestoreClient=void 0,await e}}}function oC(t,e){const n=typeof t=="object"?t:Gm(),s=typeof t=="string"?t:ua,r=nu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=RI("firestore");i&&iC(r,...i)}return r}function $_(t){if(t._terminated)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aC(t),t._firestoreClient}function aC(t){const e=t._freezeSettings(),n=(function(r,i,o,c){return new Rb(r,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,U_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Bt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bt(dt.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ro(e,Bt._jsonSchema))return Bt.fromBase64String(e.bytes)}}Bt._jsonSchemaVersion="firestore/bytes/1.0",Bt._jsonSchema={type:Je("string",Bt._jsonSchemaVersion),bytes:Je("string")};class ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hu{constructor(e){this._methodName=e}}class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(ro(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Je("string",vn._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};class En{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ro(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new En(e.vectorValues);throw new te(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Je("string",En._jsonSchemaVersion),vectorValues:Je("object")};const cC=/^__.*__$/;class lC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new io(e,this.data,n,this.fieldTransforms)}}function j_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ac:t})}}class qu{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ea(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(j_(this.Ac)&&cC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ja(e)}Cc(e,n,s,r=!1){return new qu({Ac:e,methodName:n,Dc:s,path:ht.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hC(t){const e=t._freezeSettings(),n=Ja(t._databaseId);return new uC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fC(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);G_("Data must be an object, but it was:",o,s);const c=q_(s,o);let l,h;if(i.merge)l=new Yt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=dC(e,p,n);if(!o.contains(g))throw new te(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mC(f,g)||f.push(g)}l=new Yt(f),h=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,h=o.fieldTransforms;return new lC(new Ut(c),l,h)}class zu extends Hu{_toFieldTransform(e){return new Yb(e.path,new qi)}isEqual(e){return e instanceof zu}}function H_(t,e){if(z_(t=Ht(t)))return G_("Unsupported field value:",e,t),q_(t,e);if(t instanceof Hu)return(function(s,r){if(!j_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const c of s){let l=H_(c,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=Ht(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Qb(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=je.fromDate(s);return{timestampValue:ma(r.serializer,i)}}if(s instanceof je){const i=new je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ma(r.serializer,i)}}if(s instanceof vn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Bt)return{bytesValue:h_(r.serializer,s._byteString)};if(s instanceof it){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof En)return(function(o,c){return{mapValue:{fields:{[$g]:{stringValue:jg},[ha]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Iu(c.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${mu(s)}`)})(t,e)}function q_(t,e){const n={};return xg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,((s,r)=>{const i=H_(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function z_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof vn||t instanceof Bt||t instanceof it||t instanceof Hu||t instanceof En)}function G_(t,e,n){if(!z_(n)||!Vg(n)){const s=mu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function dC(t,e,n){if((e=Ht(e))instanceof ju)return e._internalPath;if(typeof e=="string")return K_(t,e);throw Ea("Field path arguments must be of type string or ",t,!1,void 0,n)}const pC=new RegExp("[~\\*/\\[\\]]");function K_(t,e,n){if(e.search(pC)>=0)throw Ea(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw Ea(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ea(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new te(B.INVALID_ARGUMENT,c+t+l)}function mC(t,e){return t.some((n=>n.isEqual(e)))}class W_{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Q_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gC extends W_{data(){return super.data()}}function Q_(t,e){return typeof e=="string"?K_(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}class _C{convertValue(e,n="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Js(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[ha].arrayValue?.values?.map((s=>We(s.doubleValue)));return new En(n)}convertGeoPoint(e){return new vn(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ha(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp($i(e));default:return null}}convertTimestamp(e){const n=_s(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Ve(__(s),9688,{name:e});const r=new ji(s.get(1),s.get(3)),i=new ie(s.popFirst(5));return r.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function yC(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class pi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bs extends W_{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Q_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Bs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Bs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bs._jsonSchema={type:Je("string",Bs._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};class Ko extends Bs{data(e={}){return super.data(e)}}class Pi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new pi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ko(this._firestore,this._userDataWriter,s.key,s,new pi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((c=>{const l=new Ko(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Ko(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:vC(c.type),doc:l,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}function J_(t){t=Nr(t,it);const e=Nr(t.firestore,Za);return rC($_(e),t._key).then((n=>wC(e,t,n)))}Pi._jsonSchemaVersion="firestore/querySnapshot/1.0",Pi._jsonSchema={type:Je("string",Pi._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};class EC extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function TC(t,e,n){t=Nr(t,it);const s=Nr(t.firestore,Za),r=yC(t.converter,e,n);return X_(s,[fC(hC(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,_n.none())])}function IC(t){return X_(Nr(t.firestore,Za),[new wu(t._key,_n.none())])}function X_(t,e){return(function(s,r){const i=new ms;return s.asyncQueue.enqueueAndForget((async()=>q0(await nC(s),r,i))),i.promise})($_(t),e)}function wC(t,e,n){const s=n.docs.get(e._key),r=new EC(t);return new Bs(t,r,e._key,s,new pi(n.hasPendingWrites,n.fromCache),e.converter)}function AC(){return new zu("serverTimestamp")}(function(e,n=!0){(function(r){Br=r})(Fr),Cr(new qs("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),c=new Za(new ib(s.getProvider("auth-internal")),new cb(o,s.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ji(h.options.projectId,f)})(o,r),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ds(dd,pd,e),ds(dd,pd,"esm2020")})();const RC={apiKey:"AIzaSyDMvSyTEhJGh7a0coyDWCDiAsWCgxE9QsU",authDomain:"realcitytransport.firebaseapp.com",databaseURL:"https://realcitytransport-default-rtdb.firebaseio.com",projectId:"realcitytransport",storageBucket:"realcitytransport.firebasestorage.app",messagingSenderId:"510805652928",appId:"1:510805652928:web:0559bdd8da50af10b7c425",measurementId:"G-JE98MMZMCW"},Y_=zm(RC),Dl=ZR(Y_),Ta=oC(Y_),Z_=Ne(null),li=Ne(null),ey=Ne(!1);let ap=!1;ap||($A(Dl,t=>{Z_.value=t,ey.value=!0,t?console.log("   :  ",t.displayName||t.email):console.log("   :  ")}),ap=!0);function Gu(){return{user:Z_,authError:li,authReady:ey,signInWithGoogle:async()=>{const n=new Dn;try{const s=await cR(Dl,n);return li.value=null,console.log("useAuth:  !",s.user.displayName||s.user.email),s.user}catch(s){throw li.value=s,console.error("useAuth:  :",s),s}},signOutUser:async()=>{try{return await jA(Dl),li.value=null,console.log("useAuth:  !"),!0}catch(n){throw li.value=n,console.error("useAuth:  :",n),n}}}}const qt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},bC={class:"top-bar-area"},SC={class:"top-bar-content"},CC={class:"kst-time-display"},PC={class:"time-value"},kC={class:"user-auth-area"},DC={__name:"TheTopBar",setup(t){Ne(1e6);const{kstString:e}=Tm(),{user:n,signInWithGoogle:s,signOutUser:r}=Gu();return(i,o)=>(le(),me("header",bC,[P("div",SC,[o[2]||(o[2]=P("div",{class:"logo-area"},[P("h1",{class:"game-title"},"RCTS")],-1)),P("div",CC,[o[1]||(o[1]=P("span",{class:"time-label"},"KST",-1)),P("span",PC,xe(be(e)),1)]),P("div",kC,[P("button",{class:"login-btn",onClick:o[0]||(o[0]=c=>be(n)?be(r)():be(s)())},xe(be(n)?"":""),1)])])]))}},NC=qt(DC,[["__scopeId","data-v-629df092"]]),{kstDate:mi,isKstTimeReady:ty}=Tm(),Ku=["bus","truck","rail","plane","ship","spaceship"],Ia={bus:{name:"",icon:""},truck:{name:"",icon:""},rail:{name:"",icon:""},plane:{name:"",icon:""},ship:{name:"",icon:""},spaceship:{name:"",icon:""}},ny="rcts.research.saveEnabled",sy="rcts.research.autosave.enabled",ry="rcts.research.autosave.base",Wu="rcts.research.autosave.intervalMin",dn=Ne(null),Wt=Ne(Xu()),jc=Ne(!1),Nl=Ne(!1),Nn=Ne(!1),Ws=Ne(null);let Pt=null,$s=!1;const js=Ne(oy(ny,!0)),Wi=Ne(oy(sy,!1)),Qu=Ne(ay(ry,5)),Qi=Ne(ay(Wu,10)),Ju=Ne(!1),iy=Ne(0);let xs=null;function Xu(){return Ku.map(t=>({id:t,name:Ia[t]?.name??t,icon:Ia[t]?.icon??"",locked:!0,isResearching:!1,researchFinishTime:null,researchStartTime:null}))}function oy(t,e){const n=localStorage.getItem(t);return n===null?e:n==="1"}function ay(t,e){const n=localStorage.getItem(t),s=n==null?NaN:Number(n);return Number.isFinite(s)?s:e}function cy(t,e){localStorage.setItem(t,e?"1":"0")}function Vl(t,e){localStorage.setItem(t,String(e))}function VC(t){js.value=!!t,cy(ny,js.value),js.value?lo():(Pt&&(clearTimeout(Pt),Pt=null),Jt())}function OC(t){Wi.value=!!t,cy(sy,Wi.value),lo()}function xC(t){const e=Number(t)===10?10:5;Qu.value=e,Vl(ry,e);const n=Number(Qi.value)||e,s=Math.max(e,Math.round(n/e)*e);Qi.value=s,Vl(Wu,s),lo(!0)}function MC(t){const e=Number(Qu.value)===10?10:5,n=Number(t);if(!Number.isFinite(n)||n<=0)return;const s=Math.max(e,Math.round(n/e)*e);Qi.value=s,Vl(Wu,s),lo(!0)}function LC(t){const e=Number(t);if(!Number.isFinite(e)||e<=0)return 6e4;const n=e*60*1e3,s=540*60*1e3,r=Date.now()+s,o=(Math.floor(r/n)+1)*n-r;return Math.max(1e3,o)}function Jt(){Ju.value=!1,xs&&(clearTimeout(xs),xs=null)}function ly(){if(xs&&(clearTimeout(xs),xs=null),!Wi.value||!js.value||!Ws.value||!Nn.value||$s)return Jt();Ju.value=!0;const t=Number(Qi.value)||10,e=LC(t);xs=setTimeout(async()=>{try{await Yu({reason:"autosave"}),iy.value=Date.now()}catch(n){console.error("useResearch:  :",n)}finally{ly()}},e)}function lo(t=!1){t&&Jt(),Wi.value&&js.value&&Ws.value&&Nn.value&&!$s?ly():Jt()}const Do=Ke(()=>ty.value&&mi.value instanceof Date);function uy(){if(!dn.value)return;const t=Wt.value.find(e=>e.id===dn.value);t&&(t.locked=!1,t.isResearching=!1,t.researchStartTime=null,t.researchFinishTime=null)}const FC=Ke(()=>Wt.value.filter(t=>t.locked)),cp=Ke(()=>Wt.value.filter(t=>!t.locked)),UC=Ke(()=>!dn.value),BC=Ke(()=>Ku.map(t=>({id:t,name:Ia[t]?.name??t,icon:Ia[t]?.icon??""})));function $C(){Pt&&(clearTimeout(Pt),Pt=null),Jt(),Ws.value=null,Nn.value=!1,$s=!1}const jC=t=>({id:t.id,locked:!!t.locked,isResearching:!!t.isResearching,researchStartTimeMs:t.researchStartTime instanceof Date?t.researchStartTime.getTime():null,researchFinishTimeMs:t.researchFinishTime instanceof Date?t.researchFinishTime.getTime():null});function HC(t){const e=typeof t?.firstUnlockId=="string"?t.firstUnlockId:null;dn.value=e;const n=new Map((t?.transports||[]).map(s=>[s.id,s]));Wt.value=Xu().map(s=>{const r=n.get(s.id);return r?{...s,locked:typeof r.locked=="boolean"?r.locked:s.locked,isResearching:typeof r.isResearching=="boolean"?r.isResearching:!1,researchStartTime:typeof r.researchStartTimeMs=="number"?new Date(r.researchStartTimeMs):null,researchFinishTime:typeof r.researchFinishTimeMs=="number"?new Date(r.researchFinishTimeMs):null}:{...s}}),uy()}function hy(){return!(!js.value||!Ws.value||!Nn.value||$s)}async function Yu({reason:t="manual"}={}){if(hy()){Pt&&(clearTimeout(Pt),Pt=null);try{Nl.value=!0;const e={version:4,firstUnlockId:dn.value??null,transports:Wt.value.map(jC),updatedAt:AC(),lastSaveReason:t},n=va(Ta,"users",Ws.value,"research","state");await TC(n,e,{merge:!0})}catch(e){console.error("useResearch: Firebase  :",e)}finally{Nl.value=!1}}}const No=()=>{hy()&&(Pt&&clearTimeout(Pt),Pt=setTimeout(async()=>{await Yu({reason:"debounced"})},800))};function ec(){const t=Ke(()=>!Ws.value||Nn.value),e=Ke(()=>Wt.value),n=cp,s=h=>{Ku.includes(h)&&dn.value!==h&&(dn.value=h,uy(),No())},r=h=>{if(!dn.value)return;const f=Wt.value.find(k=>k.id===h);if(!f||!Do.value||f.isResearching||!f.locked)return;const p=new Date(mi.value.getTime()),g=3600*1e3,y=new Date(p.getTime()+g);f.researchStartTime=p,f.researchFinishTime=y,f.isResearching=!0,No()},i=h=>{const f=Wt.value.find(y=>y.id===h);if(!f||!f.isResearching||!(f.researchStartTime instanceof Date)||!(f.researchFinishTime instanceof Date)||!Do.value)return 0;const p=f.researchFinishTime.getTime()-f.researchStartTime.getTime();if(p<=0)return 0;const g=mi.value.getTime()-f.researchStartTime.getTime();return Math.max(0,Math.min(100,g/p*100))},o=h=>{const f=Wt.value.find(V=>V.id===h);if(!f||!(f.researchFinishTime instanceof Date)||!Do.value)return"00h 00m 00s";const p=Math.max(0,f.researchFinishTime.getTime()-mi.value.getTime()),g=Math.floor(p/1e3),y=String(Math.floor(g/3600)).padStart(2,"0"),k=String(Math.floor(g%3600/60)).padStart(2,"0"),N=String(g%60).padStart(2,"0");return`${y}h ${k}m ${N}s`},c=async h=>{if(h){Pt&&(clearTimeout(Pt),Pt=null),Jt(),Ws.value=h,jc.value=!0,Nn.value=!1;try{const f=va(Ta,"users",h,"research","state"),p=await J_(f);$s=!0,p.exists()?(HC(p.data()),console.log("useResearch: Firebase   ")):console.log("useResearch: Firebase   ( )"),$s=!1,Nn.value=!0,lo(!0)}catch(f){$s=!1,console.error("useResearch: Firebase  :",f),Nn.value=!1,Jt()}finally{jc.value=!1}}},l=()=>{$C(),dn.value=null,Wt.value=Xu()};return Rv(()=>{let h=!1;Wt.value.forEach(f=>{f.isResearching&&Do.value&&f.researchFinishTime instanceof Date&&mi.value.getTime()>=f.researchFinishTime.getTime()&&(f.locked=!1,f.isResearching=!1,f.researchFinishTime=null,f.researchStartTime=null,h=!0)}),h&&No()}),{firstUnlockId:dn,needsFirstUnlockSelection:UC,firstUnlockCandidates:BC,setFirstUnlockTransport:s,transportTypes:e,getUnlockedTransports:n,isHydrated:t,lockedTransports:FC,unlockedTransports:cp,unlockTransport:r,getResearchProgress:i,getResearchRemainingTime:o,isKstTimeReady:ty,loadForUser:c,clearUserState:l,saveNow:Yu,scheduleSave:No,saveEnabled:js,setSaveEnabled:VC,autoSaveEnabled:Wi,autoSaveBase:Qu,autoSaveIntervalMin:Qi,setAutoSaveEnabled:OC,setAutoSaveBase:xC,setAutoSaveIntervalMin:MC,autoSaveRunning:Ju,lastAutoSaveAtMs:iy,isLoadingFirebaseData:jc,isSavingFirebaseData:Nl,isStateLoaded:Nn}}const lp=Ne(null);function qC(){return{selectedTransportId:lp,setSelectedTransportId:e=>{lp.value=e}}}const zC={class:"layout-area left-area"},GC={class:"left-panel-wrapper"},KC={class:"transport-list-container"},WC={class:"transport-list"},QC=["onClick"],JC={class:"transport-icon"},XC={class:"transport-name"},YC={key:0,class:"transport-details-container"},ZC={class:"panel-heading"},eP={class:"details-content"},tP={class:"details-placeholder"},nP={key:1,class:"transport-details-placeholder"},sP={__name:"TheLeftArea",setup(t){const{getUnlockedTransports:e,transportTypes:n}=ec(),{selectedTransportId:s,setSelectedTransportId:r}=qC(),i=Ke(()=>s.value?n.value.find(o=>o.id===s.value):null);return(o,c)=>(le(),me("div",zC,[P("div",GC,[P("div",KC,[c[1]||(c[1]=P("h3",{class:"panel-heading"},"   ",-1)),P("ul",WC,[(le(!0),me(lt,null,xo(be(e),l=>(le(),me("li",{key:l.id,class:Er(["transport-item",{active:be(s)===l.id}]),onClick:h=>be(r)(l.id)},[P("span",JC,xe(l.icon),1),P("span",XC,xe(l.name),1),c[0]||(c[0]=P("span",{class:"transport-count"},"0",-1))],10,QC))),128))])]),i.value?(le(),me("div",YC,[P("h3",ZC,xe(i.value.name)+"  ",1),P("div",eP,[P("p",null,[c[2]||(c[2]=P("strong",null,":",-1)),ut(" "+xe(i.value.icon),1)]),P("p",null,[c[3]||(c[3]=P("strong",null,":",-1)),ut(" "+xe(i.value.name),1)]),c[5]||(c[5]=P("p",null,[P("strong",null,"  :"),ut(" 0")],-1)),P("p",null,[c[4]||(c[4]=P("strong",null,"  :",-1)),ut(" "+xe(i.value.locked?"":""),1)]),P("p",tP," "+xe(i.value.name)+"       .",1)])])):(le(),me("div",nP,[...c[6]||(c[6]=[P("p",{class:"placeholder-text"},"     .",-1)])])),c[7]||(c[7]=P("div",{class:"resource-container"},[P("h3",{class:"panel-heading"},"   "),P("p",null,": $10,000")],-1))])]))}},rP=qt(sP,[["__scopeId","data-v-f1fb4967"]]),iP={},oP={class:"layout-area center-area"},aP={class:"center-content-wrapper"},cP={class:"main-content-nav"},lP={class:"main-content-display"};function uP(t,e){const n=Vi("router-link"),s=Vi("router-view");return le(),me("div",oP,[P("div",aP,[P("nav",cP,[P("ul",null,[P("li",null,[Fe(n,{to:"/home/research"},{default:hn(()=>[...e[0]||(e[0]=[ut("",-1)])]),_:1})]),P("li",null,[Fe(n,{to:"/home/vehicles"},{default:hn(()=>[...e[1]||(e[1]=[ut("",-1)])]),_:1})]),P("li",null,[Fe(n,{to:"/home/line"},{default:hn(()=>[...e[2]||(e[2]=[ut("",-1)])]),_:1})]),P("li",null,[Fe(n,{to:"/home/construction"},{default:hn(()=>[...e[3]||(e[3]=[ut("",-1)])]),_:1})]),P("li",null,[Fe(n,{to:"/home/finance"},{default:hn(()=>[...e[4]||(e[4]=[ut("",-1)])]),_:1})]),P("li",null,[Fe(n,{to:"/home/settings"},{default:hn(()=>[...e[5]||(e[5]=[ut("",-1)])]),_:1})])])]),P("div",lP,[Fe(s)])])])}const hP=qt(iP,[["render",uP],["__scopeId","data-v-0703c5ab"]]),fP={class:"game-wrapper"},dP={class:"main-layout-horizontal"},pP={__name:"HomeView",setup(t){return(e,n)=>(le(),me("div",fP,[Fe(NC),P("div",dP,[Fe(rP),Fe(hP)])]))}},mP=qt(pP,[["__scopeId","data-v-7c99d32f"]]),gP={class:"research-page"},_P={class:"research-header"},yP={class:"status-row"},vP={key:0,class:"badge ok"},EP={key:0,class:"panel"},TP={class:"grid"},IP=["disabled","onClick"],wP={class:"choice-icon"},AP={class:"choice-name"},RP={class:"panel"},bP={class:"panel-head"},SP={class:"panel-actions"},CP=["disabled"],PP={key:0,class:"empty"},kP={key:1,class:"empty"},DP={key:2,class:"list"},NP={class:"card-left"},VP={class:"icon"},OP={class:"card-mid"},xP={class:"name-row"},MP={class:"name"},LP={class:"meta"},FP={key:0,class:"pill"},UP={key:1,class:"pill lock"},BP={key:0,class:"progress-area"},$P={class:"progress-bar"},jP={class:"progress-info"},HP={class:"mono"},qP={key:1,class:"hint2"},zP={class:"card-right"},GP=["disabled","onClick"],KP={class:"panel"},WP={key:0,class:"empty"},QP={key:1,class:"empty"},JP={key:2,class:"chips"},XP={class:"chip-ico"},YP={class:"chip-name"},ZP={__name:"ResearchView",setup(t){const{firstUnlockId:e,needsFirstUnlockSelection:n,firstUnlockCandidates:s,setFirstUnlockTransport:r,lockedTransports:i,unlockedTransports:o,isHydrated:c,unlockTransport:l,getResearchProgress:h,getResearchRemainingTime:f,saveNow:p,isStateLoaded:g,isSavingFirebaseData:y,saveEnabled:k}=ec(),N=Ke(()=>!!k.value&&!!g.value&&!y.value);function V(I){const _=s.value.find(v=>v.id===I);return _?_.name:I}function $(I){r(I)}function H(I){return!(!c.value||n.value||!I.locked||I.isResearching)}function G(I){l(I)}function z(I){return h(I)}function he(I){return f(I)}function ge(){console.log("[ResearchView Debug]"),console.log("isHydrated:",c.value),console.log("needsFirstUnlockSelection:",n.value),console.log("firstUnlockId:",e.value),console.log("locked:",i.value.map(I=>I.id)),console.log("unlocked:",o.value.map(I=>I.id))}return(I,_)=>(le(),me("div",gP,[P("header",_P,[_[1]||(_[1]=P("h1",{class:"title"},"",-1)),_[2]||(_[2]=P("p",{class:"desc"},"  1   ,    . ",-1)),P("div",yP,[P("span",{class:Er(["badge",{ok:be(c)}])},xe(be(c)?"  ":"  "),3),P("span",{class:Er(["badge",{warn:be(n)}])},xe(be(n)?"   ":"   "),3),be(e)?(le(),me("span",vP,"  : "+xe(V(be(e))),1)):Ds("",!0)])]),be(n)?(le(),me("section",EP,[_[4]||(_[4]=P("h2",{class:"panel-title"},"    ( )",-1)),_[5]||(_[5]=P("p",{class:"panel-desc"},"  6  1   .    1 . ",-1)),P("div",TP,[(le(!0),me(lt,null,xo(be(s),v=>(le(),me("button",{key:v.id,class:"choice-card",disabled:!be(c),onClick:R=>$(v.id)},[P("div",wP,xe(v.icon),1),P("div",AP,xe(v.name),1),_[3]||(_[3]=P("div",{class:"choice-sub"}," ",-1))],8,IP))),128))]),_[6]||(_[6]=P("div",{class:"hint"},[P("span",{class:"mono"},":"),ut("       . ")],-1))])):Ds("",!0),P("section",RP,[P("div",bP,[_[7]||(_[7]=P("h2",{class:"panel-title"},"  ",-1)),P("div",SP,[P("button",{class:"btn",disabled:!N.value,onClick:_[0]||(_[0]=v=>be(p)({reason:"manual"}))},"   ",8,CP),P("button",{class:"btn ghost",onClick:ge},"   ")])]),_[9]||(_[9]=P("p",{class:"panel-desc"},"        (locked=false),     . ",-1)),be(c)?be(i).length===0?(le(),me("div",kP,"    . ( ,       .) ")):(le(),me("div",DP,[(le(!0),me(lt,null,xo(be(i),v=>(le(),me("article",{key:v.id,class:"card"},[P("div",NP,[P("div",VP,xe(v.icon),1)]),P("div",OP,[P("div",xP,[P("div",MP,xe(v.name),1),P("div",LP,[v.isResearching?(le(),me("span",FP,"")):(le(),me("span",UP,"")),_[8]||(_[8]=P("span",{class:"pill time"},": 1",-1))])]),v.isResearching?(le(),me("div",BP,[P("div",$P,[P("div",{class:"progress-fill",style:Ca({width:z(v.id)+"%"})},null,4)]),P("div",jP,[P("span",null,xe(z(v.id).toFixed(1))+"%",1),P("span",HP,": "+xe(he(v.id)),1)])])):(le(),me("div",qP,"    1   . "))]),P("div",zP,[P("button",{class:"btn primary",disabled:!H(v),onClick:R=>G(v.id)},xe(v.isResearching?"":" "),9,GP)])]))),128))])):(le(),me("div",PP,"       . "))]),P("section",KP,[_[10]||(_[10]=P("h2",{class:"panel-title"}," ",-1)),_[11]||(_[11]=P("p",{class:"panel-desc"},"       . ",-1)),be(c)?be(o).length===0?(le(),me("div",QP,"   .")):(le(),me("div",JP,[(le(!0),me(lt,null,xo(be(o),v=>(le(),me("span",{key:v.id,class:"chip"},[P("span",XP,xe(v.icon),1),P("span",YP,xe(v.name),1)]))),128))])):(le(),me("div",WP," "))])]))}},e1=qt(ZP,[["__scopeId","data-v-9e9ae472"]]),t1={class:"vehicles-page-container"},n1={__name:"VehiclesView",setup(t){return(e,n)=>(le(),me("div",t1,[...n[0]||(n[0]=[P("h2",{class:"page-title"},"   ",-1),P("p",{class:"page-description"},"       .   ,     . ",-1),P("p",{class:"placeholder-text"},"     . (  )",-1)])]))}},s1=qt(n1,[["__scopeId","data-v-ab2e0e12"]]),r1={},i1={class:"line-page-container"};function o1(t,e){return le(),me("div",i1,[...e[0]||(e[0]=[P("h2",{class:"page-title"},"   ",-1),P("p",{class:"page-description"},"      .",-1),P("p",{class:"placeholder-text"},"(     .)",-1)])])}const a1=qt(r1,[["render",o1],["__scopeId","data-v-986441d8"]]),c1={},l1={class:"construction-page-container"};function u1(t,e){return le(),me("div",l1,[...e[0]||(e[0]=[P("h2",{class:"page-title"},"   ",-1),P("p",{class:"page-description"},"     .",-1),P("p",{class:"placeholder-text"},"(     .)",-1)])])}const h1=qt(c1,[["render",u1],["__scopeId","data-v-bbfe3657"]]),f1={},d1={class:"finance-page-container"};function p1(t,e){return le(),me("div",d1,[...e[0]||(e[0]=[P("h2",{class:"page-title"},"   ",-1),P("p",{class:"page-description"},"     .",-1),P("p",{class:"placeholder-text"},"(     .)",-1)])])}const m1=qt(f1,[["render",p1],["__scopeId","data-v-eb5d7345"]]),g1={},_1={class:"settings-shell"},y1={class:"settings-nav"},v1={class:"settings-content"};function E1(t,e){return le(),me("div",_1,[P("aside",y1,[Wh(t.$slots,"nav",{},void 0)]),P("section",v1,[Wh(t.$slots,"content",{},void 0)])])}const T1=qt(g1,[["render",E1],["__scopeId","data-v-c3b57252"]]),I1={},w1={class:"settings-nav-inner"},A1={class:"menu"};function R1(t,e){const n=Vi("router-link");return le(),me("nav",w1,[e[1]||(e[1]=P("h3",{class:"title"},"",-1)),P("ul",A1,[P("li",null,[Fe(n,{to:{name:"DataManager"}},{default:hn(()=>[...e[0]||(e[0]=[ut("   ",-1)])]),_:1})])])])}const b1=qt(I1,[["render",R1],["__scopeId","data-v-96f4cf08"]]),S1={__name:"SettingsView",setup(t){return(e,n)=>{const s=Vi("router-view");return le(),wr(T1,null,{nav:hn(()=>[Fe(b1)]),content:hn(()=>[Fe(s)]),_:1})}}},C1={class:"data-manager"},P1={class:"card"},k1={class:"kv"},D1={class:"v"},N1={key:0,class:"hint"},V1={class:"card"},O1={class:"row"},x1=["disabled"],M1=["disabled"],L1=["disabled"],F1={class:"autosave"},U1={class:"autosave-controls"},B1={class:"radio"},$1=["disabled"],j1={class:"radio"},H1=["disabled"],q1={class:"radio"},z1=["disabled"],G1={key:0,class:"hint"},K1={key:0,class:"message"},W1={key:1,class:"preview"},Q1={class:"preview-head"},J1={class:"summary"},X1={class:"summary-item"},Y1={class:"summary-v"},Z1={class:"summary-item"},ek={class:"summary-v"},tk={class:"summary-item"},nk={class:"summary-v"},sk={key:0,class:"pre"},rk={key:2,class:"hint"},ik={class:"modal"},ok={class:"check"},ak={class:"row"},ck=["disabled"],lk=["disabled"],uk={__name:"DataManagerPanel",setup(t){const e=Gu(),n=Ke(()=>(e?.user?.value??e?.currentUser?.value??e?.firebaseUser?.value??e?.user??e?.currentUser??null)?.uid??null),{saveNow:s,isSavingFirebaseData:r,autoSaveEnabled:i,autoSaveBase:o,autoSaveIntervalMin:c,setAutoSaveEnabled:l,setAutoSaveBase:h,setAutoSaveIntervalMin:f,autoSaveRunning:p}=ec(),g=Ke(()=>r.value),y=Ne(!1),k=Ne(""),N=Ne(!1),V=Ne(null),$=Ne(!1);function H(ee){return JSON.stringify(ee,null,2)}function G(ee){if(!ee)return"-";try{return typeof ee?.toDate=="function"?ee.toDate().toLocaleString():ee instanceof Date?ee.toLocaleString():typeof ee=="number"?new Date(ee).toLocaleString():String(ee)}catch{return String(ee)}}const z=Ne("off");function he(){if(!i.value){z.value="off";return}const ee=Number(o.value),Z=Number(c.value);ee===10&&Z===10?z.value="10":ee===5&&Z===5?z.value="5":ee===10?z.value="10":z.value="5"}Fs([i,o,c],()=>he(),{immediate:!0}),Fs(z,ee=>{if(n.value){if(ee==="off"){l(!1);return}if(ee==="5"){h(5),f(5),l(!0);return}ee==="10"&&(h(10),f(10),l(!0))}});async function ge(){if(n.value){k.value="";try{await s({reason:"manual-ui"}),k.value=" ."}catch(ee){console.error("DataManager: save failed",ee),k.value=` : ${String(ee?.message??ee)}`}}}async function I(){if(n.value){y.value=!0,k.value="",N.value=!1,V.value=null,$.value=!1;try{const ee=va(Ta,"users",n.value,"research","state"),Z=await J_(ee);Z.exists()?(V.value=Z.data(),N.value=!0,k.value="  ."):k.value="  . ( )"}catch(ee){console.error("DataManager: load failed",ee),k.value=` : ${String(ee?.message??ee)}`}finally{y.value=!1}}}const _=Ne(!1),v=Ne(!1),R=Ne("");function A(){_.value=!0,v.value=!1,R.value=""}function b(){_.value=!1}async function T(){if(n.value){y.value=!0,k.value="";try{const ee=va(Ta,"users",n.value,"research","state");await IC(ee),N.value=!1,V.value=null,$.value=!1,k.value=" .   .",b()}catch(ee){console.error("DataManager: delete failed",ee),k.value=` : ${String(ee?.message??ee)}`}finally{y.value=!1}}}return(ee,Z)=>(le(),me("div",C1,[Z[22]||(Z[22]=P("header",{class:"header"},[P("div",null,[P("h1",{class:"title"}," "),P("p",{class:"desc"},"   ,        . ")])],-1)),P("section",P1,[Z[7]||(Z[7]=P("h2",{class:"card-title"}," ",-1)),P("div",k1,[Z[6]||(Z[6]=P("div",{class:"k"}," ",-1)),P("div",D1,xe(n.value?"":"()"),1)]),n.value?Ds("",!0):(le(),me("p",N1," Firestore  /   . "))]),P("section",V1,[Z[16]||(Z[16]=P("h2",{class:"card-title"}," ",-1)),P("div",O1,[P("button",{class:"btn",onClick:ge,disabled:!n.value||y.value||g.value},"  ",8,x1),P("button",{class:"btn",onClick:I,disabled:!n.value||y.value},"   ",8,M1),P("button",{class:"btn danger",onClick:A,disabled:!n.value||y.value},"   ",8,L1)]),P("div",F1,[Z[11]||(Z[11]=P("div",{class:"autosave-title"},"",-1)),P("div",U1,[P("label",B1,[oi(P("input",{type:"radio",name:"autosave",value:"off","onUpdate:modelValue":Z[0]||(Z[0]=Se=>z.value=Se),disabled:!n.value||y.value},null,8,$1),[[Rc,z.value]]),Z[8]||(Z[8]=P("span",null,"",-1))]),P("label",j1,[oi(P("input",{type:"radio",name:"autosave",value:"5","onUpdate:modelValue":Z[1]||(Z[1]=Se=>z.value=Se),disabled:!n.value||y.value},null,8,H1),[[Rc,z.value]]),Z[9]||(Z[9]=P("span",null,"5",-1))]),P("label",q1,[oi(P("input",{type:"radio",name:"autosave",value:"10","onUpdate:modelValue":Z[2]||(Z[2]=Se=>z.value=Se),disabled:!n.value||y.value},null,8,z1),[[Rc,z.value]]),Z[10]||(Z[10]=P("span",null,"10",-1))])]),n.value&&be(i)&&be(p)?(le(),me("p",G1,"    (KST   ) ")):Ds("",!0)]),k.value?(le(),me("p",K1,xe(k.value),1)):Ds("",!0),N.value?(le(),me("div",W1,[P("div",Q1,[Z[12]||(Z[12]=P("h3",{class:"preview-title"},"    ",-1)),P("button",{class:"btn small",onClick:Z[3]||(Z[3]=Se=>$.value=!$.value)},xe($.value?"":""),1)]),P("div",J1,[P("div",X1,[Z[13]||(Z[13]=P("div",{class:"summary-k"},"",-1)),P("div",Y1,xe(V.value?.version??"-"),1)]),P("div",Z1,[Z[14]||(Z[14]=P("div",{class:"summary-k"},"  ",-1)),P("div",ek,xe(V.value?.transports?.length??0),1)]),P("div",tk,[Z[15]||(Z[15]=P("div",{class:"summary-k"},"",-1)),P("div",nk,xe(G(V.value?.updatedAt)),1)])]),$.value?(le(),me("pre",sk,xe(H(V.value)),1)):Ds("",!0)])):(le(),me("p",rk,"   ."))]),_.value?(le(),me("div",{key:0,class:"modal-backdrop",onClick:tT(b,["self"])},[P("div",ik,[Z[18]||(Z[18]=P("h2",{class:"modal-title"}," ?",-1)),Z[19]||(Z[19]=P("p",{class:"modal-desc danger-text"},"     .  ? ",-1)),Z[20]||(Z[20]=P("p",{class:"modal-desc"},[ut("   ,  "),P("b",null," "),ut(". ")],-1)),P("label",ok,[oi(P("input",{type:"checkbox","onUpdate:modelValue":Z[4]||(Z[4]=Se=>v.value=Se)},null,512),[[YE,v.value]]),Z[17]||(Z[17]=P("span",null,"      .",-1))]),Z[21]||(Z[21]=P("p",{class:"modal-desc"},[ut("   "),P("b",null,"DELETE"),ut(" . ")],-1)),oi(P("input",{class:"input","onUpdate:modelValue":Z[5]||(Z[5]=Se=>R.value=Se),placeholder:"DELETE"},null,512),[[XE,R.value]]),P("div",ak,[P("button",{class:"btn",onClick:b,disabled:y.value},"",8,ck),P("button",{class:"btn danger",onClick:T,disabled:y.value||!v.value||R.value!=="DELETE"},"   ",8,lk)])])])):Ds("",!0)]))}},hk=qt(uk,[["__scopeId","data-v-17233cc7"]]),fk={__name:"DataManagerView",setup(t){return(e,n)=>(le(),wr(hk))}},dk=[{path:"/",redirect:{name:"Research"}},{path:"/home",component:mP,children:[{path:"",redirect:{name:"Research"}},{path:"research",name:"Research",component:e1},{path:"vehicles",name:"Vehicles",component:s1},{path:"line",name:"Line",component:a1},{path:"construction",name:"Construction",component:h1},{path:"finance",name:"Finance",component:m1},{path:"settings",component:S1,children:[{path:"",redirect:{name:"DataManager"}},{path:"data",name:"DataManager",component:fk}]}]}],pk=gI({history:WT(),routes:dk}),{user:mk,authReady:gk}=Gu(),{loadForUser:_k,clearUserState:yk}=ec();let Hc=null;Fs([gk,mk],async([t,e])=>{if(!t)return;if(!e){Hc=null,yk();return}const n=e.uid;n&&n!==Hc&&(Hc=n,await _k(n))},{immediate:!0});const fy=rT(uT);fy.use(pk);fy.mount("#app");
