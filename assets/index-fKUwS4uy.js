(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Xc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const je={},vr=[],Tn=()=>{},Pp=()=>!1,Ua=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Jc=t=>t.startsWith("onUpdate:"),Dt=Object.assign,Zc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},av=Object.prototype.hasOwnProperty,Me=(t,e)=>av.call(t,e),ge=Array.isArray,Er=t=>lo(t)==="[object Map]",Ba=t=>lo(t)==="[object Set]",ad=t=>lo(t)==="[object Date]",Te=t=>typeof t=="function",it=t=>typeof t=="string",dn=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",kp=t=>(He(t)||Te(t))&&Te(t.then)&&Te(t.catch),Np=Object.prototype.toString,lo=t=>Np.call(t),lv=t=>lo(t).slice(8,-1),Dp=t=>lo(t)==="[object Object]",eu=t=>it(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Si=Xc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$a=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},cv=/-\w/g,Zt=$a(t=>t.replace(cv,e=>e.slice(1).toUpperCase())),uv=/\B([A-Z])/g,nr=$a(t=>t.replace(uv,"-$1").toLowerCase()),ja=$a(t=>t.charAt(0).toUpperCase()+t.slice(1)),Vl=$a(t=>t?`on${ja(t)}`:""),ys=(t,e)=>!Object.is(t,e),Ko=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Vp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},tu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ld;const qa=()=>ld||(ld=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ha(t){if(ge(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=it(s)?pv(s):Ha(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(it(t)||He(t))return t}const hv=/;(?![^(]*\))/g,dv=/:([^]+)/,fv=/\/\*[^]*?\*\//g;function pv(t){const e={};return t.replace(fv,"").split(hv).forEach(n=>{if(n){const s=n.split(dv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Cr(t){let e="";if(it(t))e=t;else if(ge(t))for(let n=0;n<t.length;n++){const s=Cr(t[n]);s&&(e+=s+" ")}else if(He(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const mv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gv=Xc(mv);function Op(t){return!!t||t===""}function _v(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Pr(t[s],e[s]);return n}function Pr(t,e){if(t===e)return!0;let n=ad(t),s=ad(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=dn(t),s=dn(e),n||s)return t===e;if(n=ge(t),s=ge(e),n||s)return n&&s?_v(t,e):!1;if(n=He(t),s=He(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Pr(t[o],e[o]))return!1}}return String(t)===String(e)}function xp(t,e){return t.findIndex(n=>Pr(n,e))}const Lp=t=>!!(t&&t.__v_isRef===!0),oe=t=>it(t)?t:t==null?"":ge(t)||He(t)&&(t.toString===Np||!Te(t.toString))?Lp(t)?oe(t.value):JSON.stringify(t,Mp,2):String(t),Mp=(t,e)=>Lp(e)?Mp(t,e.value):Er(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Ol(s,i)+" =>"]=r,n),{})}:Ba(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ol(n))}:dn(e)?Ol(e):He(e)&&!ge(e)&&!Dp(e)?String(e):e,Ol=(t,e="")=>{var n;return dn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Bt;class yv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bt,!e&&Bt&&(this.index=(Bt.scopes||(Bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Bt;try{return Bt=this,e()}finally{Bt=n}}}on(){++this._on===1&&(this.prevScope=Bt,Bt=this)}off(){this._on>0&&--this._on===0&&(Bt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function vv(){return Bt}let Ke;const xl=new WeakSet;class Fp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bt&&Bt.active&&Bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xl.has(this)&&(xl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cd(this),$p(this);const e=Ke,n=ln;Ke=this,ln=!0;try{return this.fn()}finally{jp(this),Ke=e,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ru(e);this.deps=this.depsTail=void 0,cd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oc(this)&&this.run()}get dirty(){return oc(this)}}let Up=0,Ci,Pi;function Bp(t,e=!1){if(t.flags|=8,e){t.next=Pi,Pi=t;return}t.next=Ci,Ci=t}function nu(){Up++}function su(){if(--Up>0)return;if(Pi){let e=Pi;for(Pi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ci;){let e=Ci;for(Ci=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function $p(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),ru(s),Ev(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function oc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(qp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function qp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$i)||(t.globalVersion=$i,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!oc(t))))return;t.flags|=2;const e=t.dep,n=Ke,s=ln;Ke=t,ln=!0;try{$p(t);const r=t.fn(t._value);(e.version===0||ys(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ke=n,ln=s,jp(t),t.flags&=-3}}function ru(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ru(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ev(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ln=!0;const Hp=[];function qn(){Hp.push(ln),ln=!1}function Hn(){const t=Hp.pop();ln=t===void 0?!0:t}function cd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ke;Ke=void 0;try{e()}finally{Ke=n}}}let $i=0;class Tv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class iu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ke||!ln||Ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ke)n=this.activeLink=new Tv(Ke,this),Ke.deps?(n.prevDep=Ke.depsTail,Ke.depsTail.nextDep=n,Ke.depsTail=n):Ke.deps=Ke.depsTail=n,Kp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ke.depsTail,n.nextDep=void 0,Ke.depsTail.nextDep=n,Ke.depsTail=n,Ke.deps===n&&(Ke.deps=s)}return n}trigger(e){this.version++,$i++,this.notify(e)}notify(e){nu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{su()}}}function Kp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Kp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ac=new WeakMap,Ks=Symbol(""),lc=Symbol(""),ji=Symbol("");function Ct(t,e,n){if(ln&&Ke){let s=ac.get(t);s||ac.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new iu),r.map=s,r.key=n),r.track()}}function xn(t,e,n,s,r,i){const o=ac.get(t);if(!o){$i++;return}const l=c=>{c&&c.trigger()};if(nu(),e==="clear")o.forEach(l);else{const c=ge(t),h=c&&eu(n);if(c&&n==="length"){const d=Number(s);o.forEach((p,g)=>{(g==="length"||g===ji||!dn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(ji)),e){case"add":c?h&&l(o.get("length")):(l(o.get(Ks)),Er(t)&&l(o.get(lc)));break;case"delete":c||(l(o.get(Ks)),Er(t)&&l(o.get(lc)));break;case"set":Er(t)&&l(o.get(Ks));break}}su()}function dr(t){const e=Le(t);return e===t?e:(Ct(e,"iterate",ji),Jt(t)?e:e.map(fn))}function Ka(t){return Ct(t=Le(t),"iterate",ji),t}function cs(t,e){return Kn(t)?Gs(t)?kr(fn(e)):kr(e):fn(e)}const Iv={__proto__:null,[Symbol.iterator](){return Ll(this,Symbol.iterator,t=>cs(this,t))},concat(...t){return dr(this).concat(...t.map(e=>ge(e)?dr(e):e))},entries(){return Ll(this,"entries",t=>(t[1]=cs(this,t[1]),t))},every(t,e){return Dn(this,"every",t,e,void 0,arguments)},filter(t,e){return Dn(this,"filter",t,e,n=>n.map(s=>cs(this,s)),arguments)},find(t,e){return Dn(this,"find",t,e,n=>cs(this,n),arguments)},findIndex(t,e){return Dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dn(this,"findLast",t,e,n=>cs(this,n),arguments)},findLastIndex(t,e){return Dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ml(this,"includes",t)},indexOf(...t){return Ml(this,"indexOf",t)},join(t){return dr(this).join(t)},lastIndexOf(...t){return Ml(this,"lastIndexOf",t)},map(t,e){return Dn(this,"map",t,e,void 0,arguments)},pop(){return gi(this,"pop")},push(...t){return gi(this,"push",t)},reduce(t,...e){return ud(this,"reduce",t,e)},reduceRight(t,...e){return ud(this,"reduceRight",t,e)},shift(){return gi(this,"shift")},some(t,e){return Dn(this,"some",t,e,void 0,arguments)},splice(...t){return gi(this,"splice",t)},toReversed(){return dr(this).toReversed()},toSorted(t){return dr(this).toSorted(t)},toSpliced(...t){return dr(this).toSpliced(...t)},unshift(...t){return gi(this,"unshift",t)},values(){return Ll(this,"values",t=>cs(this,t))}};function Ll(t,e,n){const s=Ka(t),r=s[e]();return s!==t&&!Jt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const wv=Array.prototype;function Dn(t,e,n,s,r,i){const o=Ka(t),l=o!==t&&!Jt(t),c=o[e];if(c!==wv[e]){const p=c.apply(t,i);return l?fn(p):p}let h=n;o!==t&&(l?h=function(p,g){return n.call(this,cs(t,p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const d=c.call(o,h,s);return l&&r?r(d):d}function ud(t,e,n,s){const r=Ka(t);let i=n;return r!==t&&(Jt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,cs(t,l),c,t)}),r[e](i,...s)}function Ml(t,e,n){const s=Le(t);Ct(s,"iterate",ji);const r=s[e](...n);return(r===-1||r===!1)&&lu(n[0])?(n[0]=Le(n[0]),s[e](...n)):r}function gi(t,e,n=[]){qn(),nu();const s=Le(t)[e].apply(t,n);return su(),Hn(),s}const Av=Xc("__proto__,__v_isRef,__isVue"),Gp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(dn));function bv(t){dn(t)||(t=String(t));const e=Le(this);return Ct(e,"has",t),e.hasOwnProperty(t)}class zp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?xv:Xp:i?Yp:Qp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ge(e);if(!r){let c;if(o&&(c=Iv[n]))return c;if(n==="hasOwnProperty")return bv}const l=Reflect.get(e,n,Nt(e)?e:s);if((dn(n)?Gp.has(n):Av(n))||(r||Ct(e,"get",n),i))return l;if(Nt(l)){const c=o&&eu(n)?l:l.value;return r&&He(c)?uc(c):c}return He(l)?r?uc(l):Ga(l):l}}class Wp extends zp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ge(e)&&eu(n);if(!this._isShallow){const h=Kn(i);if(!Jt(s)&&!Kn(s)&&(i=Le(i),s=Le(s)),!o&&Nt(i)&&!Nt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Me(e,n),c=Reflect.set(e,n,s,Nt(e)?e:r);return e===Le(r)&&(l?ys(s,i)&&xn(e,"set",n,s):xn(e,"add",n,s)),c}deleteProperty(e,n){const s=Me(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&xn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!dn(n)||!Gp.has(n))&&Ct(e,"has",n),s}ownKeys(e){return Ct(e,"iterate",ge(e)?"length":Ks),Reflect.ownKeys(e)}}class Rv extends zp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Sv=new Wp,Cv=new Rv,Pv=new Wp(!0);const cc=t=>t,Oo=t=>Reflect.getPrototypeOf(t);function kv(t,e,n){return function(...s){const r=this.__v_raw,i=Le(r),o=Er(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),d=n?cc:e?kr:fn;return!e&&Ct(i,"iterate",c?lc:Ks),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function xo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Nv(t,e){const n={get(r){const i=this.__v_raw,o=Le(i),l=Le(r);t||(ys(r,l)&&Ct(o,"get",r),Ct(o,"get",l));const{has:c}=Oo(o),h=e?cc:t?kr:fn;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ct(Le(r),"iterate",Ks),r.size},has(r){const i=this.__v_raw,o=Le(i),l=Le(r);return t||(ys(r,l)&&Ct(o,"has",r),Ct(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Le(l),h=e?cc:t?kr:fn;return!t&&Ct(c,"iterate",Ks),l.forEach((d,p)=>r.call(i,h(d),h(p),o))}};return Dt(n,t?{add:xo("add"),set:xo("set"),delete:xo("delete"),clear:xo("clear")}:{add(r){!e&&!Jt(r)&&!Kn(r)&&(r=Le(r));const i=Le(this);return Oo(i).has.call(i,r)||(i.add(r),xn(i,"add",r,r)),this},set(r,i){!e&&!Jt(i)&&!Kn(i)&&(i=Le(i));const o=Le(this),{has:l,get:c}=Oo(o);let h=l.call(o,r);h||(r=Le(r),h=l.call(o,r));const d=c.call(o,r);return o.set(r,i),h?ys(i,d)&&xn(o,"set",r,i):xn(o,"add",r,i),this},delete(r){const i=Le(this),{has:o,get:l}=Oo(i);let c=o.call(i,r);c||(r=Le(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&xn(i,"delete",r,void 0),h},clear(){const r=Le(this),i=r.size!==0,o=r.clear();return i&&xn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=kv(r,t,e)}),n}function ou(t,e){const n=Nv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Me(n,r)&&r in s?n:s,r,i)}const Dv={get:ou(!1,!1)},Vv={get:ou(!1,!0)},Ov={get:ou(!0,!1)};const Qp=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,xv=new WeakMap;function Lv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mv(t){return t.__v_skip||!Object.isExtensible(t)?0:Lv(lv(t))}function Ga(t){return Kn(t)?t:au(t,!1,Sv,Dv,Qp)}function Jp(t){return au(t,!1,Pv,Vv,Yp)}function uc(t){return au(t,!0,Cv,Ov,Xp)}function au(t,e,n,s,r){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Mv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Gs(t){return Kn(t)?Gs(t.__v_raw):!!(t&&t.__v_isReactive)}function Kn(t){return!!(t&&t.__v_isReadonly)}function Jt(t){return!!(t&&t.__v_isShallow)}function lu(t){return t?!!t.__v_raw:!1}function Le(t){const e=t&&t.__v_raw;return e?Le(e):t}function Fv(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&Vp(t,"__v_skip",!0),t}const fn=t=>He(t)?Ga(t):t,kr=t=>He(t)?uc(t):t;function Nt(t){return t?t.__v_isRef===!0:!1}function we(t){return Zp(t,!1)}function Uv(t){return Zp(t,!0)}function Zp(t,e){return Nt(t)?t:new Bv(t,e)}class Bv{constructor(e,n){this.dep=new iu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Le(e),this._value=n?e:fn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Jt(e)||Kn(e);e=s?e:Le(e),ys(e,n)&&(this._rawValue=e,this._value=s?e:fn(e),this.dep.trigger())}}function et(t){return Nt(t)?t.value:t}const $v={get:(t,e,n)=>e==="__v_raw"?t:et(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Nt(r)&&!Nt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function em(t){return Gs(t)?t:new Proxy(t,$v)}class jv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new iu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$i-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ke!==this)return Bp(this,!0),!0}get value(){const e=this.dep.track();return qp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qv(t,e,n=!1){let s,r;return Te(t)?s=t:(s=t.get,r=t.set),new jv(s,r,n)}const Lo={},aa=new WeakMap;let Us;function Hv(t,e=!1,n=Us){if(n){let s=aa.get(n);s||aa.set(n,s=[]),s.push(t)}}function Kv(t,e,n=je){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=W=>r?W:Jt(W)||r===!1||r===0?Ln(W,1):Ln(W);let d,p,g,y,k=!1,D=!1;if(Nt(t)?(p=()=>t.value,k=Jt(t)):Gs(t)?(p=()=>h(t),k=!0):ge(t)?(D=!0,k=t.some(W=>Gs(W)||Jt(W)),p=()=>t.map(W=>{if(Nt(W))return W.value;if(Gs(W))return h(W);if(Te(W))return c?c(W,2):W()})):Te(t)?e?p=c?()=>c(t,2):t:p=()=>{if(g){qn();try{g()}finally{Hn()}}const W=Us;Us=d;try{return c?c(t,3,[y]):t(y)}finally{Us=W}}:p=Tn,e&&r){const W=p,fe=r===!0?1/0:r;p=()=>Ln(W(),fe)}const V=vv(),B=()=>{d.stop(),V&&V.active&&Zc(V.effects,d)};if(i&&e){const W=e;e=(...fe)=>{W(...fe),B()}}let $=D?new Array(t.length).fill(Lo):Lo;const Y=W=>{if(!(!(d.flags&1)||!d.dirty&&!W))if(e){const fe=d.run();if(r||k||(D?fe.some((Ee,A)=>ys(Ee,$[A])):ys(fe,$))){g&&g();const Ee=Us;Us=d;try{const A=[fe,$===Lo?void 0:D&&$[0]===Lo?[]:$,y];$=fe,c?c(e,3,A):e(...A)}finally{Us=Ee}}}else d.run()};return l&&l(Y),d=new Fp(p),d.scheduler=o?()=>o(Y,!1):Y,y=W=>Hv(W,!1,d),g=d.onStop=()=>{const W=aa.get(d);if(W){if(c)c(W,4);else for(const fe of W)fe();aa.delete(d)}},e?s?Y(!0):$=d.run():o?o(Y.bind(null,!0),!0):d.run(),B.pause=d.pause.bind(d),B.resume=d.resume.bind(d),B.stop=B,B}function Ln(t,e=1/0,n){if(e<=0||!He(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Nt(t))Ln(t.value,e,n);else if(ge(t))for(let s=0;s<t.length;s++)Ln(t[s],e,n);else if(Ba(t)||Er(t))t.forEach(s=>{Ln(s,e,n)});else if(Dp(t)){for(const s in t)Ln(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ln(t[s],e,n)}return t}function co(t,e,n,s){try{return s?t(...s):t()}catch(r){za(r,e,n)}}function Cn(t,e,n,s){if(Te(t)){const r=co(t,e,n,s);return r&&kp(r)&&r.catch(i=>{za(i,e,n)}),r}if(ge(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Cn(t[i],e,n,s));return r}}function za(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||je;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,c,h)===!1)return}l=l.parent}if(i){qn(),co(i,null,10,[t,c,h]),Hn();return}}Gv(t,n,r,s,o)}function Gv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Ft=[];let yn=-1;const Tr=[];let us=null,fr=0;const tm=Promise.resolve();let la=null;function nm(t){const e=la||tm;return t?e.then(this?t.bind(this):t):e}function zv(t){let e=yn+1,n=Ft.length;for(;e<n;){const s=e+n>>>1,r=Ft[s],i=qi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function cu(t){if(!(t.flags&1)){const e=qi(t),n=Ft[Ft.length-1];!n||!(t.flags&2)&&e>=qi(n)?Ft.push(t):Ft.splice(zv(e),0,t),t.flags|=1,sm()}}function sm(){la||(la=tm.then(im))}function Wv(t){ge(t)?Tr.push(...t):us&&t.id===-1?us.splice(fr+1,0,t):t.flags&1||(Tr.push(t),t.flags|=1),sm()}function hd(t,e,n=yn+1){for(;n<Ft.length;n++){const s=Ft[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ft.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function rm(t){if(Tr.length){const e=[...new Set(Tr)].sort((n,s)=>qi(n)-qi(s));if(Tr.length=0,us){us.push(...e);return}for(us=e,fr=0;fr<us.length;fr++){const n=us[fr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}us=null,fr=0}}const qi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function im(t){try{for(yn=0;yn<Ft.length;yn++){const e=Ft[yn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),co(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yn<Ft.length;yn++){const e=Ft[yn];e&&(e.flags&=-2)}yn=-1,Ft.length=0,rm(),la=null,(Ft.length||Tr.length)&&im()}}let Et=null,om=null;function ca(t){const e=Et;return Et=t,om=t&&t.type.__scopeId||null,e}function nn(t,e=Et,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&da(-1);const i=ca(e);let o;try{o=t(...r)}finally{ca(i),s._d&&da(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function _i(t,e){if(Et===null)return t;const n=Xa(Et),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=je]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Ln(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ms(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(qn(),Cn(c,n,8,[t.el,l,t,e]),Hn())}}function Go(t,e){if(kt){let n=kt.provides;const s=kt.parent&&kt.parent.provides;s===n&&(n=kt.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=zE();if(s||wr){let r=wr?wr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Te(e)?e.call(s&&s.proxy):e}}const Qv=Symbol.for("v-scx"),Yv=()=>cn(Qv);function am(t,e){return uu(t,null,e)}function Bn(t,e,n){return uu(t,e,n)}function uu(t,e,n=je){const{immediate:s,deep:r,flush:i,once:o}=n,l=Dt({},n),c=e&&s||!e&&i!=="post";let h;if(zi){if(i==="sync"){const y=Yv();h=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=Tn,y.resume=Tn,y.pause=Tn,y}}const d=kt;l.call=(y,k,D)=>Cn(y,d,k,D);let p=!1;i==="post"?l.scheduler=y=>{Kt(y,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(y,k)=>{k?y():cu(y)}),l.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,d&&(y.id=d.uid,y.i=d))};const g=Kv(t,e,l);return zi&&(h?h.push(g):c&&g()),g}function Xv(t,e,n){const s=this.proxy,r=it(t)?t.includes(".")?lm(s,t):()=>s[t]:t.bind(s,s);let i;Te(e)?i=e:(i=e.handler,n=e);const o=uo(this),l=uu(r,i.bind(s),n);return o(),l}function lm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Jv=Symbol("_vte"),Zv=t=>t.__isTeleport,eE=Symbol("_leaveCb");function hu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,hu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function cm(t,e){return Te(t)?Dt({name:t.name},e,{setup:t}):t}function um(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ua=new WeakMap;function ki(t,e,n,s,r=!1){if(ge(t)){t.forEach((k,D)=>ki(k,e&&(ge(e)?e[D]:e),n,s,r));return}if(Ir(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ki(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Xa(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,d=l.refs===je?l.refs={}:l.refs,p=l.setupState,g=Le(p),y=p===je?Pp:k=>Me(g,k);if(h!=null&&h!==c){if(dd(e),it(h))d[h]=null,y(h)&&(p[h]=null);else if(Nt(h)){h.value=null;const k=e;k.k&&(d[k.k]=null)}}if(Te(c))co(c,l,12,[o,d]);else{const k=it(c),D=Nt(c);if(k||D){const V=()=>{if(t.f){const B=k?y(c)?p[c]:d[c]:c.value;if(r)ge(B)&&Zc(B,i);else if(ge(B))B.includes(i)||B.push(i);else if(k)d[c]=[i],y(c)&&(p[c]=d[c]);else{const $=[i];c.value=$,t.k&&(d[t.k]=$)}}else k?(d[c]=o,y(c)&&(p[c]=o)):D&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const B=()=>{V(),ua.delete(t)};B.id=-1,ua.set(t,B),Kt(B,n)}else dd(t),V()}}}function dd(t){const e=ua.get(t);e&&(e.flags|=8,ua.delete(t))}qa().requestIdleCallback;qa().cancelIdleCallback;const Ir=t=>!!t.type.__asyncLoader,hm=t=>t.type.__isKeepAlive;function tE(t,e){dm(t,"a",e)}function nE(t,e){dm(t,"da",e)}function dm(t,e,n=kt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Wa(e,s,n),n){let r=n.parent;for(;r&&r.parent;)hm(r.parent.vnode)&&sE(s,e,n,r),r=r.parent}}function sE(t,e,n,s){const r=Wa(e,t,s,!0);pm(()=>{Zc(s[e],r)},n)}function Wa(t,e,n=kt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{qn();const l=uo(n),c=Cn(e,n,t,o);return l(),Hn(),c});return s?r.unshift(i):r.push(i),i}}const Zn=t=>(e,n=kt)=>{(!zi||t==="sp")&&Wa(t,(...s)=>e(...s),n)},rE=Zn("bm"),du=Zn("m"),iE=Zn("bu"),oE=Zn("u"),fm=Zn("bum"),pm=Zn("um"),aE=Zn("sp"),lE=Zn("rtg"),cE=Zn("rtc");function uE(t,e=kt){Wa("ec",t,e)}const hE="components";function Hi(t,e){return fE(hE,t,!0,e)||t}const dE=Symbol.for("v-ndc");function fE(t,e,n=!0,s=!1){const r=Et||kt;if(r){const i=r.type;{const l=JE(i,!1);if(l&&(l===e||l===Zt(e)||l===ja(Zt(e))))return i}const o=fd(r[t]||i[t],e)||fd(r.appContext[t],e);return!o&&s?i:o}}function fd(t,e){return t&&(t[e]||t[Zt(e)]||t[ja(Zt(e))])}function lt(t,e,n,s){let r;const i=n,o=ge(t);if(o||it(t)){const l=o&&Gs(t);let c=!1,h=!1;l&&(c=!Jt(t),h=Kn(t),t=Ka(t)),r=new Array(t.length);for(let d=0,p=t.length;d<p;d++)r[d]=e(c?h?kr(fn(t[d])):fn(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(He(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}function pd(t,e,n={},s,r){if(Et.ce||Et.parent&&Ir(Et.parent)&&Et.parent.ce){const h=Object.keys(n).length>0;return e!=="default"&&(n.name=e),U(),Nr(Oe,null,[Be("slot",n,s)],h?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),U();const o=i&&mm(i(n)),l=n.key||o&&o.key,c=Nr(Oe,{key:(l&&!dn(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),c}function mm(t){return t.some(e=>Gi(e)?!(e.type===Gn||e.type===Oe&&!mm(e.children)):!0)?t:null}const hc=t=>t?Om(t)?Xa(t):hc(t.parent):null,Ni=Dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>hc(t.parent),$root:t=>hc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>_m(t),$forceUpdate:t=>t.f||(t.f=()=>{cu(t.update)}),$nextTick:t=>t.n||(t.n=nm.bind(t.proxy)),$watch:t=>Xv.bind(t)}),Fl=(t,e)=>t!==je&&!t.__isScriptSetup&&Me(t,e),pE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Fl(s,e))return o[e]=1,s[e];if(r!==je&&Me(r,e))return o[e]=2,r[e];if(Me(i,e))return o[e]=3,i[e];if(n!==je&&Me(n,e))return o[e]=4,n[e];dc&&(o[e]=0)}}const h=Ni[e];let d,p;if(h)return e==="$attrs"&&Ct(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==je&&Me(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Me(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Fl(r,e)?(r[e]=n,!0):s!==je&&Me(s,e)?(s[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==je&&l[0]!=="$"&&Me(t,l)||Fl(e,l)||Me(i,l)||Me(s,l)||Me(Ni,l)||Me(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function md(t){return ge(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let dc=!0;function mE(t){const e=_m(t),n=t.proxy,s=t.ctx;dc=!1,e.beforeCreate&&gd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:y,updated:k,activated:D,deactivated:V,beforeDestroy:B,beforeUnmount:$,destroyed:Y,unmounted:W,render:fe,renderTracked:Ee,renderTriggered:A,errorCaptured:v,serverPrefetch:I,expose:R,inheritAttrs:b,components:S,directives:T,filters:ie}=e;if(h&&gE(h,s,null),o)for(const Ve in o){const Ae=o[Ve];Te(Ae)&&(s[Ve]=Ae.bind(n))}if(r){const Ve=r.call(n,n);He(Ve)&&(t.data=Ga(Ve))}if(dc=!0,i)for(const Ve in i){const Ae=i[Ve],It=Te(Ae)?Ae.bind(n,n):Te(Ae.get)?Ae.get.bind(n,n):Tn,Qt=!Te(Ae)&&Te(Ae.set)?Ae.set.bind(n):Tn,Ot=me({get:It,set:Qt});Object.defineProperty(s,Ve,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:H=>Ot.value=H})}if(l)for(const Ve in l)gm(l[Ve],s,n,Ve);if(c){const Ve=Te(c)?c.call(n):c;Reflect.ownKeys(Ve).forEach(Ae=>{Go(Ae,Ve[Ae])})}d&&gd(d,t,"c");function Ne(Ve,Ae){ge(Ae)?Ae.forEach(It=>Ve(It.bind(n))):Ae&&Ve(Ae.bind(n))}if(Ne(rE,p),Ne(du,g),Ne(iE,y),Ne(oE,k),Ne(tE,D),Ne(nE,V),Ne(uE,v),Ne(cE,Ee),Ne(lE,A),Ne(fm,$),Ne(pm,W),Ne(aE,I),ge(R))if(R.length){const Ve=t.exposed||(t.exposed={});R.forEach(Ae=>{Object.defineProperty(Ve,Ae,{get:()=>n[Ae],set:It=>n[Ae]=It,enumerable:!0})})}else t.exposed||(t.exposed={});fe&&t.render===Tn&&(t.render=fe),b!=null&&(t.inheritAttrs=b),S&&(t.components=S),T&&(t.directives=T),I&&um(t)}function gE(t,e,n=Tn){ge(t)&&(t=fc(t));for(const s in t){const r=t[s];let i;He(r)?"default"in r?i=cn(r.from||s,r.default,!0):i=cn(r.from||s):i=cn(r),Nt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function gd(t,e,n){Cn(ge(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function gm(t,e,n,s){let r=s.includes(".")?lm(n,s):()=>n[s];if(it(t)){const i=e[t];Te(i)&&Bn(r,i)}else if(Te(t))Bn(r,t.bind(n));else if(He(t))if(ge(t))t.forEach(i=>gm(i,e,n,s));else{const i=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(i)&&Bn(r,i,t)}}function _m(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>ha(c,h,o,!0)),ha(c,e,o)),He(e)&&i.set(e,c),c}function ha(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ha(t,i,n,!0),r&&r.forEach(o=>ha(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=_E[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const _E={data:_d,props:yd,emits:yd,methods:Ii,computed:Ii,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Ii,directives:Ii,watch:vE,provide:_d,inject:yE};function _d(t,e){return e?t?function(){return Dt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function yE(t,e){return Ii(fc(t),fc(e))}function fc(t){if(ge(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ii(t,e){return t?Dt(Object.create(null),t,e):e}function yd(t,e){return t?ge(t)&&ge(e)?[...new Set([...t,...e])]:Dt(Object.create(null),md(t),md(e??{})):e}function vE(t,e){if(!t)return e;if(!e)return t;const n=Dt(Object.create(null),t);for(const s in e)n[s]=Lt(t[s],e[s]);return n}function ym(){return{app:null,config:{isNativeTag:Pp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let EE=0;function TE(t,e){return function(s,r=null){Te(s)||(s=Dt({},s)),r!=null&&!He(r)&&(r=null);const i=ym(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:EE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:eT,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&Te(d.install)?(o.add(d),d.install(h,...p)):Te(d)&&(o.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const y=h._ceVNode||Be(s,r);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(y,d,g),c=!0,h._container=d,d.__vue_app__=h,Xa(y.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Cn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=wr;wr=h;try{return d()}finally{wr=p}}};return h}}let wr=null;const IE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Zt(e)}Modifiers`]||t[`${nr(e)}Modifiers`];function wE(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||je;let r=n;const i=e.startsWith("update:"),o=i&&IE(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>it(d)?d.trim():d)),o.number&&(r=n.map(tu)));let l,c=s[l=Vl(e)]||s[l=Vl(Zt(e))];!c&&i&&(c=s[l=Vl(nr(e))]),c&&Cn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Cn(h,t,6,r)}}const AE=new WeakMap;function vm(t,e,n=!1){const s=n?AE:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Te(t)){const c=h=>{const d=vm(h,e,!0);d&&(l=!0,Dt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(He(t)&&s.set(t,null),null):(ge(i)?i.forEach(c=>o[c]=null):Dt(o,i),He(t)&&s.set(t,o),o)}function Qa(t,e){return!t||!Ua(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,nr(e))||Me(t,e))}function vd(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:y,ctx:k,inheritAttrs:D}=t,V=ca(t);let B,$;try{if(n.shapeFlag&4){const W=r||s,fe=W;B=En(h.call(fe,W,d,p,y,g,k)),$=l}else{const W=e;B=En(W.length>1?W(p,{attrs:l,slots:o,emit:c}):W(p,null)),$=e.props?l:bE(l)}}catch(W){Di.length=0,za(W,t,1),B=Be(Gn)}let Y=B;if($&&D!==!1){const W=Object.keys($),{shapeFlag:fe}=Y;W.length&&fe&7&&(i&&W.some(Jc)&&($=RE($,i)),Y=Dr(Y,$,!1,!0))}return n.dirs&&(Y=Dr(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&hu(Y,n.transition),B=Y,ca(V),B}const bE=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ua(n))&&((e||(e={}))[n]=t[n]);return e},RE=(t,e)=>{const n={};for(const s in t)(!Jc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function SE(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Ed(s,o,h):!!o;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==s[g]&&!Qa(h,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Ed(s,o,h):!0:!!o;return!1}function Ed(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Qa(n,i))return!0}return!1}function CE({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Em={},Tm=()=>Object.create(Em),Im=t=>Object.getPrototypeOf(t)===Em;function PE(t,e,n,s=!1){const r={},i=Tm();t.propsDefaults=Object.create(null),wm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Jp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function kE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Le(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Qa(t.emitsOptions,g))continue;const y=e[g];if(c)if(Me(i,g))y!==i[g]&&(i[g]=y,h=!0);else{const k=Zt(g);r[k]=pc(c,l,k,y,t,!1)}else y!==i[g]&&(i[g]=y,h=!0)}}}else{wm(t,e,r,i)&&(h=!0);let d;for(const p in l)(!e||!Me(e,p)&&((d=nr(p))===p||!Me(e,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(r[p]=pc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Me(e,p))&&(delete i[p],h=!0)}h&&xn(t.attrs,"set","")}function wm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Si(c))continue;const h=e[c];let d;r&&Me(r,d=Zt(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:Qa(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=Le(n),h=l||je;for(let d=0;d<i.length;d++){const p=i[d];n[p]=pc(r,c,p,h[p],t,!Me(h,p))}}return o}function pc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Me(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Te(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const d=uo(r);s=h[n]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===nr(n))&&(s=!0))}return s}const NE=new WeakMap;function Am(t,e,n=!1){const s=n?NE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Te(t)){const d=p=>{c=!0;const[g,y]=Am(p,e,!0);Dt(o,g),y&&l.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return He(t)&&s.set(t,vr),vr;if(ge(i))for(let d=0;d<i.length;d++){const p=Zt(i[d]);Td(p)&&(o[p]=je)}else if(i)for(const d in i){const p=Zt(d);if(Td(p)){const g=i[d],y=o[p]=ge(g)||Te(g)?{type:g}:Dt({},g),k=y.type;let D=!1,V=!0;if(ge(k))for(let B=0;B<k.length;++B){const $=k[B],Y=Te($)&&$.name;if(Y==="Boolean"){D=!0;break}else Y==="String"&&(V=!1)}else D=Te(k)&&k.name==="Boolean";y[0]=D,y[1]=V,(D||Me(y,"default"))&&l.push(p)}}const h=[o,l];return He(t)&&s.set(t,h),h}function Td(t){return t[0]!=="$"&&!Si(t)}const fu=t=>t==="_"||t==="_ctx"||t==="$stable",pu=t=>ge(t)?t.map(En):[En(t)],DE=(t,e,n)=>{if(e._n)return e;const s=nn((...r)=>pu(e(...r)),n);return s._c=!1,s},bm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(fu(r))continue;const i=t[r];if(Te(i))e[r]=DE(r,i,s);else if(i!=null){const o=pu(i);e[r]=()=>o}}},Rm=(t,e)=>{const n=pu(e);t.slots.default=()=>n},Sm=(t,e,n)=>{for(const s in e)(n||!fu(s))&&(t[s]=e[s])},VE=(t,e,n)=>{const s=t.slots=Tm();if(t.vnode.shapeFlag&32){const r=e._;r?(Sm(s,e,n),n&&Vp(s,"_",r,!0)):bm(e,s)}else e&&Rm(t,e)},OE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=je;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Sm(r,e,n):(i=!e.$stable,bm(e,r)),o=e}else e&&(Rm(t,e),o={default:1});if(i)for(const l in r)!fu(l)&&o[l]==null&&delete r[l]},Kt=UE;function xE(t){return LE(t)}function LE(t,e){const n=qa();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:y=Tn,insertStaticContent:k}=t,D=(E,w,C,O=null,F=null,x=null,Z=void 0,z=null,G=!!w.dynamicChildren)=>{if(E===w)return;E&&!yi(E,w)&&(O=L(E),H(E,F,x,!0),E=null),w.patchFlag===-2&&(G=!1,w.dynamicChildren=null);const{type:j,ref:ue,shapeFlag:ne}=w;switch(j){case Ya:V(E,w,C,O);break;case Gn:B(E,w,C,O);break;case zo:E==null&&$(w,C,O,Z);break;case Oe:S(E,w,C,O,F,x,Z,z,G);break;default:ne&1?fe(E,w,C,O,F,x,Z,z,G):ne&6?T(E,w,C,O,F,x,Z,z,G):(ne&64||ne&128)&&j.process(E,w,C,O,F,x,Z,z,G,le)}ue!=null&&F?ki(ue,E&&E.ref,x,w||E,!w):ue==null&&E&&E.ref!=null&&ki(E.ref,null,x,E,!0)},V=(E,w,C,O)=>{if(E==null)s(w.el=l(w.children),C,O);else{const F=w.el=E.el;w.children!==E.children&&h(F,w.children)}},B=(E,w,C,O)=>{E==null?s(w.el=c(w.children||""),C,O):w.el=E.el},$=(E,w,C,O)=>{[E.el,E.anchor]=k(E.children,w,C,O,E.el,E.anchor)},Y=({el:E,anchor:w},C,O)=>{let F;for(;E&&E!==w;)F=g(E),s(E,C,O),E=F;s(w,C,O)},W=({el:E,anchor:w})=>{let C;for(;E&&E!==w;)C=g(E),r(E),E=C;r(w)},fe=(E,w,C,O,F,x,Z,z,G)=>{if(w.type==="svg"?Z="svg":w.type==="math"&&(Z="mathml"),E==null)Ee(w,C,O,F,x,Z,z,G);else{const j=E.el&&E.el._isVueCE?E.el:null;try{j&&j._beginPatch(),I(E,w,F,x,Z,z,G)}finally{j&&j._endPatch()}}},Ee=(E,w,C,O,F,x,Z,z)=>{let G,j;const{props:ue,shapeFlag:ne,transition:ce,dirs:de}=E;if(G=E.el=o(E.type,x,ue&&ue.is,ue),ne&8?d(G,E.children):ne&16&&v(E.children,G,null,O,F,Ul(E,x),Z,z),de&&Ms(E,null,O,"created"),A(G,E,E.scopeId,Z,O),ue){for(const Ue in ue)Ue!=="value"&&!Si(Ue)&&i(G,Ue,null,ue[Ue],x,O);"value"in ue&&i(G,"value",null,ue.value,x),(j=ue.onVnodeBeforeMount)&&_n(j,O,E)}de&&Ms(E,null,O,"beforeMount");const be=ME(F,ce);be&&ce.beforeEnter(G),s(G,w,C),((j=ue&&ue.onVnodeMounted)||be||de)&&Kt(()=>{j&&_n(j,O,E),be&&ce.enter(G),de&&Ms(E,null,O,"mounted")},F)},A=(E,w,C,O,F)=>{if(C&&y(E,C),O)for(let x=0;x<O.length;x++)y(E,O[x]);if(F){let x=F.subTree;if(w===x||Nm(x.type)&&(x.ssContent===w||x.ssFallback===w)){const Z=F.vnode;A(E,Z,Z.scopeId,Z.slotScopeIds,F.parent)}}},v=(E,w,C,O,F,x,Z,z,G=0)=>{for(let j=G;j<E.length;j++){const ue=E[j]=z?hs(E[j]):En(E[j]);D(null,ue,w,C,O,F,x,Z,z)}},I=(E,w,C,O,F,x,Z)=>{const z=w.el=E.el;let{patchFlag:G,dynamicChildren:j,dirs:ue}=w;G|=E.patchFlag&16;const ne=E.props||je,ce=w.props||je;let de;if(C&&Fs(C,!1),(de=ce.onVnodeBeforeUpdate)&&_n(de,C,w,E),ue&&Ms(w,E,C,"beforeUpdate"),C&&Fs(C,!0),(ne.innerHTML&&ce.innerHTML==null||ne.textContent&&ce.textContent==null)&&d(z,""),j?R(E.dynamicChildren,j,z,C,O,Ul(w,F),x):Z||Ae(E,w,z,null,C,O,Ul(w,F),x,!1),G>0){if(G&16)b(z,ne,ce,C,F);else if(G&2&&ne.class!==ce.class&&i(z,"class",null,ce.class,F),G&4&&i(z,"style",ne.style,ce.style,F),G&8){const be=w.dynamicProps;for(let Ue=0;Ue<be.length;Ue++){const De=be[Ue],At=ne[De],bt=ce[De];(bt!==At||De==="value")&&i(z,De,At,bt,F,C)}}G&1&&E.children!==w.children&&d(z,w.children)}else!Z&&j==null&&b(z,ne,ce,C,F);((de=ce.onVnodeUpdated)||ue)&&Kt(()=>{de&&_n(de,C,w,E),ue&&Ms(w,E,C,"updated")},O)},R=(E,w,C,O,F,x,Z)=>{for(let z=0;z<w.length;z++){const G=E[z],j=w[z],ue=G.el&&(G.type===Oe||!yi(G,j)||G.shapeFlag&198)?p(G.el):C;D(G,j,ue,null,O,F,x,Z,!0)}},b=(E,w,C,O,F)=>{if(w!==C){if(w!==je)for(const x in w)!Si(x)&&!(x in C)&&i(E,x,w[x],null,F,O);for(const x in C){if(Si(x))continue;const Z=C[x],z=w[x];Z!==z&&x!=="value"&&i(E,x,z,Z,F,O)}"value"in C&&i(E,"value",w.value,C.value,F)}},S=(E,w,C,O,F,x,Z,z,G)=>{const j=w.el=E?E.el:l(""),ue=w.anchor=E?E.anchor:l("");let{patchFlag:ne,dynamicChildren:ce,slotScopeIds:de}=w;de&&(z=z?z.concat(de):de),E==null?(s(j,C,O),s(ue,C,O),v(w.children||[],C,ue,F,x,Z,z,G)):ne>0&&ne&64&&ce&&E.dynamicChildren&&E.dynamicChildren.length===ce.length?(R(E.dynamicChildren,ce,C,F,x,Z,z),(w.key!=null||F&&w===F.subTree)&&Cm(E,w,!0)):Ae(E,w,C,ue,F,x,Z,z,G)},T=(E,w,C,O,F,x,Z,z,G)=>{w.slotScopeIds=z,E==null?w.shapeFlag&512?F.ctx.activate(w,C,O,Z,G):ie(w,C,O,F,x,Z,G):te(E,w,G)},ie=(E,w,C,O,F,x,Z)=>{const z=E.component=GE(E,O,F);if(hm(E)&&(z.ctx.renderer=le),WE(z,!1,Z),z.asyncDep){if(F&&F.registerDep(z,Ne,Z),!E.el){const G=z.subTree=Be(Gn);B(null,G,w,C),E.placeholder=G.el}}else Ne(z,E,w,C,F,x,Z)},te=(E,w,C)=>{const O=w.component=E.component;if(SE(E,w,C))if(O.asyncDep&&!O.asyncResolved){Ve(O,w,C);return}else O.next=w,O.update();else w.el=E.el,O.vnode=w},Ne=(E,w,C,O,F,x,Z)=>{const z=()=>{if(E.isMounted){let{next:ne,bu:ce,u:de,parent:be,vnode:Ue}=E;{const qt=Pm(E);if(qt){ne&&(ne.el=Ue.el,Ve(E,ne,Z)),qt.asyncDep.then(()=>{E.isUnmounted||z()});return}}let De=ne,At;Fs(E,!1),ne?(ne.el=Ue.el,Ve(E,ne,Z)):ne=Ue,ce&&Ko(ce),(At=ne.props&&ne.props.onVnodeBeforeUpdate)&&_n(At,be,ne,Ue),Fs(E,!0);const bt=vd(E),jt=E.subTree;E.subTree=bt,D(jt,bt,p(jt.el),L(jt),E,F,x),ne.el=bt.el,De===null&&CE(E,bt.el),de&&Kt(de,F),(At=ne.props&&ne.props.onVnodeUpdated)&&Kt(()=>_n(At,be,ne,Ue),F)}else{let ne;const{el:ce,props:de}=w,{bm:be,m:Ue,parent:De,root:At,type:bt}=E,jt=Ir(w);Fs(E,!1),be&&Ko(be),!jt&&(ne=de&&de.onVnodeBeforeMount)&&_n(ne,De,w),Fs(E,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(bt);const qt=E.subTree=vd(E);D(null,qt,C,O,E,F,x),w.el=qt.el}if(Ue&&Kt(Ue,F),!jt&&(ne=de&&de.onVnodeMounted)){const qt=w;Kt(()=>_n(ne,De,qt),F)}(w.shapeFlag&256||De&&Ir(De.vnode)&&De.vnode.shapeFlag&256)&&E.a&&Kt(E.a,F),E.isMounted=!0,w=C=O=null}};E.scope.on();const G=E.effect=new Fp(z);E.scope.off();const j=E.update=G.run.bind(G),ue=E.job=G.runIfDirty.bind(G);ue.i=E,ue.id=E.uid,G.scheduler=()=>cu(ue),Fs(E,!0),j()},Ve=(E,w,C)=>{w.component=E;const O=E.vnode.props;E.vnode=w,E.next=null,kE(E,w.props,O,C),OE(E,w.children,C),qn(),hd(E),Hn()},Ae=(E,w,C,O,F,x,Z,z,G=!1)=>{const j=E&&E.children,ue=E?E.shapeFlag:0,ne=w.children,{patchFlag:ce,shapeFlag:de}=w;if(ce>0){if(ce&128){Qt(j,ne,C,O,F,x,Z,z,G);return}else if(ce&256){It(j,ne,C,O,F,x,Z,z,G);return}}de&8?(ue&16&&wt(j,F,x),ne!==j&&d(C,ne)):ue&16?de&16?Qt(j,ne,C,O,F,x,Z,z,G):wt(j,F,x,!0):(ue&8&&d(C,""),de&16&&v(ne,C,O,F,x,Z,z,G))},It=(E,w,C,O,F,x,Z,z,G)=>{E=E||vr,w=w||vr;const j=E.length,ue=w.length,ne=Math.min(j,ue);let ce;for(ce=0;ce<ne;ce++){const de=w[ce]=G?hs(w[ce]):En(w[ce]);D(E[ce],de,C,null,F,x,Z,z,G)}j>ue?wt(E,F,x,!0,!1,ne):v(w,C,O,F,x,Z,z,G,ne)},Qt=(E,w,C,O,F,x,Z,z,G)=>{let j=0;const ue=w.length;let ne=E.length-1,ce=ue-1;for(;j<=ne&&j<=ce;){const de=E[j],be=w[j]=G?hs(w[j]):En(w[j]);if(yi(de,be))D(de,be,C,null,F,x,Z,z,G);else break;j++}for(;j<=ne&&j<=ce;){const de=E[ne],be=w[ce]=G?hs(w[ce]):En(w[ce]);if(yi(de,be))D(de,be,C,null,F,x,Z,z,G);else break;ne--,ce--}if(j>ne){if(j<=ce){const de=ce+1,be=de<ue?w[de].el:O;for(;j<=ce;)D(null,w[j]=G?hs(w[j]):En(w[j]),C,be,F,x,Z,z,G),j++}}else if(j>ce)for(;j<=ne;)H(E[j],F,x,!0),j++;else{const de=j,be=j,Ue=new Map;for(j=be;j<=ce;j++){const gt=w[j]=G?hs(w[j]):En(w[j]);gt.key!=null&&Ue.set(gt.key,j)}let De,At=0;const bt=ce-be+1;let jt=!1,qt=0;const tn=new Array(bt);for(j=0;j<bt;j++)tn[j]=0;for(j=de;j<=ne;j++){const gt=E[j];if(At>=bt){H(gt,F,x,!0);continue}let dt;if(gt.key!=null)dt=Ue.get(gt.key);else for(De=be;De<=ce;De++)if(tn[De-be]===0&&yi(gt,w[De])){dt=De;break}dt===void 0?H(gt,F,x,!0):(tn[dt-be]=j+1,dt>=qt?qt=dt:jt=!0,D(gt,w[dt],C,null,F,x,Z,z,G),At++)}const lr=jt?FE(tn):vr;for(De=lr.length-1,j=bt-1;j>=0;j--){const gt=be+j,dt=w[gt],ti=w[gt+1],Ds=gt+1<ue?ti.el||km(ti):O;tn[j]===0?D(null,dt,C,Ds,F,x,Z,z,G):jt&&(De<0||j!==lr[De]?Ot(dt,C,Ds,2):De--)}}},Ot=(E,w,C,O,F=null)=>{const{el:x,type:Z,transition:z,children:G,shapeFlag:j}=E;if(j&6){Ot(E.component.subTree,w,C,O);return}if(j&128){E.suspense.move(w,C,O);return}if(j&64){Z.move(E,w,C,le);return}if(Z===Oe){s(x,w,C);for(let ne=0;ne<G.length;ne++)Ot(G[ne],w,C,O);s(E.anchor,w,C);return}if(Z===zo){Y(E,w,C);return}if(O!==2&&j&1&&z)if(O===0)z.beforeEnter(x),s(x,w,C),Kt(()=>z.enter(x),F);else{const{leave:ne,delayLeave:ce,afterLeave:de}=z,be=()=>{E.ctx.isUnmounted?r(x):s(x,w,C)},Ue=()=>{x._isLeaving&&x[eE](!0),ne(x,()=>{be(),de&&de()})};ce?ce(x,be,Ue):Ue()}else s(x,w,C)},H=(E,w,C,O=!1,F=!1)=>{const{type:x,props:Z,ref:z,children:G,dynamicChildren:j,shapeFlag:ue,patchFlag:ne,dirs:ce,cacheIndex:de}=E;if(ne===-2&&(F=!1),z!=null&&(qn(),ki(z,null,C,E,!0),Hn()),de!=null&&(w.renderCache[de]=void 0),ue&256){w.ctx.deactivate(E);return}const be=ue&1&&ce,Ue=!Ir(E);let De;if(Ue&&(De=Z&&Z.onVnodeBeforeUnmount)&&_n(De,w,E),ue&6)ht(E.component,C,O);else{if(ue&128){E.suspense.unmount(C,O);return}be&&Ms(E,null,w,"beforeUnmount"),ue&64?E.type.remove(E,w,C,le,O):j&&!j.hasOnce&&(x!==Oe||ne>0&&ne&64)?wt(j,w,C,!1,!0):(x===Oe&&ne&384||!F&&ue&16)&&wt(G,w,C),O&&X(E)}(Ue&&(De=Z&&Z.onVnodeUnmounted)||be)&&Kt(()=>{De&&_n(De,w,E),be&&Ms(E,null,w,"unmounted")},C)},X=E=>{const{type:w,el:C,anchor:O,transition:F}=E;if(w===Oe){Q(C,O);return}if(w===zo){W(E);return}const x=()=>{r(C),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(E.shapeFlag&1&&F&&!F.persisted){const{leave:Z,delayLeave:z}=F,G=()=>Z(C,x);z?z(E.el,x,G):G()}else x()},Q=(E,w)=>{let C;for(;E!==w;)C=g(E),r(E),E=C;r(w)},ht=(E,w,C)=>{const{bum:O,scope:F,job:x,subTree:Z,um:z,m:G,a:j}=E;Id(G),Id(j),O&&Ko(O),F.stop(),x&&(x.flags|=8,H(Z,E,w,C)),z&&Kt(z,w),Kt(()=>{E.isUnmounted=!0},w)},wt=(E,w,C,O=!1,F=!1,x=0)=>{for(let Z=x;Z<E.length;Z++)H(E[Z],w,C,O,F)},L=E=>{if(E.shapeFlag&6)return L(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const w=g(E.anchor||E.el),C=w&&w[Jv];return C?g(C):w};let se=!1;const ee=(E,w,C)=>{let O;E==null?w._vnode&&(H(w._vnode,null,null,!0),O=w._vnode.component):D(w._vnode||null,E,w,null,null,null,C),w._vnode=E,se||(se=!0,hd(O),rm(),se=!1)},le={p:D,um:H,m:Ot,r:X,mt:ie,mc:v,pc:Ae,pbc:R,n:L,o:t};return{render:ee,hydrate:void 0,createApp:TE(ee)}}function Ul({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Fs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ME(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Cm(t,e,n=!1){const s=t.children,r=e.children;if(ge(s)&&ge(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=hs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Cm(o,l)),l.type===Ya&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=i+(t.type===Oe?1:0)),l.type===Gn&&!l.el&&(l.el=o.el)}}function FE(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Pm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Pm(e)}function Id(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function km(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?km(e.subTree):null}const Nm=t=>t.__isSuspense;function UE(t,e){e&&e.pendingBranch?ge(t)?e.effects.push(...t):e.effects.push(t):Wv(t)}const Oe=Symbol.for("v-fgt"),Ya=Symbol.for("v-txt"),Gn=Symbol.for("v-cmt"),zo=Symbol.for("v-stc"),Di=[];let Gt=null;function U(t=!1){Di.push(Gt=t?null:[])}function BE(){Di.pop(),Gt=Di[Di.length-1]||null}let Ki=1;function da(t,e=!1){Ki+=t,t<0&&Gt&&e&&(Gt.hasOnce=!0)}function Dm(t){return t.dynamicChildren=Ki>0?Gt||vr:null,BE(),Ki>0&&Gt&&Gt.push(t),t}function K(t,e,n,s,r,i){return Dm(m(t,e,n,s,r,i,!0))}function Nr(t,e,n,s,r){return Dm(Be(t,e,n,s,r,!0))}function Gi(t){return t?t.__v_isVNode===!0:!1}function yi(t,e){return t.type===e.type&&t.key===e.key}const Vm=({key:t})=>t??null,Wo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?it(t)||Nt(t)||Te(t)?{i:Et,r:t,k:e,f:!!n}:t:null);function m(t,e=null,n=null,s=0,r=null,i=t===Oe?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vm(e),ref:e&&Wo(e),scopeId:om,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Et};return l?(mu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),Ki>0&&!o&&Gt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Gt.push(c),c}const Be=$E;function $E(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===dE)&&(t=Gn),Gi(t)){const l=Dr(t,e,!0);return n&&mu(l,n),Ki>0&&!i&&Gt&&(l.shapeFlag&6?Gt[Gt.indexOf(t)]=l:Gt.push(l)),l.patchFlag=-2,l}if(ZE(t)&&(t=t.__vccOpts),e){e=jE(e);let{class:l,style:c}=e;l&&!it(l)&&(e.class=Cr(l)),He(c)&&(lu(c)&&!ge(c)&&(c=Dt({},c)),e.style=Ha(c))}const o=it(t)?1:Nm(t)?128:Zv(t)?64:He(t)?4:Te(t)?2:0;return m(t,e,n,s,r,o,i,!0)}function jE(t){return t?lu(t)||Im(t)?Dt({},t):t:null}function Dr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?qE(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Vm(h),ref:e&&e.ref?n&&i?ge(i)?i.concat(Wo(e)):[i,Wo(e)]:Wo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Dr(t.ssContent),ssFallback:t.ssFallback&&Dr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&hu(d,c.clone(d)),d}function yt(t=" ",e=0){return Be(Ya,null,t,e)}function un(t,e){const n=Be(zo,null,t);return n.staticCount=e,n}function st(t="",e=!1){return e?(U(),Nr(Gn,null,t)):Be(Gn,null,t)}function En(t){return t==null||typeof t=="boolean"?Be(Gn):ge(t)?Be(Oe,null,t.slice()):Gi(t)?hs(t):Be(Ya,null,String(t))}function hs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Dr(t)}function mu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ge(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),mu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Im(e)?e._ctx=Et:r===3&&Et&&(Et.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Et},n=32):(e=String(e),s&64?(n=16,e=[yt(e)]):n=8);t.children=e,t.shapeFlag|=n}function qE(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Cr([e.class,s.class]));else if(r==="style")e.style=Ha([e.style,s.style]);else if(Ua(r)){const i=e[r],o=s[r];o&&i!==o&&!(ge(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function _n(t,e,n,s=null){Cn(t,e,7,[n,s])}const HE=ym();let KE=0;function GE(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||HE,i={uid:KE++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Am(s,r),emitsOptions:vm(s,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:s.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=wE.bind(null,i),t.ce&&t.ce(i),i}let kt=null;const zE=()=>kt||Et;let fa,mc;{const t=qa(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};fa=e("__VUE_INSTANCE_SETTERS__",n=>kt=n),mc=e("__VUE_SSR_SETTERS__",n=>zi=n)}const uo=t=>{const e=kt;return fa(t),t.scope.on(),()=>{t.scope.off(),fa(e)}},wd=()=>{kt&&kt.scope.off(),fa(null)};function Om(t){return t.vnode.shapeFlag&4}let zi=!1;function WE(t,e=!1,n=!1){e&&mc(e);const{props:s,children:r}=t.vnode,i=Om(t);PE(t,s,i,e),VE(t,r,n||e);const o=i?QE(t,e):void 0;return e&&mc(!1),o}function QE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pE);const{setup:s}=n;if(s){qn();const r=t.setupContext=s.length>1?XE(t):null,i=uo(t),o=co(s,t,0,[t.props,r]),l=kp(o);if(Hn(),i(),(l||t.sp)&&!Ir(t)&&um(t),l){if(o.then(wd,wd),e)return o.then(c=>{Ad(t,c)}).catch(c=>{za(c,t,0)});t.asyncDep=o}else Ad(t,o)}else xm(t)}function Ad(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=em(e)),xm(t)}function xm(t,e,n){const s=t.type;t.render||(t.render=s.render||Tn);{const r=uo(t);qn();try{mE(t)}finally{Hn(),r()}}}const YE={get(t,e){return Ct(t,"get",""),t[e]}};function XE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,YE),slots:t.slots,emit:t.emit,expose:e}}function Xa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(em(Fv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ni)return Ni[n](t)},has(e,n){return n in e||n in Ni}})):t.proxy}function JE(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function ZE(t){return Te(t)&&"__vccOpts"in t}const me=(t,e)=>qv(t,e,zi);function Lm(t,e,n){try{da(-1);const s=arguments.length;return s===2?He(e)&&!ge(e)?Gi(e)?Be(t,null,[e]):Be(t,e):Be(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Gi(n)&&(n=[n]),Be(t,e,n))}finally{da(1)}}const eT="3.5.26";let gc;const bd=typeof window<"u"&&window.trustedTypes;if(bd)try{gc=bd.createPolicy("vue",{createHTML:t=>t})}catch{}const Mm=gc?t=>gc.createHTML(t):t=>t,tT="http://www.w3.org/2000/svg",nT="http://www.w3.org/1998/Math/MathML",On=typeof document<"u"?document:null,Rd=On&&On.createElement("template"),sT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?On.createElementNS(tT,t):e==="mathml"?On.createElementNS(nT,t):n?On.createElement(t,{is:n}):On.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>On.createTextNode(t),createComment:t=>On.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>On.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Rd.innerHTML=Mm(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Rd.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rT=Symbol("_vtc");function iT(t,e,n){const s=t[rT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Sd=Symbol("_vod"),oT=Symbol("_vsh"),aT=Symbol(""),lT=/(?:^|;)\s*display\s*:/;function cT(t,e,n){const s=t.style,r=it(n);let i=!1;if(n&&!r){if(e)if(it(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Qo(s,l,"")}else for(const o in e)n[o]==null&&Qo(s,o,"");for(const o in n)o==="display"&&(i=!0),Qo(s,o,n[o])}else if(r){if(e!==n){const o=s[aT];o&&(n+=";"+o),s.cssText=n,i=lT.test(n)}}else e&&t.removeAttribute("style");Sd in t&&(t[Sd]=i?s.display:"",t[oT]&&(s.display="none"))}const Cd=/\s*!important$/;function Qo(t,e,n){if(ge(n))n.forEach(s=>Qo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=uT(t,e);Cd.test(n)?t.setProperty(nr(s),n.replace(Cd,""),"important"):t[s]=n}}const Pd=["Webkit","Moz","ms"],Bl={};function uT(t,e){const n=Bl[e];if(n)return n;let s=Zt(e);if(s!=="filter"&&s in t)return Bl[e]=s;s=ja(s);for(let r=0;r<Pd.length;r++){const i=Pd[r]+s;if(i in t)return Bl[e]=i}return e}const kd="http://www.w3.org/1999/xlink";function Nd(t,e,n,s,r,i=gv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kd,e.slice(6,e.length)):t.setAttributeNS(kd,e,n):n==null||i&&!Op(n)?t.removeAttribute(e):t.setAttribute(e,i?"":dn(n)?String(n):n)}function Dd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Mm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Op(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function fs(t,e,n,s){t.addEventListener(e,n,s)}function hT(t,e,n,s){t.removeEventListener(e,n,s)}const Vd=Symbol("_vei");function dT(t,e,n,s,r=null){const i=t[Vd]||(t[Vd]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=fT(e);if(s){const h=i[e]=gT(s,r);fs(t,l,h,c)}else o&&(hT(t,l,o,c),i[e]=void 0)}}const Od=/(?:Once|Passive|Capture)$/;function fT(t){let e;if(Od.test(t)){e={};let s;for(;s=t.match(Od);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):nr(t.slice(2)),e]}let $l=0;const pT=Promise.resolve(),mT=()=>$l||(pT.then(()=>$l=0),$l=Date.now());function gT(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Cn(_T(s,n.value),e,5,[s])};return n.value=t,n.attached=mT(),n}function _T(t,e){if(ge(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const xd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,yT=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?iT(t,s,o):e==="style"?cT(t,n,s):Ua(e)?Jc(e)||dT(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vT(t,e,s,o))?(Dd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Nd(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!it(s))?Dd(t,Zt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Nd(t,e,s,o))};function vT(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&xd(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return xd(e)&&it(n)?!1:e in t}const Vr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ge(e)?n=>Ko(e,n):e};function ET(t){t.target.composing=!0}function Ld(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $n=Symbol("_assign");function Md(t,e,n){return e&&(t=t.trim()),n&&(t=tu(t)),t}const TT={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[$n]=Vr(r);const i=s||r.props&&r.props.type==="number";fs(t,e?"change":"input",o=>{o.target.composing||t[$n](Md(t.value,n,i))}),(n||i)&&fs(t,"change",()=>{t.value=Md(t.value,n,i)}),e||(fs(t,"compositionstart",ET),fs(t,"compositionend",Ld),fs(t,"change",Ld))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[$n]=Vr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?tu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},IT={deep:!0,created(t,e,n){t[$n]=Vr(n),fs(t,"change",()=>{const s=t._modelValue,r=Fm(t),i=t.checked,o=t[$n];if(ge(s)){const l=xp(s,r),c=l!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const h=[...s];h.splice(l,1),o(h)}}else if(Ba(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(Um(t,i))})},mounted:Fd,beforeUpdate(t,e,n){t[$n]=Vr(n),Fd(t,e,n)}};function Fd(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ge(e))r=xp(e,s.props.value)>-1;else if(Ba(e))r=e.has(s.props.value);else{if(e===n)return;r=Pr(e,Um(t,!0))}t.checked!==r&&(t.checked=r)}const jl={created(t,{value:e},n){t.checked=Pr(e,n.props.value),t[$n]=Vr(n),fs(t,"change",()=>{t[$n](Fm(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[$n]=Vr(s),e!==n&&(t.checked=Pr(e,s.props.value))}};function Fm(t){return"_value"in t?t._value:t.value}function Um(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const wT=["ctrl","shift","alt","meta"],AT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wT.some(n=>t[`${n}Key`]&&!e.includes(n))},Bm=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=AT[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},bT=Dt({patchProp:yT},sT);let Ud;function RT(){return Ud||(Ud=xE(bT))}const ST=((...t)=>{const e=RT().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=PT(s);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,CT(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function CT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function PT(t){return it(t)?document.querySelector(t):t}const _c=we(null),$m=we(""),yc=we(!1);let Bd=null;const Mo=t=>String(t).padStart(2,"0"),kT=()=>{const t=new Date,e=t.getTime()+t.getTimezoneOffset()*6e4;return new Date(e+540*60*1e3)},NT=t=>{if(!(t instanceof Date))return"...";const e=t.getFullYear(),n=Mo(t.getMonth()+1),s=Mo(t.getDate()),r=Mo(t.getHours()),i=Mo(t.getMinutes());return`${e}. ${n}. ${s}. ${r}:${i}`};function DT(){if(Bd)return;const t=()=>{_c.value=kT(),$m.value=NT(_c.value),yc.value||(yc.value=!0)};t(),Bd=setInterval(t,1e3)}function jm(){return{kstDate:_c,kstString:$m,isKstTimeReady:yc}}const VT={__name:"App",setup(t){return du(()=>{DT()}),(e,n)=>{const s=Hi("router-view");return U(),Nr(s)}}};const pr=typeof document<"u";function qm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function OT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&qm(t.default)}const xe=Object.assign;function ql(t,e){const n={};for(const s in e){const r=e[s];n[s]=pn(r)?r.map(t):t(r)}return n}const Vi=()=>{},pn=Array.isArray;function $d(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Hm=/#/g,xT=/&/g,LT=/\//g,MT=/=/g,FT=/\?/g,Km=/\+/g,UT=/%5B/g,BT=/%5D/g,Gm=/%5E/g,$T=/%60/g,zm=/%7B/g,jT=/%7C/g,Wm=/%7D/g,qT=/%20/g;function gu(t){return t==null?"":encodeURI(""+t).replace(jT,"|").replace(UT,"[").replace(BT,"]")}function HT(t){return gu(t).replace(zm,"{").replace(Wm,"}").replace(Gm,"^")}function vc(t){return gu(t).replace(Km,"%2B").replace(qT,"+").replace(Hm,"%23").replace(xT,"%26").replace($T,"`").replace(zm,"{").replace(Wm,"}").replace(Gm,"^")}function KT(t){return vc(t).replace(MT,"%3D")}function GT(t){return gu(t).replace(Hm,"%23").replace(FT,"%3F")}function zT(t){return GT(t).replace(LT,"%2F")}function Wi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const WT=/\/$/,QT=t=>t.replace(WT,"");function Hl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=ZT(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Wi(o)}}function YT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function XT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Or(e.matched[s],n.matched[r])&&Qm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Or(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Qm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!JT(t[n],e[n]))return!1;return!0}function JT(t,e){return pn(t)?qd(t,e):pn(e)?qd(e,t):t?.valueOf()===e?.valueOf()}function qd(t,e){return pn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function ZT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ec=(function(t){return t.pop="pop",t.push="push",t})({}),Kl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function eI(t){if(!t)if(pr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),QT(t)}const tI=/^[^#]+#/;function nI(t,e){return t.replace(tI,"#")+e}function sI(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Ja=()=>({left:window.scrollX,top:window.scrollY});function rI(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=sI(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Hd(t,e){return(history.state?history.state.position-e:-1)+t}const Tc=new Map;function iI(t,e){Tc.set(t,e)}function oI(t){const e=Tc.get(t);return Tc.delete(t),e}function aI(t){return typeof t=="string"||t&&typeof t=="object"}function Ym(t){return typeof t=="string"||typeof t=="symbol"}let Ze=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Xm=Symbol("");Ze.MATCHER_NOT_FOUND+"",Ze.NAVIGATION_GUARD_REDIRECT+"",Ze.NAVIGATION_ABORTED+"",Ze.NAVIGATION_CANCELLED+"",Ze.NAVIGATION_DUPLICATED+"";function xr(t,e){return xe(new Error,{type:t,[Xm]:!0},e)}function Vn(t,e){return t instanceof Error&&Xm in t&&(e==null||!!(t.type&e))}const lI=["params","query","hash"];function cI(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of lI)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function uI(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Km," "),i=r.indexOf("="),o=Wi(i<0?r:r.slice(0,i)),l=i<0?null:Wi(r.slice(i+1));if(o in e){let c=e[o];pn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Kd(t){let e="";for(let n in t){const s=t[n];if(n=KT(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(pn(s)?s.map(r=>r&&vc(r)):[s&&vc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function hI(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=pn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const dI=Symbol(""),Gd=Symbol(""),Za=Symbol(""),_u=Symbol(""),Ic=Symbol("");function vi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ds(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(xr(Ze.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?c(g):aI(g)?c(xr(Ze.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),l())},d=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function Gl(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(qm(c)){const h=(c.__vccOpts||c)[e];h&&i.push(ds(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=OT(d)?d.default:d;o.mods[l]=d,o.components[l]=p;const g=(p.__vccOpts||p)[e];return g&&ds(g,n,s,o,l,r)()}))}}return i}function fI(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Or(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Or(h,c))||r.push(c))}return[n,s,r]}let pI=()=>location.protocol+"//"+location.host;function Jm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),jd(l,"")}return jd(n,t)+s+r}function mI(t,e,n,s){let r=[],i=[],o=null;const l=({state:g})=>{const y=Jm(t,location),k=n.value,D=e.value;let V=0;if(g){if(n.value=y,e.value=g,o&&o===k){o=null;return}V=D?g.position-D.position:0}else s(y);r.forEach(B=>{B(n.value,k,{delta:V,type:Ec.pop,direction:V?V>0?Kl.forward:Kl.back:Kl.unknown})})};function c(){o=n.value}function h(g){r.push(g);const y=()=>{const k=r.indexOf(g);k>-1&&r.splice(k,1)};return i.push(y),y}function d(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(xe({},g.state,{scroll:Ja()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:h,destroy:p}}function zd(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Ja():null}}function gI(t){const{history:e,location:n}=window,s={value:Jm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:pI()+t+c;try{e[d?"replaceState":"pushState"](h,"",g),r.value=h}catch(y){console.error(y),n[d?"replace":"assign"](g)}}function o(c,h){i(c,xe({},e.state,zd(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const d=xe({},r.value,e.state,{forward:c,scroll:Ja()});i(d.current,d,!0),i(c,xe({},zd(s.value,c,null),{position:d.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function _I(t){t=eI(t);const e=gI(t),n=mI(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=xe({location:"",base:t,go:s,createHref:nI.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let $s=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var at=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(at||{});const yI={type:$s.Static,value:""},vI=/[a-zA-Z0-9_]/;function EI(t){if(!t)return[[]];if(t==="/")return[[yI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=at.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===at.Static?i.push({type:$s.Static,value:h}):n===at.Param||n===at.ParamRegExp||n===at.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:$s.Param,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==at.ParamRegExp){s=n,n=at.EscapeNext;continue}switch(n){case at.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=at.Param):g();break;case at.EscapeNext:g(),n=s;break;case at.Param:c==="("?n=at.ParamRegExp:vI.test(c)?g():(p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case at.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=at.ParamRegExpEnd:d+=c;break;case at.ParamRegExpEnd:p(),n=at.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===at.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Wd="[^/]+?",TI={sensitive:!1,strict:!1,start:!0,end:!0};var Mt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Mt||{});const II=/[.+*?^${}()[\]/\\]/g;function wI(t,e){const n=xe({},TI,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[Mt.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const g=h[p];let y=Mt.Segment+(n.sensitive?Mt.BonusCaseSensitive:0);if(g.type===$s.Static)p||(r+="/"),r+=g.value.replace(II,"\\$&"),y+=Mt.Static;else if(g.type===$s.Param){const{value:k,repeatable:D,optional:V,regexp:B}=g;i.push({name:k,repeatable:D,optional:V});const $=B||Wd;if($!==Wd){y+=Mt.BonusCustomRegExp;try{`${$}`}catch(W){throw new Error(`Invalid custom RegExp for param "${k}" (${$}): `+W.message)}}let Y=D?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;p||(Y=V&&h.length<2?`(?:/${Y})`:"/"+Y),V&&(Y+="?"),r+=Y,y+=Mt.Dynamic,V&&(y+=Mt.BonusOptional),D&&(y+=Mt.BonusRepeatable),$===".*"&&(y+=Mt.BonusWildcard)}d.push(y)}s.push(d)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Mt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const d=h.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const y=d[g]||"",k=i[g-1];p[k.name]=y&&k.repeatable?y.split("/"):y}return p}function c(h){let d="",p=!1;for(const g of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const y of g)if(y.type===$s.Static)d+=y.value;else if(y.type===$s.Param){const{value:k,repeatable:D,optional:V}=y,B=k in h?h[k]:"";if(pn(B)&&!D)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const $=pn(B)?B.join("/"):B;if(!$)if(V)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${k}"`);d+=$}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function AI(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Mt.Static+Mt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Mt.Static+Mt.Segment?1:-1:0}function Zm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=AI(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Qd(s))return 1;if(Qd(r))return-1}return r.length-s.length}function Qd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const bI={strict:!1,end:!0,sensitive:!1};function RI(t,e,n){const s=wI(EI(t.path),n),r=xe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function SI(t,e){const n=[],s=new Map;e=$d(bI,e);function r(p){return s.get(p)}function i(p,g,y){const k=!y,D=Xd(p);D.aliasOf=y&&y.record;const V=$d(e,p),B=[D];if("alias"in p){const W=typeof p.alias=="string"?[p.alias]:p.alias;for(const fe of W)B.push(Xd(xe({},D,{components:y?y.record.components:D.components,path:fe,aliasOf:y?y.record:D})))}let $,Y;for(const W of B){const{path:fe}=W;if(g&&fe[0]!=="/"){const Ee=g.record.path,A=Ee[Ee.length-1]==="/"?"":"/";W.path=g.record.path+(fe&&A+fe)}if($=RI(W,g,V),y?y.alias.push($):(Y=Y||$,Y!==$&&Y.alias.push($),k&&p.name&&!Jd($)&&o(p.name)),eg($)&&c($),D.children){const Ee=D.children;for(let A=0;A<Ee.length;A++)i(Ee[A],$,y&&y.children[A])}y=y||$}return Y?()=>{o(Y)}:Vi}function o(p){if(Ym(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const g=kI(p,n);n.splice(g,0,p),p.record.name&&!Jd(p)&&s.set(p.record.name,p)}function h(p,g){let y,k={},D,V;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw xr(Ze.MATCHER_NOT_FOUND,{location:p});V=y.record.name,k=xe(Yd(g.params,y.keys.filter(Y=>!Y.optional).concat(y.parent?y.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),p.params&&Yd(p.params,y.keys.map(Y=>Y.name))),D=y.stringify(k)}else if(p.path!=null)D=p.path,y=n.find(Y=>Y.re.test(D)),y&&(k=y.parse(D),V=y.record.name);else{if(y=g.name?s.get(g.name):n.find(Y=>Y.re.test(g.path)),!y)throw xr(Ze.MATCHER_NOT_FOUND,{location:p,currentLocation:g});V=y.record.name,k=xe({},g.params,p.params),D=y.stringify(k)}const B=[];let $=y;for(;$;)B.unshift($.record),$=$.parent;return{name:V,path:D,params:k,matched:B,meta:PI(B)}}t.forEach(p=>i(p));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function Yd(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Xd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:CI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function CI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Jd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function PI(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function kI(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Zm(t,e[i])<0?s=i:n=i+1}const r=NI(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function NI(t){let e=t;for(;e=e.parent;)if(eg(e)&&Zm(t,e)===0)return e}function eg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Zd(t){const e=cn(Za),n=cn(_u),s=me(()=>{const c=et(t.to);return e.resolve(c)}),r=me(()=>{const{matched:c}=s.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(Or.bind(null,d));if(g>-1)return g;const y=ef(c[h-2]);return h>1&&ef(d)===y&&p[p.length-1].path!==y?p.findIndex(Or.bind(null,c[h-2])):g}),i=me(()=>r.value>-1&&LI(n.params,s.value.params)),o=me(()=>r.value>-1&&r.value===n.matched.length-1&&Qm(n.params,s.value.params));function l(c={}){if(xI(c)){const h=e[et(t.replace)?"replace":"push"](et(t.to)).catch(Vi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:me(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function DI(t){return t.length===1?t[0]:t}const VI=cm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Zd,setup(t,{slots:e}){const n=Ga(Zd(t)),{options:s}=cn(Za),r=me(()=>({[tf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[tf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&DI(e.default(n));return t.custom?i:Lm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),OI=VI;function xI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function LI(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!pn(r)||r.length!==s.length||s.some((i,o)=>i.valueOf()!==r[o].valueOf()))return!1}return!0}function ef(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const tf=(t,e,n)=>t??e??n,MI=cm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=cn(Ic),r=me(()=>t.route||s.value),i=cn(Gd,0),o=me(()=>{let h=et(i);const{matched:d}=r.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=me(()=>r.value.matched[o.value]);Go(Gd,me(()=>o.value+1)),Go(dI,l),Go(Ic,r);const c=we();return Bn(()=>[c.value,l.value,t.name],([h,d,p],[g,y,k])=>{d&&(d.instances[p]=h,y&&y!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=y.leaveGuards),d.updateGuards.size||(d.updateGuards=y.updateGuards))),h&&d&&(!y||!Or(d,y)||!g)&&(d.enterCallbacks[p]||[]).forEach(D=>D(h))},{flush:"post"}),()=>{const h=r.value,d=t.name,p=l.value,g=p&&p.components[d];if(!g)return nf(n.default,{Component:g,route:h});const y=p.props[d],k=y?y===!0?h.params:typeof y=="function"?y(h):y:null,V=Lm(g,xe({},k,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return nf(n.default,{Component:V,route:h})||V}}});function nf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const FI=MI;function UI(t){const e=SI(t.routes,t),n=t.parseQuery||uI,s=t.stringifyQuery||Kd,r=t.history,i=vi(),o=vi(),l=vi(),c=Uv(as);let h=as;pr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=ql.bind(null,L=>""+L),p=ql.bind(null,zT),g=ql.bind(null,Wi);function y(L,se){let ee,le;return Ym(L)?(ee=e.getRecordMatcher(L),le=se):le=L,e.addRoute(le,ee)}function k(L){const se=e.getRecordMatcher(L);se&&e.removeRoute(se)}function D(){return e.getRoutes().map(L=>L.record)}function V(L){return!!e.getRecordMatcher(L)}function B(L,se){if(se=xe({},se||c.value),typeof L=="string"){const C=Hl(n,L,se.path),O=e.resolve({path:C.path},se),F=r.createHref(C.fullPath);return xe(C,O,{params:g(O.params),hash:Wi(C.hash),redirectedFrom:void 0,href:F})}let ee;if(L.path!=null)ee=xe({},L,{path:Hl(n,L.path,se.path).path});else{const C=xe({},L.params);for(const O in C)C[O]==null&&delete C[O];ee=xe({},L,{params:p(C)}),se.params=p(se.params)}const le=e.resolve(ee,se),Re=L.hash||"";le.params=d(g(le.params));const E=YT(s,xe({},L,{hash:HT(Re),path:le.path})),w=r.createHref(E);return xe({fullPath:E,hash:Re,query:s===Kd?hI(L.query):L.query||{}},le,{redirectedFrom:void 0,href:w})}function $(L){return typeof L=="string"?Hl(n,L,c.value.path):xe({},L)}function Y(L,se){if(h!==L)return xr(Ze.NAVIGATION_CANCELLED,{from:se,to:L})}function W(L){return A(L)}function fe(L){return W(xe($(L),{replace:!0}))}function Ee(L,se){const ee=L.matched[L.matched.length-1];if(ee&&ee.redirect){const{redirect:le}=ee;let Re=typeof le=="function"?le(L,se):le;return typeof Re=="string"&&(Re=Re.includes("?")||Re.includes("#")?Re=$(Re):{path:Re},Re.params={}),xe({query:L.query,hash:L.hash,params:Re.path!=null?{}:L.params},Re)}}function A(L,se){const ee=h=B(L),le=c.value,Re=L.state,E=L.force,w=L.replace===!0,C=Ee(ee,le);if(C)return A(xe($(C),{state:typeof C=="object"?xe({},Re,C.state):Re,force:E,replace:w}),se||ee);const O=ee;O.redirectedFrom=se;let F;return!E&&XT(s,le,ee)&&(F=xr(Ze.NAVIGATION_DUPLICATED,{to:O,from:le}),Ot(le,le,!0,!1)),(F?Promise.resolve(F):R(O,le)).catch(x=>Vn(x)?Vn(x,Ze.NAVIGATION_GUARD_REDIRECT)?x:Qt(x):Ae(x,O,le)).then(x=>{if(x){if(Vn(x,Ze.NAVIGATION_GUARD_REDIRECT))return A(xe({replace:w},$(x.to),{state:typeof x.to=="object"?xe({},Re,x.to.state):Re,force:E}),se||O)}else x=S(O,le,!0,w,Re);return b(O,le,x),x})}function v(L,se){const ee=Y(L,se);return ee?Promise.reject(ee):Promise.resolve()}function I(L){const se=Q.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(L):L()}function R(L,se){let ee;const[le,Re,E]=fI(L,se);ee=Gl(le.reverse(),"beforeRouteLeave",L,se);for(const C of le)C.leaveGuards.forEach(O=>{ee.push(ds(O,L,se))});const w=v.bind(null,L,se);return ee.push(w),wt(ee).then(()=>{ee=[];for(const C of i.list())ee.push(ds(C,L,se));return ee.push(w),wt(ee)}).then(()=>{ee=Gl(Re,"beforeRouteUpdate",L,se);for(const C of Re)C.updateGuards.forEach(O=>{ee.push(ds(O,L,se))});return ee.push(w),wt(ee)}).then(()=>{ee=[];for(const C of E)if(C.beforeEnter)if(pn(C.beforeEnter))for(const O of C.beforeEnter)ee.push(ds(O,L,se));else ee.push(ds(C.beforeEnter,L,se));return ee.push(w),wt(ee)}).then(()=>(L.matched.forEach(C=>C.enterCallbacks={}),ee=Gl(E,"beforeRouteEnter",L,se,I),ee.push(w),wt(ee))).then(()=>{ee=[];for(const C of o.list())ee.push(ds(C,L,se));return ee.push(w),wt(ee)}).catch(C=>Vn(C,Ze.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function b(L,se,ee){l.list().forEach(le=>I(()=>le(L,se,ee)))}function S(L,se,ee,le,Re){const E=Y(L,se);if(E)return E;const w=se===as,C=pr?history.state:{};ee&&(le||w?r.replace(L.fullPath,xe({scroll:w&&C&&C.scroll},Re)):r.push(L.fullPath,Re)),c.value=L,Ot(L,se,ee,w),Qt()}let T;function ie(){T||(T=r.listen((L,se,ee)=>{if(!ht.listening)return;const le=B(L),Re=Ee(le,ht.currentRoute.value);if(Re){A(xe(Re,{replace:!0,force:!0}),le).catch(Vi);return}h=le;const E=c.value;pr&&iI(Hd(E.fullPath,ee.delta),Ja()),R(le,E).catch(w=>Vn(w,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_CANCELLED)?w:Vn(w,Ze.NAVIGATION_GUARD_REDIRECT)?(A(xe($(w.to),{force:!0}),le).then(C=>{Vn(C,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===Ec.pop&&r.go(-1,!1)}).catch(Vi),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),Ae(w,le,E))).then(w=>{w=w||S(le,E,!1),w&&(ee.delta&&!Vn(w,Ze.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===Ec.pop&&Vn(w,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(le,E,w)}).catch(Vi)}))}let te=vi(),Ne=vi(),Ve;function Ae(L,se,ee){Qt(L);const le=Ne.list();return le.length?le.forEach(Re=>Re(L,se,ee)):console.error(L),Promise.reject(L)}function It(){return Ve&&c.value!==as?Promise.resolve():new Promise((L,se)=>{te.add([L,se])})}function Qt(L){return Ve||(Ve=!L,ie(),te.list().forEach(([se,ee])=>L?ee(L):se()),te.reset()),L}function Ot(L,se,ee,le){const{scrollBehavior:Re}=t;if(!pr||!Re)return Promise.resolve();const E=!ee&&oI(Hd(L.fullPath,0))||(le||!ee)&&history.state&&history.state.scroll||null;return nm().then(()=>Re(L,se,E)).then(w=>w&&rI(w)).catch(w=>Ae(w,L,se))}const H=L=>r.go(L);let X;const Q=new Set,ht={currentRoute:c,listening:!0,addRoute:y,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:D,resolve:B,options:t,push:W,replace:fe,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ne.add,isReady:It,install(L){L.component("RouterLink",OI),L.component("RouterView",FI),L.config.globalProperties.$router=ht,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>et(c)}),pr&&!X&&c.value===as&&(X=!0,W(r.location).catch(le=>{}));const se={};for(const le in as)Object.defineProperty(se,le,{get:()=>c.value[le],enumerable:!0});L.provide(Za,ht),L.provide(_u,Jp(se)),L.provide(Ic,c);const ee=L.unmount;Q.add(L),L.unmount=function(){Q.delete(L),Q.size<1&&(h=as,T&&T(),T=null,c.value=as,X=!1,Ve=!1),ee()}}};function wt(L){return L.reduce((se,ee)=>se.then(()=>I(ee)),Promise.resolve())}return ht}function Kr(){return cn(Za)}function BI(t){return cn(_u)}const $I=()=>{};var sf={};const tg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},jI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ng={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,y=h&63;c||(y=64,o||(g=64)),s.push(n[d],n[p],n[g],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new qI;const g=i<<2|l>>4;if(s.push(g),h!==64){const y=l<<4&240|h>>2;if(s.push(y),p!==64){const k=h<<6&192|p;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HI=function(t){const e=tg(t);return ng.encodeByteArray(e,!0)},pa=function(t){return HI(t).replace(/\./g,"")},sg=function(t){try{return ng.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const GI=()=>KI().__FIREBASE_DEFAULTS__,zI=()=>{if(typeof process>"u"||typeof sf>"u")return;const t=sf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sg(t[1]);return e&&JSON.parse(e)},el=()=>{try{return $I()||GI()||zI()||WI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rg=t=>el()?.emulatorHosts?.[t],QI=t=>{const e=rg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ig=()=>el()?.config,og=t=>el()?.[`_${t}`];class YI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Gr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ag(t){return(await fetch(t,{credentials:"include"})).ok}function XI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pa(JSON.stringify(n)),pa(JSON.stringify(o)),""].join(".")}const Oi={};function JI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Oi))Oi[e]?t.emulator.push(e):t.prod.push(e);return t}function ZI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rf=!1;function lg(t,e){if(typeof window>"u"||typeof document>"u"||!Gr(window.location.host)||Oi[t]===e||Oi[t]||rf)return;Oi[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=JI().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{rf=!0,o()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=ZI(s),y=n("text"),k=document.getElementById(y)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),B=n("preprendIcon"),$=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const Y=g.element;l(Y),d(V,D);const W=h();c($,B),Y.append($,k,V,W),document.body.appendChild(Y)}i?(k.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ew(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function tw(){const t=el()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iw(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ow(){return!tw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aw(){try{return typeof indexedDB=="object"}catch{return!1}}function lw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const cw="FirebaseError";class es extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=cw,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ho.prototype.create)}}class ho{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?uw(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new es(r,l,s)}}function uw(t,e){return t.replace(hw,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const hw=/\{\$([^}]+)}/g;function dw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(of(i)&&of(o)){if(!Ys(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function of(t){return t!==null&&typeof t=="object"}function fo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fw(t,e){const n=new pw(t,e);return n.subscribe.bind(n)}class pw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");mw(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=zl),r.error===void 0&&(r.error=zl),r.complete===void 0&&(r.complete=zl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zl(){}function en(t){return t&&t._delegate?t._delegate:t}class Xs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bs="[DEFAULT]";class gw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new YI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yw(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_w(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _w(t){return t===Bs?void 0:t}function yw(t){return t.instantiationMode==="EAGER"}class vw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const Ew={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Tw=Se.INFO,Iw={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},ww=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Iw[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yu{constructor(e){this.name=e,this._logLevel=Tw,this._logHandler=ww,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ew[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const Aw=(t,e)=>e.some(n=>t instanceof n);let af,lf;function bw(){return af||(af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rw(){return lf||(lf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cg=new WeakMap,wc=new WeakMap,ug=new WeakMap,Wl=new WeakMap,vu=new WeakMap;function Sw(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cg.set(n,t)}).catch(()=>{}),vu.set(e,t),e}function Cw(t){if(wc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wc.set(t,e)}let Ac={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ug.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Pw(t){Ac=t(Ac)}function kw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ql(this),e,...n);return ug.set(s,e.sort?e.sort():[e]),vs(s)}:Rw().includes(t)?function(...e){return t.apply(Ql(this),e),vs(cg.get(this))}:function(...e){return vs(t.apply(Ql(this),e))}}function Nw(t){return typeof t=="function"?kw(t):(t instanceof IDBTransaction&&Cw(t),Aw(t,bw())?new Proxy(t,Ac):t)}function vs(t){if(t instanceof IDBRequest)return Sw(t);if(Wl.has(t))return Wl.get(t);const e=Nw(t);return e!==t&&(Wl.set(t,e),vu.set(e,t)),e}const Ql=t=>vu.get(t);function Dw(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=vs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(vs(o.result),c.oldVersion,c.newVersion,vs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Vw=["get","getKey","getAll","getAllKeys","count"],Ow=["put","add","delete","clear"],Yl=new Map;function cf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yl.get(e))return Yl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Ow.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Vw.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Yl.set(e,i),i}Pw(t=>({...t,get:(e,n,s)=>cf(e,n)||t.get(e,n,s),has:(e,n)=>!!cf(e,n)||t.has(e,n)}));class xw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Lw(t){return t.getComponent()?.type==="VERSION"}const bc="@firebase/app",uf="0.14.6";const zn=new yu("@firebase/app"),Mw="@firebase/app-compat",Fw="@firebase/analytics-compat",Uw="@firebase/analytics",Bw="@firebase/app-check-compat",$w="@firebase/app-check",jw="@firebase/auth",qw="@firebase/auth-compat",Hw="@firebase/database",Kw="@firebase/data-connect",Gw="@firebase/database-compat",zw="@firebase/functions",Ww="@firebase/functions-compat",Qw="@firebase/installations",Yw="@firebase/installations-compat",Xw="@firebase/messaging",Jw="@firebase/messaging-compat",Zw="@firebase/performance",eA="@firebase/performance-compat",tA="@firebase/remote-config",nA="@firebase/remote-config-compat",sA="@firebase/storage",rA="@firebase/storage-compat",iA="@firebase/firestore",oA="@firebase/ai",aA="@firebase/firestore-compat",lA="firebase",cA="12.6.0";const Rc="[DEFAULT]",uA={[bc]:"fire-core",[Mw]:"fire-core-compat",[Uw]:"fire-analytics",[Fw]:"fire-analytics-compat",[$w]:"fire-app-check",[Bw]:"fire-app-check-compat",[jw]:"fire-auth",[qw]:"fire-auth-compat",[Hw]:"fire-rtdb",[Kw]:"fire-data-connect",[Gw]:"fire-rtdb-compat",[zw]:"fire-fn",[Ww]:"fire-fn-compat",[Qw]:"fire-iid",[Yw]:"fire-iid-compat",[Xw]:"fire-fcm",[Jw]:"fire-fcm-compat",[Zw]:"fire-perf",[eA]:"fire-perf-compat",[tA]:"fire-rc",[nA]:"fire-rc-compat",[sA]:"fire-gcs",[rA]:"fire-gcs-compat",[iA]:"fire-fst",[aA]:"fire-fst-compat",[oA]:"fire-vertex","fire-js":"fire-js",[lA]:"fire-js-all"};const ma=new Map,hA=new Map,Sc=new Map;function hf(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lr(t){const e=t.name;if(Sc.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;Sc.set(e,t);for(const n of ma.values())hf(n,t);for(const n of hA.values())hf(n,t);return!0}function Eu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}const dA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new ho("app","Firebase",dA);class fA{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}const zr=cA;function hg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Rc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Es.create("bad-app-name",{appName:String(r)});if(n||(n=ig()),!n)throw Es.create("no-options");const i=ma.get(r);if(i){if(Ys(n,i.options)&&Ys(s,i.config))return i;throw Es.create("duplicate-app",{appName:r})}const o=new vw(r);for(const c of Sc.values())o.addComponent(c);const l=new fA(n,s,o);return ma.set(r,l),l}function dg(t=Rc){const e=ma.get(t);if(!e&&t===Rc&&ig())return hg();if(!e)throw Es.create("no-app",{appName:t});return e}function Ts(t,e,n){let s=uA[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(o.join(" "));return}Lr(new Xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const pA="firebase-heartbeat-database",mA=1,Qi="firebase-heartbeat-store";let Xl=null;function fg(){return Xl||(Xl=Dw(pA,mA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),Xl}async function gA(t){try{const n=(await fg()).transaction(Qi),s=await n.objectStore(Qi).get(pg(t));return await n.done,s}catch(e){if(e instanceof es)zn.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e?.message});zn.warn(n.message)}}}async function df(t,e){try{const s=(await fg()).transaction(Qi,"readwrite");await s.objectStore(Qi).put(e,pg(t)),await s.done}catch(n){if(n instanceof es)zn.warn(n.message);else{const s=Es.create("idb-set",{originalErrorMessage:n?.message});zn.warn(s.message)}}}function pg(t){return`${t.name}!${t.options.appId}`}const _A=1024,yA=30;class vA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ff();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>yA){const r=IA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ff(),{heartbeatsToSend:n,unsentEntries:s}=EA(this._heartbeatsCache.heartbeats),r=pa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return zn.warn(e),""}}}function ff(){return new Date().toISOString().substring(0,10)}function EA(t,e=_A){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),pf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aw()?lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return df(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return df(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pf(t){return pa(JSON.stringify({version:2,heartbeats:t})).length}function IA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function wA(t){Lr(new Xs("platform-logger",e=>new xw(e),"PRIVATE")),Lr(new Xs("heartbeat",e=>new vA(e),"PRIVATE")),Ts(bc,uf,t),Ts(bc,uf,"esm2020"),Ts("fire-js","")}wA("");function mg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AA=mg,gg=new ho("auth","Firebase",mg());const ga=new yu("@firebase/auth");function bA(t,...e){ga.logLevel<=Se.WARN&&ga.warn(`Auth (${zr}): ${t}`,...e)}function Yo(t,...e){ga.logLevel<=Se.ERROR&&ga.error(`Auth (${zr}): ${t}`,...e)}function Pn(t,...e){throw Iu(t,...e)}function hn(t,...e){return Iu(t,...e)}function Tu(t,e,n){const s={...AA(),[e]:n};return new ho("auth","Firebase",s).create(e,{appName:t.name})}function zs(t){return Tu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Pn(t,"argument-error"),Tu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return gg.create(t,...e)}function _e(t,e,...n){if(!t)throw Iu(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yo(e),new Error(e)}function Wn(t,e){t||Fn(e)}function Cc(){return typeof self<"u"&&self.location?.href||""}function SA(){return mf()==="http:"||mf()==="https:"}function mf(){return typeof self<"u"&&self.location?.protocol||null}function CA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SA()||sw()||"connection"in navigator)?navigator.onLine:!0}function PA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class po{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=ew()||rw()}get(){return CA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wu(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class _g{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DA=new po(3e4,6e4);function Au(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wr(t,e,n,s,r={}){return yg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=fo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return nw()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Gr(t.emulatorConfig.host)&&(h.credentials="include"),_g.fetch()(await vg(t,t.config.apiHost,n,l),h)})}async function yg(t,e,n){t._canInitEmulator=!1;const s={...kA,...e};try{const r=new OA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Fo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Fo(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Tu(t,d,h);Pn(t,d)}}catch(r){if(r instanceof es)throw r;Pn(t,"network-request-failed",{message:String(r)})}}async function VA(t,e,n,s,r={}){const i=await Wr(t,e,n,s,r);return"mfaPendingCredential"in i&&Pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function vg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?wu(t.config,r):`${t.config.apiScheme}://${r}`;return NA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class OA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hn(this.auth,"network-request-failed")),DA.get())})}}function Fo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=hn(t,e,s);return r.customData._tokenResponse=n,r}async function xA(t,e){return Wr(t,"POST","/v1/accounts:delete",e)}async function _a(t,e){return Wr(t,"POST","/v1/accounts:lookup",e)}function xi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LA(t,e=!1){const n=en(t),s=await n.getIdToken(e),r=bu(s);_e(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:xi(Jl(r.auth_time)),issuedAtTime:xi(Jl(r.iat)),expirationTime:xi(Jl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Jl(t){return Number(t)*1e3}function bu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Yo("JWT malformed, contained fewer than 3 sections"),null;try{const r=sg(n);return r?JSON.parse(r):(Yo("Failed to decode base64 JWT payload"),null)}catch(r){return Yo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function gf(t){const e=bu(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof es&&MA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function MA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class FA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Pc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xi(this.lastLoginAt),this.creationTime=xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ya(t){const e=t.auth,n=await t.getIdToken(),s=await Yi(t,_a(e,{idToken:n}));_e(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Eg(r.providerUserInfo):[],o=BA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Pc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function UA(t){const e=en(t);await ya(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Eg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function $A(t,e){const n=await yg(t,{},async()=>{const s=fo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await vg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Gr(t.emulatorConfig.host)&&(c.credentials="include"),_g.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jA(t,e){return Wr(t,"POST","/v2/accounts:revokeToken",Au(t,e))}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=gf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await $A(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Ar;return s&&(_e(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(_e(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(_e(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return Fn("not implemented")}}function ls(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new FA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Pc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Yi(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LA(this,e)}reload(){return UA(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ya(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await Yi(this,xA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:k,stsTokenManager:D}=n;_e(p&&D,e,"internal-error");const V=Ar.fromJSON(this.name,D);_e(typeof p=="string",e,"internal-error"),ls(s,e.name),ls(r,e.name),_e(typeof g=="boolean",e,"internal-error"),_e(typeof y=="boolean",e,"internal-error"),ls(i,e.name),ls(o,e.name),ls(l,e.name),ls(c,e.name),ls(h,e.name),ls(d,e.name);const B=new on({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:V,createdAt:h,lastLoginAt:d});return k&&Array.isArray(k)&&(B.providerData=k.map($=>({...$}))),c&&(B._redirectEventId=c),B}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ar;r.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ya(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];_e(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Eg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Ar;l.updateFromIdToken(s);const c=new on({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Pc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const _f=new Map;function Un(t){Wn(t instanceof Function,"Expected a class definition");let e=_f.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_f.set(t,e),e)}class Tg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tg.type="NONE";const yf=Tg;function Xo(t,e,n){return`firebase:${t}:${e}:${n}`}class br{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Xo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Xo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _a(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new br(Un(yf),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Un(yf);const o=Xo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(o);if(d){let p;if(typeof d=="string"){const g=await _a(e,{idToken:d}).catch(()=>{});if(!g)break;p=await on._fromGetAccountInfoResponse(e,g,d)}else p=on._fromJSON(e,d);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new br(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new br(i,e,s))}}function vf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ig(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sg(e))return"Blackberry";if(Cg(e))return"Webos";if(wg(e))return"Safari";if((e.includes("chrome/")||Ag(e))&&!e.includes("edge/"))return"Chrome";if(Rg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Ig(t=Vt()){return/firefox\//i.test(t)}function wg(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ag(t=Vt()){return/crios\//i.test(t)}function bg(t=Vt()){return/iemobile/i.test(t)}function Rg(t=Vt()){return/android/i.test(t)}function Sg(t=Vt()){return/blackberry/i.test(t)}function Cg(t=Vt()){return/webos/i.test(t)}function Ru(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qA(t=Vt()){return Ru(t)&&!!window.navigator?.standalone}function HA(){return iw()&&document.documentMode===10}function Pg(t=Vt()){return Ru(t)||Rg(t)||Cg(t)||Sg(t)||/windows phone/i.test(t)||bg(t)}function kg(t,e=[]){let n;switch(t){case"Browser":n=vf(Vt());break;case"Worker":n=`${vf(Vt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zr}/${s}`}class KA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function GA(t,e={}){return Wr(t,"GET","/v2/passwordPolicy",Au(t,e))}const zA=6;class WA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class QA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ef(this),this.idTokenSubscription=new Ef(this),this.beforeStateQueue=new KA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await br.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _a(this,{idToken:e}),s=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ya(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(zs(this));const n=e?en(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GA(this),n=new WA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ho("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await jA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await br.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function tl(t){return en(t)}class Ef{constructor(e){this.auth=e,this.observer=null,this.addObserver=fw(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Su={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YA(t){Su=t}function XA(t){return Su.loadJS(t)}function JA(){return Su.gapiScript}function ZA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function eb(t,e){const n=Eu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ys(i,e??{}))return r;Pn(r,"already-initialized")}return n.initialize({options:e})}function tb(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Un);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function nb(t,e,n){const s=tl(t);_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Ng(e),{host:o,port:l}=sb(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){_e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_e(Ys(h,s.config.emulator)&&Ys(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,Gr(o)?(ag(`${i}//${o}${c}`),lg("Auth",!0)):rb()}function Ng(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sb(t){const e=Ng(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Tf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Tf(o)}}}function Tf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function Rr(t,e){return VA(t,"POST","/v1/accounts:signInWithIdp",Au(t,e))}const ib="http://localhost";class Js extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Js(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rr(e,n)}buildRequest(){const e={requestUri:ib,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fo(n)}return e}}class Cu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mo extends Cu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends mo{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";class Mn extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Mn.credential(n,s)}catch{return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com";Mn.PROVIDER_ID="google.com";class ms extends mo{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";class gs extends mo{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return gs.credential(n,s)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await on._fromIdTokenResponse(e,s,r),o=If(s);return new Mr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=If(s);return new Mr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function If(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class va extends es{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,va.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new va(e,n,s,r)}}function Vg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?va._fromErrorAndOperation(t,i,e,s):i})}async function ob(t,e,n=!1){const s=await Yi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mr._forOperation(t,"link",s)}async function ab(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(zs(s));const r="reauthenticate";try{const i=await Yi(t,Vg(s,r,e,t),n);_e(i.idToken,s,"internal-error");const o=bu(i.idToken);_e(o,s,"internal-error");const{sub:l}=o;return _e(t.uid===l,s,"user-mismatch"),Mr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Pn(s,"user-mismatch"),i}}async function lb(t,e,n=!1){if(sn(t.app))return Promise.reject(zs(t));const s="signIn",r=await Vg(t,s,e),i=await Mr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function cb(t,e,n,s){return en(t).onIdTokenChanged(e,n,s)}function ub(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function hb(t,e,n,s){return en(t).onAuthStateChanged(e,n,s)}function db(t){return en(t).signOut()}const Ea="__sak";class Og{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ea,"1"),this.storage.removeItem(Ea),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fb=1e3,pb=10;class xg extends Og{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);HA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,pb):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},fb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xg.type="LOCAL";const mb=xg;class Lg extends Og{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lg.type="SESSION";const Mg=Lg;function gb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new nl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await gb(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nl.receivers=[];function Pu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class _b{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Pu("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function In(){return window}function yb(t){In().location.href=t}function Fg(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function vb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Eb(){return navigator?.serviceWorker?.controller||null}function Tb(){return Fg()?self:null}const Ug="firebaseLocalStorageDb",Ib=1,Ta="firebaseLocalStorage",Bg="fbase_key";class go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sl(t,e){return t.transaction([Ta],e?"readwrite":"readonly").objectStore(Ta)}function wb(){const t=indexedDB.deleteDatabase(Ug);return new go(t).toPromise()}function kc(){const t=indexedDB.open(Ug,Ib);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ta,{keyPath:Bg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ta)?e(s):(s.close(),await wb(),e(await kc()))})})}async function wf(t,e,n){const s=sl(t,!0).put({[Bg]:e,value:n});return new go(s).toPromise()}async function Ab(t,e){const n=sl(t,!1).get(e),s=await new go(n).toPromise();return s===void 0?null:s.value}function Af(t,e){const n=sl(t,!0).delete(e);return new go(n).toPromise()}const bb=800,Rb=3;class $g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Rb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nl._getInstance(Tb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vb(),!this.activeServiceWorker)return;this.sender=new _b(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Eb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kc();return await wf(e,Ea,"1"),await Af(e,Ea),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Ab(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Af(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=sl(r,!1).getAll();return new go(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$g.type="LOCAL";const Sb=$g;new po(3e4,6e4);function jg(t,e){return e?Un(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class ku extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Cb(t){return lb(t.auth,new ku(t),t.bypassAuthState)}function Pb(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),ab(n,new ku(t),t.bypassAuthState)}async function kb(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),ob(n,new ku(t),t.bypassAuthState)}class qg{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cb;case"linkViaPopup":case"linkViaRedirect":return kb;case"reauthViaPopup":case"reauthViaRedirect":return Pb;default:Pn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nb=new po(2e3,1e4);async function Db(t,e,n){if(sn(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const s=tl(t);RA(t,e,Cu);const r=jg(s,n);return new js(s,"signInViaPopup",e,r).executeNotNull()}class js extends qg{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=Pu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nb.get())};e()}}js.currentPopupAction=null;const Vb="pendingRedirect",Jo=new Map;class Ob extends qg{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Jo.get(this.auth._key());if(!e){try{const s=await xb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Jo.set(this.auth._key(),e)}return this.bypassAuthState||Jo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xb(t,e){const n=Fb(e),s=Mb(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Lb(t,e){Jo.set(t._key(),e)}function Mb(t){return Un(t._redirectPersistence)}function Fb(t){return Xo(Vb,t.config.apiKey,t.name)}async function Ub(t,e,n=!1){if(sn(t.app))return Promise.reject(zs(t));const s=tl(t),r=jg(s,e),o=await new Ob(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const Bb=600*1e3;class $b{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Hg(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bb&&this.cachedEventUids.clear(),this.cachedEventUids.has(bf(e))}saveEventToCache(e){this.cachedEventUids.add(bf(e)),this.lastProcessedEventTime=Date.now()}}function bf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hg({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function jb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hg(t);default:return!1}}async function qb(t,e={}){return Wr(t,"GET","/v1/projects",e)}const Hb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kb=/^https?/;async function Gb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qb(t);for(const n of e)try{if(zb(n))return}catch{}Pn(t,"unauthorized-domain")}function zb(t){const e=Cc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!Kb.test(n))return!1;if(Hb.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const Wb=new po(3e4,6e4);function Rf(){const t=In().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Qb(t){return new Promise((e,n)=>{function s(){Rf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rf(),n(hn(t,"network-request-failed"))},timeout:Wb.get()})}if(In().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(In().gapi?.load)s();else{const r=ZA("iframefcb");return In()[r]=()=>{gapi.load?s():n(hn(t,"network-request-failed"))},XA(`${JA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Zo=null,e})}let Zo=null;function Yb(t){return Zo=Zo||Qb(t),Zo}const Xb=new po(5e3,15e3),Jb="__/auth/iframe",Zb="emulator/auth/iframe",eR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nR(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wu(e,Zb):`https://${t.config.authDomain}/${Jb}`,s={apiKey:e.apiKey,appName:t.name,v:zr},r=tR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${fo(s).slice(1)}`}async function sR(t){const e=await Yb(t),n=In().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:nR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},Xb.get());function c(){In().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const rR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iR=500,oR=600,aR="_blank",lR="http://localhost";class Sf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cR(t,e,n,s=iR,r=oR){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...rR,width:s.toString(),height:r.toString(),top:i,left:o},h=Vt().toLowerCase();n&&(l=Ag(h)?aR:n),Ig(h)&&(e=e||lR,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,k])=>`${g}${y}=${k},`,"");if(qA(h)&&l!=="_self")return uR(e||"",l),new Sf(null);const p=window.open(e||"",l,d);_e(p,t,"popup-blocked");try{p.focus()}catch{}return new Sf(p)}function uR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const hR="__/auth/handler",dR="emulator/auth/handler",fR=encodeURIComponent("fac");async function Cf(t,e,n,s,r,i){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:zr,eventId:r};if(e instanceof Cu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof mo){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),h=c?`#${fR}=${encodeURIComponent(c)}`:"";return`${pR(t)}?${fo(l).slice(1)}${h}`}function pR({config:t}){return t.emulator?wu(t,dR):`https://${t.authDomain}/${hR}`}const Zl="webStorageSupport";class mR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mg,this._completeRedirectFn=Ub,this._overrideRedirectResult=Lb}async _openPopup(e,n,s,r){Wn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Cf(e,n,s,Cc(),r);return cR(e,i,Pu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Cf(e,n,s,Cc(),r);return yb(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Wn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sR(e),s=new $b(e);return n.register("authEvent",r=>(_e(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zl,{type:Zl},r=>{const i=r?.[0]?.[Zl];i!==void 0&&n(!!i),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gb(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pg()||wg()||Ru()}}const gR=mR;var Pf="@firebase/auth",kf="1.12.0";class _R{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(t){Lr(new Xs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kg(t)},h=new QA(s,r,i,c);return tb(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Lr(new Xs("auth-internal",e=>{const n=tl(e.getProvider("auth").getImmediate());return(s=>new _R(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(Pf,kf,yR(t)),Ts(Pf,kf,"esm2020")}const ER=300,TR=og("authIdTokenMaxAge")||ER;let Nf=null;const IR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>TR)return;const r=n?.token;Nf!==r&&(Nf=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function wR(t=dg()){const e=Eu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eb(t,{popupRedirectResolver:gR,persistence:[Sb,mb,Mg]}),s=og("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=IR(i.toString());ub(n,o,()=>o(n.currentUser)),cb(n,l=>o(l))}}const r=rg("auth");return r&&nb(n,`http://${r}`),n}function AR(){return document.getElementsByTagName("head")?.[0]??document}YA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=hn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",AR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");var bR="firebase",RR="12.7.0";Ts(bR,RR,"app");var Df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Is,Kg;(function(){var t;function e(A,v){function I(){}I.prototype=v.prototype,A.F=v.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(R,b,S){for(var T=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)T[ie-2]=arguments[ie];return v.prototype[b].apply(R,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,v,I){I||(I=0);const R=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)R[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;b<16;++b)R[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=A.g[0],I=A.g[1],b=A.g[2];let S=A.g[3],T;T=v+(S^I&(b^S))+R[0]+3614090360&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[1]+3905402710&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[2]+606105819&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[3]+3250441966&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[4]+4118548399&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[5]+1200080426&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[6]+2821735955&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[7]+4249261313&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[8]+1770035416&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[9]+2336552879&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[10]+4294925233&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[11]+2304563134&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(S^I&(b^S))+R[12]+1804603682&4294967295,v=I+(T<<7&4294967295|T>>>25),T=S+(b^v&(I^b))+R[13]+4254626195&4294967295,S=v+(T<<12&4294967295|T>>>20),T=b+(I^S&(v^I))+R[14]+2792965006&4294967295,b=S+(T<<17&4294967295|T>>>15),T=I+(v^b&(S^v))+R[15]+1236535329&4294967295,I=b+(T<<22&4294967295|T>>>10),T=v+(b^S&(I^b))+R[1]+4129170786&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[6]+3225465664&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[11]+643717713&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[0]+3921069994&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[5]+3593408605&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[10]+38016083&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[15]+3634488961&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[4]+3889429448&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[9]+568446438&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[14]+3275163606&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[3]+4107603335&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[8]+1163531501&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(b^S&(I^b))+R[13]+2850285829&4294967295,v=I+(T<<5&4294967295|T>>>27),T=S+(I^b&(v^I))+R[2]+4243563512&4294967295,S=v+(T<<9&4294967295|T>>>23),T=b+(v^I&(S^v))+R[7]+1735328473&4294967295,b=S+(T<<14&4294967295|T>>>18),T=I+(S^v&(b^S))+R[12]+2368359562&4294967295,I=b+(T<<20&4294967295|T>>>12),T=v+(I^b^S)+R[5]+4294588738&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[8]+2272392833&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[11]+1839030562&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[14]+4259657740&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[1]+2763975236&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[4]+1272893353&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[7]+4139469664&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[10]+3200236656&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[13]+681279174&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[0]+3936430074&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[3]+3572445317&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[6]+76029189&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(I^b^S)+R[9]+3654602809&4294967295,v=I+(T<<4&4294967295|T>>>28),T=S+(v^I^b)+R[12]+3873151461&4294967295,S=v+(T<<11&4294967295|T>>>21),T=b+(S^v^I)+R[15]+530742520&4294967295,b=S+(T<<16&4294967295|T>>>16),T=I+(b^S^v)+R[2]+3299628645&4294967295,I=b+(T<<23&4294967295|T>>>9),T=v+(b^(I|~S))+R[0]+4096336452&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[7]+1126891415&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[14]+2878612391&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[5]+4237533241&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[12]+1700485571&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[3]+2399980690&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[10]+4293915773&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[1]+2240044497&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[8]+1873313359&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[15]+4264355552&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[6]+2734768916&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[13]+1309151649&4294967295,I=b+(T<<21&4294967295|T>>>11),T=v+(b^(I|~S))+R[4]+4149444226&4294967295,v=I+(T<<6&4294967295|T>>>26),T=S+(I^(v|~b))+R[11]+3174756917&4294967295,S=v+(T<<10&4294967295|T>>>22),T=b+(v^(S|~I))+R[2]+718787259&4294967295,b=S+(T<<15&4294967295|T>>>17),T=I+(S^(b|~v))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(b+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+b&4294967295,A.g[3]=A.g[3]+S&4294967295}s.prototype.v=function(A,v){v===void 0&&(v=A.length);const I=v-this.blockSize,R=this.C;let b=this.h,S=0;for(;S<v;){if(b==0)for(;S<=I;)r(this,A,S),S+=this.blockSize;if(typeof A=="string"){for(;S<v;)if(R[b++]=A.charCodeAt(S++),b==this.blockSize){r(this,R),b=0;break}}else for(;S<v;)if(R[b++]=A[S++],b==this.blockSize){r(this,R),b=0;break}}this.h=b,this.o+=v},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;v=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=v&255,v/=256;for(this.v(A),A=Array(16),v=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)A[v++]=this.g[I]>>>R&255;return A};function i(A,v){var I=l;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=v(A)}function o(A,v){this.h=v;const I=[];let R=!0;for(let b=A.length-1;b>=0;b--){const S=A[b]|0;R&&S==v||(I[b]=S,R=!1)}this.g=I}var l={};function c(A){return-128<=A&&A<128?i(A,function(v){return new o([v|0],v<0?-1:0)}):new o([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return V(h(-A));const v=[];let I=1;for(let R=0;A>=I;R++)v[R]=A/I|0,I*=4294967296;return new o(v,0)}function d(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return V(d(A.substring(1),v));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(v,8));let R=p;for(let S=0;S<A.length;S+=8){var b=Math.min(8,A.length-S);const T=parseInt(A.substring(S,S+b),v);b<8?(b=h(Math.pow(v,b)),R=R.j(b).add(h(T))):(R=R.j(I),R=R.add(h(T)))}return R}var p=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-V(this).m();let A=0,v=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);A+=(R>=0?R:4294967296+R)*v,v*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(D(this))return"-"+V(this).toString(A);const v=h(Math.pow(A,6));var I=this;let R="";for(;;){const b=W(I,v).g;I=B(I,b.j(v));let S=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=b,k(I))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function D(A){return A.h==-1}t.l=function(A){return A=B(this,A),D(A)?-1:k(A)?0:1};function V(A){const v=A.g.length,I=[];for(let R=0;R<v;R++)I[R]=~A.g[R];return new o(I,~A.h).add(g)}t.abs=function(){return D(this)?V(this):this},t.add=function(A){const v=Math.max(this.g.length,A.g.length),I=[];let R=0;for(let b=0;b<=v;b++){let S=R+(this.i(b)&65535)+(A.i(b)&65535),T=(S>>>16)+(this.i(b)>>>16)+(A.i(b)>>>16);R=T>>>16,S&=65535,T&=65535,I[b]=T<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function B(A,v){return A.add(V(v))}t.j=function(A){if(k(this)||k(A))return p;if(D(this))return D(A)?V(this).j(V(A)):V(V(this).j(A));if(D(A))return V(this.j(V(A)));if(this.l(y)<0&&A.l(y)<0)return h(this.m()*A.m());const v=this.g.length+A.g.length,I=[];for(var R=0;R<2*v;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let b=0;b<A.g.length;b++){const S=this.i(R)>>>16,T=this.i(R)&65535,ie=A.i(b)>>>16,te=A.i(b)&65535;I[2*R+2*b]+=T*te,$(I,2*R+2*b),I[2*R+2*b+1]+=S*te,$(I,2*R+2*b+1),I[2*R+2*b+1]+=T*ie,$(I,2*R+2*b+1),I[2*R+2*b+2]+=S*ie,$(I,2*R+2*b+2)}for(A=0;A<v;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=v;A<2*v;A++)I[A]=0;return new o(I,0)};function $(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function Y(A,v){this.g=A,this.h=v}function W(A,v){if(k(v))throw Error("division by zero");if(k(A))return new Y(p,p);if(D(A))return v=W(V(A),v),new Y(V(v.g),V(v.h));if(D(v))return v=W(A,V(v)),new Y(V(v.g),v.h);if(A.g.length>30){if(D(A)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=v;R.l(A)<=0;)I=fe(I),R=fe(R);var b=Ee(I,1),S=Ee(R,1);for(R=Ee(R,2),I=Ee(I,2);!k(R);){var T=S.add(R);T.l(A)<=0&&(b=b.add(I),S=T),R=Ee(R,1),I=Ee(I,1)}return v=B(A,b.j(v)),new Y(b,v)}for(b=p;A.l(v)>=0;){for(I=Math.max(1,Math.floor(A.m()/v.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=h(I),T=S.j(v);D(T)||T.l(A)>0;)I-=R,S=h(I),T=S.j(v);k(S)&&(S=g),b=b.add(S),A=B(A,T)}return new Y(b,A)}t.B=function(A){return W(this,A).h},t.and=function(A){const v=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)&A.i(R);return new o(I,this.h&A.h)},t.or=function(A){const v=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)|A.i(R);return new o(I,this.h|A.h)},t.xor=function(A){const v=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<v;R++)I[R]=this.i(R)^A.i(R);return new o(I,this.h^A.h)};function fe(A){const v=A.g.length+1,I=[];for(let R=0;R<v;R++)I[R]=A.i(R)<<1|A.i(R-1)>>>31;return new o(I,A.h)}function Ee(A,v){const I=v>>5;v%=32;const R=A.g.length-I,b=[];for(let S=0;S<R;S++)b[S]=v>0?A.i(S+I)>>>v|A.i(S+I+1)<<32-v:A.i(S+I);return new o(b,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Kg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Is=o}).apply(typeof Df<"u"?Df:typeof self<"u"?self:typeof window<"u"?window:{});var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gg,wi,zg,ea,Nc,Wg,Qg,Yg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uo=="object"&&Uo];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var f=s;a=a.split(".");for(var _=0;_<a.length-1;_++){var P=a[_];if(!(P in f))break e;f=f[P]}a=a[a.length-1],_=f[a],u=u(_),u!=_&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var f=[],_;for(_ in u)Object.prototype.hasOwnProperty.call(u,_)&&f.push([_,u[_]]);return f}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,f){return a.call.apply(a.bind,arguments)}function h(a,u,f){return h=c,h.apply(null,arguments)}function d(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function p(a,u){function f(){}f.prototype=u.prototype,a.Z=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(_,P,N){for(var J=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)J[Ie-2]=arguments[Ie];return u.prototype[P].apply(_,J)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const u=a.length;if(u>0){const f=Array(u);for(let _=0;_<u;_++)f[_]=a[_];return f}return[]}function k(a,u){for(let _=1;_<arguments.length;_++){const P=arguments[_];var f=typeof P;if(f=f!="object"?f:P?Array.isArray(P)?"array":f:"null",f=="array"||f=="object"&&typeof P.length=="number"){f=a.length||0;const N=P.length||0;a.length=f+N;for(let J=0;J<N;J++)a[f+J]=P[J]}else a.push(P)}}class D{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function V(a){o.setTimeout(()=>{throw a},0)}function B(){var a=A;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class ${constructor(){this.h=this.g=null}add(u,f){const _=Y.get();_.set(u,f),this.h?this.h.next=_:this.g=_,this.h=_}}var Y=new D(()=>new W,a=>a.reset());class W{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Ee=!1,A=new $,v=()=>{const a=Promise.resolve(void 0);fe=()=>{a.then(I)}};function I(){for(var a;a=B();){try{a.h.call(a.g)}catch(f){V(f)}var u=Y;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}Ee=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,u),o.removeEventListener("test",f,u)}catch{}return a})();function T(a){return/^[\s\xa0]*$/.test(a)}function ie(a,u){b.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(ie,b),ie.prototype.init=function(a,u){const f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Ve(a,u,f,_,P){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!_,this.ha=P,this.key=++Ne,this.da=this.fa=!1}function Ae(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function It(a,u,f){for(const _ in a)u.call(f,a[_],_,a)}function Qt(a,u){for(const f in a)u.call(void 0,a[f],f,a)}function Ot(a){const u={};for(const f in a)u[f]=a[f];return u}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(a,u){let f,_;for(let P=1;P<arguments.length;P++){_=arguments[P];for(f in _)a[f]=_[f];for(let N=0;N<H.length;N++)f=H[N],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function Q(a){this.src=a,this.g={},this.h=0}Q.prototype.add=function(a,u,f,_,P){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const J=wt(a,u,_,P);return J>-1?(u=a[J],f||(u.fa=!1)):(u=new Ve(u,this.src,N,!!_,P),u.fa=f,a.push(u)),u};function ht(a,u){const f=u.type;if(f in a.g){var _=a.g[f],P=Array.prototype.indexOf.call(_,u,void 0),N;(N=P>=0)&&Array.prototype.splice.call(_,P,1),N&&(Ae(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function wt(a,u,f,_){for(let P=0;P<a.length;++P){const N=a[P];if(!N.da&&N.listener==u&&N.capture==!!f&&N.ha==_)return P}return-1}var L="closure_lm_"+(Math.random()*1e6|0),se={};function ee(a,u,f,_,P){if(Array.isArray(u)){for(let N=0;N<u.length;N++)ee(a,u[N],f,_,P);return null}return f=Z(f),a&&a[te]?a.J(u,f,l(_)?!!_.capture:!1,P):le(a,u,f,!1,_,P)}function le(a,u,f,_,P,N){if(!u)throw Error("Invalid event type");const J=l(P)?!!P.capture:!!P;let Ie=F(a);if(Ie||(a[L]=Ie=new Q(a)),f=Ie.add(u,f,_,J,N),f.proxy)return f;if(_=Re(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)S||(P=J),P===void 0&&(P=!1),a.addEventListener(u.toString(),_,P);else if(a.attachEvent)a.attachEvent(C(u.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Re(){function a(f){return u.call(a.src,a.listener,f)}const u=O;return a}function E(a,u,f,_,P){if(Array.isArray(u))for(var N=0;N<u.length;N++)E(a,u[N],f,_,P);else _=l(_)?!!_.capture:!!_,f=Z(f),a&&a[te]?(a=a.i,N=String(u).toString(),N in a.g&&(u=a.g[N],f=wt(u,f,_,P),f>-1&&(Ae(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete a.g[N],a.h--)))):a&&(a=F(a))&&(u=a.g[u.toString()],a=-1,u&&(a=wt(u,f,_,P)),(f=a>-1?u[a]:null)&&w(f))}function w(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[te])ht(u.i,a);else{var f=a.type,_=a.proxy;u.removeEventListener?u.removeEventListener(f,_,a.capture):u.detachEvent?u.detachEvent(C(f),_):u.addListener&&u.removeListener&&u.removeListener(_),(f=F(u))?(ht(f,a),f.h==0&&(f.src=null,u[L]=null)):Ae(a)}}}function C(a){return a in se?se[a]:se[a]="on"+a}function O(a,u){if(a.da)a=!0;else{u=new ie(u,this);const f=a.listener,_=a.ha||a.src;a.fa&&w(a),a=f.call(_,u)}return a}function F(a){return a=a[L],a instanceof Q?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(a){return typeof a=="function"?a:(a[x]||(a[x]=function(u){return a.handleEvent(u)}),a[x])}function z(){R.call(this),this.i=new Q(this),this.M=this,this.G=null}p(z,R),z.prototype[te]=!0,z.prototype.removeEventListener=function(a,u,f,_){E(this,a,u,f,_)};function G(a,u){var f,_=a.G;if(_)for(f=[];_;_=_.G)f.push(_);if(a=a.M,_=u.type||u,typeof u=="string")u=new b(u,a);else if(u instanceof b)u.target=u.target||a;else{var P=u;u=new b(_,a),X(u,P)}P=!0;let N,J;if(f)for(J=f.length-1;J>=0;J--)N=u.g=f[J],P=j(N,_,!0,u)&&P;if(N=u.g=a,P=j(N,_,!0,u)&&P,P=j(N,_,!1,u)&&P,f)for(J=0;J<f.length;J++)N=u.g=f[J],P=j(N,_,!1,u)&&P}z.prototype.N=function(){if(z.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const f=a.g[u];for(let _=0;_<f.length;_++)Ae(f[_]);delete a.g[u],a.h--}}this.G=null},z.prototype.J=function(a,u,f,_){return this.i.add(String(a),u,!1,f,_)},z.prototype.K=function(a,u,f,_){return this.i.add(String(a),u,!0,f,_)};function j(a,u,f,_){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let N=0;N<u.length;++N){const J=u[N];if(J&&!J.da&&J.capture==f){const Ie=J.listener,ot=J.ha||J.src;J.fa&&ht(a.i,J),P=Ie.call(ot,_)!==!1&&P}}return P&&!_.defaultPrevented}function ue(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function ne(a){a.g=ue(()=>{a.g=null,a.i&&(a.i=!1,ne(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class ce extends R{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(a){R.call(this),this.h=a,this.g={}}p(de,R);var be=[];function Ue(a){It(a.g,function(u,f){this.g.hasOwnProperty(f)&&w(u)},a),a.g={}}de.prototype.N=function(){de.Z.N.call(this),Ue(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=o.JSON.stringify,At=o.JSON.parse,bt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function jt(){}function qt(){}var tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lr(){b.call(this,"d")}p(lr,b);function gt(){b.call(this,"c")}p(gt,b);var dt={},ti=null;function Ds(){return ti=ti||new z}dt.Ia="serverreachability";function vh(a){b.call(this,dt.Ia,a)}p(vh,b);function ni(a){const u=Ds();G(u,new vh(u))}dt.STAT_EVENT="statevent";function Eh(a,u){b.call(this,dt.STAT_EVENT,a),this.stat=u}p(Eh,b);function xt(a){const u=Ds();G(u,new Eh(u,a))}dt.Ja="timingevent";function Th(a,u){b.call(this,dt.Ja,a),this.size=u}p(Th,b);function si(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Uy(a,u,f,_,P,N){a.info(function(){if(a.g)if(N){var J="",Ie=N.split("&");for(let $e=0;$e<Ie.length;$e++){var ot=Ie[$e].split("=");if(ot.length>1){const ft=ot[0];ot=ot[1];const gn=ft.split("_");J=gn.length>=2&&gn[1]=="type"?J+(ft+"="+ot+"&"):J+(ft+"=redacted&")}}}else J=null;else J=N;return"XMLHTTP REQ ("+_+") [attempt "+P+"]: "+u+`
`+f+`
`+J})}function By(a,u,f,_,P,N,J){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+P+"]: "+u+`
`+f+`
`+N+" "+J})}function cr(a,u,f,_){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+jy(a,f)+(_?" "+_:"")})}function $y(a,u){a.info(function(){return"TIMEOUT: "+u})}ri.prototype.info=function(){};function jy(a,u){if(!a.g)return u;if(!u)return null;try{const N=JSON.parse(u);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var f=N[a];if(!(f.length<2)){var _=f[1];if(Array.isArray(_)&&!(_.length<1)){var P=_[0];if(P!="noop"&&P!="stop"&&P!="close")for(let J=1;J<_.length;J++)_[J]=""}}}}return De(N)}catch{return u}}var Ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ih={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wh;function vl(){}p(vl,jt),vl.prototype.g=function(){return new XMLHttpRequest},wh=new vl;function ii(a){return encodeURIComponent(String(a))}function qy(a){var u=1;a=a.split(":");const f=[];for(;u>0&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function ts(a,u,f,_){this.j=a,this.i=u,this.l=f,this.S=_||1,this.V=new de(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ah}function Ah(){this.i=null,this.g="",this.h=!1}var bh={},El={};function Tl(a,u,f){a.M=1,a.A=Ro(mn(u)),a.u=f,a.R=!0,Rh(a,null)}function Rh(a,u){a.F=Date.now(),bo(a),a.B=mn(a.A);var f=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),Uh(f.i,"t",_),a.C=0,f=a.j.L,a.h=new Ah,a.g=sd(a.j,f?u:null,!a.u),a.P>0&&(a.O=new ce(h(a.Y,a,a.g),a.P)),u=a.V,f=a.g,_=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(be[0]=P.toString()),P=be);for(let N=0;N<P.length;N++){const J=ee(f,P[N],_||u.handleEvent,!1,u.h||u);if(!J)break;u.g[J.key]=J}u=a.J?Ot(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),ni(),Uy(a.i,a.v,a.B,a.l,a.S,a.u)}ts.prototype.ba=function(a){a=a.target;const u=this.O;u&&rs(a)==3?u.j():this.Y(a)},ts.prototype.Y=function(a){try{if(a==this.g)e:{const Ie=rs(this.g),ot=this.g.ya(),$e=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Gh(this.g)))){this.K||Ie!=4||ot==7||(ot==8||$e<=0?ni(3):ni(2)),Il(this);var u=this.g.ca();this.X=u;var f=Hy(this);if(this.o=u==200,By(this.i,this.v,this.B,this.l,this.S,Ie,u),this.o){if(this.U&&!this.L){t:{if(this.g){var _,P=this.g;if((_=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(_)){var N=_;break t}}N=null}if(a=N)cr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wl(this,a);else{this.o=!1,this.m=3,xt(12),Vs(this),oi(this);break e}}if(this.R){a=!0;let ft;for(;!this.K&&this.C<f.length;)if(ft=Ky(this,f),ft==El){Ie==4&&(this.m=4,xt(14),a=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==bh){this.m=4,xt(15),cr(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else cr(this.i,this.l,ft,null),wl(this,ft);if(Sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||f.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)cr(this.i,this.l,f,"[Invalid Chunked Response]"),Vs(this),oi(this);else if(f.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Nl(J),J.P=!0,xt(11))}}else cr(this.i,this.l,f,null),wl(this,f);Ie==4&&Vs(this),this.o&&!this.K&&(Ie==4?Zh(this.j,this):(this.o=!1,bo(this)))}else iv(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Vs(this),oi(this)}}}catch{}};function Hy(a){if(!Sh(a))return a.g.la();const u=Gh(a.g);if(u==="")return"";let f="";const _=u.length,P=rs(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Vs(a),oi(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<_;N++)a.h.h=!0,f+=a.h.i.decode(u[N],{stream:!(P&&N==_-1)});return u.length=0,a.h.g+=f,a.C=0,a.h.g}function Sh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ky(a,u){var f=a.C,_=u.indexOf(`
`,f);return _==-1?El:(f=Number(u.substring(f,_)),isNaN(f)?bh:(_+=1,_+f>u.length?El:(u=u.slice(_,_+f),a.C=_+f,u)))}ts.prototype.cancel=function(){this.K=!0,Vs(this)};function bo(a){a.T=Date.now()+a.H,Ch(a,a.H)}function Ch(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=si(h(a.aa,a),u)}function Il(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ts.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?($y(this.i,this.B),this.M!=2&&(ni(),xt(17)),Vs(this),this.m=2,oi(this)):Ch(this,this.T-a)};function oi(a){a.j.I==0||a.K||Zh(a.j,a)}function Vs(a){Il(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Ue(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function wl(a,u){try{var f=a.j;if(f.I!=0&&(f.g==a||Al(f.h,a))){if(!a.L&&Al(f.h,a)&&f.I==3){try{var _=f.Ba.g.parse(u)}catch{_=null}if(Array.isArray(_)&&_.length==3){var P=_;if(P[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)No(f),Po(f);else break e;kl(f),xt(18)}}else f.xa=P[1],0<f.xa-f.K&&P[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=si(h(f.Va,f),6e3));Nh(f.h)<=1&&f.ta&&(f.ta=void 0)}else xs(f,11)}else if((a.L||f.g==a)&&No(f),!T(u))for(P=f.Ba.g.parse(u),u=0;u<P.length;u++){let $e=P[u];const ft=$e[0];if(!(ft<=f.K))if(f.K=ft,$e=$e[1],f.I==2)if($e[0]=="c"){f.M=$e[1],f.ba=$e[2];const gn=$e[3];gn!=null&&(f.ka=gn,f.j.info("VER="+f.ka));const Ls=$e[4];Ls!=null&&(f.za=Ls,f.j.info("SVER="+f.za));const is=$e[5];is!=null&&typeof is=="number"&&is>0&&(_=1.5*is,f.O=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const os=a.g;if(os){const Vo=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var N=_.h;N.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(bl(N,N.h),N.h=null))}if(_.G){const Dl=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(_.wa=Dl,ze(_.J,_.G,Dl))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),_=f;var J=a;if(_.na=nd(_,_.L?_.ba:null,_.W),J.L){Dh(_.h,J);var Ie=J,ot=_.O;ot&&(Ie.H=ot),Ie.D&&(Il(Ie),bo(Ie)),_.g=J}else Xh(_);f.i.length>0&&ko(f)}else $e[0]!="stop"&&$e[0]!="close"||xs(f,7);else f.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?xs(f,7):Pl(f):$e[0]!="noop"&&f.l&&f.l.qa($e),f.A=0)}}ni(4)}catch{}}var Gy=class{constructor(a,u){this.g=a,this.map=u}};function Ph(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Nh(a){return a.h?1:a.g?a.g.size:0}function Al(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function bl(a,u){a.g?a.g.add(u):a.h=u}function Dh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Ph.prototype.cancel=function(){if(this.i=Vh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Vh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const f of a.g.values())u=u.concat(f.G);return u}return y(a.i)}var Oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zy(a,u){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const _=a[f].indexOf("=");let P,N=null;_>=0?(P=a[f].substring(0,_),N=a[f].substring(_+1)):P=a[f],u(P,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ns(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof ns?(this.l=a.l,ai(this,a.j),this.o=a.o,this.g=a.g,li(this,a.u),this.h=a.h,Rl(this,Bh(a.i)),this.m=a.m):a&&(u=String(a).match(Oh))?(this.l=!1,ai(this,u[1]||"",!0),this.o=ci(u[2]||""),this.g=ci(u[3]||"",!0),li(this,u[4]),this.h=ci(u[5]||"",!0),Rl(this,u[6]||"",!0),this.m=ci(u[7]||"")):(this.l=!1,this.i=new hi(null,this.l))}ns.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(ui(u,xh,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(ui(u,xh,!0),"@"),a.push(ii(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ui(f,f.charAt(0)=="/"?Yy:Qy,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ui(f,Jy)),a.join("")},ns.prototype.resolve=function(a){const u=mn(this);let f=!!a.j;f?ai(u,a.j):f=!!a.o,f?u.o=a.o:f=!!a.g,f?u.g=a.g:f=a.u!=null;var _=a.h;if(f)li(u,a.u);else if(f=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var P=u.h.lastIndexOf("/");P!=-1&&(_=u.h.slice(0,P+1)+_)}if(P=_,P==".."||P==".")_="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){_=P.lastIndexOf("/",0)==0,P=P.split("/");const N=[];for(let J=0;J<P.length;){const Ie=P[J++];Ie=="."?_&&J==P.length&&N.push(""):Ie==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),_&&J==P.length&&N.push("")):(N.push(Ie),_=!0)}_=N.join("/")}else _=P}return f?u.h=_:f=a.i.toString()!=="",f?Rl(u,Bh(a.i)):f=!!a.m,f&&(u.m=a.m),u};function mn(a){return new ns(a)}function ai(a,u,f){a.j=f?ci(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function li(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Rl(a,u,f){u instanceof hi?(a.i=u,Zy(a.i,a.l)):(f||(u=ui(u,Xy)),a.i=new hi(u,a.l))}function ze(a,u,f){a.i.set(u,f)}function Ro(a){return ze(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ci(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ui(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,Wy),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Wy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xh=/[#\/\?@]/g,Qy=/[#\?:]/g,Yy=/[#\?]/g,Xy=/[#\?@]/g,Jy=/#/g;function hi(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Os(a){a.g||(a.g=new Map,a.h=0,a.i&&zy(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=hi.prototype,t.add=function(a,u){Os(this),this.i=null,a=ur(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function Lh(a,u){Os(a),u=ur(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Mh(a,u){return Os(a),u=ur(a,u),a.g.has(u)}t.forEach=function(a,u){Os(this),this.g.forEach(function(f,_){f.forEach(function(P){a.call(u,P,_,this)},this)},this)};function Fh(a,u){Os(a);let f=[];if(typeof u=="string")Mh(a,u)&&(f=f.concat(a.g.get(ur(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)f=f.concat(a[u]);return f}t.set=function(a,u){return Os(this),this.i=null,a=ur(this,a),Mh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Fh(this,a),a.length>0?String(a[0]):u):u};function Uh(a,u,f){Lh(a,u),f.length>0&&(a.i=null,a.g.set(ur(a,u),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let _=0;_<u.length;_++){var f=u[_];const P=ii(f);f=Fh(this,f);for(let N=0;N<f.length;N++){let J=P;f[N]!==""&&(J+="="+ii(f[N])),a.push(J)}}return this.i=a.join("&")};function Bh(a){const u=new hi;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function ur(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Zy(a,u){u&&!a.j&&(Os(a),a.i=null,a.g.forEach(function(f,_){const P=_.toLowerCase();_!=P&&(Lh(this,_),Uh(this,P,f))},a)),a.j=u}function ev(a,u){const f=new ri;if(o.Image){const _=new Image;_.onload=d(ss,f,"TestLoadImage: loaded",!0,u,_),_.onerror=d(ss,f,"TestLoadImage: error",!1,u,_),_.onabort=d(ss,f,"TestLoadImage: abort",!1,u,_),_.ontimeout=d(ss,f,"TestLoadImage: timeout",!1,u,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else u(!1)}function tv(a,u){const f=new ri,_=new AbortController,P=setTimeout(()=>{_.abort(),ss(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:_.signal}).then(N=>{clearTimeout(P),N.ok?ss(f,"TestPingServer: ok",!0,u):ss(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),ss(f,"TestPingServer: error",!1,u)})}function ss(a,u,f,_,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),_(f)}catch{}}function nv(){this.g=new bt}function Sl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Sl,jt),Sl.prototype.g=function(){return new So(this.i,this.h)};function So(a,u){z.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(So,z),t=So.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$h(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function $h(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?di(this):fi(this),this.readyState==3&&$h(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,di(this))},t.Na=function(a){this.g&&(this.response=a,di(this))},t.ga=function(){this.g&&di(this)};function di(a){a.readyState=4,a.l=null,a.j=null,a.B=null,fi(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(So.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function jh(a){let u="";return It(a,function(f,_){u+=_,u+=":",u+=f,u+=`\r
`}),u}function Cl(a,u,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=jh(f),typeof a=="string"?f!=null&&ii(f):ze(a,u,f))}function Je(a){z.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Je,z);var sv=/^https?$/i,rv=["POST","PUT"];t=Je.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wh.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(N){qh(this,N);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var P in _)f.set(P,_[P]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const N of _.keys())f.set(N,_.get(N));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(rv,u,void 0)>=0)||_||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,J]of f)this.g.setRequestHeader(N,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){qh(this,N)}};function qh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Hh(a),Co(a)}function Hh(a){a.A||(a.A=!0,G(a,"complete"),G(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,G(this,"complete"),G(this,"abort"),Co(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Kh(this):this.Xa())},t.Xa=function(){Kh(this)};function Kh(a){if(a.h&&typeof i<"u"){if(a.v&&rs(a)==4)setTimeout(a.Ca.bind(a),0);else if(G(a,"readystatechange"),rs(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var _;if(_=N===0){let J=String(a.D).match(Oh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),_=!sv.test(J?J.toLowerCase():"")}f=_}if(f)G(a,"complete"),G(a,"success");else{a.o=6;try{var P=rs(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Hh(a)}}finally{Co(a)}}}}function Co(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,u||G(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(a){return a.g?a.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),At(u)}};function Gh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function iv(a){const u={};a=(a.g&&rs(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(T(a[_]))continue;var f=qy(a[_]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const N=u[P]||[];u[P]=N,N.push(f)}Qt(u,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function zh(a){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,a),this.Za=pi("retryDelaySeedMs",1e4,a),this.Ta=pi("forwardChannelMaxRetries",2,a),this.va=pi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ph(a&&a.concurrentRequestLimit),this.Ba=new nv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,f,_){xt(0),this.W=a,this.H=u||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.J=nd(this,null,this.W),ko(this)};function Pl(a){if(Wh(a),a.I==3){var u=a.V++,f=mn(a.J);if(ze(f,"SID",a.M),ze(f,"RID",u),ze(f,"TYPE","terminate"),mi(a,f),u=new ts(a,a.j,u),u.M=2,u.A=Ro(mn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=u.A,f=!0),f||(u.g=sd(u.j,null),u.g.ea(u.A)),u.F=Date.now(),bo(u)}td(a)}function Po(a){a.g&&(Nl(a),a.g.cancel(),a.g=null)}function Wh(a){Po(a),a.v&&(o.clearTimeout(a.v),a.v=null),No(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ko(a){if(!kh(a.h)&&!a.m){a.m=!0;var u=a.Ea;fe||v(),Ee||(fe(),Ee=!0),A.add(u,a),a.D=0}}function ov(a,u){return Nh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=si(h(a.Ea,a,u),ed(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new ts(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Ot(N),X(N,this.U)):N=this.U),this.u!==null||this.R||(P.J=N,N=null),this.S)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(u+=_,u>4096){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Yh(this,P,u),f=mn(this.J),ze(f,"RID",a),ze(f,"CVER",22),this.G&&ze(f,"X-HTTP-Session-Id",this.G),mi(this,f),N&&(this.R?u="headers="+ii(jh(N))+"&"+u:this.u&&Cl(f,this.u,N)),bl(this.h,P),this.Ra&&ze(f,"TYPE","init"),this.S?(ze(f,"$req",u),ze(f,"SID","null"),P.U=!0,Tl(P,f,null)):Tl(P,f,u),this.I=2}}else this.I==3&&(a?Qh(this,a):this.i.length==0||kh(this.h)||Qh(this))};function Qh(a,u){var f;u?f=u.l:f=a.V++;const _=mn(a.J);ze(_,"SID",a.M),ze(_,"RID",f),ze(_,"AID",a.K),mi(a,_),a.u&&a.o&&Cl(_,a.u,a.o),f=new ts(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Yh(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),bl(a.h,f),Tl(f,_,u)}function mi(a,u){a.H&&It(a.H,function(f,_){ze(u,_,f)}),a.l&&It({},function(f,_){ze(u,_,f)})}function Yh(a,u,f){f=Math.min(a.i.length,f);const _=a.l?h(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ie=-1;for(;;){const ot=["count="+f];Ie==-1?f>0?(Ie=P[0].g,ot.push("ofs="+Ie)):Ie=0:ot.push("ofs="+Ie);let $e=!0;for(let ft=0;ft<f;ft++){var N=P[ft].g;const gn=P[ft].map;if(N-=Ie,N<0)Ie=Math.max(0,P[ft].g-100),$e=!1;else try{N="req"+N+"_"||"";try{var J=gn instanceof Map?gn:Object.entries(gn);for(const[Ls,is]of J){let os=is;l(is)&&(os=De(is)),ot.push(N+Ls+"="+encodeURIComponent(os))}}catch(Ls){throw ot.push(N+"type="+encodeURIComponent("_badmap")),Ls}}catch{_&&_(gn)}}if($e){J=ot.join("&");break e}}J=void 0}return a=a.i.splice(0,f),u.G=a,J}function Xh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;fe||v(),Ee||(fe(),Ee=!0),A.add(u,a),a.A=0}}function kl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=si(h(a.Da,a),ed(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Jh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=si(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Po(this),Jh(this))};function Nl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Jh(a){a.g=new ts(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=mn(a.na);ze(u,"RID","rpc"),ze(u,"SID",a.M),ze(u,"AID",a.K),ze(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&ze(u,"TO",a.ia),ze(u,"TYPE","xmlhttp"),mi(a,u),a.u&&a.o&&Cl(u,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Ro(mn(u)),f.u=null,f.R=!0,Rh(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Po(this),kl(this),xt(19))};function No(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Zh(a,u){var f=null;if(a.g==u){No(a),Nl(a),a.g=null;var _=2}else if(Al(a.h,u))f=u.G,Dh(a.h,u),_=1;else return;if(a.I!=0){if(u.o)if(_==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var P=a.D;_=Ds(),G(_,new Th(_,f)),ko(a)}else Xh(a);else if(P=u.m,P==3||P==0&&u.X>0||!(_==1&&ov(a,u)||_==2&&kl(a)))switch(f&&f.length>0&&(u=a.h,u.i=u.i.concat(f)),P){case 1:xs(a,5);break;case 4:xs(a,10);break;case 3:xs(a,6);break;default:xs(a,2)}}}function ed(a,u){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*u}function xs(a,u){if(a.j.info("Error code "+u),u==2){var f=h(a.bb,a),_=a.Ua;const P=!_;_=new ns(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ai(_,"https"),Ro(_),P?ev(_.toString(),f):tv(_.toString(),f)}else xt(2);a.I=0,a.l&&a.l.pa(u),td(a),Wh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function td(a){if(a.I=0,a.ja=[],a.l){const u=Vh(a.h);(u.length!=0||a.i.length!=0)&&(k(a.ja,u),k(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function nd(a,u,f){var _=f instanceof ns?mn(f):new ns(f);if(_.g!="")u&&(_.g=u+"."+_.g),li(_,_.u);else{var P=o.location;_=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const N=new ns(null);_&&ai(N,_),u&&(N.g=u),P&&li(N,P),f&&(N.h=f),_=N}return f=a.G,u=a.wa,f&&u&&ze(_,f,u),ze(_,"VER",a.ka),mi(a,_),_}function sd(a,u,f){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Je(new Sl({ab:f})):new Je(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rd(){}t=rd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Do(){}Do.prototype.g=function(a,u){return new Ht(a,u)};function Ht(a,u){z.call(this),this.g=new zh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!T(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new hr(this)}p(Ht,z),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Pl(this.g)},Ht.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=De(a),a=f);u.i.push(new Gy(u.Ya++,a)),u.I==3&&ko(u)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Pl(this.g),delete this.g,Ht.Z.N.call(this)};function id(a){lr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(id,lr);function od(){gt.call(this),this.status=1}p(od,gt);function hr(a){this.g=a}p(hr,rd),hr.prototype.ra=function(){G(this.g,"a")},hr.prototype.qa=function(a){G(this.g,new id(a))},hr.prototype.pa=function(a){G(this.g,new od)},hr.prototype.oa=function(){G(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Yg=function(){return new Do},Qg=function(){return Ds()},Wg=dt,Nc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ao.NO_ERROR=0,Ao.TIMEOUT=8,Ao.HTTP_ERROR=6,ea=Ao,Ih.COMPLETE="complete",zg=Ih,qt.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",z.prototype.listen=z.prototype.J,wi=qt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Gg=Je}).apply(typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{});const Vf="@firebase/firestore",Of="4.9.3";class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");let Qr="12.7.0";const Zs=new yu("@firebase/firestore");function mr(){return Zs.logLevel}function re(t,...e){if(Zs.logLevel<=Se.DEBUG){const n=e.map(Nu);Zs.debug(`Firestore (${Qr}): ${t}`,...n)}}function Qn(t,...e){if(Zs.logLevel<=Se.ERROR){const n=e.map(Nu);Zs.error(`Firestore (${Qr}): ${t}`,...n)}}function Fr(t,...e){if(Zs.logLevel<=Se.WARN){const n=e.map(Nu);Zs.warn(`Firestore (${Qr}): ${t}`,...n)}}function Nu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Xg(t,s,n)}function Xg(t,e,n){let s=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qn(s),new Error(s)}function Fe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Xg(e,r,s)}function ve(t,e){return t}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ws{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Jg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(St.UNAUTHENTICATED)))}shutdown(){}}class CR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class PR{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ws,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ws)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new Jg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class kR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new kR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(St.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const s=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xf(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Du{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=VR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Dc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return ec(r)===ec(i)?Ce(r,i):ec(r)?1:-1}return Ce(t.length,e.length)}const OR=55296,xR=57343;function ec(t){const e=t.charCodeAt(0);return e>=OR&&e<=xR}function Ur(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const Lf="__name__";class vn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=vn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=vn.isNumericId(e),r=vn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?vn.extractNumericId(e).compare(vn.extractNumericId(n)):Dc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Is.fromString(e.substring(4,e.length-2))}}class Ye extends vn{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ye(n)}static emptyPath(){return new Ye([])}}const LR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends vn{construct(e,n,s){return new vt(e,n,s)}static isValidIdentifier(e){return LR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lf}static keyField(){return new vt([Lf])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ae(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ae(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(Ye.fromString(e))}static fromName(e){return new he(Ye.fromString(e).popFirst(5))}static empty(){return new he(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ye(e.slice()))}}function MR(t,e,n){if(!n)throw new ae(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FR(t,e,n,s){if(e===!0&&s===!0)throw new ae(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mf(t){if(!he.isDocumentKey(t))throw new ae(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vu(t);throw new ae(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _o(t,e){if(!Zg(t))throw new ae(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ae(q.INVALID_ARGUMENT,n);return!0}const Ff=-62135596800,Uf=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Uf);return new Qe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ff)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uf}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_o(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ff;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:rt("string",Qe._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Qe(0,0))}static max(){return new ye(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xi=-1;function UR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(s===1e9?new Qe(n+1,0):new Qe(n,s));return new bs(r,he.empty(),e)}function BR(t){return new bs(t.readTime,t.key,Xi)}class bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new bs(ye.min(),he.empty(),Xi)}static max(){return new bs(ye.max(),he.empty(),Xi)}}function $R(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}const jR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yr(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==jR)throw t;re("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,s)=>{n(e)}))}static reject(e){return new M(((n,s)=>{s(e)}))}static waitFor(e){return new M(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=M.resolve(!1);for(const s of e)n=n.next((r=>r?M.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new M(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next((d=>{o[h]=d,++l,l===i&&s(o)}),(d=>r(d)))}}))}static doWhile(e,n){return new M(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function HR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xr(t){return t.name==="IndexedDbTransactionError"}class rl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rl.ce=-1;const Ou=-1;function il(t){return t==null}function Ia(t){return t===0&&1/t==-1/0}function KR(t){return typeof t=="number"&&Number.isInteger(t)&&!Ia(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const e_="";function GR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Bf(e)),e=zR(t.get(n),e);return Bf(e)}function zR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case e_:n+="";break;default:n+=i}}return n}function Bf(t){return t+e_+""}function $f(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Xe{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bo(this.root,e,this.comparator,!0)}}class Bo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??_t.RED,this.left=r??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new _t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return _t.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ut{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class jf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class an{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new an([])}unionWith(e){let n=new ut(vt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ur(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class n_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new n_("Invalid base64 string: "+i):i}})(e);return new Tt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const WR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=WR.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}const s_="server_timestamp",r_="__type__",i_="__previous_value__",o_="__local_write_time__";function xu(t){return(t?.mapValue?.fields||{})[r_]?.stringValue===s_}function ol(t){const e=t.mapValue.fields[i_];return xu(e)?ol(e):e}function Ji(t){const e=Rs(t.mapValue.fields[o_].timestampValue);return new Qe(e.seconds,e.nanos)}class QR{constructor(e,n,s,r,i,o,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const wa="(default)";class Zi{constructor(e,n){this.projectId=e,this.database=n||wa}static empty(){return new Zi("","")}get isDefaultDatabase(){return this.database===wa}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}const a_="__type__",YR="__max__",$o={mapValue:{}},l_="__vector__",Aa="value";function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xu(t)?4:JR(t)?9007199254740991:XR(t)?10:11:pe(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ji(t).isEqual(Ji(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Rs(r.timestampValue),l=Rs(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Ss(r.bytesValue).isEqual(Ss(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return tt(r.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(r.geoPointValue.longitude)===tt(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return tt(r.integerValue)===tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=tt(r.doubleValue),l=tt(i.doubleValue);return o===l?Ia(o)===Ia(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Ur(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if($f(o)!==$f(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0})(t,e);default:return pe(52216,{left:t})}}function eo(t,e){return(t.values||[]).find((n=>kn(n,e)))!==void 0}function $r(t,e){if(t===e)return 0;const n=Cs(t),s=Cs(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=tt(i.integerValue||i.doubleValue),c=tt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return qf(t.timestampValue,e.timestampValue);case 4:return qf(Ji(t),Ji(e));case 5:return Dc(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=Ss(i),c=Ss(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=Ce(l[h],c[h]);if(d!==0)return d}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(tt(i.latitude),tt(o.latitude));return l!==0?l:Ce(tt(i.longitude),tt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Hf(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const l=i.fields||{},c=o.fields||{},h=l[Aa]?.arrayValue,d=c[Aa]?.arrayValue,p=Ce(h?.values?.length||0,d?.values?.length||0);return p!==0?p:Hf(h,d)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===$o.mapValue&&o===$o.mapValue)return 0;if(i===$o.mapValue)return 1;if(o===$o.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=Dc(c[p],d[p]);if(g!==0)return g;const y=$r(l[c[p]],h[d[p]]);if(y!==0)return y}return Ce(c.length,d.length)})(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function qf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Rs(t),s=Rs(e),r=Ce(n.seconds,s.seconds);return r!==0?r:Ce(n.nanos,s.nanos)}function Hf(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=$r(n[r],s[r]);if(i)return i}return Ce(n.length,s.length)}function jr(t){return Vc(t)}function Vc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Rs(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ss(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return he.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Vc(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Vc(n.fields[o])}`;return r+"}"})(t.mapValue):pe(61005,{value:t})}function ta(t){switch(Cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ol(t);return e?16+ta(e):16;case 5:return 2*t.stringValue.length;case 6:return Ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+ta(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return sr(s.fields,((i,o)=>{r+=i.length+ta(o)})),r})(t.mapValue);default:throw pe(13486,{value:t})}}function Oc(t){return!!t&&"integerValue"in t}function Lu(t){return!!t&&"arrayValue"in t}function Kf(t){return!!t&&"nullValue"in t}function Gf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function na(t){return!!t&&"mapValue"in t}function XR(t){return(t?.mapValue?.fields||{})[a_]?.stringValue===l_}function Li(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return sr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Li(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Li(t.arrayValue.values[n]);return e}return{...t}}function JR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YR}class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!na(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Li(n)}setAll(e){let n=vt.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Li(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());na(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];na(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){sr(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new Yt(Li(this.value))}}function c_(t){const e=[];return sr(t.fields,((n,s)=>{const r=new vt([n]);if(na(s)){const i=c_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new an(e)}class Pt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Pt(e,0,ye.min(),ye.min(),ye.min(),Yt.empty(),0)}static newFoundDocument(e,n,s,r){return new Pt(e,1,n,ye.min(),s,r,0)}static newNoDocument(e,n){return new Pt(e,2,n,ye.min(),ye.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,ye.min(),ye.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ba{constructor(e,n){this.position=e,this.inclusive=n}}function zf(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=$r(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}class Ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class u_{}class ct extends u_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new tS(e,n,s):n==="array-contains"?new rS(e,s):n==="in"?new iS(e,s):n==="not-in"?new oS(e,s):n==="array-contains-any"?new aS(e,s):new ct(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new nS(e,s):new sS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($r(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison($r(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends u_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return h_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h_(t){return t.op==="and"}function d_(t){return eS(t)&&h_(t)}function eS(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function xc(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+jr(t.value);if(d_(t))return t.filters.map((e=>xc(e))).join(",");{const e=t.filters.map((n=>xc(n))).join(",");return`${t.op}(${e})`}}function f_(t,e){return t instanceof ct?(function(s,r){return r instanceof ct&&s.op===r.op&&s.field.isEqual(r.field)&&kn(s.value,r.value)})(t,e):t instanceof Nn?(function(s,r){return r instanceof Nn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&f_(o,r.filters[l])),!0):!1})(t,e):void pe(19439)}function p_(t){return t instanceof ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${jr(n.value)}`})(t):t instanceof Nn?(function(n){return n.op.toString()+" {"+n.getFilters().map(p_).join(" ,")+"}"})(t):"Filter"}class tS extends ct{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class nS extends ct{constructor(e,n){super(e,"in",n),this.keys=m_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sS extends ct{constructor(e,n){super(e,"not-in",n),this.keys=m_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function m_(t,e){return(e.arrayValue?.values||[]).map((n=>he.fromName(n.referenceValue)))}class rS extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lu(n)&&eo(n.arrayValue,this.value)}}class iS extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eo(this.value.arrayValue,n)}}class oS extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eo(this.value.arrayValue,n)}}class aS extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>eo(this.value.arrayValue,s)))}}class lS{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Qf(t,e=null,n=[],s=[],r=null,i=null,o=null){return new lS(t,e,n,s,r,i,o)}function Mu(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>xc(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),il(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>jr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>jr(s))).join(",")),e.Te=n}return e.Te}function Fu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wf(t.startAt,e.startAt)&&Wf(t.endAt,e.endAt)}function Lc(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class al{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cS(t,e,n,s,r,i,o,l){return new al(t,e,n,s,r,i,o,l)}function Uu(t){return new al(t)}function Yf(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uS(t){return t.collectionGroup!==null}function Mi(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ut(vt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ra(i,s))})),n.has(vt.keyField().canonicalString())||e.Ie.push(new Ra(vt.keyField(),s))}return e.Ie}function wn(t){const e=ve(t);return e.Ee||(e.Ee=hS(e,Mi(t))),e.Ee}function hS(t,e){if(t.limitType==="F")return Qf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Ra(r.field,i)}));const n=t.endAt?new ba(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ba(t.startAt.position,t.startAt.inclusive):null;return Qf(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Mc(t,e,n){return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ll(t,e){return Fu(wn(t),wn(e))&&t.limitType===e.limitType}function g_(t){return`${Mu(wn(t))}|lt:${t.limitType}`}function gr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>p_(r))).join(", ")}]`),il(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>jr(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>jr(r))).join(",")),`Target(${s})`})(wn(t))}; limitType=${t.limitType})`}function cl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Mi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const h=zf(o,l,c);return o.inclusive?h<=0:h<0})(s.startAt,Mi(s),r)||s.endAt&&!(function(o,l,c){const h=zf(o,l,c);return o.inclusive?h>=0:h>0})(s.endAt,Mi(s),r))})(t,e)}function dS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function __(t){return(e,n)=>{let s=!1;for(const r of Mi(t)){const i=fS(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function fS(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?$r(c,h):pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:t.dir})}}class rr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sr(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return t_(this.inner)}size(){return this.innerSize}}const pS=new Xe(he.comparator);function Yn(){return pS}const y_=new Xe(he.comparator);function Ai(...t){let e=y_;for(const n of t)e=e.insert(n.key,n);return e}function v_(t){let e=y_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function qs(){return Fi()}function E_(){return Fi()}function Fi(){return new rr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const mS=new Xe(he.comparator),gS=new ut(he.comparator);function Pe(...t){let e=gS;for(const n of t)e=e.add(n);return e}const _S=new ut(Ce);function yS(){return _S}function Bu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ia(e)?"-0":e}}function T_(t){return{integerValue:""+t}}function vS(t,e){return KR(e)?T_(e):Bu(t,e)}class ul{constructor(){this._=void 0}}function ES(t,e,n){return t instanceof to?(function(r,i){const o={fields:{[r_]:{stringValue:s_},[o_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&xu(i)&&(i=ol(i)),i&&(o.fields[i_]=i),{mapValue:o}})(n,e):t instanceof no?w_(t,e):t instanceof so?A_(t,e):(function(r,i){const o=I_(r,i),l=Xf(o)+Xf(r.Ae);return Oc(o)&&Oc(r.Ae)?T_(l):Bu(r.serializer,l)})(t,e)}function TS(t,e,n){return t instanceof no?w_(t,e):t instanceof so?A_(t,e):n}function I_(t,e){return t instanceof Sa?(function(s){return Oc(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class to extends ul{}class no extends ul{constructor(e){super(),this.elements=e}}function w_(t,e){const n=b_(e);for(const s of t.elements)n.some((r=>kn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class so extends ul{constructor(e){super(),this.elements=e}}function A_(t,e){let n=b_(e);for(const s of t.elements)n=n.filter((r=>!kn(r,s)));return{arrayValue:{values:n}}}class Sa extends ul{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xf(t){return tt(t.integerValue||t.doubleValue)}function b_(t){return Lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class IS{constructor(e,n){this.field=e,this.transform=n}}function wS(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof no&&r instanceof no||s instanceof so&&r instanceof so?Ur(s.elements,r.elements,kn):s instanceof Sa&&r instanceof Sa?kn(s.Ae,r.Ae):s instanceof to&&r instanceof to})(t.transform,e.transform)}class AS{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hl{}function R_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $u(t.key,An.none()):new yo(t.key,t.data,An.none());{const n=t.data,s=Yt.empty();let r=new ut(vt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new ir(t.key,s,new an(r.toArray()),An.none())}}function bS(t,e,n){t instanceof yo?(function(r,i,o){const l=r.value.clone(),c=Zf(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof ir?(function(r,i,o){if(!sa(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Zf(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(S_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ui(t,e,n,s){return t instanceof yo?(function(i,o,l,c){if(!sa(i.precondition,o))return l;const h=i.value.clone(),d=ep(i.fieldTransforms,c,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof ir?(function(i,o,l,c){if(!sa(i.precondition,o))return l;const h=ep(i.fieldTransforms,c,o),d=o.data;return d.setAll(S_(i)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,l){return sa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function RS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=I_(s.transform,r||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(s.field,i))}return n||null}function Jf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ur(s,r,((i,o)=>wS(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends hl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ir extends hl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function S_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Zf(t,e,n){const s=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,TS(o,l,n[r]))}return s}function ep(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,ES(i,o,e))}return s}class $u extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SS extends hl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CS{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&bS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ui(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ui(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=E_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=R_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Ur(this.mutations,e.mutations,((n,s)=>Jf(n,s)))&&Ur(this.baseMutations,e.baseMutations,((n,s)=>Jf(n,s)))}}class ju{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Fe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return mS})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ju(e,n,s,r)}}class PS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kS{constructor(e,n){this.count=e,this.unchangedNames=n}}var nt,ke;function NS(t){switch(t){case q.OK:return pe(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function C_(t){if(t===void 0)return Qn("GRPC error has no .code"),q.UNKNOWN;switch(t){case nt.OK:return q.OK;case nt.CANCELLED:return q.CANCELLED;case nt.UNKNOWN:return q.UNKNOWN;case nt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case nt.INTERNAL:return q.INTERNAL;case nt.UNAVAILABLE:return q.UNAVAILABLE;case nt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case nt.NOT_FOUND:return q.NOT_FOUND;case nt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case nt.ABORTED:return q.ABORTED;case nt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case nt.DATA_LOSS:return q.DATA_LOSS;default:return pe(39323,{code:t})}}(ke=nt||(nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function DS(){return new TextEncoder}const VS=new Is([4294967295,4294967295],0);function tp(t){const e=DS().encode(t),n=new Kg;return n.update(e),new Uint8Array(n.digest())}function np(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Is([n,s],0),new Is([r,i],0)]}class qu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bi(`Invalid padding: ${n}`);if(s<0)throw new bi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new bi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Is.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Is.fromNumber(s)));return r.compare(VS)===1&&(r=new Is([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tp(e),[s,r]=np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qu(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=tp(e),[s,r]=np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,vo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new dl(ye.min(),r,new Xe(Ce),Yn(),Pe())}}class vo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vo(s,n,Pe(),Pe(),Pe())}}class ra{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class P_{constructor(e,n){this.targetId=e,this.Ce=n}}class k_{constructor(e,n,s=Tt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class sp{constructor(){this.ve=0,this.Fe=rp(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pe(38017,{changeType:i})}})),new vo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.Je=jo(),this.He=jo(),this.Ye=new Xe(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Lc(i))if(s===0){const o=new he(i.path);this.et(n,o,Pt.newNoDocument(o,ye.min()))}else Fe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Ss(s).toUint8Array()}catch(c){if(c instanceof n_)return Fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new qu(o,r,i)}catch(c){return Fr(c instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Lc(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Pt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Pe();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new dl(e,n,this.Ye,this.je,s);return this.je=Yn(),this.Je=jo(),this.He=jo(),this.Ye=new Xe(Ce),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ut(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ut(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sp),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jo(){return new Xe(he.comparator)}function rp(){return new Xe(he.comparator)}const xS={asc:"ASCENDING",desc:"DESCENDING"},LS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MS={and:"AND",or:"OR"};class FS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fc(t,e){return t.useProto3Json||il(e)?e:{value:e}}function Ca(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function US(t,e){return Ca(t,e.toTimestamp())}function bn(t){return Fe(!!t,49232),ye.fromTimestamp((function(n){const s=Rs(n);return new Qe(s.seconds,s.nanos)})(t))}function Hu(t,e){return Uc(t,e).canonicalString()}function Uc(t,e){const n=(function(r){return new Ye(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function D_(t){const e=Ye.fromString(t);return Fe(M_(e),10190,{key:e.toString()}),e}function Bc(t,e){return Hu(t.databaseId,e.path)}function tc(t,e){const n=D_(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(O_(n))}function V_(t,e){return Hu(t.databaseId,e)}function BS(t){const e=D_(t);return e.length===4?Ye.emptyPath():O_(e)}function $c(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ip(t,e,n){return{name:Bc(t,e),fields:n.value.mapValue.fields}}function $S(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?(Fe(d===void 0||typeof d=="string",58123),Tt.fromBase64String(d||"")):(Fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Tt.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(h){const d=h.code===void 0?q.UNKNOWN:C_(h.code);return new ae(d,h.message||"")})(o);n=new k_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=tc(t,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):ye.min(),l=new Yt({mapValue:{fields:s.document.fields}}),c=Pt.newFoundDocument(r,i,o,l),h=s.targetIds||[],d=s.removedTargetIds||[];n=new ra(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=tc(t,s.document),i=s.readTime?bn(s.readTime):ye.min(),o=Pt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ra([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=tc(t,s.document),i=s.removedTargetIds||[];n=new ra([],i,r,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new kS(r,i),l=s.targetId;n=new P_(l,o)}}return n}function jS(t,e){let n;if(e instanceof yo)n={update:ip(t,e.key,e.value)};else if(e instanceof $u)n={delete:Bc(t,e.key)};else if(e instanceof ir)n={update:ip(t,e.key,e.data),updateMask:XS(e.fieldMask)};else{if(!(e instanceof SS))return pe(16599,{Vt:e.type});n={verify:Bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof to)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof no)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof so)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sa)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw pe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:US(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe(27497)})(t,e.precondition)),n}function qS(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(ye.min())&&(o=bn(i)),new AS(o,r.transformResults||[])})(n,e)))):[]}function HS(t,e){return{documents:[V_(t,e.path)]}}function KS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=V_(t,r);const i=(function(h){if(h.length!==0)return L_(Nn.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:_r(g.field),direction:WS(g.dir)}})(d)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function GS(t){let e=BS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Fe(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const g=x_(p);return g instanceof Nn&&d_(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(k){return new Ra(yr(k.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,il(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){const g=!!p.before,y=p.values||[];return new ba(y,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,y=p.values||[];return new ba(y,g)})(n.endAt)),cS(e,r,o,i,l,"F",c,h)}function zS(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=yr(n.unaryFilter.field);return ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=yr(n.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yr(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yr(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ct.create(yr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Nn.create(n.compositeFilter.filters.map((s=>x_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(n.compositeFilter.op))})(t):pe(30097,{filter:t})}function WS(t){return xS[t]}function QS(t){return LS[t]}function YS(t){return MS[t]}function _r(t){return{fieldPath:t.canonicalString()}}function yr(t){return vt.fromServerFormat(t.fieldPath)}function L_(t){return t instanceof ct?(function(n){if(n.op==="=="){if(Gf(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NAN"}};if(Kf(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gf(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NAN"}};if(Kf(n.value))return{unaryFilter:{field:_r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_r(n.field),op:QS(n.op),value:n.value}}})(t):t instanceof Nn?(function(n){const s=n.getFilters().map((r=>L_(r)));return s.length===1?s[0]:{compositeFilter:{op:YS(n.op),filters:s}}})(t):pe(54877,{filter:t})}function XS(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function M_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class _s{constructor(e,n,s,r,i=ye.min(),o=ye.min(),l=Tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JS{constructor(e){this.yt=e}}function ZS(t){const e=GS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mc(e,e.limit,"L"):e}class e1{constructor(){this.Cn=new t1}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(bs.min())}updateCollectionGroup(e,n,s){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class t1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ut(Ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ut(Ye.comparator)).toArray()}}const op={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F_=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(F_,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class qr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qr(0)}static cr(){return new qr(-1)}}const ap="LruGarbageCollector",n1=1048576;function lp([t,e],[n,s]){const r=Ce(t,n);return r===0?Ce(e,s):r}class s1{constructor(e){this.Ir=e,this.buffer=new ut(lp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(ap,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xr(n)?re(ap,"Ignoring IndexedDB error during garbage collection: ",n):await Yr(n)}await this.Vr(3e5)}))}}class i1{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(rl.ce);const s=new s1(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(op)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),op):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,l=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),mr()<=Se.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function o1(t,e){return new i1(t,e)}class a1{constructor(){this.changes=new rr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?M.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class l1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class c1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Ui(s.mutation,r,an.empty(),Qe.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const r=qs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Ai();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=qs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=Yn();const o=Fi(),l=(function(){return Fi()})();return n.forEach(((c,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof ir)?i=i.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ui(d.mutation,h,d.mutation.getFieldMask(),Qe.now())):o.set(h.key,an.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((h,d)=>o.set(h,d))),n.forEach(((h,d)=>l.set(h,new l1(d,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=Fi();let r=new Xe(((o,l)=>o-l)),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let d=s.get(c)||an.empty();d=l.applyToLocalView(h,d),s.set(c,d);const p=(r.get(l.batchId)||Pe()).add(c);r=r.insert(l.batchId,p)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=E_();d.forEach((g=>{if(!i.has(g)){const y=R_(n.get(g),s.get(g));y!==null&&p.set(g,y),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):M.resolve(qs());let l=Xi,c=i;return o.next((h=>M.forEach(h,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,c,h,Pe()))).next((d=>({batchId:l,changes:v_(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next((s=>{let r=Ai();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Ai();return this.indexManager.getCollectionParents(e,i).next((l=>M.forEach(l,(c=>{const h=(function(p,g){return new al(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,Pt.newInvalidDocument(d)))}));let l=Ai();return o.forEach(((c,h)=>{const d=i.get(c);d!==void 0&&Ui(d.mutation,h,an.empty(),Qe.now()),cl(n,h)&&(l=l.insert(c,h))})),l}))}}class u1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:ZS(r.bundledQuery),readTime:bn(r.readTime)}})(n)),M.resolve()}}class h1{constructor(){this.overlays=new Xe(he.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const s=qs();return M.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),M.resolve()}getOverlaysForCollection(e,n,s){const r=qs(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Xe(((h,d)=>h-d));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=qs(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=qs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,d)=>l.set(h,d))),!(l.size()>=r)););return M.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new PS(n,s));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class d1{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class Ku{constructor(){this.Qr=new ut(pt.$r),this.Ur=new ut(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new pt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new he(new Ye([])),s=new pt(n,e),r=new pt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Ye([])),s=new pt(n,e),r=new pt(n,e+1);let i=Pe();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new pt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}class f1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ut(pt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CS(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ou:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pt(n,0),r=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ut(Ce);return n.forEach((r=>{const i=new pt(r,0),o=new pt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),M.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new pt(new he(i),0);let l=new ut(Ce);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)}),o),M.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return M.forEach(n.mutations,(r=>{const i=new pt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new pt(n,0),r=this.Zr.firstAfterOrEqual(s);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class p1{constructor(e){this.ri=e,this.docs=(function(){return new Xe(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return M.resolve(s?s.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let s=Yn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Pt.newInvalidDocument(r))})),M.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Yn();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||$R(BR(d),s)<=0||(r.has(d.key)||cl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,s,r){pe(9500)}ii(e,n){return M.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new m1(this)}getSize(e){return M.resolve(this.size)}}class m1 extends a1{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class g1{constructor(e){this.persistence=e,this.si=new rr((n=>Mu(n)),Fu),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Ku,this.targetCount=0,this.ai=qr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),M.waitFor(i).next((()=>r))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return M.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),M.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return M.resolve(s)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}class U_{constructor(e,n){this.ui={},this.overlays={},this.ci=new rl(0),this.li=!1,this.li=!0,this.hi=new d1,this.referenceDelegate=e(this),this.Pi=new g1(this),this.indexManager=new e1,this.remoteDocumentCache=(function(r){return new p1(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JS(n),this.Ii=new u1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new f1(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const r=new _1(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return M.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class _1 extends qR{constructor(e){super(),this.currentSequenceNumber=e}}class Gu{constructor(e){this.persistence=e,this.Ri=new Ku,this.Vi=null}static mi(e){return new Gu(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),M.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(s=>{const r=he.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pa{constructor(e,n){this.persistence=e,this.pi=new rr((s=>GR(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=o1(this,n)}static mi(e,n){return new Pa(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return M.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?M.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,ye.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ta(e.data.value)),n}br(e,n,s){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new zu(e,n.fromCache,s,r)}}class y1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class v1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ow()?8:HR(Vt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new y1;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(mr()<=Se.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(mr()<=Se.DEBUG&&re("QueryEngine","Query:",gr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(mr()<=Se.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):M.resolve())}ys(e,n){if(Yf(n))return M.resolve(null);let s=wn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Mc(n,null,"F"),s=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Pe(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Mc(n,null,"F")):this.vs(e,h,n,c)}))))})))))}ws(e,n,s,r){return Yf(n)||r.isEqual(ye.min())?M.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?M.resolve(null):(mr()<=Se.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gr(n)),this.vs(e,o,n,UR(r,Xi)).next((l=>l)))}))}Ds(e,n){let s=new ut(__(e));return n.forEach(((r,i)=>{cl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return mr()<=Se.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",gr(n)),this.ps.getDocumentsMatchingQuery(e,n,bs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Wu="LocalStore",E1=3e8;class T1{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Xe(Ce),this.xs=new rr((i=>Mu(i)),Fu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function I1(t,e,n,s){return new T1(t,e,n,s)}async function B_(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=Pe();for(const h of r){o.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function w1(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,d){const p=h.batch,g=p.keys();let y=M.resolve();return g.forEach((k=>{y=y.next((()=>d.getEntry(c,k))).next((D=>{const V=h.docVersions.get(k);Fe(V!==null,48541),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),d.addEntry(D)))}))})),y.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=Pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function $_(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function A1(t,e){const n=ve(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((d,p)=>{const g=r.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p))));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Tt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,s)),r=r.insert(p,y),(function(D,V,B){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=E1?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(g,y,d)&&l.push(n.Pi.updateTargetData(i,y))}));let c=Yn(),h=Pe();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(b1(i,o,e.documentUpdates).next((d=>{c=d.ks,h=d.qs}))),!s.isEqual(ye.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(d)}return M.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function b1(t,e,n){let s=Pe(),r=Pe();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=Yn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(Wu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function R1(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ou),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function S1(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,M.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new _s(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function jc(t,e,n){const s=ve(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Xr(o))throw o;re(Wu,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function cp(t,e,n){const s=ve(t);let r=ye.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,d){const p=ve(c),g=p.xs.get(d);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)})(s,o,wn(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ye.min(),n?i:Pe()))).next((l=>(C1(s,dS(e),l),{documents:l,Qs:i})))))}function C1(t,e,n){let s=t.Os.get(e)||ye.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class up{constructor(){this.activeTargetIds=yS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P1{constructor(){this.Mo=new up,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new up,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k1{Oo(e){}shutdown(){}}const hp="ConnectivityMonitor";class dp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(hp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(hp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qo=null;function qc(){return qo===null?qo=(function(){return 268435456+Math.round(2147483648*Math.random())})():qo++,"0x"+qo.toString(16)}const nc="RestConnection",N1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===wa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=qc(),l=this.zo(e,n.toUriEncodedString());re(nc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),d=Gr(h);return this.Jo(e,l,c,s,d).then((p=>(re(nc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Fr(nc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=N1[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class V1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Rt="WebChannelConnection";class O1 extends D1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=qc();return new Promise(((l,c)=>{const h=new Gg;h.setWithCredentials(!0),h.listenOnce(zg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case ea.NO_ERROR:const p=h.getResponseJson();re(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ea.TIMEOUT:re(Rt,`RPC '${e}' ${o} timed out`),c(new ae(q.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:const g=h.getStatus();if(re(Rt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const k=y?.error;if(k&&k.status&&k.message){const D=(function(B){const $=B.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf($)>=0?$:q.UNKNOWN})(k.status);c(new ae(D,k.message))}else c(new ae(q.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ae(q.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{re(Rt,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(r);re(Rt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",d,s,15)}))}T_(e,n,s){const r=qc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yg(),l=Qg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");re(Rt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let g=!1,y=!1;const k=new V1({Yo:V=>{y?re(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(g||(re(Rt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),re(Rt,`RPC '${e}' stream ${r} sending:`,V),p.send(V))},Zo:()=>p.close()}),D=(V,B,$)=>{V.listen(B,(Y=>{try{$(Y)}catch(W){setTimeout((()=>{throw W}),0)}}))};return D(p,wi.EventType.OPEN,(()=>{y||(re(Rt,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),D(p,wi.EventType.CLOSE,(()=>{y||(y=!0,re(Rt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(p))})),D(p,wi.EventType.ERROR,(V=>{y||(y=!0,Fr(Rt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),k.a_(new ae(q.UNAVAILABLE,"The operation could not be completed")))})),D(p,wi.EventType.MESSAGE,(V=>{if(!y){const B=V.data[0];Fe(!!B,16349);const $=B,Y=$?.error||$[0]?.error;if(Y){re(Rt,`RPC '${e}' stream ${r} received error:`,Y);const W=Y.status;let fe=(function(v){const I=nt[v];if(I!==void 0)return C_(I)})(W),Ee=Y.message;fe===void 0&&(fe=q.INTERNAL,Ee="Unknown error status: "+W+" with message "+Y.message),y=!0,k.a_(new ae(fe,Ee)),p.close()}else re(Rt,`RPC '${e}' stream ${r} received:`,B),k.u_(B)}})),D(l,Wg.STAT_EVENT,(V=>{V.stat===Nc.PROXY?re(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===Nc.NOPROXY&&re(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sc(){return typeof document<"u"?document:null}function fl(t){return new FS(t,!0)}class j_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fp="PersistentStream";class q_{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new j_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new ae(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(fp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(fp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class x1 extends q_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$S(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?bn(o.readTime):ye.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=$c(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=Lc(c)?{documents:HS(i,c)}:{query:KS(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=N_(i,o.resumeToken);const h=Fc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=Ca(i,o.snapshotVersion.toTimestamp());const h=Fc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const s=zS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=$c(this.serializer),n.removeTarget=e,this.q_(n)}}class L1 extends q_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qS(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=$c(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>jS(this.serializer,s)))};this.q_(n)}}class M1{}class F1 extends M1{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Uc(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(q.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,Uc(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class U1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const er="RemoteStore";class B1{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{or(this)&&(re(er,"Restarting streams for network reachability change."),await(async function(c){const h=ve(c);h.Ea.add(4),await Eo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await pl(h)})(this))}))})),this.Ra=new U1(s,r)}}async function pl(t){if(or(t))for(const e of t.da)await e(!0)}async function Eo(t){for(const e of t.da)await e(!1)}function H_(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ju(n)?Xu(n):Jr(n).O_()&&Yu(n,e))}function Qu(t,e){const n=ve(t),s=Jr(n);n.Ia.delete(e),s.O_()&&K_(n,e),n.Ia.size===0&&(s.O_()?s.L_():or(n)&&n.Ra.set("Unknown"))}function Yu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jr(t).Y_(e)}function K_(t,e){t.Va.Ue(e),Jr(t).Z_(e)}function Xu(t){t.Va=new OS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Jr(t).start(),t.Ra.ua()}function Ju(t){return or(t)&&!Jr(t).x_()&&t.Ia.size>0}function or(t){return ve(t).Ea.size===0}function G_(t){t.Va=void 0}async function $1(t){t.Ra.set("Online")}async function j1(t){t.Ia.forEach(((e,n)=>{Yu(t,e)}))}async function q1(t,e){G_(t),Ju(t)?(t.Ra.ha(e),Xu(t)):t.Ra.set("Unknown")}async function H1(t,e,n){if(t.Ra.set("Online"),e instanceof k_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){re(er,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ka(t,s)}else if(e instanceof ra?t.Va.Ze(e):e instanceof P_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const s=await $_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(Tt.EMPTY_BYTE_STRING,d.snapshotVersion)),K_(i,c);const p=new _s(d.target,c,h,d.sequenceNumber);Yu(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){re(er,"Failed to raise snapshot:",s),await ka(t,s)}}async function ka(t,e,n){if(!Xr(e))throw e;t.Ea.add(1),await Eo(t),t.Ra.set("Offline"),n||(n=()=>$_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{re(er,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pl(t)}))}function z_(t,e){return e().catch((n=>ka(t,n,e)))}async function ml(t){const e=ve(t),n=Ps(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ou;for(;K1(e);)try{const r=await R1(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,G1(e,r)}catch(r){await ka(e,r)}W_(e)&&Q_(e)}function K1(t){return or(t)&&t.Ta.length<10}function G1(t,e){t.Ta.push(e);const n=Ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function W_(t){return or(t)&&!Ps(t).x_()&&t.Ta.length>0}function Q_(t){Ps(t).start()}async function z1(t){Ps(t).ra()}async function W1(t){const e=Ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function Q1(t,e,n){const s=t.Ta.shift(),r=ju.from(s,e,n);await z_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await ml(t)}async function Y1(t,e){e&&Ps(t).X_&&await(async function(s,r){if((function(o){return NS(o)&&o!==q.ABORTED})(r.code)){const i=s.Ta.shift();Ps(s).B_(),await z_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await ml(s)}})(t,e),W_(t)&&Q_(t)}async function pp(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),re(er,"RemoteStore received new credentials");const s=or(n);n.Ea.add(3),await Eo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pl(n)}async function X1(t,e){const n=ve(t);e?(n.Ea.delete(2),await pl(n)):e||(n.Ea.add(2),await Eo(n),n.Ra.set("Unknown"))}function Jr(t){return t.ma||(t.ma=(function(n,s,r){const i=ve(n);return i.sa(),new x1(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:$1.bind(null,t),t_:j1.bind(null,t),r_:q1.bind(null,t),H_:H1.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Ju(t)?Xu(t):t.Ra.set("Unknown")):(await t.ma.stop(),G_(t))}))),t.ma}function Ps(t){return t.fa||(t.fa=(function(n,s,r){const i=ve(n);return i.sa(),new L1(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:z1.bind(null,t),r_:Y1.bind(null,t),ta:W1.bind(null,t),na:Q1.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ml(t)):(await t.fa.stop(),t.Ta.length>0&&(re(er,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Zu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Zu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eh(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),Xr(t))return new ae(q.UNAVAILABLE,`${e}: ${t}`);throw t}class Sr{static emptySet(e){return new Sr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=Ai(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Sr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class mp{constructor(){this.ga=new Xe(he.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Hr{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new Hr(e,n,Sr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class J1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Z1{constructor(){this.queries=gp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ve(n),i=r.queries;r.queries=gp(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new ae(q.ABORTED,"Firestore shutting down"))}}function gp(){return new rr((t=>g_(t)),ll)}async function e0(t,e){const n=ve(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new J1,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=eh(o,`Initialization of query '${gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&th(n)}async function t0(t,e){const n=ve(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function n0(t,e){const n=ve(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&th(n)}function s0(t,e,n){const s=ve(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function th(t){t.Ca.forEach((e=>{e.next()}))}var Hc,_p;(_p=Hc||(Hc={})).Ma="default",_p.Cache="cache";class r0{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Hr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hc.Cache}}class Y_{constructor(e){this.key=e}}class X_{constructor(e){this.key=e}}class i0{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=__(e),this.tu=new Sr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new mp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((d,p)=>{const g=r.get(d),y=cl(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let V=!1;g&&y?g.data.isEqual(y.data)?k!==D&&(s.track({type:3,doc:y}),V=!0):this.su(g,y)||(s.track({type:2,doc:y}),V=!0,(c&&this.eu(y,c)>0||h&&this.eu(y,h)<0)&&(l=!0)):!g&&y?(s.track({type:0,doc:y}),V=!0):g&&!y&&(s.track({type:1,doc:g}),V=!0,(c||h)&&(l=!0)),V&&(y?(o=o.add(y),i=D?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(y,k){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:V})}};return D(y)-D(k)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Hr(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new X_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Y_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nh="SyncEngine";class o0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class a0{constructor(e){this.key=e,this.hu=!1}}class l0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rr((l=>g_(l)),ll),this.Iu=new Map,this.Eu=new Set,this.du=new Xe(he.comparator),this.Au=new Map,this.Ru=new Ku,this.Vu={},this.mu=new Map,this.fu=qr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function c0(t,e,n=!0){const s=sy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await J_(s,e,n,!0),r}async function u0(t,e){const n=sy(t);await J_(n,e,!0,!1)}async function J_(t,e,n,s){const r=await S1(t.localStore,wn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await h0(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&H_(t.remoteStore,r),l}async function h0(t,e,n,s,r){t.pu=(p,g,y)=>(async function(D,V,B,$){let Y=V.view.ru(B);Y.Cs&&(Y=await cp(D.localStore,V.query,!1).then((({documents:A})=>V.view.ru(A,Y))));const W=$&&$.targetChanges.get(V.targetId),fe=$&&$.targetMismatches.get(V.targetId)!=null,Ee=V.view.applyChanges(Y,D.isPrimaryClient,W,fe);return vp(D,V.targetId,Ee.au),Ee.snapshot})(t,p,g,y);const i=await cp(t.localStore,e,!0),o=new i0(e,i.Qs),l=o.ru(i.documents),c=vo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);vp(t,n,h.au);const d=new o0(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function d0(t,e,n){const s=ve(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!ll(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await jc(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Qu(s.remoteStore,r.targetId),Kc(s,r.targetId)})).catch(Yr)):(Kc(s,r.targetId),await jc(s.localStore,r.targetId,!0))}async function f0(t,e){const n=ve(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Qu(n.remoteStore,s.targetId))}async function p0(t,e,n){const s=T0(t);try{const r=await(function(o,l){const c=ve(o),h=Qe.now(),d=l.reduce(((y,k)=>y.add(k.key)),Pe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let k=Yn(),D=Pe();return c.Ns.getEntries(y,d).next((V=>{k=V,k.forEach(((B,$)=>{$.isValidDocument()||(D=D.add(B))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,k))).next((V=>{p=V;const B=[];for(const $ of l){const Y=RS($,p.get($.key).overlayedDocument);Y!=null&&B.push(new ir($.key,Y,c_(Y.value.mapValue),An.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,B,l)})).next((V=>{g=V;const B=V.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(y,V.batchId,B)}))})).then((()=>({batchId:g.batchId,changes:v_(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Xe(Ce)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(s,r.batchId,n),await To(s,r.changes),await ml(s.remoteStore)}catch(r){const i=eh(r,"Failed to persist write");n.reject(i)}}async function Z_(t,e){const n=ve(t);try{const s=await A1(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Fe(o.hu,14607):r.removedDocuments.size>0&&(Fe(o.hu,42227),o.hu=!1))})),await To(n,s,e)}catch(s){await Yr(s)}}function yp(t,e,n){const s=ve(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=ve(o);c.onlineState=l;let h=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)})),h&&th(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function m0(t,e,n){const s=ve(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Xe(he.comparator);o=o.insert(i,Pt.newNoDocument(i,ye.min()));const l=Pe().add(i),c=new dl(ye.min(),new Map,new Xe(Ce),o,l);await Z_(s,c),s.du=s.du.remove(i),s.Au.delete(e),sh(s)}else await jc(s.localStore,e,!1).then((()=>Kc(s,e,n))).catch(Yr)}async function g0(t,e){const n=ve(t),s=e.batch.batchId;try{const r=await w1(n.localStore,e);ty(n,s,null),ey(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await To(n,r)}catch(r){await Yr(r)}}async function _0(t,e,n){const s=ve(t);try{const r=await(function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(Fe(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>c.localDocuments.getDocuments(h,d)))}))})(s.localStore,e);ty(s,e,n),ey(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await To(s,r)}catch(r){await Yr(r)}}function ey(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ty(t,e,n){const s=ve(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Kc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||ny(t,s)}))}function ny(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sh(t))}function vp(t,e,n){for(const s of n)s instanceof Y_?(t.Ru.addReference(s.key,e),y0(t,s)):s instanceof X_?(re(nh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||ny(t,s.key)):pe(19791,{wu:s})}function y0(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(re(nh,"New document in limbo: "+n),t.Eu.add(s),sh(t))}function sh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Ye.fromString(e)),s=t.fu.next();t.Au.set(s,new a0(n)),t.du=t.du.insert(n,s),H_(t.remoteStore,new _s(wn(Uu(n.path)),s,"TargetPurposeLimboResolution",rl.ce))}}async function To(t,e,n){const s=ve(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const d=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(h){r.push(h);const d=zu.As(c.targetId,h);i.push(d)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,h){const d=ve(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(h,(g=>M.forEach(g.Es,(y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>M.forEach(g.ds,(y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!Xr(p))throw p;re(Wu,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const y=d.Ms.get(g),k=y.snapshotVersion,D=y.withLastLimboFreeSnapshotVersion(k);d.Ms=d.Ms.insert(g,D)}}})(s.localStore,i))}async function v0(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){re(nh,"User change. New user:",e.toKey());const s=await B_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new ae(q.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await To(n,s.Ls)}}function E0(t,e){const n=ve(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let r=Pe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function sy(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m0.bind(null,e),e.Pu.H_=n0.bind(null,e.eventManager),e.Pu.yu=s0.bind(null,e.eventManager),e}function T0(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_0.bind(null,e),e}class Na{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return I1(this.persistence,new v1,e.initialUser,this.serializer)}Cu(e){return new U_(Gu.mi,this.serializer)}Du(e){return new P1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Na.provider={build:()=>new Na};class I0 extends Na{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof Pa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new r1(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new U_((s=>Pa.mi(s,n)),this.serializer)}}class Gc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=v0.bind(null,this.syncEngine),await X1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z1})()}createDatastore(e){const n=fl(e.databaseInfo.databaseId),s=(function(i){return new O1(i)})(e.databaseInfo);return(function(i,o,l,c){return new F1(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new B1(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>yp(this.syncEngine,n,0)),(function(){return dp.v()?new dp:new k1})())}createSyncEngine(e,n){return(function(r,i,o,l,c,h,d){const p=new l0(r,i,o,l,c,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ve(n);re(er,"RemoteStore shutting down."),s.Ea.add(5),await Eo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gc.provider={build:()=>new Gc};class w0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ks="FirestoreClient";class A0{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=St.UNAUTHENTICATED,this.clientId=Du.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{re(ks,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(re(ks,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=eh(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function rc(t,e){t.asyncQueue.verifyOperationInProgress(),re(ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await B_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ep(t,e){t.asyncQueue.verifyOperationInProgress();const n=await b0(t);re(ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>pp(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>pp(e.remoteStore,r))),t._onlineComponents=e}async function b0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(ks,"Using user provided OfflineComponentProvider");try{await rc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),await rc(t,new Na)}}else re(ks,"Using default OfflineComponentProvider"),await rc(t,new I0(void 0));return t._offlineComponents}async function ry(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(ks,"Using user provided OnlineComponentProvider"),await Ep(t,t._uninitializedComponentsProvider._online)):(re(ks,"Using default OnlineComponentProvider"),await Ep(t,new Gc))),t._onlineComponents}function R0(t){return ry(t).then((e=>e.syncEngine))}async function S0(t){const e=await ry(t),n=e.eventManager;return n.onListen=c0.bind(null,e.syncEngine),n.onUnlisten=d0.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u0.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f0.bind(null,e.syncEngine),n}function C0(t,e,n={}){const s=new ws;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,l,c,h){const d=new w0({next:g=>{d.Nu(),o.enqueueAndForget((()=>t0(i,p)));const y=g.docs.has(l);!y&&g.fromCache?h.reject(new ae(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?h.reject(new ae(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new r0(Uu(l.path),d,{includeMetadataChanges:!0,qa:!0});return e0(i,p)})(await S0(t),t.asyncQueue,e,n,s))),s.promise}function iy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Tp=new Map;const oy="firestore.googleapis.com",Ip=!0;class wp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oy,this.ssl=Ip}else this.host=e.host,this.ssl=e.ssl??Ip;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=F_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n1)throw new ae(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iy(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new SR;switch(s.type){case"firstParty":return new NR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Tp.get(n);s&&(re("ComponentProvider","Removing Datastore"),Tp.delete(n),s.terminate())})(this),Promise.resolve()}}function P0(t,e,n,s={}){t=Br(t,rh);const r=Gr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(ag(`https://${l}`),lg("Firestore",!0)),i.host!==oy&&i.host!==l&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Ys(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=St.MOCK_USER;else{h=XI(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new ae(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new St(p)}t._authCredentials=new CR(new Jg(h,d))}}class ih{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ih(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(_o(n,mt._jsonSchema))return new mt(e,s||null,new he(Ye.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:rt("string",mt._jsonSchemaVersion),referencePath:rt("string")};class ro extends ih{constructor(e,n,s){super(e,n,Uu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new he(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function Da(t,e,...n){if(t=en(t),arguments.length===1&&(e=Du.newId()),MR("doc","path",e),t instanceof rh){const s=Ye.fromString(e,...n);return Mf(s),new mt(t,null,new he(s))}{if(!(t instanceof mt||t instanceof ro))throw new ae(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return Mf(s),new mt(t.firestore,t instanceof ro?t.converter:null,new he(s))}}const Ap="AsyncQueue";class bp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new j_(this,"async_queue_retry"),this._c=()=>{const s=sc();s&&re(Ap,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ws;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xr(e))throw e;re(Ap,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",Rp(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Zu.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&pe(47125,{Pc:Rp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Rp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class gl extends rh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new bp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bp(e),this._firestoreClient=void 0,await e}}}function k0(t,e){const n=typeof t=="object"?t:dg(),s=typeof t=="string"?t:wa,r=Eu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=QI("firestore");i&&P0(r,...i)}return r}function ay(t){if(t._terminated)throw new ae(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N0(t),t._firestoreClient}function N0(t){const e=t._freezeSettings(),n=(function(r,i,o,l){return new QR(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,iy(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new A0(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(Tt.fromBase64String(e))}catch(n){throw new ae(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_o(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:rt("string",Xt._jsonSchemaVersion),bytes:rt("string")};class oh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ah{constructor(e){this._methodName=e}}class Rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(_o(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:rt("string",Rn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};class Sn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_o(e,Sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sn(e.vectorValues);throw new ae(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:rt("string",Sn._jsonSchemaVersion),vectorValues:rt("object")};const D0=/^__.*__$/;class V0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}function ly(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class lh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Va(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ly(this.Ac)&&D0.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class O0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fl(e)}Cc(e,n,s,r=!1){return new lh({Ac:e,methodName:n,Dc:s,path:vt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x0(t){const e=t._freezeSettings(),n=fl(t._databaseId);return new O0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L0(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);dy("Data must be an object, but it was:",o,s);const l=uy(s,o);let c,h;if(i.merge)c=new an(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=M0(e,p,n);if(!o.contains(g))throw new ae(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);U0(d,g)||d.push(g)}c=new an(d),h=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=o.fieldTransforms;return new V0(new Yt(l),c,h)}class ch extends ah{_toFieldTransform(e){return new IS(e.path,new to)}isEqual(e){return e instanceof ch}}function cy(t,e){if(hy(t=en(t)))return dy("Unsupported field value:",e,t),uy(t,e);if(t instanceof ah)return(function(s,r){if(!ly(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=cy(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=en(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Qe.fromDate(s);return{timestampValue:Ca(r.serializer,i)}}if(s instanceof Qe){const i=new Qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ca(r.serializer,i)}}if(s instanceof Rn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xt)return{bytesValue:N_(r.serializer,s._byteString)};if(s instanceof mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Sn)return(function(o,l){return{mapValue:{fields:{[a_]:{stringValue:l_},[Aa]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Bu(l.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Vu(s)}`)})(t,e)}function uy(t,e){const n={};return t_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sr(t,((s,r)=>{const i=cy(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function hy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Rn||t instanceof Xt||t instanceof mt||t instanceof ah||t instanceof Sn)}function dy(t,e,n){if(!hy(n)||!Zg(n)){const s=Vu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function M0(t,e,n){if((e=en(e))instanceof oh)return e._internalPath;if(typeof e=="string")return fy(t,e);throw Va("Field path arguments must be of type string or ",t,!1,void 0,n)}const F0=new RegExp("[~\\*/\\[\\]]");function fy(t,e,n){if(e.search(F0)>=0)throw Va(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oh(...e.split("."))._internalPath}catch{throw Va(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Va(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new ae(q.INVALID_ARGUMENT,l+t+c)}function U0(t,e){return t.some((n=>n.isEqual(e)))}class py{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(my("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B0 extends py{data(){return super.data()}}function my(t,e){return typeof e=="string"?fy(t,e):e instanceof oh?e._internalPath:e._delegate._internalPath}class $0{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return sr(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Aa].arrayValue?.values?.map((s=>tt(s.doubleValue)));return new Sn(n)}convertGeoPoint(e){return new Rn(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ol(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ji(e));default:return null}}convertTimestamp(e){const n=Rs(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);Fe(M_(s),9688,{name:e});const r=new Zi(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function j0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ri{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends py{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(my("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:rt("string",Ws._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class ia extends Ws{data(e={}){return super.data(e)}}class Bi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ri(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new ia(this._firestore,this._userDataWriter,s.key,s,new Ri(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new ia(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ri(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new ia(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ri(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:q0(l.type),doc:c,oldIndex:h,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Du.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q0(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}function gy(t){t=Br(t,mt);const e=Br(t.firestore,gl);return C0(ay(e),t._key).then((n=>z0(e,t,n)))}Bi._jsonSchemaVersion="firestore/querySnapshot/1.0",Bi._jsonSchema={type:rt("string",Bi._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class H0 extends $0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function K0(t,e,n){t=Br(t,mt);const s=Br(t.firestore,gl),r=j0(t.converter,e,n);return _y(s,[L0(x0(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,An.none())])}function G0(t){return _y(Br(t.firestore,gl),[new $u(t._key,An.none())])}function _y(t,e){return(function(s,r){const i=new ws;return s.asyncQueue.enqueueAndForget((async()=>p0(await R0(s),r,i))),i.promise})(ay(t),e)}function z0(t,e,n){const s=n.docs.get(e._key),r=new H0(t);return new Ws(t,r,e._key,s,new Ri(n.hasPendingWrites,n.fromCache),e.converter)}function W0(){return new ch("serverTimestamp")}(function(e,n=!0){(function(r){Qr=r})(zr),Lr(new Xs("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new gl(new PR(s.getProvider("auth-internal")),new DR(o,s.getProvider("app-check-internal")),(function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(h.options.projectId,d)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Ts(Vf,Of,e),Ts(Vf,Of,"esm2020")})();const Q0={apiKey:"AIzaSyDMvSyTEhJGh7a0coyDWCDiAsWCgxE9QsU",authDomain:"realcitytransport.firebaseapp.com",databaseURL:"https://realcitytransport-default-rtdb.firebaseio.com",projectId:"realcitytransport",storageBucket:"realcitytransport.firebasestorage.app",messagingSenderId:"510805652928",appId:"1:510805652928:web:0559bdd8da50af10b7c425",measurementId:"G-JE98MMZMCW"},yy=hg(Q0),zc=wR(yy),Oa=k0(yy),We=3600,Ei=8*We,Ns=[{id:"sys_unlock_vehicle",type:"SYSTEM",domain:"vehicle",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ei,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"vehicle"}]},{id:"sys_unlock_route",type:"SYSTEM",domain:"route",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ei,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"route"}]},{id:"sys_unlock_construction",type:"SYSTEM",domain:"construction",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ei,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"construction"}]},{id:"sys_unlock_finance",type:"SYSTEM",domain:"finance",timePolicy:"FIXED",title:"()  ",desc:"  . (  )",tier:1,durationSec:Ei,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"finance"}]},{id:"sys_unlock_city",type:"SYSTEM",domain:"city",timePolicy:"FIXED",title:"  ",desc:"  . (  )",tier:1,durationSec:Ei,requires:[],revealAfter:[],enabled:!1,effects:[{type:"UNLOCK_FEATURE",featureKey:"city"}]},{id:"sys_preview_starter_vehicles",type:"REAL",domain:"vehicle",timePolicy:"SCALABLE",title:" () ",desc:" (8)  , //     . (4,  )",tier:1,durationSec:4*We,requires:["unlock_bus_t1","unlock_truck_t1","unlock_rail_t1"],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_STARTER_FLEET_PREVIEW",transports:["bus","truck","rail"],runTimeMinSec:1800,runTimeMaxSec:2*We,countPerTransport:1}]},{id:"city_scale_region",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  .',tier:1,durationSec:4*We,requires:["sys_unlock_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"REGION"}]},{id:"city_scale_city",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:'  ""  . (  )',tier:1,durationSec:8*We,requires:["city_scale_region"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"CITY"}]},{id:"city_scale_country",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . ( / )',tier:1,durationSec:12*We,requires:["city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"COUNTRY"}]},{id:"city_scale_state",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:16*We,requires:["city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"STATE"}]},{id:"city_scale_planet",type:"CITY",domain:"city",timePolicy:"SCALABLE",title:"  ",desc:' ""  . (   )',tier:1,durationSec:24*We,requires:["city_scale_state"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"SET_CITY_SCALE",scale:"PLANET"}]},{id:"unlock_bus_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*We,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"bus",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"bus",tier:1}]},{id:"unlock_truck_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*We,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"truck",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"truck",tier:1}]},{id:"unlock_rail_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) .",tier:1,durationSec:1*We,requires:[],revealAfter:[],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"rail",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"rail",tier:1}]},{id:"unlock_plane_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*We,requires:["sys_unlock_city","city_scale_city"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"plane",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"plane",tier:1}]},{id:"unlock_ship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:2*We,requires:["sys_unlock_city","city_scale_country"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"ship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"ship",tier:1}]},{id:"unlock_spaceship_t1",type:"TRANSPORT",domain:"transport",timePolicy:"SCALABLE",title:"   ",desc:" (1) . ( :   )",tier:1,durationSec:3*We,requires:["sys_unlock_city","city_scale_planet"],revealAfter:["sys_unlock_city"],enabled:!0,effects:[{type:"UNLOCK_TRANSPORT_TIER",transportId:"spaceship",tier:1},{type:"GRANT_STARTER_VEHICLE",transportId:"spaceship",tier:1}]},{id:"rs_1",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  I",desc:"     5% . (SYSTEM  8 )",tier:1,durationSec:1*We,requires:[],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:1}]},{id:"rs_2",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  II",desc:"     10% . (SYSTEM  8 )",tier:1,durationSec:2*We,requires:["rs_1"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:2}]},{id:"rs_3",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  III",desc:"     15% . (SYSTEM  8 )",tier:1,durationSec:4*We,requires:["rs_2"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:3}]},{id:"rs_4",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  IV",desc:"     20% . (SYSTEM  8 )",tier:1,durationSec:8*We,requires:["rs_3"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:4}]},{id:"rs_5",type:"EFFICIENCY",domain:"research",timePolicy:"SCALABLE",title:"  V",desc:"     25% . (SYSTEM  8 )",tier:1,durationSec:16*We,requires:["rs_4"],revealAfter:[],enabled:!0,effects:[{type:"RESEARCH_SPEED_LEVEL",level:5}]},{id:"qol_4h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"   . ( UI/ )",tier:1,durationSec:4*We,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_4h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"  ",desc:"/   . (  )",tier:1,durationSec:4*We,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_01",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*We,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_02",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/    .",tier:1,durationSec:8*We,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"qol_8h_03",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:"   ",desc:"/     .",tier:1,durationSec:8*We,requires:[],revealAfter:[],enabled:!0,effects:[]},{id:"t2_transport_foundation",type:"REAL",domain:"simulation",timePolicy:"SCALABLE",title:" 2  ()",desc:"2   .   .",tier:2,durationSec:12*We,requires:[],revealAfter:[],enabled:!1,effects:[]}];function uh(t){return Ns.find(e=>e.id===t)||null}const vy="rcts.research.saveEnabled",Ey="rcts.research.autosave.enabled",Ty="rcts.research.autosave.base",hh="rcts.research.autosave.intervalMin",{kstDate:Iy,isKstTimeReady:wy}=jm(),Io=me(()=>wy.value&&Iy.value instanceof Date);function _l(){return Io.value?Iy.value.getTime():Date.now()}const Y0=new Set(["sys_unlock_vehicle","sys_unlock_route","sys_unlock_construction","sys_unlock_finance","sys_unlock_city"]);function xa(t){return!t||!Y0.has(t)?!1:uh(t)?.enabled===!1}const Xn=we(null),zt=we(new Set),qe=we(null),Ge=we([]),Ay=we({}),by=we(1),dh=we(0),io=we(1),tr=we(1),La=we("NONE"),Ma=we({vehicle:!1,route:!1,construction:!1,finance:!1,city:!1}),Wc=we(!1),Qc=we(!1),jn=we(!1),ar=we(null);let Ut=null,As=!1;const Qs=we(Sy(vy,!0)),oo=we(Sy(Ey,!1)),fh=we(Cy(Ty,5)),ao=we(Cy(hh,10)),ph=we(!1),Ry=we(0);let Hs=null;function Sy(t,e){const n=localStorage.getItem(t);return n===null?e:n==="1"}function Cy(t,e){const n=localStorage.getItem(t),s=n==null?NaN:Number(n);return Number.isFinite(s)?s:e}function Py(t,e){localStorage.setItem(t,e?"1":"0")}function Yc(t,e){localStorage.setItem(t,String(e))}function yl(t){const e=Math.max(1,Math.min(3,Number(t||1)));return e===1?1:e===2?3:5}function X0(t){Qs.value=!!t,Py(vy,Qs.value),Qs.value?wo():(Ut&&(clearTimeout(Ut),Ut=null),rn())}function J0(t){oo.value=!!t,Py(Ey,oo.value),wo()}function Z0(t){const e=Number(t)===10?10:5;fh.value=e,Yc(Ty,e);const n=Number(ao.value)||e,s=Math.max(e,Math.round(n/e)*e);ao.value=s,Yc(hh,s),wo(!0)}function eC(t){const e=Number(fh.value)===10?10:5,n=Number(t);if(!Number.isFinite(n)||n<=0)return;const s=Math.max(e,Math.round(n/e)*e);ao.value=s,Yc(hh,s),wo(!0)}function tC(t){const e=Number(t);if(!Number.isFinite(e)||e<=0)return 6e4;const n=e*60*1e3,s=540*60*1e3,r=Date.now()+s,o=(Math.floor(r/n)+1)*n-r;return Math.max(1e3,o)}function rn(){ph.value=!1,Hs&&(clearTimeout(Hs),Hs=null)}function ky(){if(Hs&&(clearTimeout(Hs),Hs=null),!oo.value||!Qs.value||!ar.value||!jn.value||As)return rn();ph.value=!0;const t=Number(ao.value)||10,e=tC(t);Hs=setTimeout(async()=>{try{await _h({reason:"autosave"}),Ry.value=Date.now()}catch(n){console.error("useResearch:  :",n)}finally{ky()}},e)}function wo(t=!1){t&&rn(),oo.value&&Qs.value&&ar.value&&jn.value&&!As?ky():rn()}function nC(){Ut&&(clearTimeout(Ut),Ut=null),rn(),ar.value=null,jn.value=!1,As=!1}function sC(t){return(Array.isArray(t?.requires)?t.requires:[]).every(n=>zt.value.has(n))}function Ny(t){const e=Array.isArray(t?.revealAfter)?t.revealAfter:[];return e.length===0?!0:e.every(n=>zt.value.has(n))}function mh(t){return zt.value.has(t)}function rC(t){return!t||Number(t.tier||1)!==1?!1:(t.effects||[]).some(e=>e?.type==="UNLOCK_TRANSPORT_TIER"&&Number(e?.tier||1)===1&&!!e?.transportId)}function Dy(t){return t?t.timePolicy==="FIXED"?!0:t.type==="SYSTEM":!1}function iC(t){return t?t.timePolicy==="SCALABLE"?!0:t.timePolicy==null?!Dy(t):!1:!1}function Fa(t){switch(String(t||"").toUpperCase()){case"REGION":return 1;case"CITY":return 2;case"COUNTRY":return 3;case"STATE":return 4;case"PLANET":return 5;default:return 0}}function Zr(){const t={};let e=1,n=0,s=1,r="NONE";const i={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1};for(const c of Ns)if(zt.value.has(c.id))for(const h of c.effects||[]){if(h.type==="UNLOCK_TRANSPORT_TIER"){const d=h.transportId,p=Number(h.tier||1);if(!d)continue;t[d]=Math.max(Number(t[d]||0),p)}if(h.type==="INCOME_MULTIPLIER"&&(e*=Number(h.value||1)),h.type==="RESEARCH_SPEED_LEVEL"){const d=Number(h.level||0);Number.isFinite(d)&&(n=Math.max(n,d))}if(h.type==="QUEUE_RESERVE_LEVEL"){const d=Number(h.level||1);Number.isFinite(d)&&(s=Math.max(s,d))}if(h.type==="UNLOCK_FEATURE"){const d=String(h.featureKey||"");d&&Object.prototype.hasOwnProperty.call(i,d)&&(i[d]=!0)}if(h.type==="SET_CITY_SCALE"){const d=String(h.scale||"").toUpperCase();Fa(d)>Fa(r)&&(r=d)}}Ay.value=t,by.value=e,dh.value=n;const o=1-.05*Math.max(0,n);io.value=Math.max(.2,o),La.value=r,Ma.value=i,tr.value=Math.max(1,Math.min(3,s));const l=yl(tr.value);Ge.value.length>l&&(Ge.value=Ge.value.slice(0,l))}const oC=me(()=>Ns.filter(t=>Number(t?.tier||1)>=2?!0:Ny(t))),aC=me(()=>{const t=new Set;for(const e of Ns)if(Number(e.tier||1)===1)for(const n of e.effects||[])n.type==="UNLOCK_TRANSPORT_TIER"&&Number(n.tier||1)===1&&n.transportId&&t.add(n.transportId);return Array.from(t)}),lC=me(()=>!Xn.value),cC=me(()=>aC.value.map(t=>({id:t})));function gh(t){const e=uh(t);if(!e)return"unknown";const n=Number(e.tier||1);return n===1&&!Ny(e)?"hidden":mh(t)?"done":qe.value?.id===t?"active":Ge.value.includes(t)?"queued":e.enabled===!1?"comingSoon":n===1&&rC(e)&&Xn.value||sC(e)?"available":"locked"}function Vy(t){return Ns.find(n=>n.enabled!==!1&&Number(n.tier||1)===1&&(n.effects||[]).some(s=>s.type==="UNLOCK_TRANSPORT_TIER"&&s.transportId===t&&Number(s.tier||1)===1))?.id??null}function Oy(){return!(!Qs.value||!ar.value||!jn.value||As)}function uC(){const t=yl(tr.value);return{version:10,firstUnlockTransportId:Xn.value??null,completedResearchIds:Array.from(zt.value),activeResearch:qe.value?{id:qe.value.id,startedAtMs:qe.value.startedAtMs,endsAtMs:qe.value.endsAtMs}:null,queuedResearchIds:Array.isArray(Ge.value)?Ge.value.slice(0,t):[]}}function hC(t){Xn.value=typeof t?.firstUnlockTransportId=="string"?t.firstUnlockTransportId:typeof t?.firstUnlockId=="string"?t.firstUnlockId:null;const e=Array.isArray(t?.completedResearchIds)?t.completedResearchIds:[];zt.value=new Set(e.filter(o=>typeof o=="string"));const n=t?.activeResearch;n&&typeof n=="object"&&typeof n.id=="string"?qe.value={id:n.id,startedAtMs:Number(n.startedAtMs||0),endsAtMs:Number(n.endsAtMs||0)}:qe.value=null;const s=Array.isArray(t?.queuedResearchIds)?t.queuedResearchIds.filter(o=>typeof o=="string"):[],r=typeof t?.queuedResearchId=="string"?t.queuedResearchId:null,i=[];for(const o of s)i.includes(o)||i.push(o);if(r&&!i.includes(r)&&i.push(r),Ge.value=i,zt.value.size===0&&Array.isArray(t?.transports)){for(const o of t.transports)if(!(!o||typeof o.id!="string")&&o.locked===!1){const l=Vy(o.id);l&&zt.value.add(l)}}Zr()}async function _h({reason:t="manual"}={}){if(Oy()){Ut&&(clearTimeout(Ut),Ut=null);try{Qc.value=!0;const e={...uC(),updatedAt:W0(),lastSaveReason:t},n=Da(Oa,"users",ar.value,"research","state");await K0(n,e,{merge:!0})}catch(e){console.error("useResearch: Firebase  :",e)}finally{Qc.value=!1}}}const Jn=()=>{Oy()&&(Ut&&clearTimeout(Ut),Ut=setTimeout(async()=>{await _h({reason:"debounced"})},800))};function dC(t){if(!t||Xn.value)return;const e=Vy(t);e&&(Xn.value=t,zt.value.add(e),Zr(),Jn())}function xy(t){if(xa(t))return{ok:!1,reason:"COMING_SOON"};const e=uh(t);if(!e)return{ok:!1,reason:"UNKNOWN_RESEARCH"};if(!Xn.value)return{ok:!1,reason:"FIRST_UNLOCK_REQUIRED"};if(!Io.value)return{ok:!1,reason:"KST_NOT_READY"};if(mh(t))return{ok:!1,reason:"ALREADY_DONE"};if(e.enabled===!1)return{ok:!1,reason:"COMING_SOON"};const n=gh(t);if(n!=="available")return{ok:!1,reason:n.toUpperCase()};const s=_l(),r=Number(e.durationSec||0);let i=0;return r>0&&(Dy(e)?i=Math.ceil(r):(iC(e),i=Math.ceil(r*io.value))),i<=0?(zt.value.add(t),Zr(),Jn(),{ok:!0,instant:!0}):(qe.value={id:t,startedAtMs:s,endsAtMs:s+i*1e3},Jn(),{ok:!0,instant:!1})}function fC(t){if(xa(t))return{ok:!1,reason:"COMING_SOON"};const e=yl(tr.value);if(mh(t))return{ok:!1,reason:"ALREADY_DONE"};if(qe.value?.id===t)return{ok:!1,reason:"ALREADY_ACTIVE"};if(Ge.value.includes(t))return{ok:!0,queued:!0,alreadyQueued:!0};if(qe.value){if(Ge.value.length>=e)return{ok:!1,reason:"QUEUE_FULL"};const n=gh(t);return n!=="available"?{ok:!1,reason:n.toUpperCase()}:(Ge.value=[...Ge.value,t].slice(0,e),Jn(),{ok:!0,queued:!0})}return xy(t)}function pC(t){const e=Ge.value.slice(),n=e.filter(s=>s!==t);n.length!==e.length&&(Ge.value=n,Jn())}function mC(){Ge.value.length!==0&&(Ge.value=[],Jn())}function gC(t){if(!qe.value||qe.value.id!==t||!Io.value)return 0;const e=qe.value.endsAtMs-qe.value.startedAtMs;if(e<=0)return 0;const n=_l()-qe.value.startedAtMs;return Math.max(0,Math.min(100,n/e*100))}function _C(t){if(!qe.value||qe.value.id!==t||!Io.value)return"00h 00m 00s";const e=Math.max(0,qe.value.endsAtMs-_l()),n=Math.floor(e/1e3),s=String(Math.floor(n/3600)).padStart(2,"0"),r=String(Math.floor(n%3600/60)).padStart(2,"0"),i=String(n%60).padStart(2,"0");return`${s}h ${r}m ${i}s`}async function yC(t){if(t){Ut&&(clearTimeout(Ut),Ut=null),rn(),ar.value=t,Wc.value=!0,jn.value=!1;try{const e=Da(Oa,"users",t,"research","state"),n=await gy(e);As=!0,n.exists()?(hC(n.data()),console.log("useResearch: Firebase   ")):(console.log("useResearch: Firebase   ( )"),Zr()),As=!1,jn.value=!0,wo(!0)}catch(e){As=!1,console.error("useResearch: Firebase  :",e),jn.value=!1,rn()}finally{Wc.value=!1}}}function vC(){nC(),Xn.value=null,zt.value=new Set,qe.value=null,Ge.value=[],La.value="NONE",Ma.value={vehicle:!1,route:!1,construction:!1,finance:!1,city:!1},dh.value=0,io.value=1,tr.value=1,Zr()}am(()=>{if(As)return;let t=!1;if(qe.value?.id&&xa(qe.value.id)&&(qe.value=null,t=!0),Array.isArray(Ge.value)&&Ge.value.length>0){const e=Ge.value.filter(n=>!xa(n));e.length!==Ge.value.length&&(Ge.value=e,t=!0)}t&&Jn()});am(()=>{if(!Io.value)return;const t=_l();if(qe.value&&t>=Number(qe.value.endsAtMs||0)){const e=qe.value.id;if(qe.value=null,zt.value.add(e),Zr(),Ge.value.length>0){const[n,...s]=Ge.value;Ge.value=s;const r=xy(n);r?.ok||console.warn("useResearch: queued next start failed:",n,r?.reason)}Jn()}});function ei(){const t=me(()=>!ar.value||jn.value),e=me(()=>yl(tr.value)),n=me(()=>Ge.value.length),s=me(()=>n.value>=e.value);return{catalog:Ns,visibleCatalog:oC,firstUnlockTransportId:Xn,needsFirstUnlockSelection:lC,firstUnlockCandidates:cC,setFirstUnlockTransport:dC,completedIds:zt,activeResearch:qe,queuedResearchIds:Ge,queueReserveLevel:tr,queueLimit:e,queueCount:n,isQueueFull:s,unlockedTransportTiers:Ay,incomeMultiplier:by,researchSpeedLevel:dh,researchDurationMultiplier:io,cityScale:La,unlockedFeatures:Ma,hasFeature:o=>!!Ma.value?.[o],cityScaleAtLeast:o=>Fa(La.value)>=Fa(o),getStatus:gh,startResearch:fC,cancelQueuedResearch:pC,cancelAllQueuedResearch:mC,getResearchProgress:gC,getResearchRemainingTime:_C,isKstTimeReady:wy,loadForUser:yC,clearUserState:vC,saveNow:_h,scheduleSave:Jn,saveEnabled:Qs,setSaveEnabled:X0,autoSaveEnabled:oo,autoSaveBase:fh,autoSaveIntervalMin:ao,setAutoSaveEnabled:J0,setAutoSaveBase:Z0,setAutoSaveIntervalMin:eC,autoSaveRunning:ph,lastAutoSaveAtMs:Ry,isLoadingFirebaseData:Wc,isSavingFirebaseData:Qc,isStateLoaded:jn,isHydrated:t}}const Ly=we(null),Ti=we(null),My=we(!1);let Sp=!1;if(!Sp){const t=ei();hb(zc,async e=>{Ly.value=e||null,My.value=!0;try{e?.uid?(console.log("   :  ",e.displayName||e.email),await t.loadForUser(e.uid)):(console.log("   :  "),t.clearUserState())}catch(n){console.error("useAuth: research sync failed:",n)}}),Sp=!0}function yh(){return{user:Ly,authError:Ti,authReady:My,signInWithGoogle:async()=>{const n=new Mn;try{const s=await Db(zc,n);return Ti.value=null,console.log("useAuth:  !",s.user.displayName||s.user.email),s.user}catch(s){throw Ti.value=s,console.error("useAuth:  :",s),s}},signOutUser:async()=>{try{return await db(zc),Ti.value=null,console.log("useAuth:  !"),!0}catch(n){throw Ti.value=n,console.error("useAuth:  :",n),n}}}}const Wt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},EC={class:"top-bar-area"},TC={class:"top-bar-content"},IC={class:"center-area"},wC={class:"time-value"},AC={class:"right-area"},bC={class:"auth-text"},RC={class:"auth-icon"},SC={__name:"TheTopBar",setup(t){const{kstString:e}=jm(),{user:n,signInWithGoogle:s,signOutUser:r}=yh();return(i,o)=>(U(),K("header",EC,[m("div",TC,[o[2]||(o[2]=m("div",{class:"left-area"},[m("h1",{class:"game-title"},"RCTS")],-1)),m("div",IC,[o[1]||(o[1]=m("span",{class:"time-label"},"KST",-1)),m("span",wC,oe(et(e)),1)]),m("div",AC,[m("button",{class:"auth-btn",onClick:o[0]||(o[0]=l=>et(n)?et(r)():et(s)())},[m("span",bC,oe(et(n)?"":""),1),m("span",RC,oe(et(n)?"":""),1)])])])]))}},CC=Wt(SC,[["__scopeId","data-v-0953860d"]]),PC=["bus","truck","rail","plane","ship","spaceship"],oa={bus:{name:"",icon:""},truck:{name:"",icon:""},rail:{name:"",icon:""},plane:{name:"",icon:""},ship:{name:"",icon:""},spaceship:{name:"",icon:""}};function Ho(t,e=1){const n=Number(e||1);return Ns.find(r=>(r.effects||[]).some(i=>i.type==="UNLOCK_TRANSPORT_TIER"&&i.transportId===t&&Number(i.tier||1)===n))?.id??null}function kC(){const t=Ns.find(s=>(s.effects||[]).some(r=>r?.type==="UNLOCK_STARTER_FLEET_PREVIEW"));if(!t)return{researchId:null,config:null};const e=(t.effects||[]).find(s=>s?.type==="UNLOCK_STARTER_FLEET_PREVIEW")||null,n=e?{transports:Array.isArray(e.transports)?e.transports.filter(Boolean):[],runTimeMinSec:Number(e.runTimeMinSec||0),runTimeMaxSec:Number(e.runTimeMaxSec||0),countPerTransport:Number(e.countPerTransport||1)}:null;return{researchId:t.id,config:n}}function NC(){const t=ei(),e=me(()=>kC()),n=me(()=>e.value.researchId),s=me(()=>e.value.config),r=me(()=>{const g=n.value;return g?!!t.completedIds.value?.has?.(g):!1}),i=me(()=>{const g=s.value;return g?new Set(g.transports||[]):new Set}),o=me(()=>{const g=i.value,y=r.value;return PC.map(k=>{const D=oa[k]||{},V=D.name??k,B=D.icon??"",Y=Number(t.unlockedTransportTiers.value?.[k]||0)<1,W=Ho(k,1),fe=!!W&&t.activeResearch.value?.id===W;let Ee=null,A=null;fe&&t.activeResearch.value&&(Ee=new Date(t.activeResearch.value.startedAtMs),A=new Date(t.activeResearch.value.endsAtMs));const v=g.has(k),I=!!y&&!Y&&v;return{id:k,name:V,icon:B,locked:Y,isResearching:fe,researchStartTime:Ee,researchFinishTime:A,unlockResearchId:W,previewEligible:v,previewActive:I,previewLabel:I?"  ":null}})}),l=me(()=>o.value.filter(g=>g.locked)),c=me(()=>o.value.filter(g=>!g.locked));function h(g){const y=Ho(g,1);y&&t.startResearch(y)}function d(g){const y=Ho(g,1);return y?t.getResearchProgress(y):0}function p(g){const y=Ho(g,1);return y?t.getResearchRemainingTime(y):"00h 00m 00s"}return{transportTypes:o,lockedTransports:l,unlockedTransports:c,unlockTransport:h,getResearchProgress:d,getResearchRemainingTime:p,previewResearchId:n,previewConfig:s,previewStarterFleetUnlocked:r}}const Cp=we(null);function DC(){return{selectedTransportId:Cp,setSelectedTransportId:e=>{Cp.value=e}}}const VC={class:"layout-area left-area"},OC={class:"left-panel-wrapper"},xC={class:"panel transport-list-container"},LC={class:"panel-head"},MC={class:"panel-meta"},FC={key:0,class:"transport-list"},UC=["onClick"],BC={class:"transport-icon"},$C={class:"transport-name"},jC={key:1,class:"placeholder-box"},qC={class:"panel transport-details-container"},HC={class:"panel-head"},KC={class:"panel-heading"},GC={key:0,class:"panel-meta"},zC={key:0,class:"placeholder-box"},WC={key:1,class:"details-content"},QC={class:"kv"},YC={class:"kv-row"},XC={class:"v"},JC={class:"kv-row"},ZC={class:"v"},eP={class:"kv-row"},tP={class:"v"},nP={key:0,class:"lock-box"},sP={key:1,class:"preview-box"},rP={class:"details-footnote"},iP={class:"panel resource-container"},oP={class:"panel-head"},aP={class:"panel-meta"},lP={key:0,class:"placeholder-box"},cP={key:1,class:"resource-content"},uP={__name:"TheLeftArea",setup(t){const{transportTypes:e,unlockedTransports:n,previewStarterFleetUnlocked:s}=NC(),r=ei(),i=me(()=>!!r.completedIds.value?.has?.("sys_unlock_finance")),{selectedTransportId:o,setSelectedTransportId:l}=DC(),c=me(()=>n.value||[]),h=me(()=>o.value&&(e.value||[]).find(d=>d.id===o.value)||null);return(d,p)=>(U(),K("aside",VC,[m("div",OC,[m("section",xC,[m("div",LC,[p[0]||(p[0]=m("h3",{class:"panel-heading"},"  ",-1)),m("span",MC,oe(c.value.length)+"",1)]),c.value.length>0?(U(),K("ul",FC,[(U(!0),K(Oe,null,lt(c.value,g=>(U(),K("li",{key:g.id,class:Cr(["transport-item",{active:et(o)===g.id}]),onClick:y=>et(l)(g.id)},[m("span",BC,oe(g.icon),1),m("span",$C,oe(g.name),1),p[1]||(p[1]=m("span",{class:"transport-count"},"0",-1))],10,UC))),128))])):(U(),K("div",jC,[...p[2]||(p[2]=[m("p",{class:"placeholder-text"},"     .   . ",-1)])]))]),m("section",qC,[m("div",HC,[m("h3",KC,oe(h.value?`${h.value.name} `:"  "),1),h.value?(U(),K("span",GC,"ID: "+oe(h.value.id),1)):st("",!0)]),h.value?(U(),K("div",WC,[m("div",QC,[m("div",YC,[p[4]||(p[4]=m("span",{class:"k"},"",-1)),m("span",XC,oe(h.value.icon),1)]),m("div",JC,[p[5]||(p[5]=m("span",{class:"k"},"",-1)),m("span",ZC,oe(h.value.name),1)]),p[7]||(p[7]=m("div",{class:"kv-row"},[m("span",{class:"k"}," "),m("span",{class:"v"},"0")],-1)),m("div",eP,[p[6]||(p[6]=m("span",{class:"k"}," ",-1)),m("span",tP,oe(h.value.locked?"":""),1)])]),p[10]||(p[10]=m("hr",{class:"divider"},null,-1)),et(s)?(U(),K("div",sP,[...p[9]||(p[9]=[m("p",{class:"box-title"},"   ",-1),m("p",{class:"box-desc"},[yt("    .   "),m("strong",null,"//"),yt(" . ")],-1),m("div",{class:"preview-placeholder"},[m("p",{class:"placeholder-text"},"    ()")],-1)])])):(U(),K("div",nP,[...p[8]||(p[8]=[m("p",{class:"box-title"},"   ",-1),m("p",{class:"box-desc"},[yt("  ()     "),m("strong",null,"  "),yt(" . ")],-1),m("p",{class:"box-desc subtle"},"     , //   . ",-1)])])),m("p",rP,"  "+oe(h.value.name)+"       . ",1)])):(U(),K("div",zC,[...p[3]||(p[3]=[m("p",{class:"placeholder-text"},"     .",-1)])]))]),m("section",iP,[m("div",oP,[p[11]||(p[11]=m("h3",{class:"panel-heading"},"  ",-1)),m("span",aP,oe(i.value?"":""),1)]),i.value?(U(),K("div",cP,[...p[13]||(p[13]=[m("div",{class:"kv"},[m("div",{class:"kv-row"},[m("span",{class:"k"},""),m("span",{class:"v"},"$10,000")])],-1)])])):(U(),K("div",lP,[...p[12]||(p[12]=[m("p",{class:"placeholder-text"}," .",-1)])]))])])]))}},hP=Wt(uP,[["__scopeId","data-v-3ef9452c"]]),dP={class:"layout-area center-area"},fP={class:"center-content-wrapper"},pP={class:"main-content-nav desktop-only","aria-label":"Main navigation"},mP={class:"nav-list"},gP={class:"nav-item"},_P={class:"nav-item"},yP={class:"nav-item"},vP={class:"nav-item"},EP={class:"nav-item"},TP={class:"nav-item"},IP={class:"nav-item"},wP={class:"mobile-nav mobile-only","aria-label":"Mobile navigation header"},AP=["aria-expanded"],bP={class:"mobile-title"},RP={class:"mobile-title-text"},SP={class:"drawer",role:"dialog","aria-modal":"true","aria-label":"Main menu"},CP={class:"drawer-body"},PP={class:"main-content-display"},kP={__name:"TheCenterArea",setup(t){const e=Kr(),n=BI(),s=we(!1);function r(){s.value=!1}function i(){s.value=!s.value}function o(h){r(),e.push(h)}const l=me(()=>{const h=n.path||"";return h.includes("/home/research")?"":h.includes("/home/vehicles")?"":h.includes("/home/line")?"":h.includes("/home/construction")?"":h.includes("/home/finance")?"":h.includes("/home/city")?"":h.includes("/home/settings")?"":""});Bn(()=>n.fullPath,()=>{r()});function c(h){h.key==="Escape"&&r()}return Bn(s,h=>{document.body.style.overflow=h?"hidden":""}),du(()=>{window.addEventListener("keydown",c)}),fm(()=>{window.removeEventListener("keydown",c),document.body.style.overflow=""}),(h,d)=>{const p=Hi("router-link"),g=Hi("router-view");return U(),K("div",dP,[m("div",fP,[m("nav",pP,[m("ul",mP,[m("li",gP,[Be(p,{to:"/home/research"},{default:nn(()=>[...d[7]||(d[7]=[yt("",-1)])]),_:1})]),m("li",_P,[Be(p,{to:"/home/vehicles"},{default:nn(()=>[...d[8]||(d[8]=[yt("",-1)])]),_:1})]),m("li",yP,[Be(p,{to:"/home/line"},{default:nn(()=>[...d[9]||(d[9]=[yt("",-1)])]),_:1})]),m("li",vP,[Be(p,{to:"/home/construction"},{default:nn(()=>[...d[10]||(d[10]=[yt("",-1)])]),_:1})]),m("li",EP,[Be(p,{to:"/home/finance"},{default:nn(()=>[...d[11]||(d[11]=[yt("",-1)])]),_:1})]),m("li",TP,[Be(p,{to:"/home/city"},{default:nn(()=>[...d[12]||(d[12]=[yt("",-1)])]),_:1})]),m("li",IP,[Be(p,{to:"/home/settings"},{default:nn(()=>[...d[13]||(d[13]=[yt("",-1)])]),_:1})])])]),m("div",wP,[m("button",{class:"hamburger-btn",type:"button","aria-label":"Open menu","aria-expanded":s.value?"true":"false",onClick:i},[...d[14]||(d[14]=[m("span",{class:"hamburger-icon"},"",-1),m("span",{class:"hamburger-label"},"",-1)])],8,AP),m("div",bP,[m("span",RP,oe(l.value),1)])]),s.value?(U(),K("div",{key:0,class:"drawer-overlay mobile-only",role:"presentation",onClick:Bm(r,["self"])},[m("aside",SP,[m("div",{class:"drawer-head"},[d[15]||(d[15]=m("div",{class:"drawer-title"},"RCTS ",-1)),m("button",{class:"drawer-close",type:"button","aria-label":"Close menu",onClick:r},"  ")]),m("div",CP,[m("button",{class:"drawer-item",type:"button",onClick:d[0]||(d[0]=y=>o("/home/research"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[1]||(d[1]=y=>o("/home/vehicles"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[2]||(d[2]=y=>o("/home/line"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[3]||(d[3]=y=>o("/home/construction"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[4]||(d[4]=y=>o("/home/finance"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[5]||(d[5]=y=>o("/home/city"))},""),m("button",{class:"drawer-item",type:"button",onClick:d[6]||(d[6]=y=>o("/home/settings"))},"")]),d[16]||(d[16]=m("div",{class:"drawer-foot"},[m("div",{class:"drawer-hint"},"     . ")],-1))])])):st("",!0),m("div",PP,[Be(g)])])])}}},NP=Wt(kP,[["__scopeId","data-v-c3d05764"]]),DP={class:"game-wrapper"},VP={class:"main-layout"},OP={__name:"HomeView",setup(t){return(e,n)=>(U(),K("div",DP,[Be(CC),m("div",VP,[Be(hP,{class:"layout-area left-area"}),Be(NP,{class:"layout-area center-area"})])]))}},xP=Wt(OP,[["__scopeId","data-v-eeb16b98"]]),LP={class:"research-page"},MP={class:"research-header"},FP={class:"status-row"},UP={key:0,class:"badge ok"},BP={class:"badge"},$P={class:"panel"},jP={class:"panel-head"},qP={class:"panel-actions"},HP=["disabled"],KP={key:0,class:"empty"},GP={key:1,class:"empty"},zP={key:2,class:"list"},WP={class:"card"},QP={class:"card-mid"},YP={class:"name-row"},XP={class:"name"},JP={class:"meta"},ZP={class:"pill time"},ek={key:0,class:"pill fixed"},tk={key:0,class:"hint2"},nk={class:"progress-area"},sk={class:"progress-bar"},rk={class:"progress-info"},ik={class:"mono"},ok={key:1,class:"queue-row"},ak={class:"queue-title"},lk={key:2,class:"queue-list"},ck={class:"mono"},uk=["onClick"],hk={class:"panel"},dk={key:0,class:"empty"},fk={key:1,class:"empty"},pk={key:2,class:"list"},mk={class:"card-left"},gk={class:"icon"},_k={class:"card-mid"},yk={class:"name-row"},vk={class:"name"},Ek={key:0,class:"hint2"},Tk={class:"card-right"},Ik=["disabled","onClick"],wk={class:"panel"},Ak={key:0,class:"empty"},bk={key:1,class:"empty"},Rk={key:2,class:"list"},Sk={class:"card-mid"},Ck={class:"name-row"},Pk={class:"name"},kk={class:"meta"},Nk={class:"pill time"},Dk={key:0,class:"pill"},Vk={key:1,class:"pill"},Ok={key:0,class:"hint2"},xk={class:"card-right"},Lk=["disabled","onClick"],Mk={class:"panel"},Fk={key:0,class:"empty"},Uk={key:1,class:"empty"},Bk={key:2,class:"list"},$k={class:"card-mid"},jk={class:"name-row"},qk={class:"name"},Hk={class:"meta"},Kk={class:"pill time"},Gk={key:0,class:"pill"},zk={key:1,class:"pill"},Wk={key:0,class:"hint2"},Qk={class:"card-right"},Yk=["disabled","onClick"],Xk={class:"panel"},Jk={key:0,class:"empty"},Zk={key:1,class:"empty"},eN={key:2,class:"list"},tN={class:"card-left"},nN={class:"icon"},sN={class:"card-mid"},rN={class:"name-row"},iN={class:"name"},oN={class:"meta"},aN={class:"pill time"},lN={key:0,class:"pill"},cN={key:1,class:"pill"},uN={key:0,class:"hint2"},hN={class:"card-right"},dN=["disabled","onClick"],fN={class:"panel"},pN={key:0,class:"empty"},mN={key:1,class:"empty"},gN={key:2,class:"list"},_N={class:"card-mid"},yN={class:"name-row"},vN={class:"name"},EN={class:"meta"},TN={class:"pill time"},IN={key:0,class:"pill"},wN={key:1,class:"pill"},AN={key:0,class:"hint2"},bN={class:"card-right"},RN=["disabled","onClick"],SN={class:"panel"},CN={key:0,class:"empty"},PN={key:1,class:"empty"},kN={key:2,class:"list"},NN={class:"card-mid"},DN={class:"name-row"},VN={class:"name"},ON={class:"meta"},xN={class:"pill lock"},LN={class:"pill time"},MN={key:0,class:"pill fixed"},FN={key:0,class:"hint2"},UN={key:1,class:"hint2"},BN={key:2,class:"hint2"},$N={__name:"ResearchView",setup(t){const e=ei(),n=me(()=>e.isHydrated.value),s=e.firstUnlockTransportId,r=e.needsFirstUnlockSelection,i=e.firstUnlockCandidates,o=me(()=>e.activeResearch.value),l=me(()=>e.queuedResearchIds.value||[]),c=me(()=>e.queueReserveLevel.value||1),h=me(()=>e.queueLimit.value||1),d=me(()=>e.queueCount.value||0),p=me(()=>e.isQueueFull.value),g=me(()=>!!e.saveEnabled.value&&!!e.isStateLoaded.value&&!e.isSavingFirebaseData.value);function y(H){return oa[H]?.name??H}function k(H){return e.catalog.find(X=>X.id===H)||null}function D(H){return k(H)?.title??H}function V(H){return H?H.timePolicy==="FIXED"?!0:H.type==="SYSTEM":!1}function B(H){return V(k(H))}function $(H){const X=Number(H?.durationSec||0);if(!X)return"";const Q=Math.round(X/3600);return V(H)?`: ${Q}`:`: ${Q}`}function Y(H){return $(k(H))}function W(H){return(H.effects||[]).find(Q=>Q?.type==="UNLOCK_TRANSPORT_TIER"&&Number(Q?.tier||1)===1)?.transportId||null}function fe(H,X){const Q=W(H);return!Q||!X.has(Q)?null:{key:`first-${Q}`,transportId:Q,icon:oa[Q]?.icon??"",title:`${oa[Q]?.name??Q}  `,desc:" 1  ."}}const Ee=me(()=>{const H=e.visibleCatalog.value||[];if(s.value)return[];const X=new Set((i.value||[]).map(Q=>Q.id));return H.map(Q=>fe(Q,X)).filter(Boolean)}),A=me(()=>(e.visibleCatalog.value||[]).filter(H=>e.getStatus(H.id)==="available"&&(H.type==="SYSTEM"||H.timePolicy==="FIXED")).map(H=>({id:H.id,title:H.title,desc:H.desc,durationLabel:$(H)}))),v=me(()=>(e.visibleCatalog.value||[]).filter(H=>e.getStatus(H.id)==="available"&&H.type==="CITY").map(H=>({id:H.id,title:H.title,desc:H.desc,durationLabel:$(H)}))),I=me(()=>(e.visibleCatalog.value||[]).filter(H=>e.getStatus(H.id)==="available"&&H.type==="TRANSPORT").map(H=>({id:H.id,title:H.title,desc:H.desc,durationLabel:$(H),icon:""}))),R=me(()=>(e.visibleCatalog.value||[]).filter(H=>e.getStatus(H.id)==="available"&&H.type==="EFFICIENCY").map(H=>({id:H.id,title:H.title,desc:H.desc,durationLabel:$(H)}))),b=me(()=>(e.visibleCatalog.value||[]).map(H=>{const X=e.getStatus(H.id);return X!=="locked"&&X!=="comingSoon"?null:{id:H.id,status:X,statusLabel:X==="comingSoon"?"":"",title:H.title??H.id,desc:H.desc??"",durationLabel:$(H),fixed:V(H),lockReason:"  ."}}).filter(Boolean));function S(H){return l.value.includes(H)}function T(H){return o.value?S(H)?"":p.value?" ":"":" "}function ie(H){e.setFirstUnlockTransport(H)}function te(H){e.startResearch(H)}function Ne(H){e.cancelQueuedResearch(H)}function Ve(){e.cancelAllQueuedResearch()}function Ae(H){return e.getResearchProgress(H)}function It(H){return e.getResearchRemainingTime(H)}function Qt(H){e.saveNow(H)}function Ot(){console.log("[ResearchView Debug]"),console.log("queueReserveLevel:",c.value),console.log("queueLimit:",h.value),console.log("queuedResearchIds:",l.value)}return(H,X)=>(U(),K("div",LP,[m("header",MP,[X[1]||(X[1]=m("h1",{class:"title"},"",-1)),X[2]||(X[2]=m("p",{class:"desc"},"    1 .        . ",-1)),m("div",FP,[m("span",{class:Cr(["badge",{ok:n.value}])},oe(n.value?"  ":"  "),3),m("span",{class:Cr(["badge",{warn:et(r)}])},oe(et(r)?"  ()":"  "),3),et(s)?(U(),K("span",UP,"  : "+oe(y(et(s))),1)):st("",!0),m("span",BP," : "+oe(d.value)+"/"+oe(h.value)+" (Lv"+oe(c.value)+") ",1)])]),m("section",$P,[m("div",jP,[X[3]||(X[3]=m("h2",{class:"panel-title"}," ",-1)),m("div",qP,[m("button",{class:"btn",disabled:!g.value,onClick:X[0]||(X[0]=Q=>Qt({reason:"manual"}))},"   ",8,HP),m("button",{class:"btn ghost",onClick:Ot},"   ")])]),n.value?o.value?(U(),K("div",zP,[m("article",WP,[X[6]||(X[6]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",QP,[m("div",YP,[m("div",XP,oe(D(o.value.id)),1),m("div",JP,[X[4]||(X[4]=m("span",{class:"pill"},"",-1)),m("span",ZP,oe(Y(o.value.id)),1),B(o.value.id)?(U(),K("span",ek,"")):st("",!0)])]),B(o.value.id)?(U(),K("div",tk,"    ,     . ")):st("",!0),m("div",nk,[m("div",sk,[m("div",{class:"progress-fill",style:Ha({width:Ae(o.value.id)+"%"})},null,4)]),m("div",rk,[m("span",null,oe(Ae(o.value.id).toFixed(1))+"%",1),m("span",ik,": "+oe(It(o.value.id)),1)])]),l.value.length>0?(U(),K("div",ok,[X[5]||(X[5]=m("span",{class:"pill"},"",-1)),m("span",ak,oe(l.value.length)+" ",1),m("button",{class:"btn small ghost",onClick:Ve}," ")])):st("",!0),l.value.length>0?(U(),K("div",lk,[(U(!0),K(Oe,null,lt(l.value,Q=>(U(),K("div",{key:Q,class:"queue-item"},[m("span",ck,oe(D(Q)),1),m("button",{class:"btn small ghost",onClick:ht=>Ne(Q)},"",8,uk)]))),128))])):st("",!0)]),X[7]||(X[7]=m("div",{class:"card-right"},[m("button",{class:"btn primary",disabled:""},"")],-1))])])):(U(),K("div",GP,"    .     . ")):(U(),K("div",KP," "))]),m("section",hk,[X[9]||(X[9]=m("h2",{class:"panel-title"}," ()",-1)),X[10]||(X[10]=m("p",{class:"panel-desc"},"  1   .       . ",-1)),n.value?et(r)?(U(),K("div",pk,[(U(!0),K(Oe,null,lt(Ee.value,Q=>(U(),K("article",{key:Q.key,class:"card"},[m("div",mk,[m("div",gk,oe(Q.icon),1)]),m("div",_k,[m("div",yk,[m("div",vk,oe(Q.title),1),X[8]||(X[8]=m("div",{class:"meta"},[m("span",{class:"pill time"},"")],-1))]),Q.desc?(U(),K("div",Ek,oe(Q.desc),1)):st("",!0)]),m("div",Tk,[m("button",{class:"btn primary",disabled:!!o.value||!n.value,onClick:ht=>ie(Q.transportId)},"   ",8,Ik)])]))),128))])):(U(),K("div",fk,"   . ")):(U(),K("div",dk," "))]),m("section",wk,[X[14]||(X[14]=m("h2",{class:"panel-title"},"  ( 8)",-1)),X[15]||(X[15]=m("p",{class:"panel-desc"},"   (////) .         . ",-1)),n.value?A.value.length===0?(U(),K("div",bk,"     .")):(U(),K("div",Rk,[(U(!0),K(Oe,null,lt(A.value,Q=>(U(),K("article",{key:Q.id,class:"card"},[X[13]||(X[13]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",Sk,[m("div",Ck,[m("div",Pk,oe(Q.title),1),m("div",kk,[m("span",Nk,oe(Q.durationLabel),1),X[11]||(X[11]=m("span",{class:"pill fixed"},"",-1)),o.value?(U(),K("span",Dk,"")):(U(),K("span",Vk,""))])]),Q.desc?(U(),K("div",Ok,oe(Q.desc),1)):st("",!0),X[12]||(X[12]=m("div",{class:"hint2"},"        .",-1))]),m("div",xk,[m("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!S(Q.id),onClick:ht=>te(Q.id)},oe(T(Q.id)),9,Lk)])]))),128))])):(U(),K("div",Ak," "))]),m("section",Mk,[X[17]||(X[17]=m("h2",{class:"panel-title"}," /",-1)),X[18]||(X[18]=m("p",{class:"panel-desc"},"           . (//)   . ",-1)),n.value?v.value.length===0?(U(),K("div",Uk,"     .")):(U(),K("div",Bk,[(U(!0),K(Oe,null,lt(v.value,Q=>(U(),K("article",{key:Q.id,class:"card"},[X[16]||(X[16]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",$k,[m("div",jk,[m("div",qk,oe(Q.title),1),m("div",Hk,[m("span",Kk,oe(Q.durationLabel),1),o.value?(U(),K("span",Gk,"")):(U(),K("span",zk,""))])]),Q.desc?(U(),K("div",Wk,oe(Q.desc),1)):st("",!0)]),m("div",Qk,[m("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!S(Q.id),onClick:ht=>te(Q.id)},oe(T(Q.id)),9,Yk)])]))),128))])):(U(),K("div",Fk," "))]),m("section",Xk,[X[19]||(X[19]=m("h2",{class:"panel-title"}," ",-1)),X[20]||(X[20]=m("p",{class:"panel-desc"},"  1   ,     . ",-1)),n.value?I.value.length===0?(U(),K("div",Zk,"    .")):(U(),K("div",eN,[(U(!0),K(Oe,null,lt(I.value,Q=>(U(),K("article",{key:Q.id,class:"card"},[m("div",tN,[m("div",nN,oe(Q.icon),1)]),m("div",sN,[m("div",rN,[m("div",iN,oe(Q.title),1),m("div",oN,[m("span",aN,oe(Q.durationLabel),1),o.value?(U(),K("span",lN,"")):(U(),K("span",cN,""))])]),Q.desc?(U(),K("div",uN,oe(Q.desc),1)):st("",!0)]),m("div",hN,[m("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!S(Q.id),onClick:ht=>te(Q.id)},oe(T(Q.id)),9,dN)])]))),128))])):(U(),K("div",Jk," "))]),m("section",fN,[X[22]||(X[22]=m("h2",{class:"panel-title"}," ",-1)),X[23]||(X[23]=m("p",{class:"panel-desc"},"     .  ( 8)  . ",-1)),n.value?R.value.length===0?(U(),K("div",mN,"    .")):(U(),K("div",gN,[(U(!0),K(Oe,null,lt(R.value,Q=>(U(),K("article",{key:Q.id,class:"card"},[X[21]||(X[21]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",_N,[m("div",yN,[m("div",vN,oe(Q.title),1),m("div",EN,[m("span",TN,oe(Q.durationLabel),1),o.value?(U(),K("span",IN,"")):(U(),K("span",wN,""))])]),Q.desc?(U(),K("div",AN,oe(Q.desc),1)):st("",!0)]),m("div",bN,[m("button",{class:"btn primary",disabled:!n.value||o.value&&p.value&&!S(Q.id),onClick:ht=>te(Q.id)},oe(T(Q.id)),9,RN)])]))),128))])):(U(),K("div",pN," "))]),m("section",SN,[X[26]||(X[26]=m("h2",{class:"panel-title"},"  ",-1)),X[27]||(X[27]=m("p",{class:"panel-desc"}," 2(2)  ,       . ",-1)),n.value?b.value.length===0?(U(),K("div",PN,"/  .")):(U(),K("div",kN,[(U(!0),K(Oe,null,lt(b.value,Q=>(U(),K("article",{key:Q.id,class:"card"},[X[24]||(X[24]=m("div",{class:"card-left"},[m("div",{class:"icon"},"")],-1)),m("div",NN,[m("div",DN,[m("div",VN,oe(Q.title),1),m("div",ON,[m("span",xN,oe(Q.statusLabel),1),m("span",LN,oe(Q.durationLabel),1),Q.fixed?(U(),K("span",MN,"")):st("",!0)])]),Q.desc?(U(),K("div",FN,oe(Q.desc),1)):st("",!0),Q.status==="comingSoon"?(U(),K("div",UN,".")):Q.status==="locked"?(U(),K("div",BN,oe(Q.lockReason||"  ."),1)):st("",!0)]),X[25]||(X[25]=m("div",{class:"card-right"},[m("button",{class:"btn primary",disabled:""},"")],-1))]))),128))])):(U(),K("div",CN," "))])]))}},jN=Wt($N,[["__scopeId","data-v-bef8324e"]]),qN={class:"page"},HN={class:"panel"},KN={class:"list"},GN={class:"panel"},zN={class:"grid"},WN={class:"table"},QN={__name:"VehiclesView",setup(t){const e=Kr();function n(){e.push("/home/research")}return(s,r)=>(U(),K("div",qN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"     .      .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",HN,[r[5]||(r[5]=un('<div class="panel-head" data-v-e2a4d6c8><h2 class="panel-title" data-v-e2a4d6c8> </h2><div class="panel-actions" data-v-e2a4d6c8><button class="btn" disabled data-v-e2a4d6c8> </button><button class="btn" disabled data-v-e2a4d6c8></button><button class="btn ghost" disabled data-v-e2a4d6c8></button></div></div><div class="empty" data-v-e2a4d6c8>   . <span class="mono" data-v-e2a4d6c8> ( 8)</span>     . </div>',2)),m("div",KN,[(U(),K(Oe,null,lt(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-e2a4d6c8><div class="icon" data-v-e2a4d6c8></div></div><div class="card-mid" data-v-e2a4d6c8><div class="name-row" data-v-e2a4d6c8><div class="name" data-v-e2a4d6c8>  </div><div class="meta" data-v-e2a4d6c8><span class="pill lock" data-v-e2a4d6c8></span><span class="pill time" data-v-e2a4d6c8></span></div></div><div class="hint2" data-v-e2a4d6c8>  :  ////  UI . </div></div><div class="card-right" data-v-e2a4d6c8><button class="btn primary" disabled data-v-e2a4d6c8></button></div>',3)])])),64))])]),m("section",GN,[r[9]||(r[9]=m("h2",{class:"panel-title"},"",-1)),r[10]||(r[10]=m("p",{class:"panel-desc"},"      .",-1)),m("div",zN,[(U(),K(Oe,null,lt(4,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))]),m("div",WN,[r[8]||(r[8]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(U(),K(Oe,null,lt(6,i=>m("div",{class:"table-row",key:i},[...r[7]||(r[7]=[un('<span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span><span class="muted" data-v-e2a4d6c8></span>',5)])])),64))])])]))}},YN=Wt(QN,[["__scopeId","data-v-e2a4d6c8"]]),XN={class:"page"},JN={class:"panel"},ZN={class:"list"},eD={class:"panel"},tD={class:"table"},nD={__name:"LineView",setup(t){const e=Kr();function n(){e.push("/home/research")}return(s,r)=>(U(),K("div",XN,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"//     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",JN,[r[5]||(r[5]=un('<div class="panel-head" data-v-58d6af1b><h2 class="panel-title" data-v-58d6af1b> </h2><div class="panel-actions" data-v-58d6af1b><button class="btn" disabled data-v-58d6af1b> </button><button class="btn" disabled data-v-58d6af1b> </button><button class="btn ghost" disabled data-v-58d6af1b> </button></div></div><div class="empty" data-v-58d6af1b>   .       . </div>',2)),m("div",ZN,[(U(),K(Oe,null,lt(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-58d6af1b><div class="icon" data-v-58d6af1b></div></div><div class="card-mid" data-v-58d6af1b><div class="name-row" data-v-58d6af1b><div class="name" data-v-58d6af1b>  </div><div class="meta" data-v-58d6af1b><span class="pill lock" data-v-58d6af1b></span><span class="pill time" data-v-58d6af1b></span></div></div><div class="hint2" data-v-58d6af1b>  : ,  , , /  . </div></div><div class="card-right" data-v-58d6af1b><button class="btn primary" disabled data-v-58d6af1b></button></div>',3)])])),64))])]),m("section",eD,[r[8]||(r[8]=m("h2",{class:"panel-title"},"",-1)),r[9]||(r[9]=m("p",{class:"panel-desc"},"    / .",-1)),m("div",tD,[r[7]||(r[7]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(U(),K(Oe,null,lt(8,i=>m("div",{class:"table-row",key:i},[...r[6]||(r[6]=[un('<span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span><span class="muted" data-v-58d6af1b></span>',5)])])),64))])])]))}},sD=Wt(nD,[["__scopeId","data-v-58d6af1b"]]),rD={class:"page"},iD={class:"panel"},oD={class:"list"},aD={class:"panel"},lD={class:"grid"},cD={__name:"ConstructionView",setup(t){const e=Kr();function n(){e.push("/home/research")}return(s,r)=>(U(),K("div",rD,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"}," /     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",iD,[r[5]||(r[5]=un('<div class="panel-head" data-v-f1dc01af><h2 class="panel-title" data-v-f1dc01af> </h2><div class="panel-actions" data-v-f1dc01af><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button><button class="btn" disabled data-v-f1dc01af></button></div></div><div class="empty" data-v-f1dc01af>   .       . </div>',2)),m("div",oD,[(U(),K(Oe,null,lt(10,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-f1dc01af><div class="icon" data-v-f1dc01af></div></div><div class="card-mid" data-v-f1dc01af><div class="name-row" data-v-f1dc01af><div class="name" data-v-f1dc01af>  </div><div class="meta" data-v-f1dc01af><span class="pill lock" data-v-f1dc01af></span><span class="pill time" data-v-f1dc01af></span></div></div><div class="hint2" data-v-f1dc01af>  : //,  ,    UI . </div></div><div class="card-right" data-v-f1dc01af><button class="btn primary" disabled data-v-f1dc01af></button></div>',3)])])),64))])]),m("section",aD,[r[7]||(r[7]=m("h2",{class:"panel-title"},"",-1)),r[8]||(r[8]=m("p",{class:"panel-desc"},"     /   /   .",-1)),m("div",lD,[(U(),K(Oe,null,lt(3,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))])])]))}},uD=Wt(cD,[["__scopeId","data-v-f1dc01af"]]),hD={class:"page"},dD={class:"panel"},fD={class:"grid"},pD={class:"table"},mD={__name:"FinanceView",setup(t){const e=Kr();function n(){e.push("/home/research")}return(s,r)=>(U(),K("div",hD,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"},"//    .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",dD,[r[7]||(r[7]=un('<div class="panel-head" data-v-d1892e60><h2 class="panel-title" data-v-d1892e60> </h2><div class="panel-actions" data-v-d1892e60><button class="btn" disabled data-v-d1892e60></button><button class="btn" disabled data-v-d1892e60></button><button class="btn" disabled data-v-d1892e60></button><button class="btn ghost" disabled data-v-d1892e60></button></div></div><div class="empty" data-v-d1892e60>   .       . </div>',2)),m("div",fD,[(U(),K(Oe,null,lt(4,i=>m("div",{class:"mini-card",key:i},[...r[4]||(r[4]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))]),m("div",pD,[r[6]||(r[6]=m("div",{class:"table-head"},[m("span",null,""),m("span",null,""),m("span",null,""),m("span",null,"")],-1)),(U(),K(Oe,null,lt(8,i=>m("div",{class:"table-row",key:i},[...r[5]||(r[5]=[m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1),m("span",{class:"muted"},"",-1)])])),64))])])]))}},gD=Wt(mD,[["__scopeId","data-v-d1892e60"]]),_D={class:"page"},yD={class:"panel"},vD={class:"list"},ED={class:"panel"},TD={class:"grid"},ID={__name:"CityView",setup(t){const e=Kr();function n(){e.push("/home/research")}return(s,r)=>(U(),K("div",_D,[m("header",{class:"page-header"},[r[2]||(r[2]=m("h1",{class:"title"},"",-1)),r[3]||(r[3]=m("p",{class:"desc"}," //     .    .",-1)),m("div",{class:"status-row"},[r[0]||(r[0]=m("span",{class:"badge lock"},"LOCKED",-1)),r[1]||(r[1]=m("span",{class:"badge"}," ",-1)),m("button",{class:"btn primary",onClick:n}," ")])]),m("section",yD,[r[5]||(r[5]=un('<div class="panel-head" data-v-370df6f4><h2 class="panel-title" data-v-370df6f4> </h2><div class="panel-actions" data-v-370df6f4><button class="btn" disabled data-v-370df6f4></button><button class="btn" disabled data-v-370df6f4></button><button class="btn" disabled data-v-370df6f4></button><button class="btn ghost" disabled data-v-370df6f4></button></div></div><div class="empty" data-v-370df6f4>   .  /     . </div>',2)),m("div",vD,[(U(),K(Oe,null,lt(8,i=>m("article",{class:"card",key:i},[...r[4]||(r[4]=[un('<div class="card-left" data-v-370df6f4><div class="icon" data-v-370df6f4></div></div><div class="card-mid" data-v-370df6f4><div class="name-row" data-v-370df6f4><div class="name" data-v-370df6f4>  </div><div class="meta" data-v-370df6f4><span class="pill lock" data-v-370df6f4></span><span class="pill time" data-v-370df6f4></span></div></div><div class="hint2" data-v-370df6f4>  : /// ,  , ,   . </div></div><div class="card-right" data-v-370df6f4><button class="btn primary" disabled data-v-370df6f4></button></div>',3)])])),64))])]),m("section",ED,[r[7]||(r[7]=m("h2",{class:"panel-title"},"",-1)),r[8]||(r[8]=m("p",{class:"panel-desc"},"     /  /  .",-1)),m("div",TD,[(U(),K(Oe,null,lt(3,i=>m("div",{class:"mini-card",key:i},[...r[6]||(r[6]=[m("div",{class:"mini-title"},"",-1),m("div",{class:"mini-value muted"},"",-1),m("div",{class:"mini-sub muted"},"",-1)])])),64))])])]))}},wD=Wt(ID,[["__scopeId","data-v-370df6f4"]]),AD={},bD={class:"settings-shell"},RD={class:"settings-nav"},SD={class:"settings-content"};function CD(t,e){return U(),K("div",bD,[m("aside",RD,[pd(t.$slots,"nav",{},void 0)]),m("section",SD,[pd(t.$slots,"content",{},void 0)])])}const PD=Wt(AD,[["render",CD],["__scopeId","data-v-e20a5156"]]),kD={},ND={class:"settings-nav-inner"},DD={class:"menu"};function VD(t,e){const n=Hi("router-link");return U(),K("nav",ND,[e[1]||(e[1]=m("h3",{class:"title"},"",-1)),m("ul",DD,[m("li",null,[Be(n,{to:{name:"DataManager"}},{default:nn(()=>[...e[0]||(e[0]=[yt("   ",-1)])]),_:1})])])])}const OD=Wt(kD,[["render",VD],["__scopeId","data-v-0036c63e"]]),xD={__name:"SettingsView",setup(t){return(e,n)=>{const s=Hi("router-view");return U(),Nr(PD,null,{nav:nn(()=>[Be(OD)]),content:nn(()=>[Be(s)]),_:1})}}},LD={class:"data-manager"},MD={class:"card"},FD={class:"kv"},UD={class:"v"},BD={key:0,class:"hint"},$D={class:"card"},jD={class:"row"},qD=["disabled"],HD=["disabled"],KD=["disabled"],GD={class:"autosave"},zD={class:"autosave-controls"},WD={class:"radio"},QD=["disabled"],YD={class:"radio"},XD=["disabled"],JD={class:"radio"},ZD=["disabled"],eV={key:0,class:"hint"},tV={key:0,class:"message"},nV={key:1,class:"preview"},sV={class:"preview-head"},rV={class:"summary"},iV={class:"summary-item"},oV={class:"summary-v"},aV={class:"summary-item"},lV={class:"summary-v"},cV={class:"summary-item"},uV={class:"summary-v"},hV={key:0,class:"pre"},dV={key:2,class:"hint"},fV={class:"modal"},pV={class:"check"},mV={class:"row"},gV=["disabled"],_V=["disabled"],yV={__name:"DataManagerPanel",setup(t){const e=yh(),n=me(()=>(e?.user?.value??e?.currentUser?.value??e?.firebaseUser?.value??e?.user??e?.currentUser??null)?.uid??null),{saveNow:s,isSavingFirebaseData:r,autoSaveEnabled:i,autoSaveBase:o,autoSaveIntervalMin:l,setAutoSaveEnabled:c,setAutoSaveBase:h,setAutoSaveIntervalMin:d,autoSaveRunning:p}=ei(),g=me(()=>r.value),y=we(!1),k=we(""),D=we(!1),V=we(null),B=we(!1);function $(ie){return JSON.stringify(ie,null,2)}function Y(ie){if(!ie)return"-";try{return typeof ie?.toDate=="function"?ie.toDate().toLocaleString():ie instanceof Date?ie.toLocaleString():typeof ie=="number"?new Date(ie).toLocaleString():String(ie)}catch{return String(ie)}}const W=we("off");function fe(){if(!i.value){W.value="off";return}const ie=Number(o.value),te=Number(l.value);ie===10&&te===10?W.value="10":ie===5&&te===5?W.value="5":ie===10?W.value="10":W.value="5"}Bn([i,o,l],()=>fe(),{immediate:!0}),Bn(W,ie=>{if(n.value){if(ie==="off"){c(!1);return}if(ie==="5"){h(5),d(5),c(!0);return}ie==="10"&&(h(10),d(10),c(!0))}});async function Ee(){if(n.value){k.value="";try{await s({reason:"manual-ui"}),k.value=" ."}catch(ie){console.error("DataManager: save failed",ie),k.value=` : ${String(ie?.message??ie)}`}}}async function A(){if(n.value){y.value=!0,k.value="",D.value=!1,V.value=null,B.value=!1;try{const ie=Da(Oa,"users",n.value,"research","state"),te=await gy(ie);te.exists()?(V.value=te.data(),D.value=!0,k.value="  ."):k.value="  . ( )"}catch(ie){console.error("DataManager: load failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{y.value=!1}}}const v=we(!1),I=we(!1),R=we("");function b(){v.value=!0,I.value=!1,R.value=""}function S(){v.value=!1}async function T(){if(n.value){y.value=!0,k.value="";try{const ie=Da(Oa,"users",n.value,"research","state");await G0(ie),D.value=!1,V.value=null,B.value=!1,k.value=" .   .",S()}catch(ie){console.error("DataManager: delete failed",ie),k.value=` : ${String(ie?.message??ie)}`}finally{y.value=!1}}}return(ie,te)=>(U(),K("div",LD,[te[22]||(te[22]=m("header",{class:"header"},[m("div",null,[m("h1",{class:"title"}," "),m("p",{class:"desc"},"   ,        . ")])],-1)),m("section",MD,[te[7]||(te[7]=m("h2",{class:"card-title"}," ",-1)),m("div",FD,[te[6]||(te[6]=m("div",{class:"k"}," ",-1)),m("div",UD,oe(n.value?"":"()"),1)]),n.value?st("",!0):(U(),K("p",BD," Firestore  /   . "))]),m("section",$D,[te[16]||(te[16]=m("h2",{class:"card-title"}," ",-1)),m("div",jD,[m("button",{class:"btn",onClick:Ee,disabled:!n.value||y.value||g.value},"  ",8,qD),m("button",{class:"btn",onClick:A,disabled:!n.value||y.value},"   ",8,HD),m("button",{class:"btn danger",onClick:b,disabled:!n.value||y.value},"   ",8,KD)]),m("div",GD,[te[11]||(te[11]=m("div",{class:"autosave-title"},"",-1)),m("div",zD,[m("label",WD,[_i(m("input",{type:"radio",name:"autosave",value:"off","onUpdate:modelValue":te[0]||(te[0]=Ne=>W.value=Ne),disabled:!n.value||y.value},null,8,QD),[[jl,W.value]]),te[8]||(te[8]=m("span",null,"",-1))]),m("label",YD,[_i(m("input",{type:"radio",name:"autosave",value:"5","onUpdate:modelValue":te[1]||(te[1]=Ne=>W.value=Ne),disabled:!n.value||y.value},null,8,XD),[[jl,W.value]]),te[9]||(te[9]=m("span",null,"5",-1))]),m("label",JD,[_i(m("input",{type:"radio",name:"autosave",value:"10","onUpdate:modelValue":te[2]||(te[2]=Ne=>W.value=Ne),disabled:!n.value||y.value},null,8,ZD),[[jl,W.value]]),te[10]||(te[10]=m("span",null,"10",-1))])]),n.value&&et(i)&&et(p)?(U(),K("p",eV,"    (KST   ) ")):st("",!0)]),k.value?(U(),K("p",tV,oe(k.value),1)):st("",!0),D.value?(U(),K("div",nV,[m("div",sV,[te[12]||(te[12]=m("h3",{class:"preview-title"},"    ",-1)),m("button",{class:"btn small",onClick:te[3]||(te[3]=Ne=>B.value=!B.value)},oe(B.value?"":""),1)]),m("div",rV,[m("div",iV,[te[13]||(te[13]=m("div",{class:"summary-k"},"",-1)),m("div",oV,oe(V.value?.version??"-"),1)]),m("div",aV,[te[14]||(te[14]=m("div",{class:"summary-k"},"  ",-1)),m("div",lV,oe(V.value?.transports?.length??0),1)]),m("div",cV,[te[15]||(te[15]=m("div",{class:"summary-k"},"",-1)),m("div",uV,oe(Y(V.value?.updatedAt)),1)])]),B.value?(U(),K("pre",hV,oe($(V.value)),1)):st("",!0)])):(U(),K("p",dV,"   ."))]),v.value?(U(),K("div",{key:0,class:"modal-backdrop",onClick:Bm(S,["self"])},[m("div",fV,[te[18]||(te[18]=m("h2",{class:"modal-title"}," ?",-1)),te[19]||(te[19]=m("p",{class:"modal-desc danger-text"},"     .  ? ",-1)),te[20]||(te[20]=m("p",{class:"modal-desc"},[yt("   ,  "),m("b",null," "),yt(". ")],-1)),m("label",pV,[_i(m("input",{type:"checkbox","onUpdate:modelValue":te[4]||(te[4]=Ne=>I.value=Ne)},null,512),[[IT,I.value]]),te[17]||(te[17]=m("span",null,"      .",-1))]),te[21]||(te[21]=m("p",{class:"modal-desc"},[yt("   "),m("b",null,"DELETE"),yt(" . ")],-1)),_i(m("input",{class:"input","onUpdate:modelValue":te[5]||(te[5]=Ne=>R.value=Ne),placeholder:"DELETE"},null,512),[[TT,R.value]]),m("div",mV,[m("button",{class:"btn",onClick:S,disabled:y.value},"",8,gV),m("button",{class:"btn danger",onClick:T,disabled:y.value||!I.value||R.value!=="DELETE"},"   ",8,_V)])])])):st("",!0)]))}},vV=Wt(yV,[["__scopeId","data-v-a8ca5a4d"]]),EV={__name:"DataManagerView",setup(t){return(e,n)=>(U(),Nr(vV))}},TV=[{path:"/",redirect:"/home/research"},{path:"/home",component:xP,children:[{path:"",redirect:"/home/research"},{path:"research",name:"Research",component:jN},{path:"vehicles",name:"Vehicles",component:YN},{path:"line",name:"Line",component:sD},{path:"construction",name:"Construction",component:uD},{path:"finance",name:"Finance",component:gD},{path:"city",name:"City",component:wD},{path:"settings",component:xD,children:[{path:"",redirect:{name:"DataManager"}},{path:"data",name:"DataManager",component:EV}]}]}],IV=UI({history:_I(),routes:TV,scrollBehavior(){return{top:0}}}),{user:wV,authReady:AV}=yh(),{loadForUser:bV,clearUserState:RV}=ei();let ic=null;Bn([AV,wV],async([t,e])=>{if(!t)return;if(!e){ic=null,RV();return}const n=e.uid;n&&n!==ic&&(ic=n,await bV(n))},{immediate:!0});const Fy=ST(VT);Fy.use(IV);Fy.mount("#app");
